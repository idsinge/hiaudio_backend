{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,W,W,O,C,G,E,E,O,C,kB,W,O,C,GCEA,IAAM,EAAe,CACjB,KAAK,CACD,SAAS,qBACT,gBAAgB,+BACpB,EACA,MAAM,CACF,SAAU,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC5D,gBAAiB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,aACxE,EACA,IAAI,CACA,SAAS,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC3D,gBAAgB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAG,aACzE,CACJ,EAEa,EAAW,EAjBX,GAiB6B,CAAC,QAAQ,CACtC,EAAkB,EAlBlB,GAkBoC,CAAC,eAAe,A,G,E,Q,S,C,C,C,E,E,E,O,C,c,W,O,C,G,E,E,O,C,oB,W,O,C,G,E,E,O,C,W,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,sB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,mB,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,gB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,oB,W,O,C,G,I,E,E,SChB1D,IAAM,EAAc,sBACd,EAAoB,4BAEpB,EAAW,OAAO,MAAM,CAAC,CAClC,KAAO,EACP,MAAQ,EACR,MAAQ,EACR,OAAS,EACT,MAAQ,CACZ,GAEa,EAAe,OAAO,MAAM,CAAC,CACtC,OAAS,EACT,QAAU,EACV,QAAU,CACd,GAEa,EAAsB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,eAAgB,CAAC,EAAa,OAAO,CAAC,CAAG,gBAAiB,CAAC,EAAa,OAAO,CAAC,CAAG,eAAe,EACjJ,EAAqB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,SAAU,CAAC,EAAa,OAAO,CAAC,CAAG,YAAa,CAAC,EAAa,OAAO,CAAC,CAAG,SAAS,EAChI,EAAmB,CAAC,CAAC,EAAS,KAAK,CAAC,CAAG,cAAe,CAAC,EAAS,KAAK,CAAC,CAAG,cAAe,CAAC,EAAS,MAAM,CAAC,CAAG,eAAgB,CAAC,EAAS,KAAK,CAAC,CAAG,aAAa,EAE5J,EAAc,AAAC,IACxB,IAAM,EAAgB,SAAS,cAAc,CAAC,SAC9C,CAAA,EAAc,SAAS,CAAG,CAAC,6FAA6F,EAAE,EAAe,CAAC,CAC1I,EAAc,SAAS,CAAC,MAAM,CAAC,gBACnC,EAEa,EAAe,KAExB,AADsB,SAAS,cAAc,CAAC,UAChC,SAAS,CAAC,GAAG,CAAC,gBAChC,EAEa,EAAc,MAAO,EAAW,EAAY,EAAM,KAC3D,IAAM,EAAU,CACZ,OAAQ,GAAc,MACtB,QAAS,CACL,eAAgB,mBAChB,OAAU,kBACd,CACJ,EACG,GACC,CAAA,EAAQ,IAAI,CAAG,KAAK,SAAS,CAAC,EADlC,EAGA,GAAI,CACA,GAAqB,EAAY,GACjC,IAAM,EAAW,MAAM,MAAM,AAAA,EAAA,QAAO,CAAI,EAAW,EACnD,CAAA,GAAqB,IACrB,IAAM,EAAa,MAAM,EAAS,IAAI,GACtC,GAAI,GAAc,CAAC,EAAW,KAAK,CAC/B,OAAO,EAEP,MAAQ,AAAA,CAAA,MAAA,EAAA,KAAA,EAAA,EAAY,KAAK,AAAL,GAAS,mBAErC,CAAE,MAAO,EAAO,CAEZ,OADA,GAAqB,IACd,CACX,CACJ,EAGa,EAAgB,AAAC,IAC1B,IAAM,EAAY,EAAI,WAAW,CAAC,KAC5B,EAAa,EAAI,WAAW,CAAC,KACnC,OAAQ,EAAY,GAAc,EAAY,GAAK,AAAqB,IAArB,EAAI,OAAO,CAAC,OAAe,EAAa,GAAK,EAAK,MAAM,CAAG,EAAc,CAChI,EAEa,EAAqB,KAC9B,IAAM,EAAa,SAAS,cAAc,CAAC,SACxC,AAAyB,CAAA,iBAAzB,OAAO,QAAQ,CAAC,IAAI,EAAuB,AAA2B,qBAA3B,OAAO,QAAQ,CAAC,MAAM,CAChE,EAAW,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,CAAG,cAE3C,EAAW,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,AAEhD,EAEwB,iCAAiC,IAAI,CAAC,UAAU,SAAS,EAE1E,IAAM,EAAoB,CAAE,MAAO,CAAC,iBAAiB,CAAA,EAAO,iBAAiB,CAAA,EAAO,gBAAgB,CAAA,EAAO,QAAS,EAAG,aAAc,CAAE,CAAC,C,G,E,Q,S,C,C,C,E,E,E,O,C,uB,W,O,C,G,E,E,O,C,2B,W,O,C,G,I,E,E,SC7ExI,IAAM,EAAuB,CAAC,EAAa,KAC9C,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,IACA,EAAS,MAAA,EAAA,KAAA,EAAA,EAAa,cAAc,CACxC,EAEa,EAAyB,KAElC,EAAE,qBAAqB,KAAK,CAAC,CACzB,SAAU,SACV,SAAU,CAAA,CACd,GACA,EAAE,qBAAqB,KAAK,CAAC,QAC7B,SAAS,cAAc,CAAC,qBAAqB,OAAO,CAAG,EACvD,SAAS,cAAc,CAAC,qBAAqB,OAAO,CAAG,CAC3D,EAEM,EAAkB,UAEhB,AADS,CAAA,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,eAAgB,MAAO,KAAM,aAA5D,EACS,EAAE,EACP,EAAE,qBAAqB,KAAK,CAAC,OAErC,EACM,EAAkB,UAEhB,AADS,CAAA,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,eAAgB,MAAO,KAAM,0BAA5D,EACS,EAAE,GACP,EAAE,qBAAqB,KAAK,CAAC,QAC7B,OAAO,QAAQ,CAAC,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,CAErD,EAEa,EAA2B,AAAC,IAIrC,GAAI,CAFY,SAAS,cAAc,CAAC,oBAE1B,CACV,IAAM,EAAc,CAAC;;;;;;;;wDAQ2B,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC,oCAAoC,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC;;;;;;;;cAQhI,CAAC,CACP,SAAS,oBAAoB,CAAC,EAAa,CAAC,EAAE,CAAC,kBAAkB,CAAC,WAAY,EAClF,CACA,GACJ,C,GCzDA,IAAA,EAAA,EAAA,S,E,E,S,E,E,SAKA,IAAI,EAAmB,KACnB,EAAc,CAAA,EAElB,MAAM,EAAqB,SAAS,cAAc,CAAC,sBAE7C,EAA2B,AAAC,IAC5B,GACA,AAAA,CAAA,EAAA,EAAA,wBAAuB,AAAvB,EAAyB,OAE/B,EAEM,EAAU,MAAO,IAErB,IAAM,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,WAAY,OACvC,GACF,EAAS,EAGb,EAsBM,EAAuB,AAAC,IAC1B,SAAS,cAAc,CAAC,wBAAwB,gBAAgB,CAAC,QAAS,UAAa,MAAM,EAAkB,EAAO,EAC1H,EAEM,EAAsB,KAC1B,SAAS,cAAc,CAAC,mBAAmB,OAAO,CAAG,KACnD,OAAO,MAAM,CAAC,mCAAoC,SAAS,cAAc,CAAC,YAAY,SAAS,CACjG,CACF,EACM,EAAoB,MAAO,IAE/B,IAAI,EAAa,OAAO,wCAAyC,IACjE,GAAI,IAAe,EAQjB,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,AAAA,EAAA,QAAO,CAX9B,eAAe,EAGT,CACZ,OAAQ,SACR,QAAS,CACL,eAAgB,mBAChB,OAAU,kBACd,CACJ,EAGuB,OAAM,EAAS,IAAI,IAElC,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,AAAN,CAE/C,CAAE,MAAO,EAAO,CACZ,MAAM,EACV,MACS,IAAgB,GAAY,AAAe,OAAf,GACrC,MAAM,oCAEV,EAaM,EAAgB,KACpB,SAAS,cAAc,CAAC,sBAAsB,SAAS,CAAC,GAAG,CAAC,UAC5D,SAAS,cAAc,CAAC,sBAAsB,eAAe,CAAC,WAChE,EAEM,EAAiB,UACrB,IAAM,EAAgB,SAAS,cAAc,CAAC,sBACxC,EAAW,EAAc,KAAK,CAEpC,GADA,EAAc,KAAK,CAAG,EAAQ,IAAI,GAC/B,IAAqB,EACtB,QACK,CAEL,IAAM,EAAgB,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,kBAAmB,QAD9C,CAAC,UAAW,CAAO,EAC0C,mBACtE,CAAA,EAAc,EAAE,EAIlB,EAAmB,EACnB,MAJA,EAAc,SAAS,CAAC,GAAG,CAAC,cAC5B,SAAS,cAAc,CAAC,4BAA4B,SAAS,CAAG,UAAY,EAKhF,CACF,EAEM,EAAoB,KACxB,IAAM,EAAgB,SAAS,cAAc,CAAC,sBAC9C,EAAc,CAAA,EACd,EAAmB,SAAS,CAAI,iDAChC,EAAc,YAAY,CAAC,WAAY,QACvC,EAAc,SAAS,CAAC,MAAM,CAAC,cAC/B,EAAc,SAAS,CAAC,MAAM,CAAC,UAC/B,SAAS,cAAc,CAAC,4BAA4B,SAAS,CAAG,EAClE,EAEA,AAAA,CAAA,EAAA,EAAA,kBAAiB,AAAjB,IAEA,EAAmB,gBAAgB,CAAC,QA/CL,KAE1B,EACC,KAEA,EAAc,CAAA,EACd,EAAmB,SAAS,CAAI,wCAChC,IAEN,EAsCqE,CAAA,GAErE,EAvGoB,AAAC,IACf,EAAS,EAAE,EACb,AAAA,CAAA,EAAA,EAAA,oBAAmB,AAAnB,EAAqB,EAAU,GAC/B,SAAS,cAAc,CAAC,eAAe,MAAM,CAAG,CAAA,EAChD,SAAS,cAAc,CAAC,kBAAkB,GAAG,CAAG,CAAC,2BAA2B,EAAE,EAAS,QAAQ,CAAC,IAAI,CAAC,CACrG,EAAmB,EAAS,IAAI,CAChC,SAAS,cAAc,CAAC,sBAAsB,KAAK,CAAG,EAAS,IAAI,CACnE,SAAS,cAAc,CAAC,UAAU,SAAS,CAAG,EAAS,QAAQ,CAC/D,SAAS,cAAc,CAAC,gBAAgB,SAAS,CAAG,EAAS,KAAK,CAClE,EAAqB,EAAS,QAAQ,EAEtC,SAAS,cAAc,CAAC,WAAW,MAAM,CAAG,CAAA,EAC5C,SAAS,cAAc,CAAC,YAAY,SAAS,CAAG,EAAS,KAAK,CAC9D,SAAS,cAAc,CAAC,YAAY,SAAS,CAAG,CAAC,cAAc,EAAE,EAAS,KAAK,CAAC,sBAAsB,EAAE,OAAO,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,OAAO,QAAQ,CAAC,IAAI,CAAC,0CAA0C,CAAC,CACrM,KAEA,SAAS,cAAc,CAAC,aAAa,MAAM,CAAG,CAAA,CAElD","sources":["<anon>","src/common/js/config.js","src/common/js/utils.js","src/common/js/acceptterms.js","src/pages/profile/user.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1e7e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1e7e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"hbluw\", function(module, exports) {\n\n$parcel$export(module.exports, \"ENDPOINT\", function () { return $c82422755965d529$export$1a23c4610ef05bed; });\n$parcel$export(module.exports, \"UPLOAD_ENDPOINT\", function () { return $c82422755965d529$export$cdda3773e71b07e4; });\nconst $c82422755965d529$var$MODE = \"DEV\" // 'DEV', 'STAGE', 'PROD'\n;\nconst $c82422755965d529$var$ENVIRONMENTS = {\n    PROD: {\n        ENDPOINT: \"https://hiaudio.fr\",\n        UPLOAD_ENDPOINT: \"https://hiaudio.fr/fileUpload\"\n    },\n    STAGE: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    },\n    DEV: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    }\n};\nconst $c82422755965d529$export$1a23c4610ef05bed = $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].ENDPOINT;\nconst $c82422755965d529$export$cdda3773e71b07e4 = $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].UPLOAD_ENDPOINT;\n\n});\n\nparcelRegister(\"jXEky\", function(module, exports) {\n\n$parcel$export(module.exports, \"uriUserPage\", function () { return $e882cfcc4184df66$export$ff3ad29dbb546598; });\n$parcel$export(module.exports, \"uriCollectionPage\", function () { return $e882cfcc4184df66$export$36dfaec04418caa7; });\n$parcel$export(module.exports, \"UserRole\", function () { return $e882cfcc4184df66$export$eb3485a690c2f0b8; });\n$parcel$export(module.exports, \"LevelPrivacy\", function () { return $e882cfcc4184df66$export$a3c073b335a47d60; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_STYLE\", function () { return $e882cfcc4184df66$export$eba8c17f4d7a3cd3; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_TEXT\", function () { return $e882cfcc4184df66$export$ab4fdfae3dcd1a8f; });\n$parcel$export(module.exports, \"ROLE_BADGE_STYLE\", function () { return $e882cfcc4184df66$export$f25eef55c66a4e9d; });\n$parcel$export(module.exports, \"startLoader\", function () { return $e882cfcc4184df66$export$8afc507ca675ea0e; });\n$parcel$export(module.exports, \"cancelLoader\", function () { return $e882cfcc4184df66$export$81e46b314cb8d8e3; });\n$parcel$export(module.exports, \"callJsonApi\", function () { return $e882cfcc4184df66$export$997d30e836e5c567; });\n$parcel$export(module.exports, \"looksLikeMail\", function () { return $e882cfcc4184df66$export$706cf9fcefe67c8e; });\n$parcel$export(module.exports, \"activateGoHomeLink\", function () { return $e882cfcc4184df66$export$3fc781af82c0c660; });\n$parcel$export(module.exports, \"MEDIA_CONSTRAINTS\", function () { return $e882cfcc4184df66$export$2464c9e69777d386; });\n\nvar $hbluw = parcelRequire(\"hbluw\");\nconst $e882cfcc4184df66$export$ff3ad29dbb546598 = \"/index.html?userid=\";\nconst $e882cfcc4184df66$export$36dfaec04418caa7 = \"/index.html?collectionid=\";\nconst $e882cfcc4184df66$export$eb3485a690c2f0b8 = Object.freeze({\n    none: 0,\n    owner: 1,\n    admin: 2,\n    member: 3,\n    guest: 4\n});\nconst $e882cfcc4184df66$export$a3c073b335a47d60 = Object.freeze({\n    public: 1,\n    onlyreg: 2,\n    private: 3\n});\nconst $e882cfcc4184df66$export$eba8c17f4d7a3cd3 = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"badge-public\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"badge-onlyreg\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"badge-private\"\n};\nconst $e882cfcc4184df66$export$ab4fdfae3dcd1a8f = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"PUBLIC\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"REG USERS\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"PRIVATE\"\n};\nconst $e882cfcc4184df66$export$f25eef55c66a4e9d = {\n    [$e882cfcc4184df66$export$eb3485a690c2f0b8.owner]: \"badge-owner\",\n    [$e882cfcc4184df66$export$eb3485a690c2f0b8.admin]: \"badge-admin\",\n    [$e882cfcc4184df66$export$eb3485a690c2f0b8.member]: \"badge-member\",\n    [$e882cfcc4184df66$export$eb3485a690c2f0b8.guest]: \"badge-guest\"\n};\nconst $e882cfcc4184df66$export$8afc507ca675ea0e = (loadingMessage)=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`;\n    loaderElement.classList.remove(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$81e46b314cb8d8e3 = ()=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.classList.add(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$997d30e836e5c567 = async (apimethod, rqstmethod, body, useLoaderWithText)=>{\n    const request = {\n        method: rqstmethod || \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }\n    };\n    if (body) request.body = JSON.stringify(body);\n    try {\n        useLoaderWithText && $e882cfcc4184df66$export$8afc507ca675ea0e(useLoaderWithText);\n        const sendRqst = await fetch((0, $hbluw.ENDPOINT) + apimethod, request);\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        const respToJson = await sendRqst.json();\n        if (respToJson && !respToJson.error) return respToJson;\n        else return (respToJson === null || respToJson === void 0 ? void 0 : respToJson.error) || \"An error occurred\";\n    } catch (error) {\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        return error;\n    }\n};\nconst $e882cfcc4184df66$export$706cf9fcefe67c8e = (str)=>{\n    const lastAtPos = str.lastIndexOf(\"@\");\n    const lastDotPos = str.lastIndexOf(\".\");\n    return lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf(\"@@\") == -1 && lastDotPos > 2 && str.length - lastDotPos > 2;\n};\nconst $e882cfcc4184df66$export$3fc781af82c0c660 = ()=>{\n    const goHomeLink = document.getElementById(\"goHome\");\n    if (window.location.host === \"localhost:80\" || window.location.origin === \"http://localhost\") goHomeLink.href = window.location.origin + \"/index.html\";\n    else goHomeLink.href = window.location.origin;\n};\nconst $e882cfcc4184df66$export$95df08bae54cb4df = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst $e882cfcc4184df66$export$2464c9e69777d386 = {\n    audio: {\n        echoCancellation: false,\n        noiseSuppression: false,\n        autoGainControl: false,\n        latency: 0,\n        channelCount: 1\n    }\n};\n\n});\n\nparcelRegister(\"faZmx\", function(module, exports) {\n\n$parcel$export(module.exports, \"checkIfTermsAccepted\", function () { return $b0c76387600d0ed6$export$207bec4913bdffa6; });\n$parcel$export(module.exports, \"generateAcceptTermsModal\", function () { return $b0c76387600d0ed6$export$7ed6abee26b8c64b; });\n\nvar $jXEky = parcelRequire(\"jXEky\");\nconst $b0c76387600d0ed6$export$207bec4913bdffa6 = (userprofile, callback)=>{\n    (0, $jXEky.cancelLoader)();\n    callback(userprofile === null || userprofile === void 0 ? void 0 : userprofile.terms_accepted);\n};\nconst $b0c76387600d0ed6$export$95d7694256f75341 = ()=>{\n    $(\"#acceptTermsModal\").modal({\n        backdrop: \"static\",\n        keyboard: false // to prevent closing with Esc button (if you want this too)\n    });\n    $(\"#acceptTermsModal\").modal(\"show\");\n    document.getElementById(\"buttonAcceptTerms\").onclick = $b0c76387600d0ed6$var$rqstAcceptTerms;\n    document.getElementById(\"buttonRejectTerms\").onclick = $b0c76387600d0ed6$var$rqstRejectTerms;\n};\nconst $b0c76387600d0ed6$var$rqstAcceptTerms = async ()=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/acceptterms\", \"PUT\", null, \"Welcome...\");\n    if (data.ok) $(\"#acceptTermsModal\").modal(\"hide\");\n};\nconst $b0c76387600d0ed6$var$rqstRejectTerms = async ()=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/rejectterms\", \"PUT\", null, \"Deleting information...\");\n    if (data.ok) {\n        $(\"#acceptTermsModal\").modal(\"hide\");\n        window.location.href = window.location.origin;\n    }\n};\nconst $b0c76387600d0ed6$export$7ed6abee26b8c64b = (attachToElem)=>{\n    const isModal = document.getElementById(\"acceptTermsModal\");\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`;\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML(\"afterend\", modalDialog);\n    }\n    $b0c76387600d0ed6$export$95d7694256f75341();\n};\n\n});\n\n/* TODO: REFACTORING */ \nvar $hbluw = parcelRequire(\"hbluw\");\n\nvar $jXEky = parcelRequire(\"jXEky\");\n\nvar $faZmx = parcelRequire(\"faZmx\");\nlet $df4cee02edea8f55$var$CURRENT_USERNAME = null;\nlet $df4cee02edea8f55$var$EDIT_STATUS = false;\nconst $df4cee02edea8f55$var$editUserNameButton = document.getElementById(\"editusernamebutton\");\nconst $df4cee02edea8f55$var$profilePageTermsAccepted = (termsAccepted)=>{\n    if (!termsAccepted) (0, $faZmx.generateAcceptTermsModal)(\"main\");\n};\nconst $df4cee02edea8f55$var$getUser = async (callback)=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/profile\", \"GET\");\n    if (data) callback(data);\n};\nconst $df4cee02edea8f55$var$setUserInfo = (userinfo)=>{\n    if (userinfo.ok) {\n        (0, $faZmx.checkIfTermsAccepted)(userinfo, $df4cee02edea8f55$var$profilePageTermsAccepted);\n        document.getElementById(\"profilecard\").hidden = false;\n        document.getElementById(\"profilepicture\").src = `https://picsum.photos/seed/${userinfo.user_uid}/200`;\n        $df4cee02edea8f55$var$CURRENT_USERNAME = userinfo.name;\n        document.getElementById(\"usernameinputfield\").value = userinfo.name;\n        document.getElementById(\"userid\").innerHTML = userinfo.user_uid;\n        document.getElementById(\"emailaddress\").innerHTML = userinfo.email;\n        $df4cee02edea8f55$var$deleteProfileHandler(userinfo.user_uid);\n        document.getElementById(\"apicard\").hidden = false;\n        document.getElementById(\"apitoken\").innerHTML = userinfo.token;\n        document.getElementById(\"curlcode\").innerHTML = `$ export JWT=\"${userinfo.token}\"  <br /><br />$ curl ${window.location.protocol}//${window.location.host}/profile   -H \"Authorization: Bearer $JWT\"`;\n        $df4cee02edea8f55$var$copyPasteTokenValue();\n    } else document.getElementById(\"logincard\").hidden = false;\n};\nconst $df4cee02edea8f55$var$deleteProfileHandler = (userid)=>{\n    document.getElementById(\"button-deleteprofile\").addEventListener(\"click\", async ()=>{\n        await $df4cee02edea8f55$var$deleteUserProfile(userid);\n    });\n};\nconst $df4cee02edea8f55$var$copyPasteTokenValue = ()=>{\n    document.getElementById(\"copytokenbutton\").onclick = ()=>{\n        window.prompt(\"Copy to clipboard: Ctrl+C, Enter\", document.getElementById(\"apitoken\").innerHTML);\n    };\n};\nconst $df4cee02edea8f55$var$deleteUserProfile = async (userid)=>{\n    const api = \"/deleteuser/\" + userid;\n    let userDelete = prompt(\"To confirm, please enter your User ID\", \"\");\n    if (userDelete === userid) {\n        const request = {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            }\n        };\n        try {\n            const sendRqst = await fetch((0, $hbluw.ENDPOINT) + api, request);\n            const respToJson = await sendRqst.json();\n            if (respToJson) window.location.href = window.location.origin;\n        } catch (error) {\n            alert(error);\n        }\n    } else if (userDelete !== userid && userDelete !== null) alert(\"Sorry, the User ID does not match\");\n};\nconst $df4cee02edea8f55$var$clickEditButtonHandler = ()=>{\n    if ($df4cee02edea8f55$var$EDIT_STATUS) $df4cee02edea8f55$var$disableEdition();\n    else {\n        $df4cee02edea8f55$var$EDIT_STATUS = true;\n        $df4cee02edea8f55$var$editUserNameButton.innerHTML = '<i class=\"fas fa-save\">&nbsp;</i>Save';\n        $df4cee02edea8f55$var$enableEdition();\n    }\n};\nconst $df4cee02edea8f55$var$enableEdition = ()=>{\n    document.getElementById(\"usernameinputfield\").classList.add(\"italic\");\n    document.getElementById(\"usernameinputfield\").removeAttribute(\"readonly\");\n};\nconst $df4cee02edea8f55$var$disableEdition = async ()=>{\n    const usernameinput = document.getElementById(\"usernameinputfield\");\n    const newname = usernameinput.value;\n    usernameinput.value = newname.trim();\n    if ($df4cee02edea8f55$var$CURRENT_USERNAME === newname) $df4cee02edea8f55$var$setBackToReadOnly();\n    else {\n        const body = {\n            user_name: newname\n        };\n        const resultNewName = await (0, $jXEky.callJsonApi)(\"/updateusername\", \"PATCH\", body, \"Updating user...\");\n        if (!resultNewName.ok) {\n            usernameinput.classList.add(\"is-invalid\");\n            document.getElementById(\"validationusernameresult\").innerText = \"Sorry, \" + resultNewName;\n        } else {\n            $df4cee02edea8f55$var$CURRENT_USERNAME = newname;\n            $df4cee02edea8f55$var$setBackToReadOnly();\n        }\n    }\n};\nconst $df4cee02edea8f55$var$setBackToReadOnly = ()=>{\n    const usernameinput = document.getElementById(\"usernameinputfield\");\n    $df4cee02edea8f55$var$EDIT_STATUS = false;\n    $df4cee02edea8f55$var$editUserNameButton.innerHTML = '<i class=\"fas fa-edit\">&nbsp;</i>Edit username';\n    usernameinput.setAttribute(\"readonly\", \"true\");\n    usernameinput.classList.remove(\"is-invalid\");\n    usernameinput.classList.remove(\"italic\");\n    document.getElementById(\"validationusernameresult\").innerText = \"\";\n};\n(0, $jXEky.activateGoHomeLink)();\n$df4cee02edea8f55$var$editUserNameButton.addEventListener(\"click\", $df4cee02edea8f55$var$clickEditButtonHandler, false);\n$df4cee02edea8f55$var$getUser($df4cee02edea8f55$var$setUserInfo);\n\n\n//# sourceMappingURL=profile.68058ac0.js.map\n","const MODE = 'DEV' // 'DEV', 'STAGE', 'PROD'\n\nconst ENVIRONMENTS = {\n    PROD:{       \n        ENDPOINT:'https://hiaudio.fr',\n        UPLOAD_ENDPOINT:'https://hiaudio.fr/fileUpload'     \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'\n    },\n    DEV:{       \n        ENDPOINT:window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.host + '/fileUpload'\n    }\n}\n\nexport const ENDPOINT = ENVIRONMENTS[MODE].ENDPOINT\nexport const UPLOAD_ENDPOINT = ENVIRONMENTS[MODE].UPLOAD_ENDPOINT","import { ENDPOINT } from './config'\n\nexport const uriUserPage = '/index.html?userid='\nexport const uriCollectionPage = '/index.html?collectionid='\n\nexport const UserRole = Object.freeze({\n    none : 0,\n    owner : 1,\n    admin : 2,\n    member : 3,\n    guest : 4\n})\n\nexport const LevelPrivacy = Object.freeze({\n    public : 1,\n    onlyreg : 2,\n    private : 3\n})\n\nexport const PRIVACY_BADGE_STYLE = {[LevelPrivacy.public] : 'badge-public', [LevelPrivacy.onlyreg] : 'badge-onlyreg', [LevelPrivacy.private] : 'badge-private'}\nexport const PRIVACY_BADGE_TEXT = {[LevelPrivacy.public] : 'PUBLIC', [LevelPrivacy.onlyreg] : 'REG USERS', [LevelPrivacy.private] : 'PRIVATE'}\nexport const ROLE_BADGE_STYLE = {[UserRole.owner] : 'badge-owner', [UserRole.admin] : 'badge-admin', [UserRole.member] : 'badge-member', [UserRole.guest] : 'badge-guest'}\n\nexport const startLoader = (loadingMessage) => {    \n    const loaderElement = document.getElementById('loader')    \n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`\n    loaderElement.classList.remove('loader-hidden')\n}\n\nexport const cancelLoader = () => {\n    const loaderElement = document.getElementById('loader')\n    loaderElement.classList.add('loader-hidden')\n}\n\nexport const callJsonApi = async (apimethod, rqstmethod, body, useLoaderWithText) => {\n    const request = {\n        method: rqstmethod || 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    if(body){\n        request.body = JSON.stringify(body)\n    }\n    try {\n        useLoaderWithText && startLoader(useLoaderWithText)\n        const sendRqst = await fetch(ENDPOINT + apimethod, request)\n        useLoaderWithText && cancelLoader()\n        const respToJson = await sendRqst.json()\n        if (respToJson && !respToJson.error) {\n            return respToJson\n        } else {\n            return (respToJson?.error || 'An error occurred')\n        }\n    } catch (error) {\n        useLoaderWithText && cancelLoader()\n        return(error)\n    }\n}\n\n/* https://stackoverflow.com/a/5166806 */\nexport const looksLikeMail = (str) => {\n    const lastAtPos = str.lastIndexOf('@')\n    const lastDotPos = str.lastIndexOf('.')\n    return (lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2)\n}\n\nexport const activateGoHomeLink = () => {\n    const goHomeLink = document.getElementById('goHome')\n    if(window.location.host === 'localhost:80' || window.location.origin === 'http://localhost'){\n        goHomeLink.href = window.location.origin + '/index.html'\n    } else {\n        goHomeLink.href = window.location.origin\n    }\n}\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\nexport const MEDIA_CONSTRAINTS = { audio: {echoCancellation:false, noiseSuppression:false, autoGainControl:false, latency: 0, channelCount: 1 }}","import { cancelLoader, callJsonApi } from './utils'\n\nexport const checkIfTermsAccepted = (userprofile, callback) => {\n    cancelLoader()\n    callback(userprofile?.terms_accepted)\n}\n\nexport const handleTermsNotAccepted = () => {\n\n    $('#acceptTermsModal').modal({\n        backdrop: 'static',\n        keyboard: false  // to prevent closing with Esc button (if you want this too)\n    })\n    $('#acceptTermsModal').modal('show')\n    document.getElementById('buttonAcceptTerms').onclick = rqstAcceptTerms\n    document.getElementById('buttonRejectTerms').onclick = rqstRejectTerms\n}\n\nconst rqstAcceptTerms = async () => {\n    const data = await callJsonApi('/acceptterms', 'PUT', null, 'Welcome...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n    }\n}\nconst rqstRejectTerms = async () => {\n    const data = await callJsonApi('/rejectterms', 'PUT', null, 'Deleting information...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n        window.location.href = window.location.origin\n    }\n}\n\nexport const generateAcceptTermsModal = (attachToElem) => {\n\n    const isModal = document.getElementById('acceptTermsModal')\n\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML('afterend', modalDialog)\n    }\n    handleTermsNotAccepted()\n}","/* TODO: REFACTORING */\nimport { ENDPOINT } from '../../common/js/config'\nimport { callJsonApi, activateGoHomeLink } from '../../common/js/utils'\nimport { checkIfTermsAccepted, generateAcceptTermsModal} from '../../common/js/acceptterms'\n\nlet CURRENT_USERNAME = null\nlet EDIT_STATUS = false\n\nconst editUserNameButton = document.getElementById('editusernamebutton')\n\nconst profilePageTermsAccepted = (termsAccepted) => {  \n  if(!termsAccepted){\n      generateAcceptTermsModal('main')\n  } \n}\n\nconst getUser = async (callback) => {\n\n  const data = await callJsonApi('/profile', 'GET')\n  if (data) {    \n    callback(data)\n  }  \n\n}\n\nconst setUserInfo = (userinfo) => {\n  if (userinfo.ok) {\n    checkIfTermsAccepted(userinfo, profilePageTermsAccepted)\n    document.getElementById('profilecard').hidden = false\n    document.getElementById('profilepicture').src = `https://picsum.photos/seed/${userinfo.user_uid}/200`\n    CURRENT_USERNAME = userinfo.name\n    document.getElementById('usernameinputfield').value = userinfo.name\n    document.getElementById('userid').innerHTML = userinfo.user_uid\n    document.getElementById('emailaddress').innerHTML = userinfo.email\n    deleteProfileHandler(userinfo.user_uid)\n\n    document.getElementById('apicard').hidden = false\n    document.getElementById('apitoken').innerHTML = userinfo.token\n    document.getElementById('curlcode').innerHTML = `$ export JWT=\"${userinfo.token}\"  <br /><br />$ curl ${window.location.protocol}//${window.location.host}/profile   -H \"Authorization: Bearer $JWT\"`;\n    copyPasteTokenValue()\n  } else {\n    document.getElementById('logincard').hidden = false\n  }\n}\n\nconst deleteProfileHandler = (userid) => {\n    document.getElementById('button-deleteprofile').addEventListener('click', async () => {await deleteUserProfile(userid)})\n}\n\nconst copyPasteTokenValue = () => {\n  document.getElementById('copytokenbutton').onclick = () => {\n    window.prompt('Copy to clipboard: Ctrl+C, Enter', document.getElementById('apitoken').innerHTML)\n  }\n}\nconst deleteUserProfile = async (userid) => {\n  const api = '/deleteuser/'+userid\n  let userDelete = prompt('To confirm, please enter your User ID', '')\n  if (userDelete === userid) {\n    const request = {\n        method: 'DELETE',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    try {\n        const sendRqst = await fetch(ENDPOINT + api, request)\n        const respToJson = await sendRqst.json()\n        if (respToJson) {\n            window.location.href = window.location.origin\n        }\n    } catch (error) {\n        alert(error)\n    }\n  } else if ((userDelete !== userid) && (userDelete !== null)){\n    alert('Sorry, the User ID does not match')\n  }\n}\n\nconst clickEditButtonHandler = () => {\n    \n  if(EDIT_STATUS){      \n      disableEdition()\n  } else {\n      EDIT_STATUS = true\n      editUserNameButton.innerHTML =  '<i class=\"fas fa-save\">&nbsp;</i>Save'\n      enableEdition()\n  }   \n}\n\nconst enableEdition = () => {\n  document.getElementById('usernameinputfield').classList.add('italic')\n  document.getElementById('usernameinputfield').removeAttribute('readonly')\n}\n\nconst disableEdition = async () => {\n  const usernameinput = document.getElementById('usernameinputfield')\n  const newname =  usernameinput.value\n  usernameinput.value = newname.trim()\n  if(CURRENT_USERNAME === newname){\n    setBackToReadOnly()    \n  } else {\n    const body = {user_name: newname}\n    const resultNewName = await callJsonApi('/updateusername', 'PATCH', body, 'Updating user...')  \n    if(!resultNewName.ok){    \n      usernameinput.classList.add('is-invalid')     \n      document.getElementById('validationusernameresult').innerText = 'Sorry, ' + resultNewName\n    } else {\n      CURRENT_USERNAME = newname\n      setBackToReadOnly()     \n    }  \n  }  \n}\n\nconst setBackToReadOnly = () => {\n  const usernameinput = document.getElementById('usernameinputfield')\n  EDIT_STATUS = false        \n  editUserNameButton.innerHTML =  '<i class=\"fas fa-edit\">&nbsp;</i>Edit username'\n  usernameinput.setAttribute('readonly', 'true')\n  usernameinput.classList.remove('is-invalid')\n  usernameinput.classList.remove('italic')     \n  document.getElementById('validationusernameresult').innerText = '' \n}\n\nactivateGoHomeLink()\n\neditUserNameButton.addEventListener('click', clickEditButtonHandler, false)\n\ngetUser(setUserInfo)"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$c82422755965d529$export$1a23c4610ef05bed","$c82422755965d529$export$cdda3773e71b07e4","$c82422755965d529$var$ENVIRONMENTS","PROD","ENDPOINT","UPLOAD_ENDPOINT","STAGE","location","protocol","host","DEV","$e882cfcc4184df66$export$ff3ad29dbb546598","$e882cfcc4184df66$export$36dfaec04418caa7","$e882cfcc4184df66$export$eb3485a690c2f0b8","$e882cfcc4184df66$export$a3c073b335a47d60","$e882cfcc4184df66$export$eba8c17f4d7a3cd3","$e882cfcc4184df66$export$ab4fdfae3dcd1a8f","$e882cfcc4184df66$export$f25eef55c66a4e9d","$e882cfcc4184df66$export$8afc507ca675ea0e","$e882cfcc4184df66$export$81e46b314cb8d8e3","$e882cfcc4184df66$export$997d30e836e5c567","$e882cfcc4184df66$export$706cf9fcefe67c8e","$e882cfcc4184df66$export$3fc781af82c0c660","$e882cfcc4184df66$export$2464c9e69777d386","$hbluw","freeze","none","owner","admin","member","guest","public","onlyreg","private","loadingMessage","loaderElement","document","getElementById","innerHTML","classList","remove","add","apimethod","rqstmethod","body","useLoaderWithText","request","method","headers","JSON","stringify","sendRqst","fetch","respToJson","json","error","str","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","goHomeLink","origin","href","test","navigator","userAgent","audio","echoCancellation","noiseSuppression","autoGainControl","latency","channelCount","$b0c76387600d0ed6$export$207bec4913bdffa6","$b0c76387600d0ed6$export$7ed6abee26b8c64b","$jXEky","userprofile","callback","cancelLoader","terms_accepted","$b0c76387600d0ed6$export$95d7694256f75341","$","modal","backdrop","keyboard","onclick","$b0c76387600d0ed6$var$rqstAcceptTerms","$b0c76387600d0ed6$var$rqstRejectTerms","data","callJsonApi","ok","attachToElem","modalDialog","getElementsByTagName","insertAdjacentHTML","$faZmx","$df4cee02edea8f55$var$CURRENT_USERNAME","$df4cee02edea8f55$var$EDIT_STATUS","$df4cee02edea8f55$var$editUserNameButton","$df4cee02edea8f55$var$profilePageTermsAccepted","termsAccepted","generateAcceptTermsModal","$df4cee02edea8f55$var$getUser","$df4cee02edea8f55$var$deleteProfileHandler","userid","addEventListener","$df4cee02edea8f55$var$deleteUserProfile","$df4cee02edea8f55$var$copyPasteTokenValue","prompt","userDelete","alert","$df4cee02edea8f55$var$enableEdition","removeAttribute","$df4cee02edea8f55$var$disableEdition","usernameinput","newname","value","trim","$df4cee02edea8f55$var$setBackToReadOnly","resultNewName","user_name","innerText","setAttribute","activateGoHomeLink","userinfo","checkIfTermsAccepted","hidden","src","user_uid","name","email","token"],"version":3,"file":"profile.68058ac0.js.map"}