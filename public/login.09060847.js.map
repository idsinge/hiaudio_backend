{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,c,W,O,C,G,E,E,O,C,oB,W,O,C,G,E,E,O,C,W,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,sB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,gB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,oB,W,O,C,G,I,E,E,SCEO,IAAM,EAAc,sBACd,EAAoB,4BAEpB,EAAW,OAAO,MAAM,CAAC,CAClC,KAAO,EACP,MAAQ,EACR,MAAQ,EACR,OAAS,EACT,MAAQ,CACZ,GAEa,EAAe,OAAO,MAAM,CAAC,CACtC,OAAS,EACT,QAAU,EACV,QAAU,CACd,GAEa,EAAsB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,eAAgB,CAAC,EAAa,OAAO,CAAC,CAAG,gBAAiB,CAAC,EAAa,OAAO,CAAC,CAAG,eAAe,EACjJ,EAAqB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,SAAU,CAAC,EAAa,OAAO,CAAC,CAAG,YAAa,CAAC,EAAa,OAAO,CAAC,CAAG,SAAS,EAEhI,EAAc,AAAC,IACxB,IAAM,EAAgB,SAAS,cAAc,CAAC,SAC9C,CAAA,EAAc,SAAS,CAAG,CAAC,6FAA6F,EAAE,EAAe,CAAC,CAC1I,EAAc,SAAS,CAAC,MAAM,CAAC,gBACnC,EAEa,EAAe,KAExB,AADsB,SAAS,cAAc,CAAC,UAChC,SAAS,CAAC,GAAG,CAAC,gBAChC,EAEa,EAAc,MAAO,EAAW,EAAY,EAAM,KAC3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","sources":["<anon>","src/common/js/utils.js","src/common/js/config.js","src/pages/login/login.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1e7e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1e7e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"jXEky\", function(module, exports) {\n\n$parcel$export(module.exports, \"uriUserPage\", function () { return $e882cfcc4184df66$export$ff3ad29dbb546598; });\n$parcel$export(module.exports, \"uriCollectionPage\", function () { return $e882cfcc4184df66$export$36dfaec04418caa7; });\n$parcel$export(module.exports, \"UserRole\", function () { return $e882cfcc4184df66$export$eb3485a690c2f0b8; });\n$parcel$export(module.exports, \"LevelPrivacy\", function () { return $e882cfcc4184df66$export$a3c073b335a47d60; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_STYLE\", function () { return $e882cfcc4184df66$export$eba8c17f4d7a3cd3; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_TEXT\", function () { return $e882cfcc4184df66$export$ab4fdfae3dcd1a8f; });\n$parcel$export(module.exports, \"startLoader\", function () { return $e882cfcc4184df66$export$8afc507ca675ea0e; });\n$parcel$export(module.exports, \"cancelLoader\", function () { return $e882cfcc4184df66$export$81e46b314cb8d8e3; });\n$parcel$export(module.exports, \"callJsonApi\", function () { return $e882cfcc4184df66$export$997d30e836e5c567; });\n$parcel$export(module.exports, \"looksLikeMail\", function () { return $e882cfcc4184df66$export$706cf9fcefe67c8e; });\n$parcel$export(module.exports, \"activateGoHomeLink\", function () { return $e882cfcc4184df66$export$3fc781af82c0c660; });\n$parcel$export(module.exports, \"MEDIA_CONSTRAINTS\", function () { return $e882cfcc4184df66$export$2464c9e69777d386; });\n\nvar $hbluw = parcelRequire(\"hbluw\");\nconst $e882cfcc4184df66$export$ff3ad29dbb546598 = \"/index.html?userid=\";\nconst $e882cfcc4184df66$export$36dfaec04418caa7 = \"/index.html?collectionid=\";\nconst $e882cfcc4184df66$export$eb3485a690c2f0b8 = Object.freeze({\n    none: 0,\n    owner: 1,\n    admin: 2,\n    member: 3,\n    guest: 4\n});\nconst $e882cfcc4184df66$export$a3c073b335a47d60 = Object.freeze({\n    public: 1,\n    onlyreg: 2,\n    private: 3\n});\nconst $e882cfcc4184df66$export$eba8c17f4d7a3cd3 = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"badge-public\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"badge-onlyreg\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"badge-private\"\n};\nconst $e882cfcc4184df66$export$ab4fdfae3dcd1a8f = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"PUBLIC\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"REG USERS\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"PRIVATE\"\n};\nconst $e882cfcc4184df66$export$8afc507ca675ea0e = (loadingMessage)=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`;\n    loaderElement.classList.remove(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$81e46b314cb8d8e3 = ()=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.classList.add(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$997d30e836e5c567 = async (apimethod, rqstmethod, body, useLoaderWithText)=>{\n    const request = {\n        method: rqstmethod || \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }\n    };\n    if (body) request.body = JSON.stringify(body);\n    try {\n        useLoaderWithText && $e882cfcc4184df66$export$8afc507ca675ea0e(useLoaderWithText);\n        const sendRqst = await fetch((0, $hbluw.ENDPOINT) + apimethod, request);\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        const respToJson = await sendRqst.json();\n        if (respToJson && !respToJson.error) return respToJson;\n        else return (respToJson === null || respToJson === void 0 ? void 0 : respToJson.error) || \"An error occurred\";\n    } catch (error) {\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        return error;\n    }\n};\nconst $e882cfcc4184df66$export$706cf9fcefe67c8e = (str)=>{\n    const lastAtPos = str.lastIndexOf(\"@\");\n    const lastDotPos = str.lastIndexOf(\".\");\n    return lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf(\"@@\") == -1 && lastDotPos > 2 && str.length - lastDotPos > 2;\n};\nconst $e882cfcc4184df66$export$3fc781af82c0c660 = ()=>{\n    const goHomeLink = document.getElementById(\"goHome\");\n    if (window.location.host === \"localhost:80\" || window.location.origin === \"http://localhost\") goHomeLink.href = window.location.origin + \"/index.html\";\n    else goHomeLink.href = window.location.origin;\n};\nconst $e882cfcc4184df66$export$95df08bae54cb4df = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst $e882cfcc4184df66$export$2464c9e69777d386 = {\n    audio: {\n        echoCancellation: false,\n        noiseSuppression: false,\n        autoGainControl: false,\n        latency: 0,\n        channelCount: 1\n    }\n};\n\n});\nparcelRegister(\"hbluw\", function(module, exports) {\nconst $c82422755965d529$var$MODE = \"STAGE\" // STAGE\n;\nconst $c82422755965d529$var$ENVIRONMENTS = {\n    PROD: {\n        ENDPOINT: \"\",\n        UPLOAD_ENDPOINT: \"\"\n    },\n    STAGE: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    },\n    DEV: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    }\n};\nmodule.exports = {\n    ENDPOINT: $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].UPLOAD_ENDPOINT\n};\n\n});\n\n\n\nvar $jXEky = parcelRequire(\"jXEky\");\nlet $f64679c218fd5c75$var$TEMP_EMAIL = null;\nconst $f64679c218fd5c75$var$redirectToGoogleLogin = ()=>{\n    window.location.href = \"/googlelogin\";\n};\nconst $f64679c218fd5c75$var$getUser = async ()=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/profile\", \"GET\", null, \"Loading user...\");\n    if (data.ok) window.location.href = window.location.origin + \"/profile.html\";\n};\nconst $f64679c218fd5c75$var$sendVerificationCode = async ()=>{\n    const loginEmail = document.getElementById(\"inputloginemail\").value;\n    if ((0, $jXEky.looksLikeMail)(loginEmail)) {\n        const data = await (0, $jXEky.callJsonApi)(\"/generatelogincode/\" + loginEmail, \"PUT\", null, \"Sending code...\");\n        if (data.ok) {\n            $f64679c218fd5c75$var$TEMP_EMAIL = loginEmail;\n            document.getElementById(\"authmethodform\").hidden = true;\n            document.getElementById(\"validationcodefield\").hidden = false;\n        } else {\n            document.getElementById(\"inputloginemail\").classList.add(\"is-invalid\");\n            document.getElementById(\"validationEmailResult\").innerText = data;\n        }\n    } else {\n        document.getElementById(\"inputloginemail\").classList.add(\"is-invalid\");\n        document.getElementById(\"validationEmailResult\").innerText = \"Sorry, invalid email address format.\";\n    }\n};\nconst $f64679c218fd5c75$var$requestCodeValidation = async ()=>{\n    const codeIs = document.getElementById(\"verificationCode\").value;\n    const sixDigits = /\\d{6}/;\n    if (sixDigits.test(codeIs)) {\n        const body = {\n            email: $f64679c218fd5c75$var$TEMP_EMAIL,\n            code: codeIs\n        };\n        const data = await (0, $jXEky.callJsonApi)(\"/logincodevalidation\", \"POST\", body, \"Verification in process...\");\n        if (data.ok) {\n            $f64679c218fd5c75$var$TEMP_EMAIL = null;\n            window.location.href = window.location.origin;\n        } else {\n            // TODO: if the code is expired display button to request a new one\n            document.getElementById(\"verificationCode\").classList.add(\"is-invalid\");\n            document.getElementById(\"validationCodeResult\").innerText = \"Wrong code, sorry\";\n        }\n    } else {\n        document.getElementById(\"verificationCode\").classList.add(\"is-invalid\");\n        document.getElementById(\"validationCodeResult\").innerText = \"Sorry, invalid code format.\";\n    }\n};\n(0, $jXEky.activateGoHomeLink)();\ndocument.getElementById(\"googleLoginButton\").onclick = $f64679c218fd5c75$var$redirectToGoogleLogin;\ndocument.getElementById(\"sendcodebutton\").onclick = $f64679c218fd5c75$var$sendVerificationCode;\ndocument.getElementById(\"inputloginemail\").onkeydown = function(e) {\n    if (e.key == \"Enter\") return $f64679c218fd5c75$var$sendVerificationCode();\n};\ndocument.getElementById(\"validatecodebutton\").onclick = $f64679c218fd5c75$var$requestCodeValidation;\ndocument.getElementById(\"verificationCode\").onkeydown = function(e) {\n    if (e.key == \"Enter\") return $f64679c218fd5c75$var$requestCodeValidation();\n};\n$f64679c218fd5c75$var$getUser();\n\n\n//# sourceMappingURL=login.09060847.js.map\n","import { ENDPOINT } from './config'\n\nexport const uriUserPage = '/index.html?userid='\nexport const uriCollectionPage = '/index.html?collectionid='\n\nexport const UserRole = Object.freeze({\n    none : 0,\n    owner : 1,\n    admin : 2,\n    member : 3,\n    guest : 4\n})\n\nexport const LevelPrivacy = Object.freeze({\n    public : 1,\n    onlyreg : 2,\n    private : 3\n})\n\nexport const PRIVACY_BADGE_STYLE = {[LevelPrivacy.public] : 'badge-public', [LevelPrivacy.onlyreg] : 'badge-onlyreg', [LevelPrivacy.private] : 'badge-private'}\nexport const PRIVACY_BADGE_TEXT = {[LevelPrivacy.public] : 'PUBLIC', [LevelPrivacy.onlyreg] : 'REG USERS', [LevelPrivacy.private] : 'PRIVATE'}\n\nexport const startLoader = (loadingMessage) => {    \n    const loaderElement = document.getElementById('loader')    \n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`\n    loaderElement.classList.remove('loader-hidden')\n}\n\nexport const cancelLoader = () => {\n    const loaderElement = document.getElementById('loader')\n    loaderElement.classList.add('loader-hidden')\n}\n\nexport const callJsonApi = async (apimethod, rqstmethod, body, useLoaderWithText) => {\n    const request = {\n        method: rqstmethod || 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    if(body){\n        request.body = JSON.stringify(body)\n    }\n    try {\n        useLoaderWithText && startLoader(useLoaderWithText)\n        const sendRqst = await fetch(ENDPOINT + apimethod, request)\n        useLoaderWithText && cancelLoader()\n        const respToJson = await sendRqst.json()\n        if (respToJson && !respToJson.error) {\n            return respToJson\n        } else {\n            return (respToJson?.error || 'An error occurred')\n        }\n    } catch (error) {\n        useLoaderWithText && cancelLoader()\n        return(error)\n    }\n}\n\n/* https://stackoverflow.com/a/5166806 */\nexport const looksLikeMail = (str) => {\n    const lastAtPos = str.lastIndexOf('@')\n    const lastDotPos = str.lastIndexOf('.')\n    return (lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2)\n}\n\nexport const activateGoHomeLink = () => {\n    const goHomeLink = document.getElementById('goHome')\n    if(window.location.host === 'localhost:80' || window.location.origin === 'http://localhost'){\n        goHomeLink.href = window.location.origin + '/index.html'\n    } else {\n        goHomeLink.href = window.location.origin\n    }\n}\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\nexport const MEDIA_CONSTRAINTS = { audio: {echoCancellation:false, noiseSuppression:false, autoGainControl:false, latency: 0, channelCount: 1 }}","const MODE = 'STAGE' // STAGE\n\nconst ENVIRONMENTS = {\n    PROD:{        \n        ENDPOINT:'',\n        UPLOAD_ENDPOINT:''        \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'       \n    },\n    DEV:{        \n        ENDPOINT:window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.host + '/fileUpload'        \n    }\n}\n\nmodule.exports = {    \n    ENDPOINT: ENVIRONMENTS[MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: ENVIRONMENTS[MODE].UPLOAD_ENDPOINT\n}","import { callJsonApi, looksLikeMail, activateGoHomeLink } from '../../common/js/utils'\n\nlet TEMP_EMAIL = null\n\nconst redirectToGoogleLogin = () => {\n    window.location.href = '/googlelogin'\n}\n\nconst getUser = async () => {\n    const data = await callJsonApi('/profile', 'GET', null, 'Loading user...')\n    if (data.ok) {\n        window.location.href = window.location.origin + '/profile.html'\n    }\n}\n\nconst sendVerificationCode = async () => {\n    const loginEmail = document.getElementById('inputloginemail').value\n    if(looksLikeMail(loginEmail)){\n        const data = await callJsonApi('/generatelogincode/'+loginEmail, 'PUT', null, 'Sending code...')\n        if (data.ok) {\n            TEMP_EMAIL = loginEmail\n            document.getElementById('authmethodform').hidden = true\n            document.getElementById('validationcodefield').hidden = false\n        } else {            \n            document.getElementById('inputloginemail').classList.add('is-invalid')\n            document.getElementById('validationEmailResult').innerText = data\n        }\n    } else {\n        document.getElementById('inputloginemail').classList.add('is-invalid')\n        document.getElementById('validationEmailResult').innerText = 'Sorry, invalid email address format.'\n    }\n}\n\nconst requestCodeValidation = async () => {\n    const codeIs =  document.getElementById('verificationCode').value\n    const sixDigits = /\\d{6}/\n    if (sixDigits.test(codeIs)){\n        const body = {email: TEMP_EMAIL, code: codeIs}\n        const data = await callJsonApi('/logincodevalidation', 'POST', body, 'Verification in process...')\n        if (data.ok) {\n            TEMP_EMAIL = null\n            window.location.href = window.location.origin\n        } else {\n            // TODO: if the code is expired display button to request a new one\n            document.getElementById('verificationCode').classList.add('is-invalid')\n            document.getElementById('validationCodeResult').innerText = 'Wrong code, sorry'\n        }\n    } else {\n        document.getElementById('verificationCode').classList.add('is-invalid')\n        document.getElementById('validationCodeResult').innerText = 'Sorry, invalid code format.'\n    }\n}\n\nactivateGoHomeLink()\n\ndocument.getElementById('googleLoginButton').onclick = redirectToGoogleLogin\n\ndocument.getElementById('sendcodebutton').onclick = sendVerificationCode\ndocument.getElementById('inputloginemail').onkeydown = function(e) {\n    if (e.key == \"Enter\") {\n        return sendVerificationCode()\n    }\n}\n\n\n\ndocument.getElementById('validatecodebutton').onclick = requestCodeValidation\ndocument.getElementById('verificationCode').onkeydown = function(e) {\n    if (e.key == \"Enter\") {\n        return requestCodeValidation()\n    }\n}\n\n\n\ngetUser()\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$e882cfcc4184df66$export$ff3ad29dbb546598","$e882cfcc4184df66$export$36dfaec04418caa7","$e882cfcc4184df66$export$eb3485a690c2f0b8","$e882cfcc4184df66$export$a3c073b335a47d60","$e882cfcc4184df66$export$eba8c17f4d7a3cd3","$e882cfcc4184df66$export$ab4fdfae3dcd1a8f","$e882cfcc4184df66$export$8afc507ca675ea0e","$e882cfcc4184df66$export$81e46b314cb8d8e3","$e882cfcc4184df66$export$997d30e836e5c567","$e882cfcc4184df66$export$706cf9fcefe67c8e","$e882cfcc4184df66$export$3fc781af82c0c660","$e882cfcc4184df66$export$2464c9e69777d386","$hbluw","freeze","none","owner","admin","member","guest","public","onlyreg","private","loadingMessage","loaderElement","document","getElementById","innerHTML","classList","remove","add","apimethod","rqstmethod","body","useLoaderWithText","request","method","headers","JSON","stringify","sendRqst","fetch","ENDPOINT","respToJson","json","error","str","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","goHomeLink","location","host","origin","href","test","navigator","userAgent","audio","echoCancellation","noiseSuppression","autoGainControl","latency","channelCount","$c82422755965d529$var$MODE","$c82422755965d529$var$ENVIRONMENTS","PROD","UPLOAD_ENDPOINT","STAGE","protocol","DEV","$jXEky","$f64679c218fd5c75$var$TEMP_EMAIL","$f64679c218fd5c75$var$getUser","data","callJsonApi","ok","$f64679c218fd5c75$var$sendVerificationCode","loginEmail","value","looksLikeMail","hidden","innerText","$f64679c218fd5c75$var$requestCodeValidation","codeIs","sixDigits","email","activateGoHomeLink","onclick","onkeydown","key"],"version":3,"file":"login.09060847.js.map"}