{"mappings":"ACCA,iBAAiB,UAAW,AAAC,IACE,gBAAzB,EAAQ,IAAI,CAAC,OAAO,EACtB,AASJ,SAAmC,CAAK,CAAE,CAAK,CAAE,CAAM,CAAE,CAAO,EAC9D,IAAM,EAAK,EAAM,MAAM,CAAE,EAAK,EAAM,MAAM,CACtC,EAAoB,AAAI,MAAM,EAAS,GAAG,IAAI,CAAC,GAEnD,IAAK,IAAI,EAAM,EAAG,GAAO,EAAQ,IAAO,CACpC,IAAI,EAAM,EACV,IAAK,IAAI,EAAI,EAAK,EAAI,GAAO,EAAI,EAAO,EAAI,IACxC,GAAQ,CAAK,CAAC,EAAE,CAAK,CAAK,CAAC,EAAI,EAAI,AAEvC,CAAA,CAAiB,CAAC,EAAI,CAAG,EAAO,CAAA,EAAK,CAAA,CACzC,CAEA,YAAY,CAAC,YAAY,EAAmB,QAAS,CAAO,EAC9D,EAtB8B,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,MAAM,CAAG,EAAQ,IAAI,CAAC,OAAO,EAGjF,aAAzB,EAAQ,IAAI,CAAC,OAAO,EACtB,AAoBJ,SAAyB,CAAK,CAAE,CAAO,EACrC,IAAI,EAAY,EACZ,EAAS,EACT,EAAe,KAAK,GAAG,CAAC,CAAK,CAAC,EAAE,CAAE,GAEtC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,IAAK,CACnC,IAAM,EAAY,KAAK,GAAG,CAAC,CAAK,CAAC,EAAE,CAAE,GACjC,EAAY,IACZ,EAAe,EACf,EAAY,GAEhB,GAAU,CACd,CAEA,YAAY,CAAE,aAAA,EAAc,UAAA,EAAW,KAD1B,EAAS,EAAM,MAAM,CACW,QAAA,CAAQ,EACvD,EAnCoB,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,OAAO,CAE5D","sources":["<anon>","src/pages/composition/scripts/latencymls/worker.js"],"sourcesContent":["(function () {\nvar $0d23fa1cee829790$exports = {};\n// Listen for messages from the main thread\naddEventListener(\"message\", (message)=>{\n    if (message.data.command === \"correlation\") $0d23fa1cee829790$var$calculateCrossCorrelation(message.data.data1, message.data.data2, message.data.maxLag, message.data.channel);\n    if (message.data.command === \"findpeak\") $0d23fa1cee829790$var$findPeakAndMean(message.data.array, message.data.channel);\n});\nfunction $0d23fa1cee829790$var$calculateCrossCorrelation(data1, data2, maxLag, channel) {\n    const n1 = data1.length, n2 = data2.length;\n    let crossCorrelations = new Array(maxLag + 1).fill(0);\n    for(let lag = 0; lag <= maxLag; lag++){\n        let sum = 0;\n        for(let i = lag; i < n1 && i - lag < n2; i++)sum += data1[i] * data2[i - lag];\n        crossCorrelations[lag] = sum / (n1 - lag);\n    }\n    postMessage({\n        correlation: crossCorrelations,\n        channel: channel\n    });\n}\nfunction $0d23fa1cee829790$var$findPeakAndMean(array, channel) {\n    let peakIndex = 0;\n    let energy = 0;\n    let peakValuePow = Math.pow(array[0], 2);\n    for(let i = 1; i < array.length; i++){\n        const samplePow = Math.pow(array[i], 2);\n        if (samplePow > peakValuePow) {\n            peakValuePow = samplePow;\n            peakIndex = i;\n        }\n        energy += samplePow;\n    }\n    const mean = energy / array.length;\n    postMessage({\n        peakValuePow: peakValuePow,\n        peakIndex: peakIndex,\n        mean: mean,\n        channel: channel\n    });\n}\n\n})();\n//# sourceMappingURL=worker.948a5941.js.map\n","// Listen for messages from the main thread\naddEventListener('message', (message) => {  \n  if (message.data.command === 'correlation') {\n    calculateCrossCorrelation(message.data.data1, message.data.data2, message.data.maxLag,  message.data.channel)\n  }\n\n  if (message.data.command === 'findpeak') {\n    findPeakAndMean(message.data.array, message.data.channel)\n  }\n})\n\n\nfunction calculateCrossCorrelation(data1, data2, maxLag, channel) {\n  const n1 = data1.length, n2 = data2.length\n  let crossCorrelations = new Array(maxLag + 1).fill(0)\n\n  for (let lag = 0; lag <= maxLag; lag++) {\n      let sum = 0\n      for (let i = lag; i < n1 && (i - lag) < n2; i++) {\n          sum += (data1[i]) * (data2[i - lag])\n      }\n      crossCorrelations[lag] = sum / (n1 - lag)\n  }\n\n  postMessage({correlation:crossCorrelations, channel: channel})\n}\n\nfunction findPeakAndMean(array, channel) {\n  let peakIndex = 0\n  let energy = 0\n  let peakValuePow = Math.pow(array[0], 2)\n\n  for (let i = 1; i < array.length; i++) {\n      const samplePow = Math.pow(array[i], 2)\n      if (samplePow > peakValuePow) {\n          peakValuePow = samplePow\n          peakIndex = i\n      }\n      energy += samplePow\n  }\n  const mean = energy / array.length\n  postMessage({ peakValuePow, peakIndex, mean, channel })\n}"],"names":["addEventListener","message","data","command","$0d23fa1cee829790$var$calculateCrossCorrelation","data1","data2","maxLag","channel","n1","length","n2","crossCorrelations","Array","fill","lag","sum","i","postMessage","correlation","$0d23fa1cee829790$var$findPeakAndMean","array","peakIndex","energy","peakValuePow","Math","pow","samplePow","mean"],"version":3,"file":"worker.948a5941.js.map"}