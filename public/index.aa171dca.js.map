{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,W,W,O,C,E,S,C,E,O,E,C,GCEA,IAgBA,EAhBI,EAAU,IAAI,IAgBlB,EAfA,SAAkB,CAAO,CAAE,CAAQ,EACjC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,MAAM,CAAG,EAAG,GAAK,EAC5C,EAAQ,GAAG,CAAC,CAAQ,CAAC,EAAE,CAAE,CACvB,QAAS,EACT,KAAM,CAAQ,CAAC,EAAI,EAAE,AACvB,EAEJ,C,G,E,Q,S,C,C,C,E,E,E,O,C,e,W,O,C,E,S,C,E,O,E,C,G,E,E,O,C,Y,W,O,C,E,S,C,E,O,E,C,GCRA,IAkCA,EAEA,EApCI,EAAY,CAAC,EAkCjB,EAjCA,SAA4B,CAAE,EAC5B,IAAI,EAAQ,CAAS,CAAC,EAAG,CAKzB,OAJK,IACH,EAAQ,AAKZ,WACE,GAAI,CACF,MAAM,AAAI,OACZ,CAAE,MAAO,EAAK,CACZ,IAAI,EAAW,AAAA,CAAA,GAAK,EAAI,KAAI,AAAJ,EAAO,KAAK,CAAC,oEACrC,GAAI,EAGF,MAMI,AAAA,CAAA,GANc,CAAO,CAAC,EAAE,AAMnB,EAAK,OAAO,CAAC,0EAA2E,MAAQ,GAJ7G,CACA,MAAO,GACT,IAhBI,CAAS,CAAC,EAAG,CAAG,GAEX,CACT,EA4BA,EATA,SAAmB,CAAG,EACpB,IAAI,EAAU,AAAC,CAAA,GAAK,CAAA,EAAK,KAAK,CAAC,iEAC/B,GAAI,CAAC,EACH,MAAM,AAAI,MAAM,oBAElB,OAAO,CAAO,CAAC,EAAE,AACnB,C,G,E,Q,S,C,C,C,E,E,E,O,C,W,W,O,C,G,E,E,O,C,kB,W,O,C,GCjCA,IAAM,EAAe,CACjB,KAAK,CACD,SAAS,qBACT,gBAAgB,+BACpB,EACA,MAAM,CACF,SAAU,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC5D,gBAAiB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,aACxE,EACA,IAAI,CACA,SAAS,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC3D,gBAAgB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAG,aACzE,CACJ,EAEa,EAAW,EAjBX,GAiB6B,CAAC,QAAQ,CACtC,EAAkB,EAlBlB,GAkBoC,CAAC,eAAe,A,G,E,Q,S,C,C,C,E,E,E,O,C,U,W,O,C,GCqDjE,IAAA,EAF6B,IArE7B,MAgBI,mBAAmB,CAAO,CAAE,CAAK,CAAE,CAAS,CAAE,CAAa,CAAE,CAAU,CAAE,CAAgB,CAAE,CAAe,CAAE,CAgBxG,IAAI,CAAC,sBAAsB,CAdvB,4BAA4B,EAA5B,+DACkD,EADlD,kKAOA,EAPA,wGAUwE,EAAc,YACrF,CAAA,AAAQ,OAAR,EAAa,cAAgB,EAAQ,0CAA4C,EAAY,YAAY,EAAA,EAC1G,UAGJ,IAAI,CAAC,eAAe,CAAG,EACvB,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,OACxB,CAEA,iBAAkB,CACd,OAAO,SAAS,cAAc,CAAC,eACnC,CAEA,uBAAuB,CAAI,CAAE,CACzB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,kBAAkB,SAAS,CAAG,CAC3D,CAEA,kBAAkB,CAAa,CAAE,CAC7B,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,QACjB,GACC,GAER,CAEA,kBAAmB,CACf,IAAM,EAAQ,SAAS,aAAa,CAAC,OAYrC,OAXA,EAAM,SAAS,CAAC,GAAG,CAAC,QAAS,QAC7B,EAAM,YAAY,CAAC,KAAM,gBACzB,EAAM,YAAY,CAAC,WAAY,MAC/B,EAAM,YAAY,CAAC,OAAQ,UAC3B,EAAM,YAAY,CAAC,kBAAmB,qBACtC,EAAM,YAAY,CAAC,cAAe,QAClC,EAAM,SAAS,CACX,mHAGJ,SAAS,IAAI,CAAC,WAAW,CAAC,GACnB,CACX,CAjEA,aAAc,CAGV,GAFA,IAAI,CAAC,KAAK,CAAG,IAAI,CAAC,eAAe,GACjC,IAAI,CAAC,eAAe,CAAG,KACnB,CAAC,IAAI,CAAC,KAAK,CAAE,CACb,IAAI,CAAC,KAAK,CAAG,IAAI,CAAC,gBAAgB,GAClC,IAAM,EAAO,IAAI,CACjB,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,gBAAiB,SAAU,CAAK,EAC1C,EAAK,eAAe,GACnB,EAAK,eAAe,GACpB,EAAK,eAAe,CAAG,KAE/B,EACJ,CACJ,CAqDJ,C,G,E,Q,S,C,C,C,E,E,E,O,C,c,W,O,C,G,E,E,O,C,oB,W,O,C,G,E,E,O,C,W,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,sB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,e,W,O,C,G,E,E,O,C,c,W,O,C,G,E,E,O,C,gB,W,O,C,G,E,E,O,C,qB,W,O,C,G,E,E,O,C,oB,W,O,C,G,I,E,E,SCjEO,IAAM,EAAc,sBACd,EAAoB,4BAEpB,EAAW,OAAO,MAAM,CAAC,CAClC,KAAO,EACP,MAAQ,EACR,MAAQ,EACR,OAAS,EACT,MAAQ,CACZ,GAEa,EAAe,OAAO,MAAM,CAAC,CACtC,OAAS,EACT,QAAU,EACV,QAAU,CACd,GAEa,EAAsB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,eAAgB,CAAC,EAAa,OAAO,CAAC,CAAG,gBAAiB,CAAC,EAAa,OAAO,CAAC,CAAG,eAAe,EACjJ,EAAqB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,SAAU,CAAC,EAAa,OAAO,CAAC,CAAG,YAAa,CAAC,EAAa,OAAO,CAAC,CAAG,SAAS,EAEhI,EAAc,AAAC,IACxB,IAAM,EAAgB,SAAS,cAAc,CAAC,SAC9C,CAAA,EAAc,SAAS,CAAG,CAAC,6FAA6F,EAAE,EAAe,CAAC,CAC1I,EAAc,SAAS,CAAC,MAAM,CAAC,gBACnC,EAEa,EAAe,KAExB,AADsB,SAAS,cAAc,CAAC,UAChC,SAAS,CAAC,GAAG,CAAC,gBAChC,EAEa,EAAc,MAAO,EAAW,EAAY,EAAM,KAC3D,IAAM,EAAU,CACZ,OAAQ,GAAc,MACtB,QAAS,CACL,eAAgB,mBAChB,OAAU,kBACd,CACJ,EACG,GACC,CAAA,EAAQ,IAAI,CAAG,KAAK,SAAS,CAAC,EADlC,EAGA,GAAI,CACA,GAAqB,EAAY,GACjC,IAAM,EAAW,MAAM,MAAM,AAAA,EAAA,QAAO,CAAI,EAAW,EACnD,CAAA,GAAqB,IACrB,IAAM,EAAa,MAAM,EAAS,IAAI,GACtC,GAAI,GAAc,CAAC,EAAW,KAAK,CAC/B,OAAO,EAEP,MAAQ,AAAA,CAAA,MAAA,EAAA,KAAA,EAAA,EAAY,KAAK,AAAL,GAAS,mBAErC,CAAE,MAAO,EAAO,CAEZ,OADA,GAAqB,IACd,CACX,CACJ,EAGa,EAAgB,AAAC,IAC1B,IAAM,EAAY,EAAI,WAAW,CAAC,KAC5B,EAAa,EAAI,WAAW,CAAC,KACnC,OAAQ,EAAY,GAAc,EAAY,GAAK,AAAqB,IAArB,EAAI,OAAO,CAAC,OAAe,EAAa,GAAK,EAAK,MAAM,CAAG,EAAc,CAChI,EAEa,EAAqB,KAC9B,IAAM,EAAa,SAAS,cAAc,CAAC,SACxC,AAAyB,CAAA,iBAAzB,OAAO,QAAQ,CAAC,IAAI,EAAuB,AAA2B,qBAA3B,OAAO,QAAQ,CAAC,MAAM,CAChE,EAAW,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,CAAG,cAE3C,EAAW,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,AAEhD,EAEwB,iCAAiC,IAAI,CAAC,UAAU,SAAS,EAE1E,IAAM,EAAoB,CAAE,MAAO,CAAC,iBAAiB,CAAA,EAAO,iBAAiB,CAAA,EAAO,gBAAgB,CAAA,EAAO,QAAS,EAAG,aAAc,CAAE,CAAC,C,G,E,Q,S,C,C,C,E,E,E,O,C,uB,W,O,C,G,E,E,O,C,2B,W,O,C,G,I,E,E,SC5ExI,IAAM,EAAuB,CAAC,EAAa,KAC9C,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,IACA,EAAS,MAAA,EAAA,KAAA,EAAA,EAAa,cAAc,CACxC,EAEa,EAAyB,KAElC,EAAE,qBAAqB,KAAK,CAAC,CACzB,SAAU,SACV,SAAU,CAAA,CACd,GACA,EAAE,qBAAqB,KAAK,CAAC,QAC7B,SAAS,cAAc,CAAC,qBAAqB,OAAO,CAAG,EACvD,SAAS,cAAc,CAAC,qBAAqB,OAAO,CAAG,CAC3D,EAEM,EAAkB,UAEhB,AADS,CAAA,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,eAAgB,MAAO,KAAM,aAA5D,EACS,EAAE,EACP,EAAE,qBAAqB,KAAK,CAAC,OAErC,EACM,EAAkB,UAEhB,AADS,CAAA,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,eAAgB,MAAO,KAAM,0BAA5D,EACS,EAAE,GACP,EAAE,qBAAqB,KAAK,CAAC,QAC7B,OAAO,QAAQ,CAAC,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,CAErD,EAEa,EAA2B,AAAC,IAIrC,GAAI,CAFY,SAAS,cAAc,CAAC,oBAE1B,CACV,IAAM,EAAc,CAAC;;;;;;;;wDAQ2B,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC,oCAAoC,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC;;;;;;;;cAQhI,CAAC,CACP,SAAS,oBAAoB,CAAC,EAAa,CAAC,EAAE,CAAC,kBAAkB,CAAC,WAAY,EAClF,CACA,GACJ,C,G,E,Q,S,C,C,C,E,E,E,O,C,iB,W,O,C,G,E,E,O,C,sB,W,O,C,G,E,E,O,C,wB,W,O,C,G,I,E,E,S,E,E,SCrDO,IAAM,EAAiB,UAE1B,IAAM,EAAW,MAAM,MAAM,AAAA,EAAA,QAAO,CAAI,kBACpC,EAAS,KAKb,MAJG,CAAA,MAAA,EAAA,KAAA,EAAA,EAAU,EAAE,AAAF,GAET,CAAA,EADiB,MAAM,EAAS,IAAI,EACpC,EAEG,CACX,EAEa,EAAsB,KAC/B,AAAA,CAAA,EAAA,EAAA,OAAW,AAAX,EAAa,kBAAkB,CAC3B,8BACA,KACA,GACA,QACA,QACA,YAER,EAEa,EAAwB,CAAC,EAAY,EAAQ,KACtD,IAAM,EAAU,EAAY,eAAe,CACrC,EAAqB,SAAS,cAAc,CAAC,GAC/C,EAAc,iCACd,EAAW,KACf,EAAQ,OAAO,CAAC,AAAC,IACb,GAAI,EAAS,CAEL,EADD,EAAQ,IAAI,GAAK,EACL,YAEA,KAEf,IAAM,EAAW,CAAC,eAAe,EAAE,EAAQ,IAAI,CAAC,EAAE,EAAE,GAAkB,IAAI,EAAE,EAAQ,KAAK,CAAC,SAAS,CAAC,CACpG,GAAe,CACnB,CACJ,GACA,IAAM,EAAe,CAAC,2DAA2D,EAAE,EAAY,SAAS,CAAC,CACzG,EAAkB,kBAAkB,CAAC,aAAc,EACvD,C,GC5CA,AAAA,EAAA,SAAA,QAAA,CAA8C,AAAA,EAAA,SAAA,YAAA,CAA6C,SAAS,KAAK,KAAK,CAAC,oH,I,E,E,S,E,E,S,G,E,S,E,UGExG,MAAM,EAAoB,CAAC,EAAQ,KACtC,EAAuB,EAAQ,GAC/B,SAAS,gBAAgB,CAAC,sBAAsB,OAAO,CAAC,SAAU,CAAO,EACrE,EAAQ,gBAAgB,CAAC,QAAS,SAAU,CAAK,EAE7C,IAAA,EADA,EAAM,cAAc,GACpB,AAAuB,OAAvB,CAAA,EAAA,SAAS,aAAa,CAAC,qBAAA,GAAvB,AAAA,KAAA,IAAA,GAAA,EAA8C,SAAS,CAAC,MAAM,CAAC,qBAC/D,EAAM,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,qBAElC,EADc,EAAM,aAAa,CAAC,YAAY,CAAC,gBAC7B,EACtB,EACJ,EACJ,EAEM,EAAyB,CAAC,EAAQ,KACpC,IAAM,EAAS,SAAS,cAAc,CAAC,oBACnC,EAAc,GAEd,EADD,EAAO,EAAE,CACM,CAAC,2BAA2B,EAAE,EAAqB,GAAK,oBAAoB;oFACd,CAAC,CAE/D,CAAC,2BAA2B,EAAE,EAAqB,GAAK,oBAAoB;oFACd,CAAC,CAEjF,EAAO,SAAS,CAAG,CACvB,EAEO,SAAS,EAAS,CAAO,CAAE,CAAM,EACpC,IAAM,EAAM,IAAI,IAAI,OAAO,QAAQ,CAAC,IAAI,EACxC,EAAI,YAAY,CAAC,MAAM,CAAC,UACxB,EAAI,YAAY,CAAC,MAAM,CAAC,gBACxB,QAAQ,YAAY,CAAC,KAAM,KAAM,GACjC,IAAI,EAAa,CAAA,EACjB,OAAQ,GACJ,IAAK,cAED,AAAA,GADA,EAAa,CAAA,GAEb,KACJ,KAAK,UACD,AAAA,KACA,KACJ,KAAK,WACD,SAAS,cAAc,CAAC,kBAAkB,SAAS,CAAC,MAAM,CAAC,UAC3D,SAAS,cAAc,CAAC,kBAAkB,MAAM,CAAG,CAAA,EAC/C,EAAO,EAAE,EACT,CAAA,EAAa,CAAA,CADjB,EAGA,AAAA,GAAmB,GACnB,KACJ,SACI,QAAQ,GAAG,CAAC,kBACpB,CACJ,C,I,E,E,SErDA,IAAI,EAAY,KAET,MAAM,EAAa,AAAC,IACvB,IAAI,EAAS,CAAA,EAIb,MAHI,CAAA,AAAa,oBAAb,GAAkC,EAAS,QAAQ,CAAC,2BAA6B,EAAS,QAAQ,CAAC,yBAAA,GACnG,CAAA,EAAS,CAAA,CADb,EAGO,CACX,EAEM,EAAqB,IAChB,EAGE,EAAqB,AAAC,IAC/B,EAAY,CAChB,EAEa,EAAwB,CAAC,EAAU,KAExC,EAAW,IAGE,IAAa,IAK5B,EAAyB,AAAC,IAE5B,IAAM,EAAgB,CAAC,EACjB,EAAoB,CAAC,EAoB3B,OAlBA,EAAiB,OAAO,CAAC,AAAA,IAErB,IAAM,EAAe,EAAY,cAAc,CACzC,EAAS,EAAY,OAAO,AAE9B,AAAiB,QAAjB,GACK,CAAa,CAAC,EAAa,EAC5B,CAAA,CAAa,CAAC,EAAa,CAAG,EAAE,AAAF,EAElC,CAAa,CAAC,EAAa,CAAC,IAAI,CAAC,KAE5B,CAAiB,CAAC,EAAO,EAC1B,CAAA,CAAiB,CAAC,EAAO,CAAG,EAAE,AAAF,EAEhC,CAAiB,CAAC,EAAO,CAAC,IAAI,CAAC,GAEvC,GAEO,CAAE,cAAA,EAAe,kBAAA,CAAkB,CAC9C,EAGM,EAAkC,CAAC,EAAkB,KAEvD,IAAM,EAAgB,CAAC,EACjB,EAAc,EAAE,CAgBtB,OAdA,EAAiB,OAAO,CAAC,AAAA,IAErB,IAAM,EAAe,EAAY,cAAc,AAE3C,AAAkB,QAAlB,GAA4B,IAAiB,GACxC,CAAa,CAAC,EAAa,EAC5B,CAAA,CAAa,CAAC,EAAa,CAAG,EAAE,AAAF,EAElC,CAAa,CAAC,EAAa,CAAC,IAAI,CAAC,IAEjC,EAAY,IAAI,CAAC,EAEzB,GAEO,CAAE,cAAA,EAAe,YAAA,CAAW,CACvC,EAEM,EAA2B,AAAC,IAE9B,IAAM,EAAgB,CAAC,EACjB,EAAkB,CAAC,EACnB,EAAc,EAAE,CAqBtB,OAnBA,EAAiB,OAAO,CAAC,AAAA,IAErB,IAAM,EAAe,EAAY,cAAc,AAE3C,AAAiB,QAAjB,GACK,CAAa,CAAC,EAAa,EAC5B,CAAA,CAAa,CAAC,EAAa,CAAG,EAAE,AAAF,EAElC,CAAa,CAAC,EAAa,CAAC,IAAI,CAAC,IAC1B,EAAY,YAAY,CAAC,MAAM,EACjC,EAAgB,OAAU,EAC3B,CAAA,EAAgB,OAAU,CAAG,EAAE,AAAF,EAEjC,EAAgB,OAAU,CAAC,IAAI,CAAC,IAEhC,EAAY,IAAI,CAAC,EAEzB,GAEO,CAAE,cAAA,EAAe,gBAAA,EAAiB,YAAA,CAAY,CACzD,EAGM,EAAmC,AAAC,IAEtC,IAAM,EAAsB,CAAC,EACvB,EAAc,EAAE,CAEtB,IAAK,IAAM,KAAQ,EAEX,AAAmC,IAAnC,CAAiB,CAAC,EAAK,CAAC,MAAM,CAC9B,EAAY,IAAI,CAAC,CAAiB,CAAC,EAAK,CAAC,EAAE,GAEtC,CAAmB,CAAC,EAAK,EAC1B,CAAA,CAAmB,CAAC,EAAK,CAAG,EAAE,AAAF,EAEhC,CAAmB,CAAC,EAAK,CAAG,CAAiB,CAAC,EAAK,EAG3D,MAAO,CAAE,YAAA,EAAa,oBAAA,CAAoB,CAC9C,EAEa,EAAkC,AAAC,IAE5C,GAAM,CAAA,cAAE,CAAa,CAAA,kBAAE,CAAiB,CAAE,CAAG,EAAuB,GAE9D,CAAA,YAAE,CAAW,CAAA,oBAAE,CAAmB,CAAE,CAAG,EAAiC,GAE9E,MAAO,CACH,cAAA,EACA,oBAAA,EACA,YAAA,CACJ,CACJ,EAEa,EAAmC,AAAC,IAE7C,GAAM,CAAA,cAAE,CAAa,CAAA,gBAAE,CAAe,CAAA,YAAE,CAAW,CAAE,CAAG,EAAyB,GAEjF,MAAO,CACH,cAAA,EACA,gBAAA,EACA,YAAA,CACJ,CACJ,EAEa,EAAuC,CAAC,EAAkB,KAEnE,GAAM,CAAA,cAAE,CAAa,CAAA,YAAE,CAAW,CAAE,CAAG,EAAgC,EAAkB,GAEzF,MAAO,CACH,cAAA,EACA,YAAA,CACJ,CACJ,EAEa,EAAgC,AAAC,IAC1C,IAAM,EAAa,EAAE,CACf,EAAyB,CAAC,EAC1B,EAAmB,CAAC,EAY1B,OAXA,EAAiB,OAAO,CAAC,AAAA,IAErB,GADA,CAAsB,CAAC,EAAY,IAAI,CAAC,CAAG,EACxC,MAAA,EAAA,KAAA,EAAA,EAAa,MAAM,CAAC,MAAM,CAAC,CAC1B,IAAI,IAAI,EAAI,EAAG,EAAI,EAAY,MAAM,CAAC,MAAM,CAAE,IAAI,CAC9C,IAAM,EAAe,EAAY,MAAM,CAAC,EAAE,AAC1C,CAAA,EAAa,SAAY,CAAG,EAAY,IAAI,CAC5C,CAAgB,CAAC,EAAa,IAAI,CAAC,CAAG,CAC1C,CACA,EAAW,IAAI,IAAI,EAAY,MAAM,CACzC,CACJ,GACO,CAAE,WAAA,EAAY,uBAAA,EAAwB,iBAAA,CAAiB,CAClE,E,I,E,E,SD5KA,MAAM,EAAN,IAAA,IEHiB,AAAA,EAAA,SAAA,YAAA,CAA6C,SAAW,0DFKnE,EAAmB,CAAE,KAAQ,mBAAoB,KAAQ,gBAAiB,OAAU,cAAe,EACnG,EAAoB,CAAE,KAAQ,oBAAqB,KAAQ,iBAAkB,OAAU,eAAgB,EACvG,EAAW,CAAE,KAAQ,EAAA,iBAAgB,CAAG,KAAQ,EAAA,WAAU,AAAE,EAI5D,EACN,CAAC;;mBAEkB,EAAE,EAAa;;;;;;;;;;;;MAY5B,CAAC,CAgDM,EAAmB,CAAC,EAA2B,EAAoB,EAAiB,EAAU,KACvG,IAAM,EAAwB,GAA8B,CAAE,AAAA,EAAW,IAAc,GAAuB,EAC9G,MAAO,CAAC;cACE,EAAE,EAAuB,wGAA0G,GAAG;cACtI,EAAE,EAA4B,6HAA+H,EAA4B,2BAA6B,GAAG;cACzN,EAAI,CAAC,AAAA,EAAW,IAAc,EAAsB,oHAAsH,EAAqB,2BAA6B,GAAG;cAC/N,EAAE,EAAkB,sHAAwH,EAAkB,2BAA6B,GAAG;kJAC1D,EAAE,EAAW;iBAC9I,CAAC,AAClB,EAEa,EAAyB,CAAC,EAAc,KACjD,SAAS,cAAc,CAAC,QAAQ,SAAS,CAAG,GAC5C,SAAS,cAAc,CAAC,QAAQ,kBAAkB,CAAC,aAAc,GACjE,SAAS,cAAc,CAAC,iBAAiB,SAAS,CAAG,GACrD,SAAS,cAAc,CAAC,iBAAiB,kBAAkB,CAAC,aAAc,GAC1E,SAAS,cAAc,CAAC,eAAe,eAAe,CAAC,WAC3D,EAEa,EAAyB,CAAC,EAAS,KAGzB,IAAA,EAuBD,EAIkD,EA7BpE,IAAM,EAAc,AAAA,EAAsB,EAAU,EAAQ,QAAQ,EAC9D,EAAoB,EAAQ,YAAY,CAAC,MAAM,CAC/C,EAAa,MAAA,EAAA,KAAA,EAAA,AAA2C,OAA3C,CAAA,EAAA,EAAS,MAAM,CAAC,AAAA,CAAA,MAAA,EAAA,KAAA,EAAA,EAAS,MAAM,CAAC,MAAM,AAAN,EAAS,EAAE,AAAF,GAAzC,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAA6C,IAAI,CAEpE,MAAO,CAAC;;cAEE,EAAE,AAAA,GAAU,CAAC,mBAAmB,EAAE,AAAA,EAAA,mBAAkB,AAAC,CAAC,EAAQ,OAAO,CAAC,CAAC,EAAE,EAAE,AAAA,EAAA,kBAAiB,AAAC,CAAC,EAAQ,OAAO,CAAC,CAAC,OAAO,CAAC,CAAG,GAAG;cAC7H,EAAE,EAAQ,aAAa,CAAG,kDAAoD,GAAG;cACjF,EAAE,EAAQ,WAAW,CAAG,+CAAiD,GAAG;;;+BAG3D,EAAE,AAAA,GAAqB,EAAQ,IAAI,CAAC;+CACpB,EAAE,EAAQ,KAAK,CAAC;;;uBAGxC,EAAE,EACH,CAAC;;iCAEU,EAAE,AAAA,EAAA,WAAU,CAAI,EAAQ,UAAU,CAAC;0BAC1C,EAAE,EAAQ,QAAQ,CAAC;;6BAEhB,CAAC,CAAE,GAAG;;6CAEU,EAAE,EAAqB,kBAAoB,EAAqB,GAAG;uDACzD,EAAE,EAAQ,WAAW,EAAI,GAAG;oBAC/D,EAAE,AAAA,CAAA,AAAc,OAAd,CAAA,EAAA,EAAQ,MAAM,AAAN,GAAR,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAgB,MAAM,AAAN,EAClB,CAAC,uFAAuF,EAAE,EAAa,CAAC,eAAe,EAAE,EAAW,CAAC,CAAC,CAAG,GAAG;yFACvE,CAAC,CAAG,GAAG;;yDAEvC,EAAE,WAAA,CAAA,AAA2B,OAAd,CAAA,EAAA,EAAQ,MAAM,AAAN,GAAR,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAgB,MAAM,AAAN,EAAO;;;;gBAI/E,CAAC,AACjB,EAEa,EAAgC,CAAC,EAAM,EAAW,KAIxC,IAAA,EAqBP,EAIgD,EA3B5D,IAAM,EAAc,AAAA,EAAsB,EAAU,EAAK,QAAQ,EAC3D,EAAoB,EAAK,YAAY,CAAC,MAAM,CAC5C,EAAa,MAAA,EAAA,KAAA,EAAA,AAAqC,OAArC,CAAA,EAAA,EAAM,MAAM,CAAC,AAAA,CAAA,MAAA,EAAA,KAAA,EAAA,EAAM,MAAM,CAAC,MAAM,AAAN,EAAS,EAAE,AAAF,GAAnC,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAuC,IAAI,CAE9D,MAAO,CAAC;cACE,EAAE,AAAA,GAAU,CAAC,mBAAmB,EAAE,AAAA,EAAA,mBAAkB,AAAC,CAAC,EAAK,OAAO,CAAC,CAAC,EAAE,EAAE,AAAA,EAAA,kBAAiB,AAAC,CAAC,EAAK,OAAO,CAAC,CAAC,OAAO,CAAC,CAAG,GAAG;cACvH,EAAE,EAAK,aAAa,CAAG,wDAA0D,GAAG;cACpF,EAAE,EAAK,WAAW,CAAG,qDAAuD,GAAG;;yBAEpE,EAAE,AAAA,GAAqB,EAAK,IAAI,CAAC;2CACf,EAAE,EAAK,KAAK,CAAC;;;cAG1C,EAAG,AAAc,SAAd,GAAwB,EACzB,mHAEa,EAAA,WAAU,CAAI,EAAK,UAAU,CAAG,qBAAuB,EAAK,QAAQ,CAFjF,wBAIgB,GAAG;uCACI,EAAE,EAAqB,kBAAoB,EAAqB,GAAG;;gBAE1F,EAAE,EAAK,WAAW,EAAI,GAAG;;cAE3B,EAAE,AAAA,CAAA,AAAW,OAAX,CAAA,EAAA,EAAK,MAAM,AAAN,GAAL,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAa,MAAM,AAAN,EAAS,CAAC,uFAAuF,EAAE,EAAa,CAAC,eAAe,EAAE,EAAW,CAAC,CAAC,CAAG,GAAG;;2BAEvJ,CAAC,CAAG,GAAG;;iDAEe,EAAE,WAAA,CAAA,AAAwB,OAAX,CAAA,EAAA,EAAK,MAAM,AAAN,GAAL,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAa,MAAM,AAAN,EAAO;;kBAElE,CAAC,AACnB,EAEa,EAA6B,CAAC,EAAW,EAAU,EAAY,EAAS,KAEjF,IAAM,EAAa,CAAgB,CAAC,EAAU,CACxC,EAAc,CAAiB,CAAC,EAAU,CAC1C,EAAM,CAAQ,CAAC,EAAU,CACzB,EAAiB,CAAC,mBAAmB,EAAE,EAAW;8DACE,EAAE,EAAS;8BAC3C,EAAE,EAAM,CAAC,QAAQ,EAAE,EAAM,EAAQ,yBAAyB,EAAE,EAAW,IAAI,CAAC,CAAG,CAAC,EAAE,EAAW,CAAC,CAAC;iCAC5F,CAAC,CAE9B,MAAO,CAAC,SAAS,EAAE,EAAQ,cAAc,EAAE,EAAY;kBACzC,EAAE,EAAe;;;kBAGjB,EAAE,EAAU;;;kBAGZ,CAAC,AACnB,EAEa,EAAwB,CAAC,EAAU,KAGxC,IAAA,EAAmC,EAFvC,IAAM,EAAmB,SAAS,cAAc,CAAC,oBAC3C,EAAiB,SAAS,cAAc,CAAC,2BAI/C,GAHI,CAAA,AAA0B,OAA1B,CAAA,EAAA,EAAiB,SAAS,AAAT,GAAjB,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAA4B,EAAE,AAAF,GAAO,AAAA,CAAA,AAA0B,OAA1B,CAAA,EAAA,EAAiB,SAAS,AAAT,GAAjB,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAA4B,EAAE,AAAF,IAAO,eACxE,EAAiB,WAAW,CAAC,EAAiB,SAAS,EAErD,CAAC,GAAY,CAAC,EAAiB,SAAS,EAAI,CAAC,EAAgB,CAC7D,IAAM,EAAkB,SAAS,aAAa,CAAC,MAC/C,CAAA,EAAgB,EAAE,CAAG,cACrB,EAAgB,SAAS,CAAG,AAAA,GAAU,GAAI,CAAC,EAAE,EAAc,CAAC,CAC5D,SAAS,cAAc,CAAC,oBAAoB,WAAW,CAAC,EAC5D,CACG,GACD,SAAS,cAAc,CAAC,QAAQ,cAAc,CAAC,CAC3C,SAAU,QACd,EAEN,EAEa,EAA6B,CAAC,EAAiB,EAAU,KAElE,EAAsB,CAAA,GACtB,IAAM,EAA0B,SAAS,aAAa,CAAC,MACvD,CAAA,EAAwB,EAAE,CAAG,gBAC7B,EAAwB,SAAS,CAAG,CAAC;;;mEAG0B,EAAE,EAAgB;qGACgB,EAAE,AAAA,EAAA,WAAU,CAAI,EAAW,kBAAkB,EAAE,EAAS;;8CAE/G,CAAC,CAC3C,SAAS,cAAc,CAAC,oBAAoB,WAAW,CAAC,EAC5D,EAEa,EAAuB,CAAC,EAAU,KAE3C,EAAsB,CAAA,GAEtB,IAAM,EAAoB,SAAS,aAAa,CAAC,MACjD,CAAA,EAAkB,EAAE,CAAG,gBACvB,EAAkB,SAAS,CAAG,CAAC;;;4GAGyE,EAAE,EAAQ;;;;;oFAKlC,EAAE,EAAW,CAAC,EAAE,EAAS,CAAC,CAAG,GAAG;;;;;wCAK5E,CAAC,CACrC,SAAS,cAAc,CAAC,oBAAoB,WAAW,CAAC,EAC5D,EG7OA,IAAI,EAAoB,KACpB,EAAyB,KAEzB,EAAY,CAAA,EAEZ,EAAa,KAEb,EAAyB,KAE7B,MAAM,EAAoB,CACtB,UAAW,YACX,WAAY,CAAA,EACZ,OAAQ,GACR,UAAW,UACX,cAAe,UACf,SAAU,EACV,OAAQ,EACR,UAAW,EACX,YAAa,CACjB,EAEM,EAAkB,IAEC,AADP,SAAS,cAAc,CAAC,YACX,YAAY,CAAC,qBAItC,EAAe,CAAC,EAAS,KACP,IAAA,EAApB,IAAM,EAAA,AAAkE,OAApD,CAAA,EAAA,SAAS,aAAa,CAAC,CAAC,eAAe,EAAE,EAAQ,EAAE,CAAC,CAAA,GAApD,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAuD,UAAU,CAAC,WAAW,CAC7F,IACI,EACA,EAAY,SAAS,CAAC,OAAO,CAAC,UAAW,mBAEzC,EAAY,SAAS,CAAC,OAAO,CAAC,iBAAiB,WAC/C,EAAY,SAAS,CAAC,MAAM,CAAC,YAGzC,EAEM,EAAqB,AAAC,IACxB,IAAM,EAAqB,SAAS,cAAc,CAAC,sBAAsB,UAAU,CAAC,WAAW,CAC3F,GACA,EAAmB,SAAS,CAAC,MAAM,CAAC,WACpC,EAAmB,SAAS,CAAC,GAAG,CAAC,cAEjC,EAAmB,SAAS,CAAC,MAAM,CAAC,YACpC,EAAmB,SAAS,CAAC,GAAG,CAAC,WAEzC,EAEM,EAAmB,KACH,EAAW,SAAS,GAIlC,EAAW,KAAK,GAFhB,EAAW,IAAI,EAIvB,EAEM,EAA+B,AAAC,IAChB,CAAA,MAAA,EAAA,KAAA,EAAA,EAAY,SAAS,EAAvC,IAEI,EAAa,EAAS,CAAA,GACtB,EAAW,KAAK,GAExB,EAEM,EAAyB,AAAC,IACzB,SAAS,cAAc,CAAC,iBAAiB,MAAM,EAC9C,CAAA,SAAS,cAAc,CAAC,iBAAiB,MAAM,CAAG,CAAA,CADtD,EAGA,IAAM,EAAe,GACA,CAAA,IAAiB,EAElC,KAEA,EAAa,EAAc,CAAA,GAC3B,EAA6B,GAC7B,GAAe,EAAS,CAAA,GAEhC,EAEM,EAAmB,CAAC,EAAU,KAChC,EAAY,EACZ,EAAW,MAAM,CAAC,GAClB,EAAW,IAAI,CAAC,EACpB,EAEM,EAAiB,CAAC,EAAS,KAC7B,IAAM,EAAa,SAAS,aAAa,CAAC,CAAC,eAAe,EAAE,EAAQ,EAAE,CAAC,EACvE,GAAG,EAAW,CACV,EAAW,OAAO,CAAG,KACrB,IAAM,EAAc,EAAW,UAAU,CAAC,WAAW,CACrD,EAAY,SAAS,CAAC,MAAM,CAAC,kBAC7B,EAAY,SAAS,CAAC,MAAM,CAAC,WAC7B,EAAY,SAAS,CAAC,GAAG,CAAC,WAC9B,CACA,EAAmB,CAAA,GACnB,IAAM,EAAY,GAAa,EAC/B,CAAA,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,4BAA8B,EAAU,UAAU,CAC7G,EAAW,OAAO,EACtB,EAEM,GAAwB,AAAC,IAC3B,IAAM,EAAa,GAAa,EAChC,CAAA,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,EAAU,UAAU,CAAG,MAAQ,EAAU,WAAW,AACnH,EAEM,GAAe,AAAC,GAGX,CAAA,CAAC,YAFY,CAAiB,CAAC,EAAS,CAAC,KAAK,CAEhC,WADF,CAAsB,CAAC,CAAiB,CAAC,EAAS,CAAC,SAAS,CAAC,CAAC,KAAK,AACvD,CAAA,EAGtB,GAA4B,AAAC,IACtC,IAAM,EAAa,AAAA,EAA8B,EAC7C,CAAA,EAAW,UAAU,CAAC,MAAM,GAC5B,SAAS,aAAa,CAAC,qBAAqB,KAAK,CAAC,OAAO,CAAG,QAC5D,EAAoB,EAAW,gBAAgB,CAC/C,EAAyB,EAAW,sBAAsB,CAElE,EAEM,GAAiB,MAAO,EAAS,KAChC,IACC,KACA,EAAW,OAAO,IAEtB,EAAa,KACb,KAEA,AADc,SAAS,cAAc,CAAC,YAChC,YAAY,CAAC,oBAAqB,GAExC,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,2BAE3D,AAD2B,SAAS,cAAc,CAAC,sBAChC,SAAS,CAAC,GAAG,CAAC,cAEjC,IAAM,EAAW,OAAO,QAAQ,CAAC,MAAM,CAAG,cAAgB,EAEtD,GACA,EAAuB,KAAK,GAGhC,IAAM,EAAS,AADf,CAAA,EAAyB,IAAI,eAA7B,EACsC,MAAM,AAGxC,CADa,CAAA,MAAM,MAAM,EAAU,CAAE,OAAA,CAAO,EAAA,EACnC,EAAE,CACX,EAAiB,EAAU,GAE3B,EAAe,EAAS,iBAEhC,EAEa,GAAwB,KAEjC,AADiB,SAAS,gBAAgB,CAAC,kBAClC,OAAO,CAAC,AAAA,IACb,IAAM,EAAU,EAAQ,YAAY,CAAC,eACrC,CAAA,EAAQ,OAAO,CAAG,KACd,EAAuB,EAC3B,CACJ,EACJ,EAEM,GAA8B,KACd,EAAW,SAAS,GAElC,EAAW,KAAK,GAEhB,EAAW,IAAI,EAEvB,EASM,GAAuB,IAClB,WAAW,MAAM,CAAC,GAGvB,GAAoB,KACtB,EAAW,KAAK,EACpB,EAEM,GAA+B,KACjC,EAAW,EAAE,CAAC,SAAU,KACpB,IAAM,EAAe,IACrB,EAAmB,CAAA,GACnB,EAAa,EAAc,CAAA,EAC/B,GAEA,EAAW,EAAE,CAAC,OAAQ,KAClB,IAAM,EAAe,IACrB,EAAmB,CAAA,GACnB,EAAa,EAAc,CAAA,EAC/B,GAGA,EAAW,EAAE,CAAC,UAAW,AAAC,IACtB,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,CAAC,sBAAsB,EAAE,EAAW,CAAC,CAAC,AACrG,GAGA,EAAW,EAAE,CAAC,QAAS,KACnB,IAAM,EAAe,IACrB,EAAmB,CAAA,GACnB,EAAa,EAAc,CAAA,EAC/B,GAEA,EAAW,EAAE,CAAC,QAAS,AAAC,IAEpB,AAD2B,SAAS,cAAc,CAAC,sBAChC,SAAS,CAAC,MAAM,CAAC,cAEpC,GADqB,KAEjB,EACA,EAAW,IAAI,GAEf,EAAmB,CAAA,EAE3B,GAEA,EAAW,EAAE,CAAC,QAAS,AAAC,IACjB,GAEC,EADqB,IACQ,EAErC,EACJ,ELnNa,GAAqB,mCAC3B,IAAI,GAAU,CAAA,EAErB,MAAM,GAAwB,AAAC,IACvB,GACA,AAAA,CAAA,EAAA,EAAA,wBAAuB,AAAvB,EAAyB,SAEjC,EACM,GAAe,UAEnB,IAAM,EAAkB,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,WAAY,MAAO,KAAM,sBAQnE,OAPI,EAAgB,EAAE,GACpB,AAAA,EAAmB,EAAgB,IAAI,EACvC,SAAS,cAAc,CAAC,aAAa,KAAK,CAAC,OAAO,CAAG,OACrD,SAAS,cAAc,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,GACvD,SAAS,cAAc,CAAC,wBAAwB,SAAS,CAAG,CAAC,CAAC,EAAE,EAAgB,IAAI,CAAC,CAAC,CAAC,CACvF,AAAA,CAAA,EAAA,EAAA,oBAAmB,AAAnB,EAAqB,EAAiB,KAEjC,CACT,EAEa,GAAoB,UAC/B,IAAM,EAAW,kBACX,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,EAAU,MAAO,KAAM,uBACtD,GAAG,EAAK,YAAY,CAClB,OAAO,GAAe,EAAK,YAAY,CAAE,GAEzC,MAAM,6CAEV,EAEM,GAA2B,MAAO,EAAS,KAC/C,IAAM,EAAW,yBAAyB,EACpC,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,EAAU,MAAO,KAAM,mBACtD,GAAG,EAAK,YAAY,CAGlB,OAFA,AAAA,EAAmB,EAAK,QAAQ,EAChC,AAAA,EAAqB,EAAK,QAAQ,CAAE,GAC7B,GAAe,EAAK,YAAY,CAAE,GAEzC,MAAM,oCACH,EAAK,EAAE,CACR,AAAA,EAAS,WAET,AAAA,EAAS,cAGf,EAEM,GAAiC,MAAO,EAAe,KAC3D,IAAM,EAAW,yBAAyB,EACpC,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,EAAU,MAAO,KAAM,yBACtD,GAAG,EAAK,YAAY,CAGlB,OAFA,AAAA,EAAmB,EAAK,QAAQ,EAChC,AAAA,EAA2B,EAAK,eAAe,CAAE,EAAK,QAAQ,CAAE,EAAK,QAAQ,EACtE,GAAe,EAAK,YAAY,CAAE,GAEzC,MAAM,0CACH,EAAK,EAAE,CACR,AAAA,EAAS,WAET,AAAA,EAAS,cAGf,EAEa,GAAwB,MAAO,IAE1C,IAAM,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,sBAAuB,MAAO,KAAM,qBACnE,GAAG,EAAK,YAAY,CAClB,OAAO,GAAe,EAAK,YAAY,CAHxB,sBAGoC,GAEnD,MAAM,6CAEV,EAEa,GAAqB,MAAO,IAEvC,IAAM,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,gBAAiB,MAAO,KAAM,kBAC7D,GAAG,EAAK,YAAY,CAClB,OAAO,GAAe,EAAK,YAAY,CAHxB,gBAGoC,GAEnD,MAAM,6CAEV,EAEM,GAAiB,CAAC,EAAkB,EAAU,KAClD,SAAS,cAAc,CAAC,QAAQ,SAAS,CAAG,GAC5C,SAAS,cAAc,CAAC,iBAAiB,SAAS,CAAG,GACrD,IAAM,EAAoB,CAAC,EAAS,QAAQ,CAAC,2BAA6B,CAAC,EAAS,QAAQ,CAAC,0BAC1F,GACD,AAAA,EAAsB,CAAA,EAAO,GAE3B,CAAC,EAAiB,MAAM,EAAI,GAC9B,SAAS,cAAc,CAAC,kBAAkB,MAAM,CAAG,CAAA,EACnD,SAAS,cAAc,CAAC,kBAAkB,SAAS,CAAC,GAAG,CAAC,WAExD,GAAwB,EAAkB,GAE5C,AAAA,GAA0B,GAC1B,AAAA,IACF,EAEM,GAA0B,CAAC,EAAkB,KAC9C,EAAS,QAAQ,CAAC,0BAGnB,GAD+B,AAAA,EAAqC,EAD7C,EAAS,OAAO,CAAC,yBAA0B,KAElB,KAAM,EAAU,EAAiB,MAAM,EAC7E,AAAA,EAAW,GAKrB,GAD+B,AAAA,EAAiC,GAChB,kBAAmB,EAAU,EAAiB,MAAM,EAHpG,GADqB,AAAA,EAAgC,GACf,sBAAuB,EAAU,EAAiB,MAAM,CAKlG,EAEM,GAAuB,CAAC,EAAW,EAAW,KAElD,IAAI,EAAgB,GACpB,IAAK,IAAM,KAAQ,EAAW,CAC5B,IAAM,EAAU,CAAS,CAAC,EAAK,CAC3B,EAAY,GACZ,EAAa,GACb,EAAU,KAUd,IAAK,IAAM,KATR,AAAc,WAAd,EACD,EAAa,iBACJ,AAAc,SAAd,GACT,EAAa,OAAO,MAAM,CAAC,EAAQ,CAAC,EAAE,CAAC,iBAAiB,CACxD,EAAU,OAAO,MAAM,CAAC,EAAQ,CAAC,EAAE,CAAC,cAAc,GAElD,EAAa,OAAO,MAAM,CAAC,EAAQ,CAAC,EAAE,CAAC,QAAQ,CAC/C,EAAU,OAAO,MAAM,CAAC,EAAQ,CAAC,EAAE,CAAC,UAAU,EAE7B,GACjB,GAAa,AAAA,EAA8B,EAAM,EAAW,GAE9D,GAAiB,AAAA,EAA2B,EAAW,EAAQ,MAAM,CAAE,EAAY,EAAS,EAC9F,CACA,OAAO,CACT,EAEM,GAAiB,CAAC,EAAc,KACpC,IAAI,EAAe,GACb,EAAkB,EAAa,WAAW,CAKhD,OAJA,MAAA,GAAA,EAAiB,OAAO,CAAC,AAAC,IACxB,IAAM,EAAW,AAAA,EAAuB,EAAS,GACjD,GAAgB,CAClB,GACO,CACT,EAEM,GAA0B,CAAC,EAAc,EAAa,EAAU,KAEpE,IAAI,EAAe,GACb,EAA4B,OAAO,IAAI,CAAC,EAAa,aAAa,EAAE,MAAM,CAC1E,EAAqB,EAAc,OAAO,IAAI,CAAC,CAAY,CAAC,EAAY,EAAE,MAAM,CAAG,EACrF,EAAkB,EAAa,WAAW,CAAC,MAAM,CAEjD,EAA4B,GAG9B,CAAA,GADiB,GADC,EAAa,aAAa,CACK,OAAQ,EACzD,EAEE,EAAqB,GAIvB,CAAA,GADiB,GAFC,CAAY,CAAC,EAAY,CACtB,AAAc,oBAAd,EAAmC,SAAW,OACL,EAC9D,EAEE,EAAkB,GACpB,CAAA,GAAgB,GAAe,EAAc,EAD/C,EAIA,AAAA,EAAuB,EADD,AAAA,EAAiB,EAA2B,EAAoB,EAAiB,EAAU,GAEnH,EAEM,GAAc,UAClB,IAAM,EAAc,OAAO,QAAQ,CAAC,MAAM,CACpC,EAAU,EAAY,KAAK,CAAC,UAAU,CAAC,EAAE,CACzC,EAAiB,EAAY,KAAK,CAAC,gBAAgB,CAAC,EAAE,CACxD,EAAU,MAAM,KACpB,GAAU,EAAO,EAAE,CAChB,EACD,MAAM,GAAyB,EAAS,GAChC,EACR,MAAM,GAA+B,EAAgB,GAC5C,EAAO,EAAE,CAClB,MAAM,KAEN,MAAM,KAER,AAAA,EAAkB,EAAQ,GAAW,EACvC,CEvLI,CAAA,SAAS,cAAc,CAAC,aAAa,SAAS,CAC9C,CAAC;uCACkC,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC;;;uCAGzB,EAAE,GAAmB;;;uCAGrB,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC;;;;;IAK5D,CAAC,CAED,SAAS,cAAc,CAAC,eAAe,SAAS,CAChD,CAAC;gCAC2B,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAG,gBAAgB;;;;;;;;;kCASzC,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAG,qBAAqB;;;;;IAK9E,CAAC,CAKH,EAAE,cAAc,EAAE,CAAC,kBAAmB,SAAU,CAAK,EACnD,IAAM,EAAa,SAAS,cAAc,CAAC,cACtC,CAAA,EAAW,MAAM,EACpB,EAAW,KAAK,EAEpB,GFiJF,AAAA,CAAA,EAAA,EAAA,kBAAiB,AAAjB,IACA,KKzCI,AAD2B,SAAS,cAAc,CAAC,sBAChC,OAAO,CAAG,KACzB,IACJ,E,I,G,E,S,E,E,SC/KJ,IAAI,GAAc,CAAA,EAElB,MAAM,GAAoB,SAAS,cAAc,CAAC,2BAC5C,GAAa,SAAS,cAAc,CAAC,2BAErC,GAAuB,UACzB,IAAM,EAAW,MAAM,MAAM,wBAE7B,OADa,MAAM,EAAS,IAAI,EAEpC,EAEM,GAAiB,AAAC,IACpB,IAAI,EAAO,CAAC;gCACgB,EAAE,EAAK,IAAI,CAAC,aAAa,EAAE,EAAK,IAAI,CAAC,cAAc,EAAE,EAAK,KAAK,CAAC;gBAChF,EAAE,EAAK,IAAI,CAAC;2FAC+D,EAAE,EAAK,IAAI,CAAC,aAAa,EAAE,EAAK,IAAI,CAAC;2CACrF,EAAE,EAAK,KAAK,CAAC;aAC3C,CAAC,CAEV,GAAI,EAAK,YAAY,CAAC,MAAM,CAAG,GAAK,EAAK,WAAW,CAAC,MAAM,CAAG,EAAG,CAE7D,IAAK,IAAM,KADX,GAAQ,OACkB,EAAK,YAAY,EACvC,GAAQ,CAAC,8CAA8C,EAAE,AAAA,GAAqB,EAAY,IAAI,CAAC,KAAK,EAAE,EAAY,KAAK,CAAC,aAAa,CAAC,CAE1I,IAAK,IAAM,KAAc,EAAK,WAAW,CACrC,GAAQ,GAAe,GAE3B,GAAQ,OACZ,CACA,OAAO,CACX,EAEM,GAAa,UACf,IAAM,EAAgB,SAAS,cAAc,CAAC,4BACxC,EAAO,MAAM,KACf,EAAO,OACX,IAAK,IAAM,KAAc,EACrB,GAAQ,GAAe,GAE3B,GAAQ,QACR,EAAc,SAAS,CAAG,CAC9B,EAEM,GAAyB,KAExB,IACC,GAAc,CAAA,EACd,GAAW,SAAS,CAAI,OACxB,OAEA,GAAc,CAAA,EACd,GAAW,SAAS,CAAI,OACxB,KAER,EAEM,GAAgB,KAIlB,AAFoC,SAAS,gBAAgB,CAAC,0BAElC,OAAO,CAAC,AAAA,IAChC,EAAQ,eAAe,CAAC,UACxB,GAA8B,EAAQ,YAAY,CAAC,aAAc,EAAQ,YAAY,CAAC,cAC1F,GAIA,AAFsC,SAAS,gBAAgB,CAAC,8BAElC,OAAO,CAAC,AAAA,IAClC,EAAQ,eAAe,CAAC,YACxB,GAA4B,EAAQ,YAAY,CAAC,aAAc,EAAQ,KAAK,CAChF,EACJ,EAEM,GAAiB,KAInB,AAFoC,SAAS,gBAAgB,CAAC,0BAElC,OAAO,CAAC,AAAA,IAChC,EAAQ,YAAY,CAAC,SAAU,OACnC,GAIA,AAFsC,SAAS,gBAAgB,CAAC,8BAElC,OAAO,CAAC,AAAA,IAClC,EAAQ,YAAY,CAAC,WAAY,OACrC,EACJ,EAEM,GAA4B,UAC9B,GAAc,CAAA,EACd,GAAW,SAAS,CAAI,OACxB,MAAM,KACN,GAAW,gBAAgB,CAAC,QAAS,GAAwB,CAAA,EACjE,CAEA,OAAA,IAAA,GAAmB,gBAAgB,CAAC,QAAS,GAA2B,CAAA,GAExE,MAAM,GAA+B,MAAO,EAAO,EAAc,KAI7D,GAAI,AAAgB,SAAhB,AAFQ,EAAM,MAAM,CAEhB,OAAO,EAEX,GAAI,AAAqG,CAAA,GAArG,QAAQ,CAAC,4CAA4C,EAAE,EAAgB,wBAAwB,CAAC,EAAW,CAE3G,IAAM,EAAW,MAAM,MAAM,AAAA,EAAA,QAAO,CAAI,qBAAuB,EAAc,CAAE,OAAQ,QAAS,GAC5F,CAAA,MAAA,EAAA,KAAA,EAAA,EAAU,EAAE,AAAF,GACV,GAAgC,EAGxC,MACI,EAAM,MAAM,CAAC,OAAO,CAAG,CAAA,EAGnC,EAEM,GAAkC,AAAC,IAGlC,IAAA,EAFH,IAAM,EAAmB,SAAS,cAAc,CAAC,GAC7C,EAAM,KACP,CAAA,MAAA,EAAA,KAAA,EAAA,AAA6B,OAA7B,CAAA,EAAA,EAAkB,WAAW,AAAX,GAAlB,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAA+B,OAAO,AAAP,IAAY,OAC1C,EAAM,MAAM,IAAI,CAAC,EAAiB,WAAW,CAAC,gBAAgB,CAAC,WAAW,GAAG,CAAC,AAAA,GAAM,EAAG,EAAE,EACzF,EAAiB,WAAW,CAAC,MAAM,IAEvC,EAAiB,MAAM,GACvB,GAA6B,GAC7B,SAAS,cAAc,CAAC,iBAAiB,GAAc,MAAM,GAC7D,GAAO,EAAI,OAAO,CAAC,AAAA,IACf,GAA6B,EACjC,GAEG,IADoB,OAAO,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE,EAEnE,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAG,OAAO,QAAQ,CAAC,MAAM,AAAN,CAE/C,EAEM,GAA+B,AAAC,IAClC,IAAM,EAAmB,SAAS,cAAc,CAAC,GAC9C,GACC,EAAiB,MAAM,EAE/B,EAEM,GAAgC,CAAC,EAAc,KACjD,SAAS,cAAc,CAAC,iBAAmB,GAAc,OAAO,CAAE,MAAO,IACrE,MAAM,GAA6B,EAAO,EAAc,EAC5D,CACJ,EAEM,GAA8B,CAAC,EAAc,KAC/C,SAAS,cAAc,CAAC,qBAAqB,GAAc,MAAM,CAAG,AAAC,IACjE,GAAgB,EAAO,EAAc,EACzC,CACJ,EAEM,GAA4B,CAAC,EAAO,KAKtC,MAHuB,AAAA,EAAA,QAAO,CAAI,mBAGZ,CAClB,OAAQ,QACR,QAAS,CACT,eAAgB,kBAChB,EACA,KAAM,KAAK,SAAS,CAPX,CAAE,MAAO,EAAO,KAAM,CAAK,EAQxC,GACC,IAAI,GACJ,KAAK,CAAC,AAAA,IACH,QAAQ,KAAK,CAAC,wBAAyB,EAC3C,EACJ,EAEM,GAAkB,CAAC,EAAO,EAAQ,KACpC,IAAM,EAAW,EAAM,MAAM,CAAC,KAAK,CACnC,GAAG,IAAc,GACb,GAAI,AAAC,GAAY,AAAa,KAAb,EAKb,GAA0B,EAAU,OALN,CAC9B,EAAM,MAAM,CAAC,KAAK,CAAG,EACrB,MAAM,mCACN,MACJ,EAIR,EPlLM,GAAmB,SAAS,cAAc,CAAC,mBAC3C,GAAyB,SAAS,cAAc,CAAC,yBAEjD,GAAwB,KACxB,IAGF,SAAS,cAAc,CAAC,YAAY,KAAK,CAAG,GAC5C,SAAS,cAAc,CAAC,kBAAkB,KAAK,CAAG,GAElD,GAD8B,SAAS,cAAc,CAAC,gBAEtD,AAAA,CAAA,EAAA,GAAA,cAAa,AAAb,IAAiB,IAAI,CAAE,AAAA,IAChB,EACC,GAAmB,GAEnB,AAAA,CAAA,EAAA,GAAA,mBAAkB,AAAlB,GAER,IAZA,OAAO,QAAQ,CAAC,IAAI,CAAG,aAc3B,CAEA,OAAA,IAAA,GAAiB,gBAAgB,CAAC,QAAS,GAAuB,CAAA,GAClE,MAAA,IAAA,GAAuB,gBAAgB,CAAC,QAAS,GAAuB,CAAA,GAExE,MAAM,GAAqB,AAAC,IAC1B,SAAS,cAAc,CAAC,qBAAqB,SAAS,CAAG,GACzD,AAAA,CAAA,EAAA,GAAA,qBAAoB,AAApB,EAAsB,EAAM,oBAC9B,EAEM,GAAoB,AAAC,IACzB,MAAA,GAAA,EAAuB,gBAAgB,CAAC,QAAS,GACnD,EAEM,GAA2B,AAAC,IAChC,IAAM,EAAc,SAAS,aAAa,CAAC,iDAAiD,KAAK,CAC7F,EAAY,iBACG,CAAA,SAAhB,GACD,CAAA,EAAY,gBADd,EAGA,IAAI,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CAClD,EAAe,SAAS,aAAa,CAAC,+CAA+C,KAAK,CAChG,GAAI,CAAC,EAAU,CACb,MAAM,mCACN,MACF,CAEA,IAAM,EAAiB,SAAS,cAAc,CAAC,kBAAkB,KAAK,CAChE,EAAe,SAAS,cAAc,CAAC,2BACzC,EAAmB,AAAA,CAAA,MAAA,EAAA,KAAA,EAAA,EAAc,KAAK,AAAL,GAAS,IACtB,CAAA,MAArB,GACC,CAAA,EAAmB,IADvB,EAIA,IAAI,EAAO,KAAK,SAAS,CAAC,CACxB,MAAO,EACP,cAAe,EACf,YAAa,EACb,YAAa,CACf,GAGA,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,eACZ,MAAM,AAAA,EAAA,QAAO,CAAI,EAAW,CAC1B,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,OAAU,kBACZ,EACA,KAAM,CACR,GACG,IAAI,CAAC,AAAC,IACA,EAAE,EAAE,EACG,EAAE,UAAU,CAEjB,EAAE,IAAI,KAEd,IAAI,CAAC,AAAA,IAEJ,GADA,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,IACI,EACF,GAAe,QAEf,MAAM,AAAI,MAAM,EAEpB,GAAG,KAAK,CAAC,AAAC,IAER,AAAA,CAAA,EAAA,EAAA,YAAW,AAAX,GACF,EACJ,EAEM,GAAiB,AAAC,IACtB,EAAE,kBAAkB,KAAK,CAAC,QACvB,EAAS,WAAW,CACrB,OAAO,QAAQ,CAAC,IAAI,CAAG,AAAA,GAAqB,EAAS,WAAW,CAAC,IAAI,CAC7D,EAAS,EAAE,CACnB,AAAA,CAAA,EAAA,EAAA,OAAW,AAAX,EAAa,kBAAkB,CAC7B,mCACA,KACA,GACA,QACA,iBACA,cAGF,AAAA,CAAA,EAAA,EAAA,OAAW,AAAX,EAAa,kBAAkB,CAC7B,sCACA,KACA,GACA,QACA,oBACA,YAGN","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","src/common/js/config.js","src/common/js/modaldialog.js","src/common/js/utils.js","src/common/js/acceptterms.js","src/common/js/collectionshandler.js","node_modules/@parcel/runtime-js/lib/runtime-ae4236834578d77d.js","src/pages/home/scripts/newcreation.js","src/pages/home/scripts/home.js","src/pages/home/scripts/breadcrumbhandler.js","src/pages/home/scripts/home_ui.js","src/pages/home/scripts/home_helper.js","node_modules/@parcel/runtime-js/lib/runtime-2132831d2a35b7c5.js","src/pages/home/scripts/audioplayer.js","src/pages/home/scripts/editcollections.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1e7e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1e7e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"bxa0x\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", function () { return $865a8a16446988ab$export$6503ec6e8aabbaf; }, function (v) { return $865a8a16446988ab$export$6503ec6e8aabbaf = v; });\nvar $865a8a16446988ab$export$6503ec6e8aabbaf;\nvar $865a8a16446988ab$export$f7ad0328861e2f03;\n\"use strict\";\nvar $865a8a16446988ab$var$mapping = new Map();\nfunction $865a8a16446988ab$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$865a8a16446988ab$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $865a8a16446988ab$var$resolve(id) {\n    var resolved = $865a8a16446988ab$var$mapping.get(id);\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$865a8a16446988ab$export$6503ec6e8aabbaf = $865a8a16446988ab$var$register;\n$865a8a16446988ab$export$f7ad0328861e2f03 = $865a8a16446988ab$var$resolve;\n\n});\n\nparcelRegister(\"236OM\", function(module, exports) {\n\n$parcel$export(module.exports, \"getBundleURL\", function () { return $17e12686bf321de3$export$bdfd709ae4826697; }, function (v) { return $17e12686bf321de3$export$bdfd709ae4826697 = v; });\n$parcel$export(module.exports, \"getOrigin\", function () { return $17e12686bf321de3$export$5a759dc7a1cfb72a; }, function (v) { return $17e12686bf321de3$export$5a759dc7a1cfb72a = v; });\nvar $17e12686bf321de3$export$bdfd709ae4826697;\nvar $17e12686bf321de3$export$c9e73fbda7da57b6;\nvar $17e12686bf321de3$export$5a759dc7a1cfb72a;\n\"use strict\";\nvar $17e12686bf321de3$var$bundleURL = {};\nfunction $17e12686bf321de3$var$getBundleURLCached(id) {\n    var value = $17e12686bf321de3$var$bundleURL[id];\n    if (!value) {\n        value = $17e12686bf321de3$var$getBundleURL();\n        $17e12686bf321de3$var$bundleURL[id] = value;\n    }\n    return value;\n}\nfunction $17e12686bf321de3$var$getBundleURL() {\n    try {\n        throw new Error();\n    } catch (err) {\n        var matches = (\"\" + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n        if (matches) // The first two stack frames will be this function and getBundleURLCached.\n        // Use the 3rd one, which will be a runtime in the original bundle.\n        return $17e12686bf321de3$var$getBaseURL(matches[2]);\n    }\n    return \"/\";\n}\nfunction $17e12686bf321de3$var$getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, \"$1\") + \"/\";\n}\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction $17e12686bf321de3$var$getOrigin(url) {\n    var matches = (\"\" + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n    if (!matches) throw new Error(\"Origin not found\");\n    return matches[0];\n}\n$17e12686bf321de3$export$bdfd709ae4826697 = $17e12686bf321de3$var$getBundleURLCached;\n$17e12686bf321de3$export$c9e73fbda7da57b6 = $17e12686bf321de3$var$getBaseURL;\n$17e12686bf321de3$export$5a759dc7a1cfb72a = $17e12686bf321de3$var$getOrigin;\n\n});\n\nparcelRegister(\"hbluw\", function(module, exports) {\n\n$parcel$export(module.exports, \"ENDPOINT\", function () { return $c82422755965d529$export$1a23c4610ef05bed; });\n$parcel$export(module.exports, \"UPLOAD_ENDPOINT\", function () { return $c82422755965d529$export$cdda3773e71b07e4; });\nconst $c82422755965d529$var$MODE = \"DEV\" // 'STAGE', 'PROD'\n;\nconst $c82422755965d529$var$ENVIRONMENTS = {\n    PROD: {\n        ENDPOINT: \"https://hiaudio.fr\",\n        UPLOAD_ENDPOINT: \"https://hiaudio.fr/fileUpload\"\n    },\n    STAGE: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    },\n    DEV: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    }\n};\nconst $c82422755965d529$export$1a23c4610ef05bed = $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].ENDPOINT;\nconst $c82422755965d529$export$cdda3773e71b07e4 = $c82422755965d529$var$ENVIRONMENTS[$c82422755965d529$var$MODE].UPLOAD_ENDPOINT;\n\n});\n\nparcelRegister(\"gXFaz\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $c592176fe54591c6$export$2e2bcd8739ae039; });\nclass $c592176fe54591c6$var$DynamicModal {\n    dynamicModalDialog(message, idbtn, textBtnOK, textBtnCancel, popupTitle, backgroundHeader, callbackDismiss) {\n        const html = '<div class=\"modal-header ' + backgroundHeader + ' text-white\">' + '<h5 class=\"modal-title\" id=\"dynamicModalLabel\">' + popupTitle + \"</h5>\" + '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">' + '<span aria-hidden=\"true\">&times;</span>' + \"</button>\" + \"</div>\" + '<div class=\"modal-body\">' + message + \"</div>\" + '<div class=\"modal-footer\">' + '<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">' + textBtnCancel + \"</button>\" + (idbtn !== null ? \"<button id=\" + idbtn + ' type=\"button\" class=\"btn btn-primary\">' + textBtnOK + \"</button>\" : \"\") + \"</div>\";\n        this.setDynamicModalContent(html);\n        this.callbackDismiss = callbackDismiss;\n        $(this.modal).modal(\"show\");\n    }\n    getDynamicModal() {\n        return document.getElementById(\"dynamicModal\");\n    }\n    setDynamicModalContent(html) {\n        this.modal.querySelector(\".modal-content\").innerHTML = html;\n    }\n    closeDynamicModal(callBackClose) {\n        $(this.modal).modal(\"hide\");\n        if (callBackClose) callBackClose();\n    }\n    initDynamicModal() {\n        const modal = document.createElement(\"div\");\n        modal.classList.add(\"modal\", \"fade\");\n        modal.setAttribute(\"id\", \"dynamicModal\");\n        modal.setAttribute(\"tabindex\", \"-1\");\n        modal.setAttribute(\"role\", \"dialog\");\n        modal.setAttribute(\"aria-labelledby\", \"dynamicModalLabel\");\n        modal.setAttribute(\"aria-hidden\", \"true\");\n        modal.innerHTML = '<div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\"><div class=\"modal-content\"></div></div>';\n        document.body.appendChild(modal);\n        return modal;\n    }\n    constructor(){\n        this.modal = this.getDynamicModal();\n        this.callbackDismiss = null;\n        if (!this.modal) {\n            this.modal = this.initDynamicModal();\n            const self = this;\n            $(this.modal).on(\"hide.bs.modal\", function(event) {\n                if (self.callbackDismiss) {\n                    self.callbackDismiss();\n                    self.callbackDismiss = null;\n                }\n            });\n        }\n    }\n}\nconst $c592176fe54591c6$var$dynamicModalInstance = new $c592176fe54591c6$var$DynamicModal();\nvar $c592176fe54591c6$export$2e2bcd8739ae039 = $c592176fe54591c6$var$dynamicModalInstance;\n\n});\n\nparcelRegister(\"jXEky\", function(module, exports) {\n\n$parcel$export(module.exports, \"uriUserPage\", function () { return $e882cfcc4184df66$export$ff3ad29dbb546598; });\n$parcel$export(module.exports, \"uriCollectionPage\", function () { return $e882cfcc4184df66$export$36dfaec04418caa7; });\n$parcel$export(module.exports, \"UserRole\", function () { return $e882cfcc4184df66$export$eb3485a690c2f0b8; });\n$parcel$export(module.exports, \"LevelPrivacy\", function () { return $e882cfcc4184df66$export$a3c073b335a47d60; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_STYLE\", function () { return $e882cfcc4184df66$export$eba8c17f4d7a3cd3; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_TEXT\", function () { return $e882cfcc4184df66$export$ab4fdfae3dcd1a8f; });\n$parcel$export(module.exports, \"startLoader\", function () { return $e882cfcc4184df66$export$8afc507ca675ea0e; });\n$parcel$export(module.exports, \"cancelLoader\", function () { return $e882cfcc4184df66$export$81e46b314cb8d8e3; });\n$parcel$export(module.exports, \"callJsonApi\", function () { return $e882cfcc4184df66$export$997d30e836e5c567; });\n$parcel$export(module.exports, \"looksLikeMail\", function () { return $e882cfcc4184df66$export$706cf9fcefe67c8e; });\n$parcel$export(module.exports, \"activateGoHomeLink\", function () { return $e882cfcc4184df66$export$3fc781af82c0c660; });\n$parcel$export(module.exports, \"MEDIA_CONSTRAINTS\", function () { return $e882cfcc4184df66$export$2464c9e69777d386; });\n\nvar $hbluw = parcelRequire(\"hbluw\");\nconst $e882cfcc4184df66$export$ff3ad29dbb546598 = \"/index.html?userid=\";\nconst $e882cfcc4184df66$export$36dfaec04418caa7 = \"/index.html?collectionid=\";\nconst $e882cfcc4184df66$export$eb3485a690c2f0b8 = Object.freeze({\n    none: 0,\n    owner: 1,\n    admin: 2,\n    member: 3,\n    guest: 4\n});\nconst $e882cfcc4184df66$export$a3c073b335a47d60 = Object.freeze({\n    public: 1,\n    onlyreg: 2,\n    private: 3\n});\nconst $e882cfcc4184df66$export$eba8c17f4d7a3cd3 = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"badge-public\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"badge-onlyreg\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"badge-private\"\n};\nconst $e882cfcc4184df66$export$ab4fdfae3dcd1a8f = {\n    [$e882cfcc4184df66$export$a3c073b335a47d60.public]: \"PUBLIC\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.onlyreg]: \"REG USERS\",\n    [$e882cfcc4184df66$export$a3c073b335a47d60.private]: \"PRIVATE\"\n};\nconst $e882cfcc4184df66$export$8afc507ca675ea0e = (loadingMessage)=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`;\n    loaderElement.classList.remove(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$81e46b314cb8d8e3 = ()=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.classList.add(\"loader-hidden\");\n};\nconst $e882cfcc4184df66$export$997d30e836e5c567 = async (apimethod, rqstmethod, body, useLoaderWithText)=>{\n    const request = {\n        method: rqstmethod || \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }\n    };\n    if (body) request.body = JSON.stringify(body);\n    try {\n        useLoaderWithText && $e882cfcc4184df66$export$8afc507ca675ea0e(useLoaderWithText);\n        const sendRqst = await fetch((0, $hbluw.ENDPOINT) + apimethod, request);\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        const respToJson = await sendRqst.json();\n        if (respToJson && !respToJson.error) return respToJson;\n        else return (respToJson === null || respToJson === void 0 ? void 0 : respToJson.error) || \"An error occurred\";\n    } catch (error) {\n        useLoaderWithText && $e882cfcc4184df66$export$81e46b314cb8d8e3();\n        return error;\n    }\n};\nconst $e882cfcc4184df66$export$706cf9fcefe67c8e = (str)=>{\n    const lastAtPos = str.lastIndexOf(\"@\");\n    const lastDotPos = str.lastIndexOf(\".\");\n    return lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf(\"@@\") == -1 && lastDotPos > 2 && str.length - lastDotPos > 2;\n};\nconst $e882cfcc4184df66$export$3fc781af82c0c660 = ()=>{\n    const goHomeLink = document.getElementById(\"goHome\");\n    if (window.location.host === \"localhost:80\" || window.location.origin === \"http://localhost\") goHomeLink.href = window.location.origin + \"/index.html\";\n    else goHomeLink.href = window.location.origin;\n};\nconst $e882cfcc4184df66$export$95df08bae54cb4df = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst $e882cfcc4184df66$export$2464c9e69777d386 = {\n    audio: {\n        echoCancellation: false,\n        noiseSuppression: false,\n        autoGainControl: false,\n        latency: 0,\n        channelCount: 1\n    }\n};\n\n});\n\nparcelRegister(\"faZmx\", function(module, exports) {\n\n$parcel$export(module.exports, \"checkIfTermsAccepted\", function () { return $b0c76387600d0ed6$export$207bec4913bdffa6; });\n$parcel$export(module.exports, \"generateAcceptTermsModal\", function () { return $b0c76387600d0ed6$export$7ed6abee26b8c64b; });\n\nvar $jXEky = parcelRequire(\"jXEky\");\nconst $b0c76387600d0ed6$export$207bec4913bdffa6 = (userprofile, callback)=>{\n    (0, $jXEky.cancelLoader)();\n    callback(userprofile === null || userprofile === void 0 ? void 0 : userprofile.terms_accepted);\n};\nconst $b0c76387600d0ed6$export$95d7694256f75341 = ()=>{\n    $(\"#acceptTermsModal\").modal({\n        backdrop: \"static\",\n        keyboard: false // to prevent closing with Esc button (if you want this too)\n    });\n    $(\"#acceptTermsModal\").modal(\"show\");\n    document.getElementById(\"buttonAcceptTerms\").onclick = $b0c76387600d0ed6$var$rqstAcceptTerms;\n    document.getElementById(\"buttonRejectTerms\").onclick = $b0c76387600d0ed6$var$rqstRejectTerms;\n};\nconst $b0c76387600d0ed6$var$rqstAcceptTerms = async ()=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/acceptterms\", \"PUT\", null, \"Welcome...\");\n    if (data.ok) $(\"#acceptTermsModal\").modal(\"hide\");\n};\nconst $b0c76387600d0ed6$var$rqstRejectTerms = async ()=>{\n    const data = await (0, $jXEky.callJsonApi)(\"/rejectterms\", \"PUT\", null, \"Deleting information...\");\n    if (data.ok) {\n        $(\"#acceptTermsModal\").modal(\"hide\");\n        window.location.href = window.location.origin;\n    }\n};\nconst $b0c76387600d0ed6$export$7ed6abee26b8c64b = (attachToElem)=>{\n    const isModal = document.getElementById(\"acceptTermsModal\");\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`;\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML(\"afterend\", modalDialog);\n    }\n    $b0c76387600d0ed6$export$95d7694256f75341();\n};\n\n});\n\nparcelRegister(\"fZ0Rm\", function(module, exports) {\n\n$parcel$export(module.exports, \"getCollections\", function () { return $ba2d383e494f9e86$export$a9dbfb18603d6a77; });\n$parcel$export(module.exports, \"getCollectionsError\", function () { return $ba2d383e494f9e86$export$66d4708c2e689cee; });\n$parcel$export(module.exports, \"createListCollections\", function () { return $ba2d383e494f9e86$export$5a676dd14dd0be2c; });\n\nvar $hbluw = parcelRequire(\"hbluw\");\n\nvar $gXFaz = parcelRequire(\"gXFaz\");\nconst $ba2d383e494f9e86$export$a9dbfb18603d6a77 = async ()=>{\n    const response = await fetch((0, $hbluw.ENDPOINT) + \"/mycollections\");\n    let result = null;\n    if (response === null || response === void 0 ? void 0 : response.ok) {\n        const respJson = await response.json();\n        result = respJson;\n    }\n    return result;\n};\nconst $ba2d383e494f9e86$export$66d4708c2e689cee = ()=>{\n    (0, $gXFaz.default).dynamicModalDialog(\"Problem getting collections\", null, \"\", \"Close\", \"Error\", \"bg-danger\");\n};\nconst $ba2d383e494f9e86$export$5a676dd14dd0be2c = (collections, listId, coll_id)=>{\n    const theList = collections.all_collections;\n    const listCollContainer = document.getElementById(listId);\n    let listOptions = `<option value='0'>...</option>`;\n    let selected = null;\n    theList.forEach((element)=>{\n        if (element) {\n            if (element.uuid === coll_id) selected = \"selected>\";\n            else selected = null;\n            const template = `<option value='${element.uuid}' ${selected ? selected : \">\"}${element.title}</option>`;\n            listOptions += template;\n        }\n    });\n    const listElelemts = `<select class='custom-select' id='inputGroupSelectCollect'>${listOptions}</select>`;\n    listCollContainer.insertAdjacentHTML(\"afterbegin\", listElelemts);\n};\n\n});\n\nvar $5264599887c27add$exports = {};\n\n\n(parcelRequire(\"bxa0x\")).register((parcelRequire(\"236OM\")).getBundleURL(\"b33yz\"), JSON.parse('[\"b33yz\",\"index.aa171dca.js\",\"amMcQ\",\"compress_home_page_video.e4cc210b.mp4\"]'));\n\n\nvar $hbluw = parcelRequire(\"hbluw\");\n\nvar $gXFaz = parcelRequire(\"gXFaz\");\n\nvar $jXEky = parcelRequire(\"jXEky\");\n\nvar $jXEky = parcelRequire(\"jXEky\");\n\nconst $a57243222c2ea8a4$export$184163c68675dcce = (isauth, isuserorcollection)=>{\n    $a57243222c2ea8a4$var$createBreadCrumbNavBar(isauth, isuserorcollection);\n    document.querySelectorAll(\".breadcrumb-item a\").forEach(function(element) {\n        element.addEventListener(\"click\", function(event) {\n            var _document_querySelector;\n            event.preventDefault();\n            (_document_querySelector = document.querySelector(\".active-breadcrumb\")) === null || _document_querySelector === void 0 ? void 0 : _document_querySelector.classList.remove(\"active-breadcrumb\");\n            event.currentTarget.classList.add(\"active-breadcrumb\");\n            let section = event.currentTarget.getAttribute(\"data-section\");\n            $a57243222c2ea8a4$export$ff7962acd6052c28(section, isauth);\n        });\n    });\n};\nconst $a57243222c2ea8a4$var$createBreadCrumbNavBar = (isauth, isuserorcollection)=>{\n    const navBar = document.getElementById(\"breadcrumbnavbar\");\n    let userOptions = \"\";\n    if (isauth.ok) userOptions = `<li class='breadcrumb-item ${isuserorcollection ? \"\" : \"active-breadcrumb\"}' aria-current='page'><a href='#' data-section='my-comp'>My Music</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`;\n    else userOptions = `<li class='breadcrumb-item ${isuserorcollection ? \"\" : \"active-breadcrumb\"}' aria-current='page'><a href='#' data-section='recent-comp'>Recent</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`;\n    navBar.innerHTML = userOptions;\n};\nfunction $a57243222c2ea8a4$export$ff7962acd6052c28(section, isauth) {\n    const url = new URL(window.location.href);\n    url.searchParams.delete(\"userid\");\n    url.searchParams.delete(\"collectionid\");\n    history.replaceState(null, null, url);\n    let withScroll = false;\n    switch(section){\n        case \"recent-comp\":\n            withScroll = true;\n            (0, $ce4a593b0ea78dcf$export$8d85b36da8527a05)(withScroll);\n            break;\n        case \"my-comp\":\n            (0, $ce4a593b0ea78dcf$export$b99e48ec291af6c0)();\n            break;\n        case \"all-comp\":\n            document.getElementById(\"initialmessage\").classList.remove(\"d-flex\");\n            document.getElementById(\"initialmessage\").hidden = true;\n            if (!isauth.ok) withScroll = true;\n            (0, $ce4a593b0ea78dcf$export$556539c2d93a797d)(withScroll);\n            break;\n        default:\n            console.log(\"section default\");\n    }\n}\n\n\n\nvar $faZmx = parcelRequire(\"faZmx\");\n\nlet $69dccf2381da1e7e$var$_USERNAME = null;\nconst $69dccf2381da1e7e$export$1badf4b56a2f2c08 = (endpoint)=>{\n    let result = false;\n    if (endpoint === \"/mycompositions\" || endpoint.includes(\"/compositionsbyuserid/\") || endpoint.includes(\"/collectionastreebyid/\")) result = true;\n    return result;\n};\nconst $69dccf2381da1e7e$var$getCurrentUserName = ()=>{\n    return $69dccf2381da1e7e$var$_USERNAME;\n};\nconst $69dccf2381da1e7e$export$149136365741a43c = (username)=>{\n    $69dccf2381da1e7e$var$_USERNAME = username;\n};\nconst $69dccf2381da1e7e$export$a04c3fad920d835e = (endpoint, username)=>{\n    let displayName = false;\n    if (!$69dccf2381da1e7e$export$1badf4b56a2f2c08(endpoint)) displayName = true;\n    else displayName = username !== $69dccf2381da1e7e$var$getCurrentUserName();\n    return displayName;\n};\nconst $69dccf2381da1e7e$var$getGroupsByCollAndUser = (compositionsList)=>{\n    const groupedbycoll = {};\n    const groupedbyuser_aux = {};\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        const userId = composition.user_id;\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else {\n            if (!groupedbyuser_aux[userId]) groupedbyuser_aux[userId] = [];\n            groupedbyuser_aux[userId].push(composition);\n        }\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbyuser_aux: groupedbyuser_aux\n    };\n};\nconst $69dccf2381da1e7e$var$getGroupsByCollectionAndSubColl = (compositionsList, parent_coll_id)=>{\n    const groupedbycoll = {};\n    const singlecomps = [];\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        if (collectionId !== null && collectionId !== parent_coll_id) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else singlecomps.push(composition);\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        singlecomps: singlecomps\n    };\n};\nconst $69dccf2381da1e7e$var$getGroupsByCollAndCollab = (compositionsList)=>{\n    const groupedbycoll = {};\n    const groupedbycollab = {};\n    const singlecomps = [];\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else if (composition.contributors.length) {\n            if (!groupedbycollab[\"collabs\"]) groupedbycollab[\"collabs\"] = [];\n            groupedbycollab[\"collabs\"].push(composition);\n        } else singlecomps.push(composition);\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbycollab: groupedbycollab,\n        singlecomps: singlecomps\n    };\n};\n// INFO: a group for a User is made if he has 2 or more compositions without Collection\nconst $69dccf2381da1e7e$var$getFinalGroupByUserAndSingleComp = (groupedbyuser_aux)=>{\n    const groupedbyuser_final = {};\n    const singlecomps = [];\n    for(const elem in groupedbyuser_aux)if (groupedbyuser_aux[elem].length === 1) singlecomps.push(groupedbyuser_aux[elem][0]);\n    else {\n        if (!groupedbyuser_final[elem]) groupedbyuser_final[elem] = [];\n        groupedbyuser_final[elem] = groupedbyuser_aux[elem];\n    }\n    return {\n        singlecomps: singlecomps,\n        groupedbyuser_final: groupedbyuser_final\n    };\n};\nconst $69dccf2381da1e7e$export$2095d3815b0f7547 = (compositionsList)=>{\n    const { groupedbycoll: groupedbycoll, groupedbyuser_aux: groupedbyuser_aux } = $69dccf2381da1e7e$var$getGroupsByCollAndUser(compositionsList);\n    const { singlecomps: singlecomps, groupedbyuser_final: groupedbyuser_final } = $69dccf2381da1e7e$var$getFinalGroupByUserAndSingleComp(groupedbyuser_aux);\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbyuser_final: groupedbyuser_final,\n        singlecomps: singlecomps\n    };\n};\nconst $69dccf2381da1e7e$export$6d37f804b553eac7 = (compositionsList)=>{\n    const { groupedbycoll: groupedbycoll, groupedbycollab: groupedbycollab, singlecomps: singlecomps } = $69dccf2381da1e7e$var$getGroupsByCollAndCollab(compositionsList);\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbycollab: groupedbycollab,\n        singlecomps: singlecomps\n    };\n};\nconst $69dccf2381da1e7e$export$46ab7a802f6f7711 = (compositionsList, parent_coll_id)=>{\n    const { groupedbycoll: groupedbycoll, singlecomps: singlecomps } = $69dccf2381da1e7e$var$getGroupsByCollectionAndSubColl(compositionsList, parent_coll_id);\n    return {\n        groupedbycoll: groupedbycoll,\n        singlecomps: singlecomps\n    };\n};\nconst $69dccf2381da1e7e$export$3763f15547b21628 = (compositionsList)=>{\n    const tracksList = [];\n    const compositionsDictionary = {};\n    const tracksDictionary = {};\n    compositionsList.forEach((composition)=>{\n        compositionsDictionary[composition.uuid] = composition;\n        if (composition === null || composition === void 0 ? void 0 : composition.tracks.length) {\n            for(let i = 0; i < composition.tracks.length; i++){\n                const currentTrack = composition.tracks[i];\n                currentTrack[\"comp_uuid\"] = composition.uuid;\n                tracksDictionary[currentTrack.uuid] = currentTrack;\n            }\n            tracksList.push(...composition.tracks);\n        }\n    });\n    return {\n        tracksList: tracksList,\n        compositionsDictionary: compositionsDictionary,\n        tracksDictionary: tracksDictionary\n    };\n};\n\n\n\nvar $jXEky = parcelRequire(\"jXEky\");\nvar $2f0d637a566b4a5d$exports = {};\n\n$2f0d637a566b4a5d$exports = (parcelRequire(\"236OM\")).getBundleURL(\"b33yz\") + \"compress_home_page_video.e4cc210b.mp4\";\n\n\nconst $ceab237e06e82e44$var$homeVideoUrl = new URL($2f0d637a566b4a5d$exports);\nconst $ceab237e06e82e44$var$CARD_BADGE_STYLE = {\n    \"coll\": \"badge-collection\",\n    \"user\": \"badge-warning\",\n    \"collab\": \"badge-collab\"\n};\nconst $ceab237e06e82e44$var$CARD_BORDER_STYLE = {\n    \"coll\": \"border-collection\",\n    \"user\": \"border-warning\",\n    \"collab\": \"border-collab\"\n};\nconst $ceab237e06e82e44$var$URI_PAGE = {\n    \"coll\": (0, $jXEky.uriCollectionPage),\n    \"user\": (0, $jXEky.uriUserPage)\n};\n//const WELCOME_TEXT = 'We present Hi-Audio Online Platform a web application for musicians, researchers and an open community of enthusiasts of audio and music with a view to build a public database of music recordings from a wide variety of styles and different cultures.'\nconst $ceab237e06e82e44$var$WELCOME_VIDEO = `<div id=\"landing-video-container\" class=\"fullscreen-video-container\">\n    <video playsinline autoplay loop muted>\n      <source src=\"${$ceab237e06e82e44$var$homeVideoUrl}\">\n    </video>  \n  <div class='fullscreen-video-content'>\n    <div class=\"typewriter\">\n      <h1>Welcome!</h1>      \n    </div>\n    <div class=\"h-100 d-flex\">\n      <div class=\"m-auto\">\n        <a id=\"start-link\" class=\"btn btn-link\" href=\"/login.html\" role=\"button\"><b>LET'S JAM?</b></a>\n      </div>\n    </div>    \n  </div>\n</div>`;\nconst $ceab237e06e82e44$export$c1504dbc5bdba629 = ()=>{\n    document.getElementById(\"userlogin\").innerHTML = `<li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/login.html'>Register / Login</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${0, $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5}demopage'>Test DAW</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/static/howto.html'>How-To</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'><b>News<b></a>\n    </li>\n    `;\n    document.getElementById(\"useroptions\").innerHTML = `<li class='nav-item'>\n      <a class='nav-link' href='${window.location.origin + \"/profile.html\"}'>Profile <i id='display_profile_name'></i></a>\n    </li>\n    <li class='nav-item'>\n          <a class='nav-link' href='#' id='createNewButton' data-toggle='modal' data-target='#newMusicModal'>/ Create new</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openMyCollectionsButton' data-toggle='modal' data-target='#editCollectionsModal'>/ My Collections</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='${window.location.origin + \"/static/howto.html\"}'>/ How-to</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'>/ News</a>\n    </li>\n    `;\n    $ceab237e06e82e44$var$handleNewsPopUpClose();\n};\nconst $ceab237e06e82e44$var$handleNewsPopUpClose = ()=>{\n    $(\"#newsModal\").on(\"hidden.bs.modal\", function(event) {\n        const videoPromo = document.getElementById(\"promo-video\");\n        if (!videoPromo.paused) videoPromo.pause();\n    });\n};\nconst $ceab237e06e82e44$export$bca9dffb57f7792b = (numberGroupsByCollections, numberGroupsCustom, numberSinglComp, endpoint, totalcomps)=>{\n    const displayGroupsByLabel = numberGroupsByCollections || !(0, $69dccf2381da1e7e$export$1badf4b56a2f2c08)(endpoint) && numberGroupsCustom || numberSinglComp;\n    return `<ul class=\"nav justify-content-end\">\n              ${displayGroupsByLabel ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Groups by:&nbsp;</span></h4></li>' : \"\"}\n              ${numberGroupsByCollections ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-collection\">Collections&nbsp;<span class=\"badge badge-light\">' + numberGroupsByCollections + \"</span></span></h4></li>\" : \"\"}            \n              ${!(0, $69dccf2381da1e7e$export$1badf4b56a2f2c08)(endpoint) && numberGroupsCustom ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-warning\">Users&nbsp;<span class=\"badge badge-light\">' + numberGroupsCustom + \"</span></span></h4></li>\" : \"\"}\n              ${numberSinglComp ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-success\">Singles&nbsp;<span class=\"badge badge-light\">' + numberSinglComp + \"</span></span></h4></li>\" : \"\"}\n              <li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Total compositions:&nbsp;</span><span class=\"badge badge-light\">${totalcomps}</span></h4></li>\n            </ul>`;\n};\nconst $ceab237e06e82e44$export$1f60eb8703988013 = (listElelemts, legendButtons)=>{\n    document.getElementById(\"grid\").innerHTML = \"\";\n    document.getElementById(\"grid\").insertAdjacentHTML(\"afterbegin\", listElelemts);\n    document.getElementById(\"legendbuttons\").innerHTML = \"\";\n    document.getElementById(\"legendbuttons\").insertAdjacentHTML(\"afterbegin\", legendButtons);\n    document.getElementById(\"searchInput\").removeAttribute(\"disabled\");\n};\nconst $ceab237e06e82e44$export$971becedf6ebeceb = (element, endpoint)=>{\n    var _element_tracks_, _element_tracks, _element_tracks1;\n    const displayName = (0, $69dccf2381da1e7e$export$a04c3fad920d835e)(endpoint, element.username);\n    const displayNumCollabs = element.contributors.length;\n    const last_track = element === null || element === void 0 ? void 0 : (_element_tracks_ = element.tracks[(element === null || element === void 0 ? void 0 : element.tracks.length) - 1]) === null || _element_tracks_ === void 0 ? void 0 : _element_tracks_.uuid;\n    return `<div class='card border-success'>                       \n              <div class=\"card-body\">\n              ${(0, $ce4a593b0ea78dcf$export$4cd34456ac1eb639) ? `<span class=\"badge ${(0, $jXEky.PRIVACY_BADGE_STYLE)[element.privacy]}\">${(0, $jXEky.PRIVACY_BADGE_TEXT)[element.privacy]}</span>` : \"\"}\n              ${element.opentocontrib ? '<p class=\"badge badge-info\">OPEN TO CONTRIB</p>' : \"\"}\n              ${element.is_template ? '<p class=\"badge badge-template\">TEMPLATE</p>' : \"\"}  \n                  <div>\n                    <p class=\"list-group-item-heading\">  \n                      <a href='${(0, $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5) + element.uuid}' class='card-url'>\n                        <h5 class='card-title'>${element.title}</h5>\n                      </a>\n                    </p>\n                    <p>${displayName ? `<span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-user'></i>&nbsp;\n                        <a href='${(0, $jXEky.uriUserPage) + element.owner_uuid}' class='card-url'>\n                          ${element.username}&nbsp;\n                        </a>\n                      </span>` : \"\"}\n                    </p>\n                    <p class='text-black-50'>${displayNumCollabs ? \"Collaborators: \" + displayNumCollabs : \"\"}</p>\n                    <p class='card-text text-truncate'>${element.description || \"\"}</p>\n                    ${((_element_tracks = element.tracks) === null || _element_tracks === void 0 ? void 0 : _element_tracks.length) ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : \"\"}>\n                      <i class='fa fa-play'>&nbsp;</i>Play last added track </span>&nbsp;` : \"\"}\n                    <span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-music'></i>&nbsp;${\"Tracks: \" + ((_element_tracks1 = element.tracks) === null || _element_tracks1 === void 0 ? void 0 : _element_tracks1.length)}\n                    </span>\n                  </div>                \n              </div>            \n          </div>`;\n};\nconst $ceab237e06e82e44$export$cbdc54c51b649c98 = (item, typebadge, endpoint)=>{\n    var _item_tracks_, _item_tracks, _item_tracks1;\n    const displayName = (0, $69dccf2381da1e7e$export$a04c3fad920d835e)(endpoint, item.username);\n    const displayNumCollabs = item.contributors.length;\n    const last_track = item === null || item === void 0 ? void 0 : (_item_tracks_ = item.tracks[(item === null || item === void 0 ? void 0 : item.tracks.length) - 1]) === null || _item_tracks_ === void 0 ? void 0 : _item_tracks_.uuid;\n    return `<div class=\"list-group-item \">\n              ${(0, $ce4a593b0ea78dcf$export$4cd34456ac1eb639) ? `<span class=\"badge ${(0, $jXEky.PRIVACY_BADGE_STYLE)[item.privacy]}\">${(0, $jXEky.PRIVACY_BADGE_TEXT)[item.privacy]}</span>` : \"\"}\n              ${item.opentocontrib ? '<span class=\"badge badge-info\">OPEN TO CONTRIB</span>' : \"\"}\n              ${item.is_template ? '<span class=\"badge badge-template\">TEMPLATE</span>' : \"\"}  \n              <p class=\"list-group-item-heading\">\n                <a href='${(0, $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5) + item.uuid}' class='card-url'>\n                    <h5 class='card-title'>${item.title}</h5>\n                </a>\n              </p>\n              ${typebadge !== \"user\" && displayName ? '<p><span class=\"d-inline-block text-truncate\" style=\"max-width: 220px;\"><i class=\"fa fa-user\"></i>&nbsp;<a href=' + (0, $jXEky.uriUserPage) + item.owner_uuid + ' class=\"card-url\">' + item.username + \"&nbsp;\" + \"</a>\" + \"</span></p>\" : \"\"}\n              <p class='text-black-50'>${displayNumCollabs ? \"Collaborators: \" + displayNumCollabs : \"\"}</p>\n              <p class=\"list-group-item-text text-truncate\">\n                ${item.description || \"\"}\n              </p>\n              ${((_item_tracks = item.tracks) === null || _item_tracks === void 0 ? void 0 : _item_tracks.length) ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : \"\"}>\n                <i class='fa fa-play'>&nbsp;</i>Play last added track \n              </span>&nbsp;` : \"\"}\n              <span class=\"d-inline-block text-truncate\" style=\"max-width: 200px;\">\n                <i class='fa fa-music'></i>&nbsp;${\"Tracks: \" + ((_item_tracks1 = item.tracks) === null || _item_tracks1 === void 0 ? void 0 : _item_tracks1.length)}\n              </span>\n            </div>`;\n};\nconst $ceab237e06e82e44$export$da2a595be284078a = (typebadge, numitems, groupTitle, groupId, listgroup)=>{\n    const badegstyle = $ceab237e06e82e44$var$CARD_BADGE_STYLE[typebadge];\n    const borderstyle = $ceab237e06e82e44$var$CARD_BORDER_STYLE[typebadge];\n    const url = $ceab237e06e82e44$var$URI_PAGE[typebadge];\n    const badgeDisplayed = `<span class=\"badge ${badegstyle} d-inline-block text-truncate\" style=\"max-width:85%;\">\n                              <span class=\"badge badge-light\">${numitems}</span>&nbsp;\n                              ${url ? `<a href=${url + groupId} class=\"card-header-url\">${groupTitle}</a>` : `${groupTitle}`}                              \n                          </span>`;\n    return `<div id='${groupId}' class='card ${borderstyle}'>                        \n              <h4>${badgeDisplayed}</h4>        \n              <div class=\"card-body\">\n                <div class=\"list-group border\">              \n                  ${listgroup}\n                </div>\n              </div>\n            </div>`;\n};\nconst $ceab237e06e82e44$export$2ccaa4a069104255 = (hidetext, withScroll)=>{\n    var _welcomecontainer_lastChild, _welcomecontainer_lastChild1;\n    const welcomecontainer = document.getElementById(\"welcomecontainer\");\n    const videoContainer = document.getElementById(\"landing-video-container\");\n    if (((_welcomecontainer_lastChild = welcomecontainer.lastChild) === null || _welcomecontainer_lastChild === void 0 ? void 0 : _welcomecontainer_lastChild.id) && ((_welcomecontainer_lastChild1 = welcomecontainer.lastChild) === null || _welcomecontainer_lastChild1 === void 0 ? void 0 : _welcomecontainer_lastChild1.id) !== \"welcometext\") welcomecontainer.removeChild(welcomecontainer.lastChild);\n    if (!hidetext && !welcomecontainer.lastChild && !videoContainer) {\n        const welcometextelem = document.createElement(\"div\");\n        welcometextelem.id = \"welcometext\";\n        welcometextelem.innerHTML = (0, $ce4a593b0ea78dcf$export$4cd34456ac1eb639) ? \"\" : `${$ceab237e06e82e44$var$WELCOME_VIDEO}`;\n        document.getElementById(\"welcomecontainer\").appendChild(welcometextelem);\n    }\n    if (withScroll) document.getElementById(\"grid\").scrollIntoView({\n        behavior: \"smooth\"\n    });\n};\nconst $ceab237e06e82e44$export$206832d47f4d1079 = (collectiontitle, username, owner_uuid)=>{\n    $ceab237e06e82e44$export$2ccaa4a069104255(true);\n    const collectionInfoContainer = document.createElement(\"div\");\n    collectionInfoContainer.id = \"infocontainer\";\n    collectionInfoContainer.innerHTML = `<div class=\"card border-collection mb-3\">\n                                          <div class=\"card-header bg-transparent border-collection\"><b>Collection</b></div>\n                                          <div class=\"card-body text-dark\">\n                                            <h5 class=\"card-title\">${collectiontitle}</h5>\n                                            <p class=\"card-text\" style=\"width:300px;\">Owner: <a href=${(0, $jXEky.uriUserPage) + owner_uuid} class=\"card-url\">${username}</a></p>\n                                          </div>\n                                        </div>`;\n    document.getElementById(\"welcomecontainer\").appendChild(collectionInfoContainer);\n};\nconst $ceab237e06e82e44$export$b8abf8ca7249a7d2 = (username, useruid)=>{\n    $ceab237e06e82e44$export$2ccaa4a069104255(true);\n    const userInfoContainer = document.createElement(\"div\");\n    userInfoContainer.id = \"infocontainer\";\n    userInfoContainer.innerHTML = `<div class=\"card mb-3\" style=\"max-width: 540px;\">\n                                    <div class=\"row no-gutters\">\n                                      <div class=\"col-md-4\">\n                                        <img class=\"img-fluid hidden-first\" src=\"https://picsum.photos/seed/${useruid}/200\" alt=\"User Picture\" width=\"200\" height=\"200\">\n                                      </div>\n                                      <div class=\"col-md-8\">\n                                        <div class=\"card-body\">\n                                          <h5 class=\"card-title\">User</h5>\n                                          <p class=\"card-text\" style=\"width:300px;\">${username ? `${username}` : \"\"}</p>                                        \n                                          <p class=\"card-text\"><small class=\"text-muted\"></small></p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>`;\n    document.getElementById(\"welcomecontainer\").appendChild(userInfoContainer);\n};\n\n\n\n\nlet $299b0bf5dfda9fee$var$tracks_dictionary = null;\nlet $299b0bf5dfda9fee$var$composition_dictionary = null;\nlet $299b0bf5dfda9fee$var$AUTO_PLAY = false;\nlet $299b0bf5dfda9fee$var$wavesurfer = null;\nlet $299b0bf5dfda9fee$var$currentAbortController = null;\nconst $299b0bf5dfda9fee$var$waveSurferOptions = {\n    container: \"#waveform\",\n    responsive: true,\n    height: 80,\n    waveColor: \"#007bff\",\n    progressColor: \"#6610f2\",\n    barWidth: 2,\n    barGap: 1,\n    barRadius: 2,\n    cursorWidth: 0\n};\nconst $299b0bf5dfda9fee$var$getCurrentTrack = ()=>{\n    const audio = document.getElementById(\"waveform\");\n    const currentTrack = audio.getAttribute(\"data-currentaudio\");\n    return currentTrack;\n};\nconst $299b0bf5dfda9fee$var$changeFaIcon = (trackid, startPlaying)=>{\n    var _document_querySelector;\n    const iconElement = (_document_querySelector = document.querySelector(`[data-trackid='${trackid}']`)) === null || _document_querySelector === void 0 ? void 0 : _document_querySelector.firstChild.nextSibling;\n    if (iconElement) {\n        if (startPlaying) iconElement.classList.replace(\"fa-play\", \"fa-volume-down\");\n        else {\n            iconElement.classList.replace(\"fa-volume-down\", \"fa-play\");\n            iconElement.classList.remove(\"fa-beat\");\n        }\n    }\n};\nconst $299b0bf5dfda9fee$var$changeFloatingIcon = (startPlaying)=>{\n    const floatingPlayButton = document.getElementById(\"playfloatingbutton\").firstChild.nextSibling;\n    if (startPlaying) {\n        floatingPlayButton.classList.remove(\"fa-play\");\n        floatingPlayButton.classList.add(\"fa-pause\");\n    } else {\n        floatingPlayButton.classList.remove(\"fa-pause\");\n        floatingPlayButton.classList.add(\"fa-play\");\n    }\n};\nconst $299b0bf5dfda9fee$var$clickOnSameTrack = ()=>{\n    const isPlaying = $299b0bf5dfda9fee$var$wavesurfer.isPlaying();\n    if (!isPlaying) $299b0bf5dfda9fee$var$wavesurfer.play();\n    else $299b0bf5dfda9fee$var$wavesurfer.pause();\n};\nconst $299b0bf5dfda9fee$var$checkAudioPausedNotSameTrack = (trackid)=>{\n    const isPlaying = $299b0bf5dfda9fee$var$wavesurfer === null || $299b0bf5dfda9fee$var$wavesurfer === void 0 ? void 0 : $299b0bf5dfda9fee$var$wavesurfer.isPlaying();\n    if (isPlaying) {\n        $299b0bf5dfda9fee$var$changeFaIcon(trackid, false);\n        $299b0bf5dfda9fee$var$wavesurfer.pause();\n    }\n};\nconst $299b0bf5dfda9fee$var$playTrackButtonHandler = (trackid)=>{\n    if (document.getElementById(\"sticky-player\").hidden) document.getElementById(\"sticky-player\").hidden = false;\n    const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n    let is_same_track = currentTrack === trackid;\n    if (is_same_track) $299b0bf5dfda9fee$var$clickOnSameTrack();\n    else {\n        $299b0bf5dfda9fee$var$changeFaIcon(currentTrack, false);\n        $299b0bf5dfda9fee$var$checkAudioPausedNotSameTrack(trackid);\n        $299b0bf5dfda9fee$var$loadAudioTrack(trackid, true);\n    }\n};\nconst $299b0bf5dfda9fee$var$loadTrackSuccess = (audioSrc, doPlay)=>{\n    $299b0bf5dfda9fee$var$AUTO_PLAY = doPlay;\n    $299b0bf5dfda9fee$var$wavesurfer.seekTo(0);\n    $299b0bf5dfda9fee$var$wavesurfer.load(audioSrc);\n};\nconst $299b0bf5dfda9fee$var$loadTrackError = (trackid, error)=>{\n    const playElemUI = document.querySelector(`[data-trackid='${trackid}']`);\n    if (playElemUI) {\n        playElemUI.onclick = null;\n        const iconElement = playElemUI.firstChild.nextSibling;\n        iconElement.classList.remove(\"fa-volume-down\");\n        iconElement.classList.remove(\"fa-beat\");\n        iconElement.classList.add(\"fa-times\");\n    }\n    $299b0bf5dfda9fee$var$changeFloatingIcon(false);\n    const trackInfo = $299b0bf5dfda9fee$var$getTrackInfo(trackid);\n    document.getElementById(\"current-play-info\").textContent = \" Error loading track at: \" + trackInfo.comp_title;\n    $299b0bf5dfda9fee$var$wavesurfer.destroy();\n};\nconst $299b0bf5dfda9fee$var$updateCurrentPlayInfo = (track_id)=>{\n    const trackInfo = $299b0bf5dfda9fee$var$getTrackInfo(track_id);\n    document.getElementById(\"current-play-info\").textContent = trackInfo.comp_title + \" / \" + trackInfo.track_title;\n};\nconst $299b0bf5dfda9fee$var$getTrackInfo = (track_id)=>{\n    const track_title = $299b0bf5dfda9fee$var$tracks_dictionary[track_id].title;\n    const comp_title = $299b0bf5dfda9fee$var$composition_dictionary[$299b0bf5dfda9fee$var$tracks_dictionary[track_id].comp_uuid].title;\n    return {\n        track_title: track_title,\n        comp_title: comp_title\n    };\n};\nconst $299b0bf5dfda9fee$export$144cd45dcb767075 = (compositionsList)=>{\n    const all_tracks = (0, $69dccf2381da1e7e$export$3763f15547b21628)(compositionsList);\n    if (all_tracks.tracksList.length) {\n        document.querySelector(\".sticky-container\").style.display = \"block\";\n        $299b0bf5dfda9fee$var$tracks_dictionary = all_tracks.tracksDictionary;\n        $299b0bf5dfda9fee$var$composition_dictionary = all_tracks.compositionsDictionary;\n    }\n};\nconst $299b0bf5dfda9fee$var$loadAudioTrack = async (trackid, doPlay)=>{\n    if ($299b0bf5dfda9fee$var$wavesurfer) {\n        $299b0bf5dfda9fee$var$unsubscribeEvents();\n        $299b0bf5dfda9fee$var$wavesurfer.destroy();\n    }\n    $299b0bf5dfda9fee$var$wavesurfer = $299b0bf5dfda9fee$var$initializeWavesurfer();\n    $299b0bf5dfda9fee$var$addEventHandlersToWavesurfer();\n    const audio = document.getElementById(\"waveform\");\n    audio.setAttribute(\"data-currentaudio\", trackid);\n    document.getElementById(\"current-play-info\").textContent = \"Downloading track ... 0%\";\n    const floatingPlayButton = document.getElementById(\"playfloatingbutton\");\n    floatingPlayButton.classList.add(\"isDisabled\");\n    const audioSrc = window.location.origin + \"/trackfile/\" + trackid;\n    if ($299b0bf5dfda9fee$var$currentAbortController) $299b0bf5dfda9fee$var$currentAbortController.abort();\n    $299b0bf5dfda9fee$var$currentAbortController = new AbortController();\n    const signal = $299b0bf5dfda9fee$var$currentAbortController.signal;\n    const response = await fetch(audioSrc, {\n        signal: signal\n    });\n    if (response.ok) $299b0bf5dfda9fee$var$loadTrackSuccess(audioSrc, doPlay);\n    else $299b0bf5dfda9fee$var$loadTrackError(trackid, \"Fetching error\");\n};\nconst $299b0bf5dfda9fee$export$7a196286caa95f25 = ()=>{\n    const elements = document.querySelectorAll(\"[data-trackid]\");\n    elements.forEach((element)=>{\n        const trackid = element.getAttribute(\"data-trackid\");\n        element.onclick = ()=>{\n            $299b0bf5dfda9fee$var$playTrackButtonHandler(trackid);\n        };\n    });\n};\nconst $299b0bf5dfda9fee$var$fabPlayButtonIsCurrentTrack = ()=>{\n    const isPlaying = $299b0bf5dfda9fee$var$wavesurfer.isPlaying();\n    if (isPlaying) $299b0bf5dfda9fee$var$wavesurfer.pause();\n    else $299b0bf5dfda9fee$var$wavesurfer.play();\n};\nconst $299b0bf5dfda9fee$export$ddb3bbf4ed6f1ca3 = ()=>{\n    const floatingPlayButton = document.getElementById(\"playfloatingbutton\");\n    floatingPlayButton.onclick = ()=>{\n        $299b0bf5dfda9fee$var$fabPlayButtonIsCurrentTrack();\n    };\n};\nconst $299b0bf5dfda9fee$var$initializeWavesurfer = ()=>{\n    return WaveSurfer.create($299b0bf5dfda9fee$var$waveSurferOptions);\n};\nconst $299b0bf5dfda9fee$var$unsubscribeEvents = ()=>{\n    $299b0bf5dfda9fee$var$wavesurfer.unAll();\n};\nconst $299b0bf5dfda9fee$var$addEventHandlersToWavesurfer = ()=>{\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"finish\", ()=>{\n        const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n        $299b0bf5dfda9fee$var$changeFloatingIcon(false);\n        $299b0bf5dfda9fee$var$changeFaIcon(currentTrack, false);\n    });\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"play\", ()=>{\n        const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n        $299b0bf5dfda9fee$var$changeFloatingIcon(true);\n        $299b0bf5dfda9fee$var$changeFaIcon(currentTrack, true);\n    });\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"loading\", (percentage)=>{\n        document.getElementById(\"current-play-info\").textContent = `Downloading track ... ${percentage}%`;\n    });\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"pause\", ()=>{\n        const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n        $299b0bf5dfda9fee$var$changeFloatingIcon(false);\n        $299b0bf5dfda9fee$var$changeFaIcon(currentTrack, false);\n    });\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"ready\", (duration)=>{\n        const floatingPlayButton = document.getElementById(\"playfloatingbutton\");\n        floatingPlayButton.classList.remove(\"isDisabled\");\n        const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n        $299b0bf5dfda9fee$var$updateCurrentPlayInfo(currentTrack);\n        if ($299b0bf5dfda9fee$var$AUTO_PLAY) $299b0bf5dfda9fee$var$wavesurfer.play();\n        else $299b0bf5dfda9fee$var$changeFloatingIcon(false);\n    });\n    $299b0bf5dfda9fee$var$wavesurfer.on(\"error\", (error)=>{\n        if (error) {\n            const currentTrack = $299b0bf5dfda9fee$var$getCurrentTrack();\n            $299b0bf5dfda9fee$var$loadTrackError(currentTrack, error);\n        }\n    });\n};\n\n\nconst $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5 = \"/composition.html?compositionId=\";\nlet $ce4a593b0ea78dcf$export$4cd34456ac1eb639 = false;\nconst $ce4a593b0ea78dcf$var$homePageTermsAccepted = (termsAccepted)=>{\n    if (!termsAccepted) (0, $faZmx.generateAcceptTermsModal)(\"header\");\n};\nconst $ce4a593b0ea78dcf$var$getMyProfile = async ()=>{\n    const isAuthenticated = await (0, $jXEky.callJsonApi)(\"/profile\", \"GET\", null, \"Loading profile...\");\n    if (isAuthenticated.ok) {\n        (0, $69dccf2381da1e7e$export$149136365741a43c)(isAuthenticated.name);\n        document.getElementById(\"userlogin\").style.display = \"none\";\n        document.getElementById(\"useroptions\").style.display = \"\";\n        document.getElementById(\"display_profile_name\").innerText = `[${isAuthenticated.name}]`;\n        (0, $faZmx.checkIfTermsAccepted)(isAuthenticated, $ce4a593b0ea78dcf$var$homePageTermsAccepted);\n    }\n    return isAuthenticated;\n};\nconst $ce4a593b0ea78dcf$export$b99e48ec291af6c0 = async ()=>{\n    const endpoint = \"/mycompositions\";\n    const data = await (0, $jXEky.callJsonApi)(endpoint, \"GET\", null, \"Loading my music...\");\n    if (data.compositions) return $ce4a593b0ea78dcf$var$renderHomePage(data.compositions, endpoint);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $ce4a593b0ea78dcf$var$getCompositionsByUserUid = async (useruid, auth)=>{\n    const endpoint = \"/compositionsbyuserid/\" + useruid;\n    const data = await (0, $jXEky.callJsonApi)(endpoint, \"GET\", null, \"Loading user...\");\n    if (data.compositions) {\n        (0, $69dccf2381da1e7e$export$149136365741a43c)(data.username);\n        (0, $ceab237e06e82e44$export$b8abf8ca7249a7d2)(data.username, useruid);\n        return $ce4a593b0ea78dcf$var$renderHomePage(data.compositions, endpoint);\n    } else {\n        alert(\"invalid return value for user id\");\n        if (auth.ok) (0, $a57243222c2ea8a4$export$ff7962acd6052c28)(\"my-comp\");\n        else (0, $a57243222c2ea8a4$export$ff7962acd6052c28)(\"recent-comp\");\n    }\n};\nconst $ce4a593b0ea78dcf$var$getCompositionsByColelctionUid = async (collectionuid, auth)=>{\n    const endpoint = \"/collectionastreebyid/\" + collectionuid;\n    const data = await (0, $jXEky.callJsonApi)(endpoint, \"GET\", null, \"Loading collection...\");\n    if (data.compositions) {\n        (0, $69dccf2381da1e7e$export$149136365741a43c)(data.username);\n        (0, $ceab237e06e82e44$export$206832d47f4d1079)(data.collection_name, data.username, data.owneruid);\n        return $ce4a593b0ea78dcf$var$renderHomePage(data.compositions, endpoint);\n    } else {\n        alert(\"invalid return value for collection id\");\n        if (auth.ok) (0, $a57243222c2ea8a4$export$ff7962acd6052c28)(\"my-comp\");\n        else (0, $a57243222c2ea8a4$export$ff7962acd6052c28)(\"recent-comp\");\n    }\n};\nconst $ce4a593b0ea78dcf$export$8d85b36da8527a05 = async (withScroll)=>{\n    const endpoint = \"/recentcompositions\";\n    const data = await (0, $jXEky.callJsonApi)(\"/recentcompositions\", \"GET\", null, \"Loading recent...\");\n    if (data.compositions) return $ce4a593b0ea78dcf$var$renderHomePage(data.compositions, endpoint, withScroll);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $ce4a593b0ea78dcf$export$556539c2d93a797d = async (withScroll)=>{\n    const endpoint = \"/compositions\";\n    const data = await (0, $jXEky.callJsonApi)(\"/compositions\", \"GET\", null, \"Loading all...\");\n    if (data.compositions) return $ce4a593b0ea78dcf$var$renderHomePage(data.compositions, endpoint, withScroll);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $ce4a593b0ea78dcf$var$renderHomePage = (compositionsList, endpoint, withScroll)=>{\n    document.getElementById(\"grid\").innerHTML = \"\";\n    document.getElementById(\"legendbuttons\").innerHTML = \"\";\n    const notUserPublicPage = !endpoint.includes(\"/compositionsbyuserid/\") && !endpoint.includes(\"/collectionastreebyid/\");\n    if (notUserPublicPage) (0, $ceab237e06e82e44$export$2ccaa4a069104255)(false, withScroll);\n    if (!compositionsList.length && notUserPublicPage) {\n        document.getElementById(\"initialmessage\").hidden = false;\n        document.getElementById(\"initialmessage\").classList.add(\"d-flex\");\n    } else $ce4a593b0ea78dcf$var$renderHomePageWithLists(compositionsList, endpoint);\n    (0, $299b0bf5dfda9fee$export$144cd45dcb767075)(compositionsList);\n    (0, $299b0bf5dfda9fee$export$7a196286caa95f25)();\n};\nconst $ce4a593b0ea78dcf$var$renderHomePageWithLists = (compositionsList, endpoint)=>{\n    if (endpoint.includes(\"/collectionastreebyid/\")) {\n        const parent_coll_id = endpoint.replace(\"/collectionastreebyid/\", \"\");\n        const groupedCompsAndSubColl = (0, $69dccf2381da1e7e$export$46ab7a802f6f7711)(compositionsList, parent_coll_id);\n        $ce4a593b0ea78dcf$var$paintListOfCompositions(groupedCompsAndSubColl, null, endpoint, compositionsList.length);\n    } else if (!(0, $69dccf2381da1e7e$export$1badf4b56a2f2c08)(endpoint)) {\n        const groupedComps = (0, $69dccf2381da1e7e$export$2095d3815b0f7547)(compositionsList);\n        $ce4a593b0ea78dcf$var$paintListOfCompositions(groupedComps, \"groupedbyuser_final\", endpoint, compositionsList.length);\n    } else {\n        const groupedCompsWithCollab = (0, $69dccf2381da1e7e$export$6d37f804b553eac7)(compositionsList);\n        $ce4a593b0ea78dcf$var$paintListOfCompositions(groupedCompsWithCollab, \"groupedbycollab\", endpoint, compositionsList.length);\n    }\n};\nconst $ce4a593b0ea78dcf$var$paintGroupCollection = (listcomps, typebadge, endpoint)=>{\n    let allCompUIelem = \"\";\n    for(const comp in listcomps){\n        const element = listcomps[comp];\n        let listgroup = \"\";\n        let groupTitle = \"\";\n        let groupId = null;\n        if (typebadge === \"collab\") groupTitle = \"Collaborations\";\n        else if (typebadge === \"coll\") {\n            groupTitle = Object.values(element)[0].parent_collection;\n            groupId = Object.values(element)[0].collection_uid;\n        } else {\n            groupTitle = Object.values(element)[0].username;\n            groupId = Object.values(element)[0].owner_uuid;\n        }\n        for (const item of element)listgroup += (0, $ceab237e06e82e44$export$cbdc54c51b649c98)(item, typebadge, endpoint);\n        allCompUIelem += (0, $ceab237e06e82e44$export$da2a595be284078a)(typebadge, element.length, groupTitle, groupId, listgroup);\n    }\n    return allCompUIelem;\n};\nconst $ce4a593b0ea78dcf$var$getSingleComps = (groupedComps, endpoint)=>{\n    let listElelemts = \"\";\n    const listCompsSingle = groupedComps.singlecomps;\n    listCompsSingle === null || listCompsSingle === void 0 ? void 0 : listCompsSingle.forEach((element)=>{\n        const template = (0, $ceab237e06e82e44$export$971becedf6ebeceb)(element, endpoint);\n        listElelemts += template;\n    });\n    return listElelemts;\n};\nconst $ce4a593b0ea78dcf$var$paintListOfCompositions = (groupedComps, customgroup, endpoint, totalcomps)=>{\n    let listElelemts = \"\";\n    const numberGroupsByCollections = Object.keys(groupedComps.groupedbycoll).length;\n    const numberCustomGroups = customgroup ? Object.keys(groupedComps[customgroup]).length : 0;\n    let numberSinglComp = groupedComps.singlecomps.length;\n    if (numberGroupsByCollections > 0) {\n        const listComps = groupedComps.groupedbycoll;\n        const template = $ce4a593b0ea78dcf$var$paintGroupCollection(listComps, \"coll\", endpoint);\n        listElelemts += template;\n    }\n    if (numberCustomGroups > 0) {\n        const listComps = groupedComps[customgroup];\n        const typeofbadge = customgroup === \"groupedbycollab\" ? \"collab\" : \"user\";\n        const template = $ce4a593b0ea78dcf$var$paintGroupCollection(listComps, typeofbadge, endpoint);\n        listElelemts += template;\n    }\n    if (numberSinglComp > 0) listElelemts += $ce4a593b0ea78dcf$var$getSingleComps(groupedComps, endpoint);\n    const legendButtons = (0, $ceab237e06e82e44$export$bca9dffb57f7792b)(numberGroupsByCollections, numberCustomGroups, numberSinglComp, endpoint, totalcomps);\n    (0, $ceab237e06e82e44$export$1f60eb8703988013)(listElelemts, legendButtons);\n};\nconst $ce4a593b0ea78dcf$var$initHomPage = async ()=>{\n    const queryString = window.location.search;\n    const user_id = queryString.split(\"userid=\")[1];\n    const collection_uid = queryString.split(\"collectionid=\")[1];\n    let isAuth = await $ce4a593b0ea78dcf$var$getMyProfile();\n    $ce4a593b0ea78dcf$export$4cd34456ac1eb639 = isAuth.ok;\n    if (user_id) await $ce4a593b0ea78dcf$var$getCompositionsByUserUid(user_id, isAuth);\n    else if (collection_uid) await $ce4a593b0ea78dcf$var$getCompositionsByColelctionUid(collection_uid, isAuth);\n    else if (isAuth.ok) await $ce4a593b0ea78dcf$export$b99e48ec291af6c0();\n    else await $ce4a593b0ea78dcf$export$8d85b36da8527a05();\n    (0, $a57243222c2ea8a4$export$184163c68675dcce)(isAuth, user_id || collection_uid);\n};\n(0, $ceab237e06e82e44$export$c1504dbc5bdba629)();\n(0, $jXEky.activateGoHomeLink)();\n$ce4a593b0ea78dcf$var$initHomPage();\n(0, $299b0bf5dfda9fee$export$ddb3bbf4ed6f1ca3)();\n\n\n\nvar $fZ0Rm = parcelRequire(\"fZ0Rm\");\n\nvar $hbluw = parcelRequire(\"hbluw\");\n\nlet $14282b8b27bf399a$var$EDIT_STATUS = false;\nconst $14282b8b27bf399a$var$showAllCollButton = document.getElementById(\"openMyCollectionsButton\");\nconst $14282b8b27bf399a$var$editButton = document.getElementById(\"editmycollectionsbutton\");\nconst $14282b8b27bf399a$var$fetchCollectionsTree = async ()=>{\n    const response = await fetch(\"/mycollectionsastree\");\n    const data = await response.json();\n    return data;\n};\nconst $14282b8b27bf399a$var$createTreeHTML = (item)=>{\n    let html = `\n        <span id='removeCollIcon${item.uuid}' data-uuid='${item.uuid}' data-title='${item.title}' role='button' class='badge badge-pill badge-danger' hidden>-</span>\n        <li id='${item.uuid}' class='list-group-item border-bottom-0 border-right-0 border-top-0 border-warning'>\n            <input type='text' class='form-control border-secondary' id='treecolltitleinput${item.uuid}' data-uuid='${item.uuid}' placeholder='Type a new title'\n            title='collectiontitle' value='${item.title}' disabled>\n        </li>`;\n    if (item.compositions.length > 0 || item.collections.length > 0) {\n        html += \"<ul>\";\n        for (const composition of item.compositions)html += `<li class='list-group-item border-0'><a href='${(0, $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5) + composition.uuid}'><u>${composition.title}</u></a></li>`;\n        for (const collection of item.collections)html += $14282b8b27bf399a$var$createTreeHTML(collection);\n        html += \"</ul>\";\n    }\n    return html;\n};\nconst $14282b8b27bf399a$var$renderTree = async ()=>{\n    const treeContainer = document.getElementById(\"listCollContainerAllColl\");\n    const data = await $14282b8b27bf399a$var$fetchCollectionsTree();\n    let html = \"<ul>\";\n    for (const collection of data)html += $14282b8b27bf399a$var$createTreeHTML(collection);\n    html += \"</ul>\";\n    treeContainer.innerHTML = html;\n};\nconst $14282b8b27bf399a$var$clickEditButtonHandler = ()=>{\n    if ($14282b8b27bf399a$var$EDIT_STATUS) {\n        $14282b8b27bf399a$var$EDIT_STATUS = false;\n        $14282b8b27bf399a$var$editButton.innerText = \"Edit\";\n        $14282b8b27bf399a$var$disableEdition();\n    } else {\n        $14282b8b27bf399a$var$EDIT_STATUS = true;\n        $14282b8b27bf399a$var$editButton.innerText = \"Done\";\n        $14282b8b27bf399a$var$enableEdition();\n    }\n};\nconst $14282b8b27bf399a$var$enableEdition = ()=>{\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`);\n    elementsWithHiddenAttribute.forEach((element)=>{\n        element.removeAttribute(\"hidden\");\n        $14282b8b27bf399a$var$removeCollectionClickhHandler(element.getAttribute(\"data-uuid\"), element.getAttribute(\"data-title\"));\n    });\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`);\n    elementsWithDisabledAttribute.forEach((element)=>{\n        element.removeAttribute(\"disabled\");\n        $14282b8b27bf399a$var$updateInputTextEventHandler(element.getAttribute(\"data-uuid\"), element.value);\n    });\n};\nconst $14282b8b27bf399a$var$disableEdition = ()=>{\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`);\n    elementsWithHiddenAttribute.forEach((element)=>{\n        element.setAttribute(\"hidden\", \"true\");\n    });\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`);\n    elementsWithDisabledAttribute.forEach((element)=>{\n        element.setAttribute(\"disabled\", \"true\");\n    });\n};\nconst $14282b8b27bf399a$var$clickAllCollButtonHandler = async ()=>{\n    $14282b8b27bf399a$var$EDIT_STATUS = false;\n    $14282b8b27bf399a$var$editButton.innerText = \"Edit\";\n    await $14282b8b27bf399a$var$renderTree();\n    $14282b8b27bf399a$var$editButton.addEventListener(\"click\", $14282b8b27bf399a$var$clickEditButtonHandler, false);\n};\n$14282b8b27bf399a$var$showAllCollButton === null || $14282b8b27bf399a$var$showAllCollButton === void 0 ? void 0 : $14282b8b27bf399a$var$showAllCollButton.addEventListener(\"click\", $14282b8b27bf399a$var$clickAllCollButtonHandler, false);\nconst $14282b8b27bf399a$var$confirmDeleteCollectionModal = async (event, collectionId, collectionTitle)=>{\n    const chk = event.target;\n    if (chk.tagName === \"SPAN\") {\n        if (confirm(`Are you sure you want remove the collection ${collectionTitle} and all of its content?`) == true) {\n            const response = await fetch((0, $hbluw.ENDPOINT) + \"/deletecollection/\" + collectionId, {\n                method: \"DELETE\"\n            });\n            if (response === null || response === void 0 ? void 0 : response.ok) $14282b8b27bf399a$var$removeCollectionFromModalDialog(collectionId);\n        } else event.target.checked = false;\n    }\n};\nconst $14282b8b27bf399a$var$removeCollectionFromModalDialog = (collectionId)=>{\n    var _listElemToDelete_nextSibling;\n    const listElemToDelete = document.getElementById(collectionId);\n    let ids = null;\n    if ((listElemToDelete === null || listElemToDelete === void 0 ? void 0 : (_listElemToDelete_nextSibling = listElemToDelete.nextSibling) === null || _listElemToDelete_nextSibling === void 0 ? void 0 : _listElemToDelete_nextSibling.tagName) === \"UL\") {\n        ids = Array.from(listElemToDelete.nextSibling.querySelectorAll(\"li[id]\")).map((li)=>li.id);\n        listElemToDelete.nextSibling.remove();\n    }\n    listElemToDelete.remove();\n    $14282b8b27bf399a$var$removeCollectionFromHomePage(collectionId);\n    document.getElementById(\"removeCollIcon\" + collectionId).remove();\n    ids && ids.forEach((id)=>{\n        $14282b8b27bf399a$var$removeCollectionFromHomePage(id);\n    });\n    const collection_uid = window.location.search.split(\"collectionid=\")[1];\n    if (collectionId === collection_uid) window.location.href = window.location.origin;\n};\nconst $14282b8b27bf399a$var$removeCollectionFromHomePage = (collectionId)=>{\n    const cardElemToDelete = document.getElementById(collectionId);\n    if (cardElemToDelete) cardElemToDelete.remove();\n};\nconst $14282b8b27bf399a$var$removeCollectionClickhHandler = (collectionId, collectionTitle)=>{\n    document.getElementById(\"removeCollIcon\" + collectionId).onclick = async (event)=>{\n        await $14282b8b27bf399a$var$confirmDeleteCollectionModal(event, collectionId, collectionTitle);\n    };\n};\nconst $14282b8b27bf399a$var$updateInputTextEventHandler = (collectionId, currentTitle)=>{\n    document.getElementById(\"treecolltitleinput\" + collectionId).onblur = (event)=>{\n        $14282b8b27bf399a$var$handleInputBlur(event, collectionId, currentTitle);\n    };\n};\nconst $14282b8b27bf399a$var$updateCollectionTitleRqst = (value, uuid)=>{\n    const updateTitleApi = (0, $hbluw.ENDPOINT) + \"/updatecolltitle\";\n    const data = {\n        title: value,\n        uuid: uuid\n    };\n    fetch(updateTitleApi, {\n        method: \"PATCH\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n    }).then().catch((error)=>{\n        console.error(\"Error updating value:\", error);\n    });\n};\nconst $14282b8b27bf399a$var$handleInputBlur = (event, collId, currTitle)=>{\n    const newValue = event.target.value;\n    if (currTitle !== newValue) {\n        if (!newValue || newValue === \"\") {\n            event.target.value = currTitle;\n            alert(\"Introduce a valid title, please\");\n            return;\n        } else $14282b8b27bf399a$var$updateCollectionTitleRqst(newValue, collId);\n    }\n};\n\n\nconst $11ef8b79751ebaff$var$createNewButton = document.getElementById(\"createNewButton\");\nconst $11ef8b79751ebaff$var$createNewButtonAtHome = document.getElementById(\"createNewButtonAtHome\");\nconst $11ef8b79751ebaff$var$clickNewButtonHandler = ()=>{\n    if (!(0, $ce4a593b0ea78dcf$export$4cd34456ac1eb639)) window.location.href = \"/login.html\";\n    else {\n        document.getElementById(\"newtitle\").value = \"\";\n        document.getElementById(\"newdescription\").value = \"\";\n        const saveCompositionButton = document.getElementById(\"newcreation\");\n        $11ef8b79751ebaff$var$saveEventListener(saveCompositionButton);\n        (0, $fZ0Rm.getCollections)().then((result)=>{\n            if (result) $11ef8b79751ebaff$var$getCompCollSuccess(result);\n            else (0, $fZ0Rm.getCollectionsError)();\n        });\n    }\n};\n$11ef8b79751ebaff$var$createNewButton === null || $11ef8b79751ebaff$var$createNewButton === void 0 ? void 0 : $11ef8b79751ebaff$var$createNewButton.addEventListener(\"click\", $11ef8b79751ebaff$var$clickNewButtonHandler, false);\n$11ef8b79751ebaff$var$createNewButtonAtHome === null || $11ef8b79751ebaff$var$createNewButtonAtHome === void 0 ? void 0 : $11ef8b79751ebaff$var$createNewButtonAtHome.addEventListener(\"click\", $11ef8b79751ebaff$var$clickNewButtonHandler, false);\nconst $11ef8b79751ebaff$var$getCompCollSuccess = (list)=>{\n    document.getElementById(\"listCollContainer\").innerHTML = \"\";\n    (0, $fZ0Rm.createListCollections)(list, \"listCollContainer\");\n};\nconst $11ef8b79751ebaff$var$saveEventListener = (saveCompositionButton)=>{\n    saveCompositionButton === null || saveCompositionButton === void 0 ? void 0 : saveCompositionButton.addEventListener(\"click\", $11ef8b79751ebaff$var$saveEventListenerHandler);\n};\nconst $11ef8b79751ebaff$var$saveEventListenerHandler = (e)=>{\n    const newCreation = document.querySelector('input[name=\"newMusicTypeRadioButton\"]:checked').value;\n    let apiMethod = \"/newcomposition\";\n    if (newCreation === \"coll\") apiMethod = \"/newcollection\";\n    let newtitle = document.getElementById(\"newtitle\").value;\n    const privacyLevel = document.querySelector('input[name=\"newMusicPrivacyRadios\"]:checked').value;\n    if (!newtitle) {\n        alert(\"Introduce a valid title, please\");\n        return;\n    }\n    const newdescription = document.getElementById(\"newdescription\").value;\n    const collectInput = document.getElementById(\"inputGroupSelectCollect\");\n    let parentCollection = (collectInput === null || collectInput === void 0 ? void 0 : collectInput.value) || null;\n    if (parentCollection === \"0\") parentCollection = null;\n    let body = JSON.stringify({\n        title: newtitle,\n        privacy_level: privacyLevel,\n        parent_uuid: parentCollection,\n        description: newdescription\n    });\n    let errorIs = null;\n    (0, $jXEky.startLoader)(\"Creating...\");\n    fetch((0, $hbluw.ENDPOINT) + apiMethod, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        },\n        body: body\n    }).then((r)=>{\n        if (!r.ok) errorIs = r.statusText;\n        return r.json();\n    }).then((data)=>{\n        (0, $jXEky.cancelLoader)();\n        if (data) $11ef8b79751ebaff$var$verifyResponse(data);\n        else throw new Error(data);\n    }).catch((error)=>{\n        errorIs = error;\n        (0, $jXEky.cancelLoader)();\n    });\n};\nconst $11ef8b79751ebaff$var$verifyResponse = (response)=>{\n    $(\"#newMusicModal\").modal(\"hide\");\n    if (response.composition) window.location.href = (0, $ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5) + response.composition.uuid;\n    else if (response.ok) (0, $gXFaz.default).dynamicModalDialog(`Collection created successfully!`, null, \"\", \"Close\", \"New Collection\", \"bg-success\");\n    else (0, $gXFaz.default).dynamicModalDialog(`An error happened, item not created`, null, \"\", \"Close\", \"Error at Creation\", \"bg-danger\");\n};\n\n\n//# sourceMappingURL=index.aa171dca.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n  return value;\n}\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n  return '/';\n}\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n  return matches[0];\n}\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","const MODE = 'DEV' // 'STAGE', 'PROD'\n\nconst ENVIRONMENTS = {\n    PROD:{       \n        ENDPOINT:'https://hiaudio.fr',\n        UPLOAD_ENDPOINT:'https://hiaudio.fr/fileUpload'     \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'\n    },\n    DEV:{       \n        ENDPOINT:window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.host + '/fileUpload'\n    }\n}\n\nexport const ENDPOINT = ENVIRONMENTS[MODE].ENDPOINT\nexport const UPLOAD_ENDPOINT = ENVIRONMENTS[MODE].UPLOAD_ENDPOINT","class DynamicModal {\n    constructor() {\n        this.modal = this.getDynamicModal()\n        this.callbackDismiss = null\n        if (!this.modal) {\n            this.modal = this.initDynamicModal()\n            const self = this\n            $(this.modal).on('hide.bs.modal', function (event) {\n                if(self.callbackDismiss){\n                    self.callbackDismiss()\n                    self.callbackDismiss = null\n                }\n            })\n        }\n    }\n\n    dynamicModalDialog(message, idbtn, textBtnOK, textBtnCancel, popupTitle, backgroundHeader, callbackDismiss) {\n        const html =\n            '<div class=\"modal-header '+backgroundHeader+' text-white\">' +\n            '<h5 class=\"modal-title\" id=\"dynamicModalLabel\">'+popupTitle+'</h5>' +\n            '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">' +\n            '<span aria-hidden=\"true\">&times;</span>' +\n            '</button>' +\n            '</div>' +\n            '<div class=\"modal-body\">' +\n            message +\n            '</div>' +\n            '<div class=\"modal-footer\">' +\n            '<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">'+textBtnCancel+'</button>' +\n            (idbtn!==null?'<button id=' + idbtn + ' type=\"button\" class=\"btn btn-primary\">' + textBtnOK + '</button>':'') +\n            '</div>'\n\n        this.setDynamicModalContent(html)\n        this.callbackDismiss = callbackDismiss\n        $(this.modal).modal('show')\n    }\n\n    getDynamicModal() {\n        return document.getElementById('dynamicModal')\n    }\n\n    setDynamicModalContent(html) {\n        this.modal.querySelector('.modal-content').innerHTML = html\n    }\n\n    closeDynamicModal(callBackClose) {\n        $(this.modal).modal('hide')\n        if(callBackClose){\n            callBackClose()\n        }\n    }\n\n    initDynamicModal() {\n        const modal = document.createElement('div')\n        modal.classList.add('modal', 'fade')\n        modal.setAttribute('id', 'dynamicModal')\n        modal.setAttribute('tabindex', '-1')\n        modal.setAttribute('role', 'dialog')\n        modal.setAttribute('aria-labelledby', 'dynamicModalLabel')\n        modal.setAttribute('aria-hidden', 'true')\n        modal.innerHTML =\n            '<div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">' +\n            '<div class=\"modal-content\"></div>' +\n            '</div>'\n        document.body.appendChild(modal)\n        return modal\n    }\n}\n\nconst dynamicModalInstance = new DynamicModal()\n\nexport default dynamicModalInstance","import { ENDPOINT } from './config'\n\nexport const uriUserPage = '/index.html?userid='\nexport const uriCollectionPage = '/index.html?collectionid='\n\nexport const UserRole = Object.freeze({\n    none : 0,\n    owner : 1,\n    admin : 2,\n    member : 3,\n    guest : 4\n})\n\nexport const LevelPrivacy = Object.freeze({\n    public : 1,\n    onlyreg : 2,\n    private : 3\n})\n\nexport const PRIVACY_BADGE_STYLE = {[LevelPrivacy.public] : 'badge-public', [LevelPrivacy.onlyreg] : 'badge-onlyreg', [LevelPrivacy.private] : 'badge-private'}\nexport const PRIVACY_BADGE_TEXT = {[LevelPrivacy.public] : 'PUBLIC', [LevelPrivacy.onlyreg] : 'REG USERS', [LevelPrivacy.private] : 'PRIVATE'}\n\nexport const startLoader = (loadingMessage) => {    \n    const loaderElement = document.getElementById('loader')    \n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`\n    loaderElement.classList.remove('loader-hidden')\n}\n\nexport const cancelLoader = () => {\n    const loaderElement = document.getElementById('loader')\n    loaderElement.classList.add('loader-hidden')\n}\n\nexport const callJsonApi = async (apimethod, rqstmethod, body, useLoaderWithText) => {\n    const request = {\n        method: rqstmethod || 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    if(body){\n        request.body = JSON.stringify(body)\n    }\n    try {\n        useLoaderWithText && startLoader(useLoaderWithText)\n        const sendRqst = await fetch(ENDPOINT + apimethod, request)\n        useLoaderWithText && cancelLoader()\n        const respToJson = await sendRqst.json()\n        if (respToJson && !respToJson.error) {\n            return respToJson\n        } else {\n            return (respToJson?.error || 'An error occurred')\n        }\n    } catch (error) {\n        useLoaderWithText && cancelLoader()\n        return(error)\n    }\n}\n\n/* https://stackoverflow.com/a/5166806 */\nexport const looksLikeMail = (str) => {\n    const lastAtPos = str.lastIndexOf('@')\n    const lastDotPos = str.lastIndexOf('.')\n    return (lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2)\n}\n\nexport const activateGoHomeLink = () => {\n    const goHomeLink = document.getElementById('goHome')\n    if(window.location.host === 'localhost:80' || window.location.origin === 'http://localhost'){\n        goHomeLink.href = window.location.origin + '/index.html'\n    } else {\n        goHomeLink.href = window.location.origin\n    }\n}\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\nexport const MEDIA_CONSTRAINTS = { audio: {echoCancellation:false, noiseSuppression:false, autoGainControl:false, latency: 0, channelCount: 1 }}","import { cancelLoader, callJsonApi } from './utils'\n\nexport const checkIfTermsAccepted = (userprofile, callback) => {\n    cancelLoader()\n    callback(userprofile?.terms_accepted)\n}\n\nexport const handleTermsNotAccepted = () => {\n\n    $('#acceptTermsModal').modal({\n        backdrop: 'static',\n        keyboard: false  // to prevent closing with Esc button (if you want this too)\n    })\n    $('#acceptTermsModal').modal('show')\n    document.getElementById('buttonAcceptTerms').onclick = rqstAcceptTerms\n    document.getElementById('buttonRejectTerms').onclick = rqstRejectTerms\n}\n\nconst rqstAcceptTerms = async () => {\n    const data = await callJsonApi('/acceptterms', 'PUT', null, 'Welcome...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n    }\n}\nconst rqstRejectTerms = async () => {\n    const data = await callJsonApi('/rejectterms', 'PUT', null, 'Deleting information...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n        window.location.href = window.location.origin\n    }\n}\n\nexport const generateAcceptTermsModal = (attachToElem) => {\n\n    const isModal = document.getElementById('acceptTermsModal')\n\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML('afterend', modalDialog)\n    }\n    handleTermsNotAccepted()\n}","\nimport { ENDPOINT } from './config'\nimport DynamicModal from './modaldialog'\n\nexport const getCollections = async () => {\n   \n    const response = await fetch(ENDPOINT + '/mycollections') \n    let result = null            \n    if(response?.ok){ \n        const respJson = await response.json()\n        result = respJson\n    }\n    return result\n}\n\nexport const getCollectionsError = () => {\n    DynamicModal.dynamicModalDialog(\n        'Problem getting collections', \n        null, \n        '',\n        'Close',\n        'Error',\n        'bg-danger'\n    )\n}\n\nexport const createListCollections = (collections,listId, coll_id) => {\n    const theList = collections.all_collections\n    const listCollContainer  = document.getElementById(listId)\n    let listOptions = `<option value='0'>...</option>`\n    let selected = null\n    theList.forEach((element) => {\n        if (element) {\n            if(element.uuid === coll_id){\n                selected = 'selected>'\n            } else {\n                selected = null\n            }\n            const template = `<option value='${element.uuid}' ${selected?selected:'>'}${element.title}</option>`\n            listOptions += template\n        }\n    })\n    const listElelemts = `<select class='custom-select' id='inputGroupSelectCollect'>${listOptions}</select>`   \n    listCollContainer.insertAdjacentHTML('afterbegin', listElelemts)\n}","require('./helpers/bundle-manifest').register(require('./helpers/bundle-url').getBundleURL('b33yz'),JSON.parse(\"[\\\"b33yz\\\",\\\"index.aa171dca.js\\\",\\\"amMcQ\\\",\\\"compress_home_page_video.e4cc210b.mp4\\\"]\"));","\nimport { ENDPOINT } from '../../../common/js/config'\nimport DynamicModal from '../../../common/js/modaldialog'\nimport { startLoader, cancelLoader } from '../../../common/js/utils'\nimport {uriCompositionPage, IS_AUTH} from './home'\nimport {getCollections, getCollectionsError, createListCollections } from '../../../common/js/collectionshandler.js'\nimport './editcollections'\n\nconst createNewButton  = document.getElementById('createNewButton')\nconst createNewButtonAtHome  = document.getElementById('createNewButtonAtHome')\n\nconst clickNewButtonHandler = () => {\n  if(!IS_AUTH){\n    window.location.href = '/login.html'\n  } else {\n    document.getElementById('newtitle').value = ''\n    document.getElementById('newdescription').value = ''\n    const saveCompositionButton = document.getElementById('newcreation')\n    saveEventListener(saveCompositionButton)\n    getCollections().then( result => {\n        if(result){\n            getCompCollSuccess(result)\n        } else {\n            getCollectionsError()\n        }\n    })\n  }  \n}\n\ncreateNewButton?.addEventListener('click', clickNewButtonHandler, false)\ncreateNewButtonAtHome?.addEventListener('click', clickNewButtonHandler, false)\n\nconst getCompCollSuccess = (list) => {\n  document.getElementById('listCollContainer').innerHTML = ''\n  createListCollections(list, 'listCollContainer')\n}\n\nconst saveEventListener = (saveCompositionButton) =>{\n  saveCompositionButton?.addEventListener('click', saveEventListenerHandler)\n}\n\nconst saveEventListenerHandler = (e) => {\n  const newCreation = document.querySelector('input[name=\"newMusicTypeRadioButton\"]:checked').value\n  let apiMethod = '/newcomposition'\n  if(newCreation === 'coll'){\n    apiMethod = '/newcollection'\n  }\n  let newtitle = document.getElementById('newtitle').value\n  const privacyLevel = document.querySelector('input[name=\"newMusicPrivacyRadios\"]:checked').value\n  if (!newtitle) {\n    alert('Introduce a valid title, please')\n    return\n  }\n\n  const newdescription = document.getElementById('newdescription').value  \n  const collectInput = document.getElementById('inputGroupSelectCollect')\n  let parentCollection = collectInput?.value || null\n  if(parentCollection === '0'){\n      parentCollection = null\n  }\n\n  let body = JSON.stringify({\n    title: newtitle,\n    privacy_level: privacyLevel,\n    parent_uuid: parentCollection,\n    description: newdescription\n  })\n\n  let errorIs = null\n  startLoader('Creating...')\n  fetch(ENDPOINT + apiMethod, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n    },\n    body: body\n  })\n    .then((r) => {\n      if (!r.ok) {\n        errorIs = r.statusText\n      }\n      return r.json()\n    })\n    .then(data => {\n      cancelLoader()\n      if (data) {\n        verifyResponse(data)\n      } else {\n        throw new Error(data)\n      }\n    }).catch((error) => {      \n      errorIs = error\n      cancelLoader()\n    })\n}\n\nconst verifyResponse = (response)=> {\n  $('#newMusicModal').modal('hide')  \n  if(response.composition){\n    window.location.href = uriCompositionPage + response.composition.uuid  \n  } else if(response.ok) {\n    DynamicModal.dynamicModalDialog(\n      `Collection created successfully!`,\n      null,\n      '',\n      'Close',\n      'New Collection',\n      'bg-success'\n    )\n  } else {\n    DynamicModal.dynamicModalDialog(\n      `An error happened, item not created`,\n      null,\n      '',\n      'Close',\n      'Error at Creation',\n      'bg-danger'\n    )\n  }\n}","import { callJsonApi, activateGoHomeLink } from '../../../common/js/utils'\r\nimport {breadcrumbHandler, navigate} from './breadcrumbhandler'\r\nimport {checkIfTermsAccepted, generateAcceptTermsModal} from '../../../common/js/acceptterms'\r\nimport {getLegendButtons,\r\n  paintMainElemsHomePage,\r\n  paintSingleComposition,\r\n  getUIListElemInsideCollection,\r\n  getUICardElemForCollection,\r\n  cleanWelcomeContainer,\r\n  updateUIWithCollectionInfo,\r\n  updateUIWithUserInfo,\r\n  initNavigationMenu\r\n} from './home_ui'\r\nimport {getGroupedCompositionsWithUsers,\r\n  getGroupedCompositionsWithCollab,\r\n  isuserpage,\r\n  getGroupedCompositionsWithSubCollect,\r\n  setCurrentUserName}\r\nfrom './home_helper'\r\nimport {setPlayButtonsHandler, fabPlayButtonClickHandler, prepareAudioTrackPlaylist} from './audioplayer'\r\n\r\nexport const uriCompositionPage = '/composition.html?compositionId='\r\nexport let IS_AUTH = false\r\n\r\nconst homePageTermsAccepted = (termsAccepted) => {    \r\n    if(!termsAccepted){\r\n        generateAcceptTermsModal('header')\r\n    } \r\n}\r\nconst getMyProfile = async () => {\r\n  \r\n  const isAuthenticated = await callJsonApi('/profile', 'GET', null, 'Loading profile...')\r\n  if (isAuthenticated.ok) {\r\n    setCurrentUserName(isAuthenticated.name)\r\n    document.getElementById('userlogin').style.display = 'none'\r\n    document.getElementById('useroptions').style.display = ''\r\n    document.getElementById('display_profile_name').innerText = `[${isAuthenticated.name}]`    \r\n    checkIfTermsAccepted(isAuthenticated, homePageTermsAccepted)    \r\n  }\r\n  return isAuthenticated\r\n}\r\n\r\nexport const getMyCompositions = async () => {\r\n  const endpoint = '/mycompositions'\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading my music...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }  \r\n}\r\n\r\nconst getCompositionsByUserUid = async (useruid, auth) => {\r\n  const endpoint = '/compositionsbyuserid/'+useruid\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading user...')\r\n  if(data.compositions){\r\n    setCurrentUserName(data.username)\r\n    updateUIWithUserInfo(data.username, useruid)\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for user id')\r\n    if(auth.ok){\r\n      navigate('my-comp')\r\n    } else {\r\n      navigate('recent-comp')\r\n    }      \r\n  }  \r\n}\r\n\r\nconst getCompositionsByColelctionUid = async (collectionuid, auth) => {\r\n  const endpoint = '/collectionastreebyid/'+collectionuid\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading collection...')\r\n  if(data.compositions){\r\n    setCurrentUserName(data.username)\r\n    updateUIWithCollectionInfo(data.collection_name, data.username, data.owneruid)\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for collection id')\r\n    if(auth.ok){\r\n      navigate('my-comp')\r\n    } else {\r\n      navigate('recent-comp')\r\n    }      \r\n  }  \r\n}\r\n\r\nexport const getRecentCompositions = async (withScroll) => {\r\n  const endpoint = '/recentcompositions'\r\n  const data = await callJsonApi('/recentcompositions', 'GET', null, 'Loading recent...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint, withScroll)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }\r\n}\r\n\r\nexport const getAllCompositions = async (withScroll) => {\r\n  const endpoint = '/compositions'\r\n  const data = await callJsonApi('/compositions', 'GET', null, 'Loading all...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint, withScroll)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }\r\n}\r\n\r\nconst renderHomePage = (compositionsList, endpoint, withScroll) => {\r\n  document.getElementById('grid').innerHTML = ''\r\n  document.getElementById('legendbuttons').innerHTML = ''\r\n  const notUserPublicPage = !endpoint.includes('/compositionsbyuserid/') && !endpoint.includes('/collectionastreebyid/')\r\n  if(notUserPublicPage){\r\n    cleanWelcomeContainer(false, withScroll)\r\n  }\r\n  if (!compositionsList.length && notUserPublicPage) {\r\n    document.getElementById('initialmessage').hidden = false\r\n    document.getElementById('initialmessage').classList.add('d-flex')\r\n  } else {   \r\n    renderHomePageWithLists(compositionsList, endpoint)\r\n  }\r\n  prepareAudioTrackPlaylist(compositionsList)\r\n  setPlayButtonsHandler()\r\n}\r\n\r\nconst renderHomePageWithLists = (compositionsList, endpoint) => {\r\n  if(endpoint.includes('/collectionastreebyid/')){        \r\n    const parent_coll_id = endpoint.replace('/collectionastreebyid/', '')\r\n    const groupedCompsAndSubColl = getGroupedCompositionsWithSubCollect(compositionsList, parent_coll_id)       \r\n    paintListOfCompositions(groupedCompsAndSubColl, null, endpoint, compositionsList.length)\r\n  } else if (!isuserpage(endpoint)) {\r\n    const groupedComps = getGroupedCompositionsWithUsers(compositionsList)\r\n    paintListOfCompositions(groupedComps, 'groupedbyuser_final', endpoint, compositionsList.length)\r\n  }else {\r\n    const groupedCompsWithCollab = getGroupedCompositionsWithCollab(compositionsList)\r\n    paintListOfCompositions(groupedCompsWithCollab, 'groupedbycollab', endpoint, compositionsList.length)\r\n  }\r\n}\r\n\r\nconst paintGroupCollection = (listcomps, typebadge, endpoint) => {\r\n  \r\n  let allCompUIelem = ''  \r\n  for (const comp in listcomps) {    \r\n    const element = listcomps[comp]\r\n    let listgroup = ''\r\n    let groupTitle = ''\r\n    let groupId = null\r\n    if(typebadge === 'collab') {\r\n      groupTitle = 'Collaborations'\r\n    } else if (typebadge === 'coll'){\r\n      groupTitle = Object.values(element)[0].parent_collection\r\n      groupId = Object.values(element)[0].collection_uid\r\n    } else {\r\n      groupTitle = Object.values(element)[0].username\r\n      groupId = Object.values(element)[0].owner_uuid\r\n    } \r\n    for (const item of element) {      \r\n      listgroup += getUIListElemInsideCollection(item, typebadge, endpoint)\r\n    }    \r\n    allCompUIelem += getUICardElemForCollection(typebadge, element.length, groupTitle, groupId, listgroup)\r\n  }\r\n  return allCompUIelem\r\n}\r\n\r\nconst getSingleComps = (groupedComps, endpoint) => {\r\n  let listElelemts = ''\r\n  const listCompsSingle = groupedComps.singlecomps\r\n  listCompsSingle?.forEach((element) => {\r\n    const template = paintSingleComposition(element, endpoint)\r\n    listElelemts += template\r\n  })\r\n  return listElelemts\r\n}\r\n\r\nconst paintListOfCompositions = (groupedComps, customgroup, endpoint, totalcomps) => {\r\n  \r\n  let listElelemts = ''\r\n  const numberGroupsByCollections = Object.keys(groupedComps.groupedbycoll).length\r\n  const numberCustomGroups = customgroup ? Object.keys(groupedComps[customgroup]).length : 0\r\n  let numberSinglComp = groupedComps.singlecomps.length\r\n\r\n  if (numberGroupsByCollections > 0) {\r\n    const listComps = groupedComps.groupedbycoll\r\n    const template = paintGroupCollection(listComps, 'coll', endpoint)\r\n    listElelemts += template\r\n  }\r\n  if (numberCustomGroups > 0) {\r\n    const listComps = groupedComps[customgroup]\r\n    const typeofbadge = (customgroup==='groupedbycollab') ? 'collab' : 'user'\r\n    const template = paintGroupCollection(listComps, typeofbadge, endpoint)\r\n    listElelemts += template\r\n  }\r\n  if (numberSinglComp > 0) {\r\n    listElelemts += getSingleComps(groupedComps, endpoint)    \r\n  }\r\n  const legendButtons = getLegendButtons(numberGroupsByCollections, numberCustomGroups, numberSinglComp, endpoint, totalcomps) \r\n  paintMainElemsHomePage(listElelemts, legendButtons)\r\n}\r\n\r\nconst initHomPage = async () => {  \r\n  const queryString = window.location.search\r\n  const user_id = queryString.split('userid=')[1]\r\n  const collection_uid = queryString.split('collectionid=')[1]\r\n  let isAuth  = await getMyProfile()\r\n  IS_AUTH = isAuth.ok\r\n  if(user_id){    \r\n    await getCompositionsByUserUid(user_id, isAuth)\r\n  } else if(collection_uid){\r\n    await getCompositionsByColelctionUid(collection_uid, isAuth)\r\n  } else if (isAuth.ok) {\r\n    await getMyCompositions()\r\n  } else {\r\n    await getRecentCompositions()\r\n  }\r\n  breadcrumbHandler(isAuth, user_id || collection_uid)\r\n}\r\n\r\ninitNavigationMenu()\r\nactivateGoHomeLink()\r\ninitHomPage()\r\nfabPlayButtonClickHandler()","import { getRecentCompositions, getMyCompositions, getAllCompositions } from './home'\n\nexport const breadcrumbHandler = (isauth, isuserorcollection) => {\n    createBreadCrumbNavBar(isauth, isuserorcollection)   \n    document.querySelectorAll('.breadcrumb-item a').forEach(function (element) {\n        element.addEventListener('click', function (event) {\n            event.preventDefault()\n            document.querySelector('.active-breadcrumb')?.classList.remove('active-breadcrumb')            \n            event.currentTarget.classList.add('active-breadcrumb')\n            let section = event.currentTarget.getAttribute('data-section')\n            navigate(section, isauth)\n        })\n    })\n}\n\nconst createBreadCrumbNavBar = (isauth, isuserorcollection) => {\n    const navBar = document.getElementById('breadcrumbnavbar')\n    let userOptions = ''\n    if(isauth.ok){\n        userOptions = `<li class='breadcrumb-item ${isuserorcollection ? '' : 'active-breadcrumb'}' aria-current='page'><a href='#' data-section='my-comp'>My Music</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`\n    } else {\n        userOptions = `<li class='breadcrumb-item ${isuserorcollection ? '' : 'active-breadcrumb'}' aria-current='page'><a href='#' data-section='recent-comp'>Recent</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`\n    }\n    navBar.innerHTML = userOptions    \n}\n\nexport function navigate(section, isauth) { \n    const url = new URL(window.location.href)\n    url.searchParams.delete('userid')\n    url.searchParams.delete('collectionid')\n    history.replaceState(null, null, url)\n    let withScroll = false\n    switch (section) {\n        case 'recent-comp':\n            withScroll = true\n            getRecentCompositions(withScroll)   \n            break\n        case 'my-comp':            \n            getMyCompositions()\n            break\n        case 'all-comp':\n            document.getElementById('initialmessage').classList.remove('d-flex')\n            document.getElementById('initialmessage').hidden = true\n            if(!isauth.ok) {\n                withScroll = true\n            }\n            getAllCompositions(withScroll)\n            break\n        default:\n            console.log('section default')\n    }\n}","import { uriCompositionPage, IS_AUTH } from './home'\nimport { isuserpage, displayUserNameInCard } from './home_helper'\nimport { PRIVACY_BADGE_STYLE, PRIVACY_BADGE_TEXT, uriUserPage, uriCollectionPage } from '../../../common/js/utils'\nconst homeVideoUrl = new URL('../../../static/videos/compress_home_page_video.mp4', import.meta.url)\n\nconst CARD_BADGE_STYLE = { 'coll': 'badge-collection', 'user': 'badge-warning', 'collab': 'badge-collab' }\nconst CARD_BORDER_STYLE = { 'coll': 'border-collection', 'user': 'border-warning', 'collab': 'border-collab' }\nconst URI_PAGE = { 'coll': uriCollectionPage, 'user': uriUserPage }\n\n//const WELCOME_TEXT = 'We present Hi-Audio Online Platform a web application for musicians, researchers and an open community of enthusiasts of audio and music with a view to build a public database of music recordings from a wide variety of styles and different cultures.'\n\nconst WELCOME_VIDEO = \n`<div id=\"landing-video-container\" class=\"fullscreen-video-container\">\n    <video playsinline autoplay loop muted>\n      <source src=\"${homeVideoUrl}\">\n    </video>  \n  <div class='fullscreen-video-content'>\n    <div class=\"typewriter\">\n      <h1>Welcome!</h1>      \n    </div>\n    <div class=\"h-100 d-flex\">\n      <div class=\"m-auto\">\n        <a id=\"start-link\" class=\"btn btn-link\" href=\"/login.html\" role=\"button\"><b>LET'S JAM?</b></a>\n      </div>\n    </div>    \n  </div>\n</div>`\n\nexport const initNavigationMenu = () => {\n    \n    document.getElementById('userlogin').innerHTML =    \n    `<li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/login.html'>Register / Login</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${uriCompositionPage}demopage'>Test DAW</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/static/howto.html'>How-To</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'><b>News<b></a>\n    </li>\n    `\n\n    document.getElementById('useroptions').innerHTML = \n    `<li class='nav-item'>\n      <a class='nav-link' href='${window.location.origin + '/profile.html'}'>Profile <i id='display_profile_name'></i></a>\n    </li>\n    <li class='nav-item'>\n          <a class='nav-link' href='#' id='createNewButton' data-toggle='modal' data-target='#newMusicModal'>/ Create new</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openMyCollectionsButton' data-toggle='modal' data-target='#editCollectionsModal'>/ My Collections</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='${window.location.origin + '/static/howto.html'}'>/ How-to</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'>/ News</a>\n    </li>\n    `\n  handleNewsPopUpClose()\n}\n\nconst handleNewsPopUpClose = () => {\n  $('#newsModal').on('hidden.bs.modal', function (event) {\n    const videoPromo = document.getElementById('promo-video')\n    if (!videoPromo.paused) {\n      videoPromo.pause()\n    }\n  })\n}\n\nexport const getLegendButtons = (numberGroupsByCollections, numberGroupsCustom, numberSinglComp, endpoint, totalcomps) => {\n    const displayGroupsByLabel = (numberGroupsByCollections || ((!isuserpage(endpoint)) && numberGroupsCustom) || numberSinglComp)\n    return `<ul class=\"nav justify-content-end\">\n              ${displayGroupsByLabel ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Groups by:&nbsp;</span></h4></li>' : ''}\n              ${numberGroupsByCollections ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-collection\">Collections&nbsp;<span class=\"badge badge-light\">' + numberGroupsByCollections + '</span></span></h4></li>' : ''}            \n              ${((!isuserpage(endpoint)) && numberGroupsCustom) ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-warning\">Users&nbsp;<span class=\"badge badge-light\">' + numberGroupsCustom + '</span></span></h4></li>' : ''}\n              ${numberSinglComp ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-success\">Singles&nbsp;<span class=\"badge badge-light\">' + numberSinglComp + '</span></span></h4></li>' : ''}\n              <li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Total compositions:&nbsp;</span><span class=\"badge badge-light\">${totalcomps}</span></h4></li>\n            </ul>`\n}\n\nexport const paintMainElemsHomePage = (listElelemts, legendButtons) => {\n    document.getElementById('grid').innerHTML = ''\n    document.getElementById('grid').insertAdjacentHTML('afterbegin', listElelemts)\n    document.getElementById('legendbuttons').innerHTML = ''\n    document.getElementById('legendbuttons').insertAdjacentHTML('afterbegin', legendButtons)\n    document.getElementById('searchInput').removeAttribute('disabled')\n}\n\nexport const paintSingleComposition = (element, endpoint) => {\n    const displayName = displayUserNameInCard(endpoint, element.username)\n    const displayNumCollabs = element.contributors.length\n    const last_track = element?.tracks[element?.tracks.length - 1]?.uuid\n    \n    return `<div class='card border-success'>                       \n              <div class=\"card-body\">\n              ${IS_AUTH ? `<span class=\"badge ${PRIVACY_BADGE_STYLE[element.privacy]}\">${PRIVACY_BADGE_TEXT[element.privacy]}</span>` : ''}\n              ${element.opentocontrib ? '<p class=\"badge badge-info\">OPEN TO CONTRIB</p>' : ''}\n              ${element.is_template ? '<p class=\"badge badge-template\">TEMPLATE</p>' : ''}  \n                  <div>\n                    <p class=\"list-group-item-heading\">  \n                      <a href='${uriCompositionPage + element.uuid}' class='card-url'>\n                        <h5 class='card-title'>${element.title}</h5>\n                      </a>\n                    </p>\n                    <p>${displayName ?\n                      `<span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-user'></i>&nbsp;\n                        <a href='${uriUserPage + element.owner_uuid}' class='card-url'>\n                          ${element.username}&nbsp;\n                        </a>\n                      </span>`: ''}\n                    </p>\n                    <p class='text-black-50'>${displayNumCollabs ? ('Collaborators: ' + displayNumCollabs) : ''}</p>\n                    <p class='card-text text-truncate'>${element.description || ''}</p>\n                    ${element.tracks?.length ?\n                    `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : ''}>\n                      <i class='fa fa-play'>&nbsp;</i>Play last added track </span>&nbsp;` : ''}\n                    <span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-music'></i>&nbsp;${'Tracks: ' + element.tracks?.length}\n                    </span>\n                  </div>                \n              </div>            \n          </div>`\n}\n\nexport const getUIListElemInsideCollection = (item, typebadge, endpoint) => {\n\n    const displayName = displayUserNameInCard(endpoint, item.username)\n    const displayNumCollabs = item.contributors.length\n    const last_track = item?.tracks[item?.tracks.length - 1]?.uuid\n    \n    return `<div class=\"list-group-item \">\n              ${IS_AUTH ? `<span class=\"badge ${PRIVACY_BADGE_STYLE[item.privacy]}\">${PRIVACY_BADGE_TEXT[item.privacy]}</span>` : ''}\n              ${item.opentocontrib ? '<span class=\"badge badge-info\">OPEN TO CONTRIB</span>' : ''}\n              ${item.is_template ? '<span class=\"badge badge-template\">TEMPLATE</span>' : ''}  \n              <p class=\"list-group-item-heading\">\n                <a href='${uriCompositionPage + item.uuid}' class='card-url'>\n                    <h5 class='card-title'>${item.title}</h5>\n                </a>\n              </p>\n              ${(typebadge !== 'user' && displayName) ?\n                '<p><span class=\"d-inline-block text-truncate\" style=\"max-width: 220px;\">' +\n                '<i class=\"fa fa-user\"></i>&nbsp;' +\n                '<a href=' + uriUserPage + item.owner_uuid + ' class=\"card-url\">' + item.username + '&nbsp;' +\n                '</a>' +\n                '</span></p>' : ''}\n              <p class='text-black-50'>${displayNumCollabs ? ('Collaborators: ' + displayNumCollabs) : ''}</p>\n              <p class=\"list-group-item-text text-truncate\">\n                ${item.description || ''}\n              </p>\n              ${item.tracks?.length ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : ''}>\n                <i class='fa fa-play'>&nbsp;</i>Play last added track \n              </span>&nbsp;` : ''}\n              <span class=\"d-inline-block text-truncate\" style=\"max-width: 200px;\">\n                <i class='fa fa-music'></i>&nbsp;${'Tracks: ' + item.tracks?.length}\n              </span>\n            </div>`\n}\n\nexport const getUICardElemForCollection = (typebadge, numitems, groupTitle, groupId, listgroup) => {\n\n    const badegstyle = CARD_BADGE_STYLE[typebadge]\n    const borderstyle = CARD_BORDER_STYLE[typebadge]\n    const url = URI_PAGE[typebadge]\n    const badgeDisplayed = `<span class=\"badge ${badegstyle} d-inline-block text-truncate\" style=\"max-width:85%;\">\n                              <span class=\"badge badge-light\">${numitems}</span>&nbsp;\n                              ${url ? `<a href=${url + groupId} class=\"card-header-url\">${groupTitle}</a>` : `${groupTitle}`}                              \n                          </span>`\n\n    return `<div id='${groupId}' class='card ${borderstyle}'>                        \n              <h4>${badgeDisplayed}</h4>        \n              <div class=\"card-body\">\n                <div class=\"list-group border\">              \n                  ${listgroup}\n                </div>\n              </div>\n            </div>`\n}\n\nexport const cleanWelcomeContainer = (hidetext, withScroll) => {\n    const welcomecontainer = document.getElementById('welcomecontainer')\n    const videoContainer = document.getElementById('landing-video-container')\n    if (welcomecontainer.lastChild?.id  && welcomecontainer.lastChild?.id !== 'welcometext') {\n      welcomecontainer.removeChild(welcomecontainer.lastChild)\n    }\n    if (!hidetext && !welcomecontainer.lastChild && !videoContainer) {\n        const welcometextelem = document.createElement('div')\n        welcometextelem.id = 'welcometext'\n        welcometextelem.innerHTML = IS_AUTH ? '': `${WELCOME_VIDEO}`\n        document.getElementById('welcomecontainer').appendChild(welcometextelem)\n    }\n    if(withScroll){\n      document.getElementById('grid').scrollIntoView({\n          behavior: 'smooth'\n      })\n    }\n}\n\nexport const updateUIWithCollectionInfo = (collectiontitle, username, owner_uuid) => {\n\n    cleanWelcomeContainer(true)\n    const collectionInfoContainer = document.createElement('div')\n    collectionInfoContainer.id = 'infocontainer'\n    collectionInfoContainer.innerHTML = `<div class=\"card border-collection mb-3\">\n                                          <div class=\"card-header bg-transparent border-collection\"><b>Collection</b></div>\n                                          <div class=\"card-body text-dark\">\n                                            <h5 class=\"card-title\">${collectiontitle}</h5>\n                                            <p class=\"card-text\" style=\"width:300px;\">Owner: <a href=${uriUserPage + owner_uuid} class=\"card-url\">${username}</a></p>\n                                          </div>\n                                        </div>`\n    document.getElementById('welcomecontainer').appendChild(collectionInfoContainer)\n}\n\nexport const updateUIWithUserInfo = (username, useruid) => {\n\n    cleanWelcomeContainer(true)\n\n    const userInfoContainer = document.createElement('div')\n    userInfoContainer.id = 'infocontainer'\n    userInfoContainer.innerHTML = `<div class=\"card mb-3\" style=\"max-width: 540px;\">\n                                    <div class=\"row no-gutters\">\n                                      <div class=\"col-md-4\">\n                                        <img class=\"img-fluid hidden-first\" src=\"https://picsum.photos/seed/${useruid}/200\" alt=\"User Picture\" width=\"200\" height=\"200\">\n                                      </div>\n                                      <div class=\"col-md-8\">\n                                        <div class=\"card-body\">\n                                          <h5 class=\"card-title\">User</h5>\n                                          <p class=\"card-text\" style=\"width:300px;\">${username ? `${username}` : ''}</p>                                        \n                                          <p class=\"card-text\"><small class=\"text-muted\"></small></p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>`\n    document.getElementById('welcomecontainer').appendChild(userInfoContainer)\n}","let _USERNAME = null\n\nexport const isuserpage = (endpoint) => {\n    let result = false\n    if (endpoint === '/mycompositions' || endpoint.includes('/compositionsbyuserid/') || endpoint.includes('/collectionastreebyid/')){\n        result = true\n    } \n    return result    \n}\n\nconst getCurrentUserName = () => {\n    return _USERNAME\n}\n\nexport const setCurrentUserName = (username) => {\n    _USERNAME = username\n}\n\nexport const displayUserNameInCard = (endpoint, username) => {\n    let displayName = false\n    if(!isuserpage(endpoint)){\n      displayName = true\n    } else {\n      displayName = (username !== getCurrentUserName())\n    }\n    return displayName\n  }\n\nconst getGroupsByCollAndUser = (compositionsList) => {\n\n    const groupedbycoll = {}\n    const groupedbyuser_aux = {}\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid\n        const userId = composition.user_id\n\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else {\n            if (!groupedbyuser_aux[userId]) {\n                groupedbyuser_aux[userId] = []\n            }\n            groupedbyuser_aux[userId].push(composition)\n        }\n    })\n\n    return { groupedbycoll, groupedbyuser_aux }\n}\n\n\nconst getGroupsByCollectionAndSubColl = (compositionsList, parent_coll_id) => {\n\n    const groupedbycoll = {}\n    const singlecomps = []\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid\n\n        if ((collectionId !== null) && (collectionId !== parent_coll_id)) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else {\n            singlecomps.push(composition)\n        }\n    })\n\n    return { groupedbycoll, singlecomps}\n}\n\nconst getGroupsByCollAndCollab = (compositionsList) => {\n\n    const groupedbycoll = {}\n    const groupedbycollab = {}\n    const singlecomps = []\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid        \n\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else if (composition.contributors.length){\n            if (!groupedbycollab['collabs']) {\n                groupedbycollab['collabs'] = []\n            }\n            groupedbycollab['collabs'].push(composition)\n        } else {                \n            singlecomps.push(composition)\n        }\n    })\n\n    return { groupedbycoll, groupedbycollab, singlecomps }\n}\n\n// INFO: a group for a User is made if he has 2 or more compositions without Collection\nconst getFinalGroupByUserAndSingleComp = (groupedbyuser_aux) => {\n\n    const groupedbyuser_final = {}\n    const singlecomps = []\n\n    for (const elem in groupedbyuser_aux) {\n\n        if (groupedbyuser_aux[elem].length === 1) {\n            singlecomps.push(groupedbyuser_aux[elem][0])\n        } else {\n            if (!groupedbyuser_final[elem]) {\n                groupedbyuser_final[elem] = []\n            }\n            groupedbyuser_final[elem] = groupedbyuser_aux[elem]\n        }\n    }\n    return { singlecomps, groupedbyuser_final }\n}\n\nexport const getGroupedCompositionsWithUsers = (compositionsList) => {\n\n    const { groupedbycoll, groupedbyuser_aux } = getGroupsByCollAndUser(compositionsList)\n\n    const { singlecomps, groupedbyuser_final } = getFinalGroupByUserAndSingleComp(groupedbyuser_aux)\n\n    return {\n        groupedbycoll,\n        groupedbyuser_final,\n        singlecomps,\n    }\n}\n\nexport const getGroupedCompositionsWithCollab = (compositionsList) => {\n\n    const { groupedbycoll, groupedbycollab, singlecomps } = getGroupsByCollAndCollab(compositionsList)    \n    \n    return {\n        groupedbycoll,\n        groupedbycollab,\n        singlecomps,\n    }\n}\n\nexport const getGroupedCompositionsWithSubCollect = (compositionsList, parent_coll_id) => {\n\n    const { groupedbycoll, singlecomps } = getGroupsByCollectionAndSubColl(compositionsList, parent_coll_id)    \n    \n    return {\n        groupedbycoll,        \n        singlecomps,\n    }\n}\n\nexport const getAllTracksInCompositionList = (compositionsList) => {\n    const tracksList = []\n    const compositionsDictionary = {}\n    const tracksDictionary = {}\n    compositionsList.forEach(composition => {\n        compositionsDictionary[composition.uuid] = composition\n        if(composition?.tracks.length){\n            for(let i = 0; i < composition.tracks.length; i++){\n                const currentTrack = composition.tracks[i]\n                currentTrack['comp_uuid'] = composition.uuid\n                tracksDictionary[currentTrack.uuid] = currentTrack\n            }\n            tracksList.push(...composition.tracks)\n        }\n    })\n    return { tracksList, compositionsDictionary, tracksDictionary }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('b33yz') + \"compress_home_page_video.e4cc210b.mp4\";","import { getAllTracksInCompositionList } from './home_helper'\n\nlet tracks_dictionary = null\nlet composition_dictionary = null\n\nlet AUTO_PLAY = false\n\nlet wavesurfer = null\n\nlet currentAbortController = null\n\nconst waveSurferOptions = {\n    container: '#waveform',\n    responsive: true,\n    height: 80,\n    waveColor: '#007bff',\n    progressColor: '#6610f2',\n    barWidth: 2,\n    barGap: 1,\n    barRadius: 2,\n    cursorWidth: 0\n}\n\nconst getCurrentTrack = () => {\n    const audio = document.getElementById('waveform')\n    const currentTrack = audio.getAttribute('data-currentaudio')\n    return currentTrack\n}\n\nconst changeFaIcon = (trackid, startPlaying) => {\n    const iconElement = document.querySelector(`[data-trackid='${trackid}']`)?.firstChild.nextSibling\n    if (iconElement) {\n        if (startPlaying) {\n            iconElement.classList.replace('fa-play', 'fa-volume-down')\n        } else {\n            iconElement.classList.replace('fa-volume-down','fa-play')\n            iconElement.classList.remove('fa-beat')\n        }\n    }\n}\n\nconst changeFloatingIcon = (startPlaying) => {\n    const floatingPlayButton = document.getElementById('playfloatingbutton').firstChild.nextSibling\n    if (startPlaying) {\n        floatingPlayButton.classList.remove('fa-play')\n        floatingPlayButton.classList.add('fa-pause')\n    } else {\n        floatingPlayButton.classList.remove('fa-pause')\n        floatingPlayButton.classList.add('fa-play')\n    }\n}\n\nconst clickOnSameTrack = () => {\n    const isPlaying = wavesurfer.isPlaying()\n    if (!isPlaying) {\n        wavesurfer.play()\n    } else {\n        wavesurfer.pause()\n    }\n}\n\nconst checkAudioPausedNotSameTrack = (trackid) => {\n    const isPlaying = wavesurfer?.isPlaying()\n    if (isPlaying) {\n        changeFaIcon(trackid, false)\n        wavesurfer.pause()\n    }\n}\n\nconst playTrackButtonHandler = (trackid) => {\n    if(document.getElementById('sticky-player').hidden){\n        document.getElementById('sticky-player').hidden = false\n    }\n    const currentTrack = getCurrentTrack()\n    let is_same_track = (currentTrack === trackid)\n    if (is_same_track) {\n        clickOnSameTrack()\n    } else {\n        changeFaIcon(currentTrack, false)\n        checkAudioPausedNotSameTrack(trackid)\n        loadAudioTrack(trackid, true)\n    }\n}\n\nconst loadTrackSuccess = (audioSrc, doPlay) => {\n    AUTO_PLAY = doPlay\n    wavesurfer.seekTo(0)\n    wavesurfer.load(audioSrc)\n}\n\nconst loadTrackError = (trackid, error) => {\n    const playElemUI = document.querySelector(`[data-trackid='${trackid}']`)\n    if(playElemUI){\n        playElemUI.onclick = null\n        const iconElement = playElemUI.firstChild.nextSibling\n        iconElement.classList.remove('fa-volume-down')\n        iconElement.classList.remove('fa-beat')\n        iconElement.classList.add('fa-times')\n    }\n    changeFloatingIcon(false)\n    const trackInfo = getTrackInfo(trackid)\n    document.getElementById('current-play-info').textContent = ' Error loading track at: ' + trackInfo.comp_title\n    wavesurfer.destroy()\n}\n\nconst updateCurrentPlayInfo = (track_id) => {\n    const trackInfo =  getTrackInfo(track_id)\n    document.getElementById('current-play-info').textContent = trackInfo.comp_title + ' / ' + trackInfo.track_title\n}\n\nconst getTrackInfo = (track_id) => {\n    const track_title = tracks_dictionary[track_id].title\n    const comp_title = composition_dictionary[tracks_dictionary[track_id].comp_uuid].title\n    return {track_title, comp_title}\n}\n\nexport const prepareAudioTrackPlaylist = (compositionsList) => {\n    const all_tracks = getAllTracksInCompositionList(compositionsList)\n    if (all_tracks.tracksList.length) {\n        document.querySelector('.sticky-container').style.display = 'block'\n        tracks_dictionary = all_tracks.tracksDictionary\n        composition_dictionary = all_tracks.compositionsDictionary\n    }\n}\n\nconst loadAudioTrack = async (trackid, doPlay) => {\n    if(wavesurfer){\n        unsubscribeEvents()\n        wavesurfer.destroy()\n    }\n    wavesurfer = initializeWavesurfer()\n    addEventHandlersToWavesurfer()\n    const audio = document.getElementById('waveform')\n    audio.setAttribute('data-currentaudio', trackid)\n    \n    document.getElementById('current-play-info').textContent = 'Downloading track ... 0%'\n    const floatingPlayButton = document.getElementById('playfloatingbutton')\n    floatingPlayButton.classList.add('isDisabled')    \n    \n    const audioSrc = window.location.origin + '/trackfile/' + trackid\n    \n    if (currentAbortController) {\n        currentAbortController.abort()\n    }\n    currentAbortController = new AbortController()\n    const signal = currentAbortController.signal\n\n    const response = await fetch(audioSrc, { signal })\n    if (response.ok) {\n        loadTrackSuccess(audioSrc, doPlay)\n    } else {\n        loadTrackError(trackid, 'Fetching error')\n    }\n}\n\nexport const setPlayButtonsHandler = () => {\n    const elements = document.querySelectorAll('[data-trackid]')\n    elements.forEach(element => {\n        const trackid = element.getAttribute('data-trackid')\n        element.onclick = () => {\n            playTrackButtonHandler(trackid)\n        }\n    })\n}\n\nconst fabPlayButtonIsCurrentTrack = () => {\n    const isPlaying = wavesurfer.isPlaying()\n    if (isPlaying) {\n        wavesurfer.pause()\n    } else {\n        wavesurfer.play()\n    }\n}\n\nexport const fabPlayButtonClickHandler = () => {\n    const floatingPlayButton = document.getElementById('playfloatingbutton')\n    floatingPlayButton.onclick = () => {\n        fabPlayButtonIsCurrentTrack()\n    }\n}\n\nconst initializeWavesurfer = () => {\n    return WaveSurfer.create(waveSurferOptions)\n}\n\nconst unsubscribeEvents = () => {\n    wavesurfer.unAll()\n}\n\nconst addEventHandlersToWavesurfer = () => {\n    wavesurfer.on('finish', () => {\n        const currentTrack = getCurrentTrack()\n        changeFloatingIcon(false)\n        changeFaIcon(currentTrack, false)\n    })\n    \n    wavesurfer.on('play', () => {\n        const currentTrack = getCurrentTrack()\n        changeFloatingIcon(true)\n        changeFaIcon(currentTrack, true)\n    })\n\n\n    wavesurfer.on('loading', (percentage) => {\n        document.getElementById('current-play-info').textContent = `Downloading track ... ${percentage}%`\n    })\n\n    \n    wavesurfer.on('pause', () => {\n        const currentTrack = getCurrentTrack()\n        changeFloatingIcon(false)\n        changeFaIcon(currentTrack, false)\n    })\n\n    wavesurfer.on('ready', (duration) => {\n        const floatingPlayButton = document.getElementById('playfloatingbutton')\n        floatingPlayButton.classList.remove('isDisabled')\n        const currentTrack = getCurrentTrack()\n        updateCurrentPlayInfo(currentTrack)\n        if (AUTO_PLAY) {\n            wavesurfer.play()\n        } else {\n            changeFloatingIcon(false)\n        }\n    })\n    \n    wavesurfer.on('error', (error) => {\n        if(error){\n            const currentTrack = getCurrentTrack()\n            loadTrackError(currentTrack, error)\n        }\n    }) \n}","import { ENDPOINT } from '../../../common/js/config'\nimport {uriCompositionPage} from './home'\n\nlet EDIT_STATUS = false\n\nconst showAllCollButton = document.getElementById('openMyCollectionsButton')\nconst editButton = document.getElementById('editmycollectionsbutton')\n\nconst fetchCollectionsTree = async () => {\n    const response = await fetch('/mycollectionsastree')\n    const data = await response.json()\n    return data\n}\n\nconst createTreeHTML = (item) => {\n    let html = `\n        <span id='removeCollIcon${item.uuid}' data-uuid='${item.uuid}' data-title='${item.title}' role='button' class='badge badge-pill badge-danger' hidden>-</span>\n        <li id='${item.uuid}' class='list-group-item border-bottom-0 border-right-0 border-top-0 border-warning'>\n            <input type='text' class='form-control border-secondary' id='treecolltitleinput${item.uuid}' data-uuid='${item.uuid}' placeholder='Type a new title'\n            title='collectiontitle' value='${item.title}' disabled>\n        </li>`\n    \n    if (item.compositions.length > 0 || item.collections.length > 0) {\n        html += '<ul>'\n        for (const composition of item.compositions) {\n            html += `<li class='list-group-item border-0'><a href='${uriCompositionPage + composition.uuid}'><u>${composition.title}</u></a></li>`\n        }\n        for (const collection of item.collections) {\n            html += createTreeHTML(collection)\n        }\n        html += '</ul>'\n    }    \n    return html\n}\n\nconst renderTree = async () => {\n    const treeContainer = document.getElementById('listCollContainerAllColl')\n    const data = await fetchCollectionsTree()\n    let html = '<ul>'\n    for (const collection of data) {\n        html += createTreeHTML(collection)\n    }\n    html += '</ul>'\n    treeContainer.innerHTML = html\n}\n\nconst clickEditButtonHandler = () => {\n    \n    if(EDIT_STATUS){\n        EDIT_STATUS = false        \n        editButton.innerText =  'Edit'\n        disableEdition()\n    } else {\n        EDIT_STATUS = true\n        editButton.innerText =  'Done'\n        enableEdition()\n    }   \n}\n\nconst enableEdition = () => {\n    \n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`)\n\n    elementsWithHiddenAttribute.forEach(element => {\n        element.removeAttribute('hidden')        \n        removeCollectionClickhHandler(element.getAttribute('data-uuid'), element.getAttribute('data-title'))\n    })   \n    \n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`)\n\n    elementsWithDisabledAttribute.forEach(element => {\n        element.removeAttribute('disabled')\n        updateInputTextEventHandler(element.getAttribute('data-uuid'), element.value)\n    })\n}\n\nconst disableEdition = () => {\n\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`)\n\n    elementsWithHiddenAttribute.forEach(element => {\n        element.setAttribute('hidden', 'true')\n    })\n\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`)    \n\n    elementsWithDisabledAttribute.forEach(element => {\n        element.setAttribute('disabled', 'true')\n    })\n}\n\nconst clickAllCollButtonHandler = async () => {\n    EDIT_STATUS = false\n    editButton.innerText =  'Edit'\n    await renderTree()\n    editButton.addEventListener('click', clickEditButtonHandler, false)\n}\n\nshowAllCollButton?.addEventListener('click', clickAllCollButtonHandler, false)\n\nconst confirmDeleteCollectionModal = async (event, collectionId, collectionTitle) => {\n\n    const chk = event.target\n\n    if (chk.tagName === 'SPAN') {\n\n        if (confirm(`Are you sure you want remove the collection ${collectionTitle} and all of its content?`) == true) {\n\n            const response = await fetch(ENDPOINT + '/deletecollection/' + collectionId, { method: 'DELETE' })\n            if (response?.ok) {\n                removeCollectionFromModalDialog(collectionId)\n            }\n\n        } else {\n            event.target.checked = false\n        }\n    }\n}\n\nconst removeCollectionFromModalDialog = (collectionId) => {\n    const listElemToDelete = document.getElementById(collectionId)\n    let ids = null\n    if(listElemToDelete?.nextSibling?.tagName === 'UL'){\n        ids = Array.from(listElemToDelete.nextSibling.querySelectorAll('li[id]')).map(li => li.id)\n        listElemToDelete.nextSibling.remove()\n    }\n    listElemToDelete.remove()\n    removeCollectionFromHomePage(collectionId)\n    document.getElementById('removeCollIcon'+collectionId).remove()\n    ids && ids.forEach(id => {\n        removeCollectionFromHomePage(id)\n    })\n    const collection_uid = window.location.search.split('collectionid=')[1]\n    if(collectionId === collection_uid){\n        window.location.href = window.location.origin\n    }\n}\n\nconst removeCollectionFromHomePage = (collectionId) => {\n    const cardElemToDelete = document.getElementById(collectionId)\n    if(cardElemToDelete){\n        cardElemToDelete.remove()\n    }\n}\n\nconst removeCollectionClickhHandler = (collectionId, collectionTitle) => {\n    document.getElementById('removeCollIcon' + collectionId).onclick= async (event) => {\n        await confirmDeleteCollectionModal(event, collectionId, collectionTitle)\n    }\n}\n\nconst updateInputTextEventHandler = (collectionId, currentTitle) => {    \n    document.getElementById('treecolltitleinput'+collectionId).onblur = (event) => {\n        handleInputBlur(event, collectionId, currentTitle)\n    }    \n}\n\nconst updateCollectionTitleRqst = (value, uuid) => {\n   \n    const updateTitleApi = ENDPOINT + '/updatecolltitle'\n    const data = { title: value, uuid: uuid }\n    \n    fetch(updateTitleApi, {\n        method: 'PATCH', \n        headers: {\n        'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    })\n    .then()\n    .catch(error => {\n        console.error('Error updating value:', error)\n    })\n}\n\nconst handleInputBlur = (event, collId, currTitle) => {    \n    const newValue = event.target.value\n    if(currTitle !== newValue){\n        if (!newValue || newValue === '') {\n            event.target.value = currTitle\n            alert('Introduce a valid title, please')\n            return\n        } else {\n            updateCollectionTitleRqst(newValue, collId)\n        }\n    }\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$865a8a16446988ab$export$6503ec6e8aabbaf","$865a8a16446988ab$var$mapping","Map","baseUrl","manifest","i","length","path","$17e12686bf321de3$export$bdfd709ae4826697","$17e12686bf321de3$export$5a759dc7a1cfb72a","$17e12686bf321de3$var$bundleURL","value","$17e12686bf321de3$var$getBundleURL","matches","stack","match","replace","url","$c82422755965d529$export$1a23c4610ef05bed","$c82422755965d529$export$cdda3773e71b07e4","$c82422755965d529$var$ENVIRONMENTS","PROD","ENDPOINT","UPLOAD_ENDPOINT","STAGE","location","protocol","host","DEV","$c592176fe54591c6$export$2e2bcd8739ae039","dynamicModalDialog","message","idbtn","textBtnOK","textBtnCancel","popupTitle","backgroundHeader","callbackDismiss","setDynamicModalContent","$","modal","getDynamicModal","document","getElementById","html","querySelector","innerHTML","closeDynamicModal","callBackClose","initDynamicModal","createElement","classList","add","setAttribute","body","appendChild","constructor","on","event","$e882cfcc4184df66$export$ff3ad29dbb546598","$e882cfcc4184df66$export$36dfaec04418caa7","$e882cfcc4184df66$export$eb3485a690c2f0b8","$e882cfcc4184df66$export$a3c073b335a47d60","$e882cfcc4184df66$export$eba8c17f4d7a3cd3","$e882cfcc4184df66$export$ab4fdfae3dcd1a8f","$e882cfcc4184df66$export$8afc507ca675ea0e","$e882cfcc4184df66$export$81e46b314cb8d8e3","$e882cfcc4184df66$export$997d30e836e5c567","$e882cfcc4184df66$export$706cf9fcefe67c8e","$e882cfcc4184df66$export$3fc781af82c0c660","$e882cfcc4184df66$export$2464c9e69777d386","$hbluw","freeze","none","owner","admin","member","guest","public","onlyreg","private","loadingMessage","loaderElement","remove","apimethod","rqstmethod","useLoaderWithText","request","method","headers","JSON","stringify","sendRqst","fetch","respToJson","json","error","str","lastAtPos","lastIndexOf","lastDotPos","indexOf","goHomeLink","origin","href","test","navigator","userAgent","audio","echoCancellation","noiseSuppression","autoGainControl","latency","channelCount","$b0c76387600d0ed6$export$207bec4913bdffa6","$b0c76387600d0ed6$export$7ed6abee26b8c64b","$jXEky","userprofile","callback","cancelLoader","terms_accepted","$b0c76387600d0ed6$export$95d7694256f75341","backdrop","keyboard","onclick","$b0c76387600d0ed6$var$rqstAcceptTerms","$b0c76387600d0ed6$var$rqstRejectTerms","data","callJsonApi","ok","attachToElem","modalDialog","getElementsByTagName","insertAdjacentHTML","$ba2d383e494f9e86$export$a9dbfb18603d6a77","$ba2d383e494f9e86$export$66d4708c2e689cee","$ba2d383e494f9e86$export$5a676dd14dd0be2c","$gXFaz","response","result","default","collections","listId","coll_id","theList","all_collections","listCollContainer","listOptions","selected","forEach","element","uuid","template","title","listElelemts","getBundleURL","parse","$a57243222c2ea8a4$export$184163c68675dcce","isauth","isuserorcollection","$a57243222c2ea8a4$var$createBreadCrumbNavBar","querySelectorAll","addEventListener","_document_querySelector","preventDefault","currentTarget","$a57243222c2ea8a4$export$ff7962acd6052c28","getAttribute","navBar","userOptions","section","URL","searchParams","delete","history","replaceState","withScroll","$ce4a593b0ea78dcf$export$8d85b36da8527a05","$ce4a593b0ea78dcf$export$b99e48ec291af6c0","hidden","$ce4a593b0ea78dcf$export$556539c2d93a797d","console","log","$faZmx","$69dccf2381da1e7e$var$_USERNAME","$69dccf2381da1e7e$export$1badf4b56a2f2c08","endpoint","includes","$69dccf2381da1e7e$var$getCurrentUserName","$69dccf2381da1e7e$export$149136365741a43c","username","$69dccf2381da1e7e$export$a04c3fad920d835e","$69dccf2381da1e7e$var$getGroupsByCollAndUser","compositionsList","groupedbycoll","groupedbyuser_aux","composition","collectionId","collection_uid","userId","user_id","push","$69dccf2381da1e7e$var$getGroupsByCollectionAndSubColl","parent_coll_id","singlecomps","$69dccf2381da1e7e$var$getGroupsByCollAndCollab","groupedbycollab","contributors","$69dccf2381da1e7e$var$getFinalGroupByUserAndSingleComp","groupedbyuser_final","elem","$69dccf2381da1e7e$export$2095d3815b0f7547","$69dccf2381da1e7e$export$6d37f804b553eac7","$69dccf2381da1e7e$export$46ab7a802f6f7711","$69dccf2381da1e7e$export$3763f15547b21628","tracksList","compositionsDictionary","tracksDictionary","tracks","currentTrack","$ceab237e06e82e44$var$homeVideoUrl","$ceab237e06e82e44$var$CARD_BADGE_STYLE","$ceab237e06e82e44$var$CARD_BORDER_STYLE","$ceab237e06e82e44$var$URI_PAGE","uriCollectionPage","uriUserPage","$ceab237e06e82e44$var$WELCOME_VIDEO","$ceab237e06e82e44$export$bca9dffb57f7792b","numberGroupsByCollections","numberGroupsCustom","numberSinglComp","totalcomps","displayGroupsByLabel","$ceab237e06e82e44$export$1f60eb8703988013","legendButtons","removeAttribute","$ceab237e06e82e44$export$971becedf6ebeceb","_element_tracks_","_element_tracks","_element_tracks1","displayName","displayNumCollabs","last_track","$ce4a593b0ea78dcf$export$4cd34456ac1eb639","PRIVACY_BADGE_STYLE","privacy","PRIVACY_BADGE_TEXT","opentocontrib","is_template","$ce4a593b0ea78dcf$export$5e4b5ab8660ba9d5","owner_uuid","description","$ceab237e06e82e44$export$cbdc54c51b649c98","item","typebadge","_item_tracks_","_item_tracks","_item_tracks1","$ceab237e06e82e44$export$da2a595be284078a","numitems","groupTitle","groupId","listgroup","badegstyle","borderstyle","badgeDisplayed","$ceab237e06e82e44$export$2ccaa4a069104255","hidetext","_welcomecontainer_lastChild","_welcomecontainer_lastChild1","welcomecontainer","videoContainer","lastChild","removeChild","welcometextelem","scrollIntoView","behavior","$ceab237e06e82e44$export$206832d47f4d1079","collectiontitle","collectionInfoContainer","$ceab237e06e82e44$export$b8abf8ca7249a7d2","useruid","userInfoContainer","$299b0bf5dfda9fee$var$tracks_dictionary","$299b0bf5dfda9fee$var$composition_dictionary","$299b0bf5dfda9fee$var$AUTO_PLAY","$299b0bf5dfda9fee$var$wavesurfer","$299b0bf5dfda9fee$var$currentAbortController","$299b0bf5dfda9fee$var$waveSurferOptions","container","responsive","height","waveColor","progressColor","barWidth","barGap","barRadius","cursorWidth","$299b0bf5dfda9fee$var$getCurrentTrack","$299b0bf5dfda9fee$var$changeFaIcon","trackid","startPlaying","iconElement","firstChild","nextSibling","$299b0bf5dfda9fee$var$changeFloatingIcon","floatingPlayButton","$299b0bf5dfda9fee$var$clickOnSameTrack","isPlaying","pause","play","$299b0bf5dfda9fee$var$checkAudioPausedNotSameTrack","$299b0bf5dfda9fee$var$playTrackButtonHandler","$299b0bf5dfda9fee$var$loadAudioTrack","$299b0bf5dfda9fee$var$loadTrackSuccess","audioSrc","doPlay","seekTo","load","$299b0bf5dfda9fee$var$loadTrackError","playElemUI","trackInfo","$299b0bf5dfda9fee$var$getTrackInfo","textContent","comp_title","destroy","$299b0bf5dfda9fee$var$updateCurrentPlayInfo","track_id","track_title","comp_uuid","$299b0bf5dfda9fee$export$144cd45dcb767075","all_tracks","style","display","$299b0bf5dfda9fee$var$unsubscribeEvents","$299b0bf5dfda9fee$var$initializeWavesurfer","$299b0bf5dfda9fee$var$addEventHandlersToWavesurfer","abort","signal","AbortController","$299b0bf5dfda9fee$export$7a196286caa95f25","elements","$299b0bf5dfda9fee$var$fabPlayButtonIsCurrentTrack","WaveSurfer","create","unAll","percentage","duration","$ce4a593b0ea78dcf$var$homePageTermsAccepted","termsAccepted","generateAcceptTermsModal","$ce4a593b0ea78dcf$var$getMyProfile","isAuthenticated","name","innerText","checkIfTermsAccepted","compositions","$ce4a593b0ea78dcf$var$renderHomePage","alert","$ce4a593b0ea78dcf$var$getCompositionsByUserUid","auth","$ce4a593b0ea78dcf$var$getCompositionsByColelctionUid","collectionuid","collection_name","owneruid","notUserPublicPage","$ce4a593b0ea78dcf$var$renderHomePageWithLists","$ce4a593b0ea78dcf$var$paintListOfCompositions","$ce4a593b0ea78dcf$var$paintGroupCollection","listcomps","allCompUIelem","comp","values","parent_collection","$ce4a593b0ea78dcf$var$getSingleComps","groupedComps","listCompsSingle","customgroup","keys","numberCustomGroups","$ce4a593b0ea78dcf$var$initHomPage","queryString","search","split","isAuth","videoPromo","paused","activateGoHomeLink","$fZ0Rm","$14282b8b27bf399a$var$EDIT_STATUS","$14282b8b27bf399a$var$showAllCollButton","$14282b8b27bf399a$var$editButton","$14282b8b27bf399a$var$fetchCollectionsTree","$14282b8b27bf399a$var$createTreeHTML","collection","$14282b8b27bf399a$var$renderTree","treeContainer","$14282b8b27bf399a$var$clickEditButtonHandler","$14282b8b27bf399a$var$disableEdition","$14282b8b27bf399a$var$enableEdition","elementsWithHiddenAttribute","$14282b8b27bf399a$var$removeCollectionClickhHandler","elementsWithDisabledAttribute","$14282b8b27bf399a$var$updateInputTextEventHandler","$14282b8b27bf399a$var$clickAllCollButtonHandler","$14282b8b27bf399a$var$confirmDeleteCollectionModal","collectionTitle","chk","target","tagName","confirm","$14282b8b27bf399a$var$removeCollectionFromModalDialog","checked","_listElemToDelete_nextSibling","listElemToDelete","ids","Array","from","map","li","$14282b8b27bf399a$var$removeCollectionFromHomePage","cardElemToDelete","currentTitle","onblur","$14282b8b27bf399a$var$handleInputBlur","$14282b8b27bf399a$var$updateCollectionTitleRqst","then","catch","collId","currTitle","newValue","$11ef8b79751ebaff$var$createNewButton","$11ef8b79751ebaff$var$createNewButtonAtHome","$11ef8b79751ebaff$var$clickNewButtonHandler","$11ef8b79751ebaff$var$saveEventListener","getCollections","$11ef8b79751ebaff$var$getCompCollSuccess","getCollectionsError","list","createListCollections","saveCompositionButton","$11ef8b79751ebaff$var$saveEventListenerHandler","newCreation","apiMethod","newtitle","privacyLevel","newdescription","collectInput","parentCollection","privacy_level","parent_uuid","startLoader","r","statusText","$11ef8b79751ebaff$var$verifyResponse"],"version":3,"file":"index.aa171dca.js.map"}