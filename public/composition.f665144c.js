function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t=globalThis,i={},n={},a=t.parcelRequire1e7e;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return i[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire1e7e=a);var o=a.register;o("04BFj",function(t,i){e(t.exports,"TestMic",()=>s);var n=a("4TAOB");let o=document.getElementById("gainSliderTestMic");class s{constructor(){this.CURRENT_GAIN_TEST_MIC=1,this.audioCtxTestMic=null,this.analyser=null,this.gainNode=null,this.recordGainNode=null}init(e){let t=this;navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}).then(function(i){t.recordGainNode=e,t.getUserMediaOnSuccess(i)},function(e){console.log("The following error occured: "+e)}):console.log("MediaDevices.getUserMedia() not supported on your browser!")}getUserMediaOnSuccess(e){let t=localStorage.getItem("micgain");this.CURRENT_GAIN_TEST_MIC=t?parseInt(t):this.CURRENT_GAIN_TEST_MIC,this.audioCtxTestMic||(this.audioCtxTestMic=new AudioContext);let i=this.audioCtxTestMic.createMediaStreamSource(e);this.gainNode=this.audioCtxTestMic.createGain(),this.gainNode.gain.value=this.CURRENT_GAIN_TEST_MIC,i.connect(this.gainNode),this.analyser=this.audioCtxTestMic.createAnalyser(),this.analyser.fftSize=2048,this.gainNode.connect(this.analyser);let n=this.audioCtxTestMic.createMediaStreamDestination();this.gainNode.connect(n),this.draw(),this.uiHandlers()}draw(){let e=this,t=this.analyser.frequencyBinCount,i=new Uint8Array(t);this.analyser.getByteTimeDomainData(i),(0,n.setCanvasData)(t,i),requestAnimationFrame(()=>{e.draw()})}async connectSource(){this.analyser.connect(this.audioCtxTestMic.destination)}disconnectSource(){this.analyser.disconnect()}uiHandlers(){let e=this;$("#testMicrophoneModal").on("show.bs.modal",t=>{o.value=e.CURRENT_GAIN_TEST_MIC,document.getElementById("current-input-gain-test-mic").value=e.CURRENT_GAIN_TEST_MIC}),$("#testMicrophoneModal").on("hide.bs.modal",async t=>{e.analyser.disconnect()}),o.addEventListener("input",function(){let t=parseFloat(this.value);e.CURRENT_GAIN_TEST_MIC=t,e.gainNode.gain.value=t,e.recordGainNode.gain.value=t,localStorage.setItem("micgain",t),document.getElementById("current-input-gain-test-mic").value=t})}}}),o("4TAOB",function(t,i){e(t.exports,"setCanvasData",()=>s);let n=document.querySelector(".visualizer-test-mic"),a=n.getContext("2d"),o=document.querySelector(".main-controls-test-mic"),s=(e,t)=>{n.width=o.offsetWidth;let i=n.width,s=n.height;a.fillStyle="rgb(200, 200, 200)",a.fillRect(0,0,i,s),a.lineWidth=2,a.strokeStyle="rgb(0, 0, 0)",a.beginPath();let r=1*i/e,c=0;for(let i=0;i<e;i++){let e=t[i]/128*s/2;0===i?a.moveTo(c,e):a.lineTo(c,e),c+=r}a.lineTo(n.width,n.height/2),a.stroke()}}),a("04BFj");
//# sourceMappingURL=composition.f665144c.js.map
