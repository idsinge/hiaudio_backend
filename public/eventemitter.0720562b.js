parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"mRRC":[function(require,module,exports) {
var o="DEV",N=7007,D={PROD:{ENDPOINT:"",UPLOAD_ENDPOINT:""},STAGE:{ENDPOINT:"",UPLOAD_ENDPOINT:""},DEV:{ENDPOINT:window.location.protocol+"//"+window.location.hostname+":"+N,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.hostname+":"+N+"/fileUpload"}};module.exports={ENDPOINT:D[o].ENDPOINT,UPLOAD_ENDPOINT:D[o].UPLOAD_ENDPOINT};
},{}],"ncJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startLoader=exports.getSong=exports.doFetch=exports.doAfterSongFetched=exports.cancelLoader=void 0;var t=require("../js/config"),e=require("./song");function n(e,n,o,r){this.id=e,this.name=n,this.src=t.ENDPOINT+"/trackfile/"+e,this.customClass=r}var o=function(e,n,o){var r=null,a={};fetch(t.ENDPOINT+"/song/"+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(t){return t.ok||(r=t.statusText),t.json()}).then(function(t){t&&(a=t)}).catch(function(t){r=t}).then(function(){r&&alert(r),n(a,o)})};exports.getSong=o;var r=function(e,n,o){var r=null,a={};fetch(t.ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:e}).then(function(t){return t.ok||(r=t.statusText),t.json()}).then(function(t){t.data&&(a=t.data)}).catch(function(t){r=t}).then(function(){r&&alert(r),n(a,o)})};exports.doFetch=r;var a=function(t){s(t),d(t)};exports.doAfterSongFetched=a;var c=function(t){document.getElementById(t).classList.add(t)};exports.startLoader=c;var i=function(t){document.getElementById(t).classList.remove(t)};exports.cancelLoader=i;var s=function(t){var o=t.owner||!1;if(o&&((0,e.setUserPermission)(!0),e.fileUploader.enableUpload()),t.tracks){var r=[];t.tracks.forEach(function(t){if(t){var e=t.title,o={name:e,track_id:t.id},a=new n(t.id,e,t.path,o);r.push(a)}}),l(r,o)}else i(e.LOADER_ELEM_ID),e.playlist.initExporter(),e.recorder.init()},l=function(t,n){var o=null;e.playlist.load(t).then(function(){e.playlist.initExporter()}).catch(function(t){o=t}).then(function(){i(e.LOADER_ELEM_ID),o?alert(o):(e.recorder.init(),n&&e.trackHandler.displayOptMenuForTracks())})},d=function(t){var e=null,n="No name",o='<h1 class="post-title">No name</h1>',r=t.songInfoById;r&&r.doc_url&&(e='<a href="#" onclick="window.open(\''.concat(r.doc_url,"', 'lyrics_popup', 'fullscreen=yes',false); return false\">Lyrics</a>"),document.getElementById("post-header").insertAdjacentHTML("afterbegin",e)),t.title&&(n=t.title,o='<h1 class="post-title">'.concat(n,"</h1>")),document.getElementById("post-header").insertAdjacentHTML("afterbegin",o)};
},{"../js/config":"mRRC","./song":"rN6O"}],"rfrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackHandler=void 0;var e=require("../js/config"),t=require("./song_helper"),n=require("./song");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=u(e,"string");return"symbol"===o(t)?t:String(t)}function u(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var s=function(){function o(){a(this,o)}return i(o,[{key:"displayOptMenuForNewTrack",value:function(e){var t,o,a=e.result,r=(null==a?void 0:null===(t=a.message)||void 0===t?void 0:t.audio)||(null==a?void 0:null===(o=a.message)||void 0===o?void 0:o.voice),i=r.title||a.message.date,l=r.file_unique_id,u=document.getElementsByClassName("controls"),s=a.message.message_id,c=u.length-1;c>=0&&this.createMenuOptButton(u,c,s,i,l,n.SONG_ID)}},{key:"displayOptMenuForTracks",value:function(){for(var e=document.getElementsByClassName("controls"),t=n.playlist.getInfo(),o=0;o<e.length;o++)if(t[o].customClass){var a=t[o].customClass.message_id,r=t[o].customClass.name,i=t[o].customClass.track_id,l=t[o].customClass.chatId;this.createMenuOptButton(e,o,a,r,i,l)}}},{key:"createMenuOptButton",value:function(e,t,n,o,a,r){var i=this,l="menuoptbtn-"+t,u="menuDropdown"+t,s=document.createElement("span"),c=document.createTextNode("...");s.className="menuoptbtn",s.onclick=function(){document.getElementById(u).classList.toggle("show")},s.id=l,s.appendChild(c),e[t].appendChild(s);var d=document.createElement("ul");d.id=u,d.className="dropdown-content";var m=document.createElement("li");m.id=n,m.dataset.pos=t,m.dataset.name=o,m.dataset.trackId=a,m.dataset.chatId=r,m.onclick=function(e){i.deleteTrackConfirmDialog(e,i.sendDeleteRequest,i.doAfterDeleted)},m.appendChild(document.createTextNode("Delete")),d.appendChild(m),document.getElementById(l).appendChild(d)}},{key:"deleteTrackConfirmDialog",value:function(e,t,n){confirm("Delete "+e.target.dataset.name+"?")&&t(e.target.dataset.pos,e.target.dataset.chatId,e.target.id,e.target.dataset.trackId,n)}},{key:"sendDeleteRequest",value:function(o,a,r,i,l){(0,t.startLoader)(n.LOADER_ELEM_ID),fetch(e.ENDPOINT+"/deletetrack/"+i,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){l(e,o)})}},{key:"doAfterDeleted",value:function(e,o){if((0,t.cancelLoader)(n.LOADER_ELEM_ID),e.ok){var a=parseInt(o);n.playlist.clear(a)}}}]),o}();exports.TrackHandler=s;
},{"../js/config":"mRRC","./song_helper":"ncJ8","./song":"rN6O"}],"alEH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileUploader=void 0;var e=require("../js/config"),n=require("./song"),t=require("./song_helper");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function a(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var n=s(e,"string");return"symbol"===r(n)?n:String(n)}function s(e,n){if("object"!==r(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var d=function(){function r(e,n,t){o(this,r),this.songId=e,this.trackhandler=n,this.loaderElementId=t}return a(r,[{key:"enableUpload",value:function(){var e=this;dropContainer.ondragover=dropContainer.ondragenter=function(e){e.preventDefault()},dropContainer.ondrop=function(n){fileInput.files=n.dataTransfer.files,e.fileReader(fileInput.files[0]),n.preventDefault()}}},{key:"fileReader",value:function(e){var n=this,t={dom:document.getElementById("fileInput"),binary:null},r=new FileReader;r.addEventListener("load",function(){t.binary=r.result}),r.addEventListener("loadend",function(){n.sendData(t)}),e&&r.readAsBinaryString(e),t.dom.addEventListener("change",function(){r.readyState===FileReader.LOADING&&r.abort(),r.readAsBinaryString(t.dom.files[0])})}},{key:"sendData",value:function(r,o){if(!o&&!r.binary&&r.dom.files.length>0)setTimeout(this.sendData,10);else{var i=new XMLHttpRequest,a=new FormData,l=(o?r.name:r.dom.name,o?r:r.dom.files[0]),s=o?r.fileName:r.dom.files[0].name;a.append("song_id",this.songId),a.append("audio",l,s),a.append("user_info",n.USER_INFO),i.addEventListener("load",function(e){if((0,t.cancelLoader)(n.LOADER_ELEM_ID),e.srcElement&&e.srcElement.response){var r=JSON.parse(e.srcElement.response);r.ok?n.trackHandler.displayOptMenuForNewTrack(r):alert("Oops! Something went wrong.")}else alert("Oops! Something went wrong.")}),i.addEventListener("error",function(e){(0,t.cancelLoader)(n.LOADER_ELEM_ID),alert("Oops! Something went wrong.")}),i.open("POST",e.UPLOAD_ENDPOINT),i.send(a),(0,t.startLoader)(n.LOADER_ELEM_ID)}}}]),r}();exports.FileUploader=d;
},{"../js/config":"mRRC","./song":"rN6O","./song_helper":"ncJ8"}],"QpWr":[function(require,module,exports) {
var n=9007199254740991,r="[object Arguments]",t="[object Function]",e="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;function o(n,r,t){switch(t.length){case 0:return n.call(r);case 1:return n.call(r,t[0]);case 2:return n.call(r,t[0],t[1]);case 3:return n.call(r,t[0],t[1],t[2])}return n.apply(r,t)}function c(n,r){for(var t=-1,e=Array(n);++t<n;)e[t]=r(t);return e}function a(n,r){return function(t){return n(r(t))}}var i=Object.prototype,l=i.hasOwnProperty,f=i.toString,v=i.propertyIsEnumerable,p=a(Object.keys,Object),s=Math.max,y=!v.call({valueOf:1},"valueOf");function h(n,r){var t=S(n)||F(n)?c(n.length,String):[],e=t.length,u=!!e;for(var o in n)!r&&!l.call(n,o)||u&&("length"==o||m(o,e))||t.push(o);return t}function g(n,r,t){var e=n[r];l.call(n,r)&&x(e,t)&&(void 0!==t||r in n)||(n[r]=t)}function b(n){if(!w(n))return p(n);var r=[];for(var t in Object(n))l.call(n,t)&&"constructor"!=t&&r.push(t);return r}function d(n,r){return r=s(void 0===r?n.length-1:r,0),function(){for(var t=arguments,e=-1,u=s(t.length-r,0),c=Array(u);++e<u;)c[e]=t[r+e];e=-1;for(var a=Array(r+1);++e<r;)a[e]=t[e];return a[r]=c,o(n,this,a)}}function j(n,r,t,e){t||(t={});for(var u=-1,o=r.length;++u<o;){var c=r[u],a=e?e(t[c],n[c],c,t,n):void 0;g(t,c,void 0===a?n[c]:a)}return t}function O(n){return d(function(r,t){var e=-1,u=t.length,o=u>1?t[u-1]:void 0,c=u>2?t[2]:void 0;for(o=n.length>3&&"function"==typeof o?(u--,o):void 0,c&&A(t[0],t[1],c)&&(o=u<3?void 0:o,u=1),r=Object(r);++e<u;){var a=t[e];a&&n(r,a,e,o)}return r})}function m(r,t){return!!(t=null==t?n:t)&&("number"==typeof r||u.test(r))&&r>-1&&r%1==0&&r<t}function A(n,r,t){if(!M(t))return!1;var e=typeof r;return!!("number"==e?k(t)&&m(r,t.length):"string"==e&&r in t)&&x(t[r],n)}function w(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||i)}function x(n,r){return n===r||n!=n&&r!=r}function F(n){return E(n)&&l.call(n,"callee")&&(!v.call(n,"callee")||f.call(n)==r)}var S=Array.isArray;function k(n){return null!=n&&I(n.length)&&!G(n)}function E(n){return P(n)&&k(n)}function G(n){var r=M(n)?f.call(n):"";return r==t||r==e}function I(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=n}function M(n){var r=typeof n;return!!n&&("object"==r||"function"==r)}function P(n){return!!n&&"object"==typeof n}var $=O(function(n,r){if(y||w(r)||k(r))j(r,q(r),n);else for(var t in r)l.call(r,t)&&g(n,t,r[t])});function q(n){return k(n)?h(n):b(n)}module.exports=$;
},{}],"rDCW":[function(require,module,exports) {

},{}],"qqXr":[function(require,module,exports) {
var global = arguments[3];
var e,d=arguments[3],n=void 0!==d?d:"undefined"!=typeof window?window:{},o=require("min-document");"undefined"!=typeof document?e=document:(e=n["__GLOBAL_DOCUMENT_CACHE@4"])||(e=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),module.exports=e;
},{"min-document":"rDCW"}],"rytr":[function(require,module,exports) {
"use strict";module.exports=function(t){return"object"==typeof t&&null!==t};
},{}],"STdQ":[function(require,module,exports) {
function o(o){return o&&("function"==typeof o.hook&&!o.hasOwnProperty("hook")||"function"==typeof o.unhook&&!o.hasOwnProperty("unhook"))}module.exports=o;
},{}],"HwQw":[function(require,module,exports) {
var o=require("is-object"),t=require("../vnode/is-vhook.js");function r(r,v,n){for(var f in v){var s=v[f];void 0===s?e(r,f,s,n):t(s)?(e(r,f,s,n),s.hook&&s.hook(r,f,n?n[f]:void 0)):o(s)?i(r,v,n,f,s):r[f]=s}}function e(o,r,e,i){if(i){var v=i[r];if(t(v))v.unhook&&v.unhook(o,r,e);else if("attributes"===r)for(var n in v)o.removeAttribute(n);else if("style"===r)for(var f in v)o.style[f]="";else o[r]="string"==typeof v?"":null}}function i(t,r,e,i,n){var f=e?e[i]:void 0;if("attributes"!==i)if(f&&o(f)&&v(f)!==v(n))t[i]=n;else{o(t[i])||(t[i]={});var s="style"===i?"":void 0;for(var u in n){var a=n[u];t[i][u]=void 0===a?s:a}}else for(var c in n){var l=n[c];void 0===l?t.removeAttribute(c):t.setAttribute(c,l)}}function v(o){return Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__?o.__proto__:o.constructor?o.constructor.prototype:void 0}module.exports=r;
},{"is-object":"rytr","../vnode/is-vhook.js":"STdQ"}],"AfGP":[function(require,module,exports) {
module.exports="2";
},{}],"zJpm":[function(require,module,exports) {
var e=require("./version");function r(r){return r&&"VirtualNode"===r.type&&r.version===e}module.exports=r;
},{"./version":"AfGP"}],"npks":[function(require,module,exports) {
var e=require("./version");function r(r){return r&&"VirtualText"===r.type&&r.version===e}module.exports=r;
},{"./version":"AfGP"}],"SLGE":[function(require,module,exports) {
function e(e){return e&&"Widget"===e.type}module.exports=e;
},{}],"upuo":[function(require,module,exports) {
function e(e){return e&&"Thunk"===e.type}module.exports=e;
},{}],"p3kj":[function(require,module,exports) {
var r=require("./is-vnode"),e=require("./is-vtext"),n=require("./is-widget"),i=require("./is-thunk");function t(r,e){var n=r,t=e;return i(e)&&(t=u(e,r)),i(r)&&(n=u(r,null)),{a:n,b:t}}function u(i,t){var u=i.vnode;if(u||(u=i.vnode=i.render(t)),!(r(u)||e(u)||n(u)))throw new Error("thunk did not return a valid node");return u}module.exports=t;
},{"./is-vnode":"zJpm","./is-vtext":"npks","./is-widget":"SLGE","./is-thunk":"upuo"}],"CmCY":[function(require,module,exports) {
var e=require("global/document"),r=require("./apply-properties"),n=require("../vnode/is-vnode.js"),t=require("../vnode/is-vtext.js"),a=require("../vnode/is-widget.js"),i=require("../vnode/handle-thunk.js");function u(l,o){var d=o&&o.document||e,s=o?o.warn:null;if(l=i(l).a,a(l))return l.init();if(t(l))return d.createTextNode(l.text);if(!n(l))return s&&s("Item is not a valid virtual dom node",l),null;var v=null===l.namespace?d.createElement(l.tagName):d.createElementNS(l.namespace,l.tagName),m=l.properties;r(v,m);for(var p=l.children,c=0;c<p.length;c++){var q=u(p[c],o);q&&v.appendChild(q)}return v}module.exports=u;
},{"global/document":"qqXr","./apply-properties":"HwQw","../vnode/is-vnode.js":"zJpm","../vnode/is-vtext.js":"npks","../vnode/is-widget.js":"SLGE","../vnode/handle-thunk.js":"p3kj"}],"A6J8":[function(require,module,exports) {
var e=require("./vdom/create-element.js");module.exports=e;
},{"./vdom/create-element.js":"CmCY"}],"duF3":[function(require,module,exports) {
"use strict";var r=void 0;module.exports=function(t){return t!==r&&null!==t};
},{}],"HiX1":[function(require,module,exports) {
"use strict";var e=require("../value/is"),r={object:!0,function:!0,undefined:!0};module.exports=function(t){return!!e(t)&&hasOwnProperty.call(r,typeof t)};
},{"../value/is":"duF3"}],"psVw":[function(require,module,exports) {
"use strict";var r=require("../object/is");module.exports=function(t){if(!r(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(e){return!1}};
},{"../object/is":"HiX1"}],"OYbY":[function(require,module,exports) {
"use strict";var t=require("../prototype/is");module.exports=function(r){if("function"!=typeof r)return!1;if(!hasOwnProperty.call(r,"length"))return!1;try{if("number"!=typeof r.length)return!1;if("function"!=typeof r.call)return!1;if("function"!=typeof r.apply)return!1}catch(e){return!1}return!t(r)};
},{"../prototype/is":"psVw"}],"Z7pF":[function(require,module,exports) {
"use strict";var t=require("../function/is"),r=/^\s*class[\s{/}]/,s=Function.prototype.toString;module.exports=function(e){return!!t(e)&&!r.test(s.call(e))};
},{"../function/is":"OYbY"}],"y60x":[function(require,module,exports) {
"use strict";module.exports=function(){var r,t=Object.assign;return"function"==typeof t&&(t(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")};
},{}],"gq3z":[function(require,module,exports) {
"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}};
},{}],"qYbH":[function(require,module,exports) {
"use strict";module.exports=function(){};
},{}],"f648":[function(require,module,exports) {
"use strict";var n=require("../function/noop")();module.exports=function(r){return r!==n&&null!==r};
},{"../function/noop":"qYbH"}],"cwcK":[function(require,module,exports) {
"use strict";var e=require("../is-value"),r=Object.keys;module.exports=function(t){return r(e(t)?Object(t):t)};
},{"../is-value":"f648"}],"nhVq":[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim");
},{"./is-implemented":"gq3z","./shim":"cwcK"}],"XtTh":[function(require,module,exports) {
"use strict";var e=require("./is-value");module.exports=function(r){if(!e(r))throw new TypeError("Cannot use null or undefined");return r};
},{"./is-value":"f648"}],"ojUF":[function(require,module,exports) {
"use strict";var r=require("../keys"),e=require("../valid-value"),t=Math.max;module.exports=function(a,i){var o,u,c,n=t(arguments.length,2);for(a=Object(e(a)),c=function(r){try{a[r]=i[r]}catch(e){o||(o=e)}},u=1;u<n;++u)i=arguments[u],r(i).forEach(c);if(void 0!==o)throw o;return a};
},{"../keys":"nhVq","../valid-value":"XtTh"}],"flj8":[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim");
},{"./is-implemented":"y60x","./shim":"ojUF"}],"uacS":[function(require,module,exports) {

"use strict";var r=require("./is-value"),e=Array.prototype.forEach,t=Object.create,c=function(r,e){var t;for(t in r)e[t]=r[t]};module.exports=function(n){var o=t(null);return e.call(arguments,function(e){r(e)&&c(Object(e),o)}),o};
},{"./is-value":"f648"}],"dfav":[function(require,module,exports) {
"use strict";var n="razdwatrzy";module.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))};
},{}],"RK54":[function(require,module,exports) {
"use strict";var t=String.prototype.indexOf;module.exports=function(r){return t.call(this,r,arguments[1])>-1};
},{}],"zRHi":[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim");
},{"./is-implemented":"dfav","./shim":"RK54"}],"iAJW":[function(require,module,exports) {
"use strict";var e=require("type/value/is"),r=require("type/plain-function/is"),i=require("es5-ext/object/assign"),t=require("es5-ext/object/normalize-options"),l=require("es5-ext/string/#/contains"),n=module.exports=function(r,n){var u,a,o,s,c;return arguments.length<2||"string"!=typeof r?(s=n,n=r,r=null):s=arguments[2],e(r)?(u=l.call(r,"c"),a=l.call(r,"e"),o=l.call(r,"w")):(u=o=!0,a=!1),c={value:n,configurable:u,enumerable:a,writable:o},s?i(t(s),c):c};n.gs=function(n,u,a){var o,s,c,g;return"string"!=typeof n?(c=a,a=u,u=n,n=null):c=arguments[3],e(u)?r(u)?e(a)?r(a)||(c=a,a=void 0):a=void 0:(c=u,u=a=void 0):u=void 0,e(n)?(o=l.call(n,"c"),s=l.call(n,"e")):(o=!0,s=!1),g={get:u,set:a,configurable:o,enumerable:s},c?i(t(c),g):g};
},{"type/value/is":"duF3","type/plain-function/is":"Z7pF","es5-ext/object/assign":"flj8","es5-ext/object/normalize-options":"uacS","es5-ext/string/#/contains":"zRHi"}],"N9bW":[function(require,module,exports) {
"use strict";module.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t};
},{}],"PRGr":[function(require,module,exports) {
"use strict";var e,t,r,l,i,n,c,s=require("d"),o=require("es5-ext/object/valid-callable"),_=Function.prototype.apply,a=Function.prototype.call,h=Object.create,u=Object.defineProperty,f=Object.defineProperties,p=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};t=function(t,l){var i,n;return o(l),n=this,e.call(this,t,i=function(){r.call(n,t,i),_.call(l,this,arguments)}),i.__eeOnceListener__=l,this},i={on:e=function(e,t){var r;return o(t),p.call(this,"__ee__")?r=this.__ee__:(r=b.value=h(null),u(this,"__ee__",b),b.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:t,off:r=function(e,t){var r,l,i,n;if(o(t),!p.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(l=r[e]))for(n=0;i=l[n];++n)i!==t&&i.__eeOnceListener__!==t||(2===l.length?r[e]=l[n?0:1]:l.splice(n,1));else l!==t&&l.__eeOnceListener__!==t||delete r[e];return this},emit:l=function(e){var t,r,l,i,n;if(p.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,n=new Array(r-1),t=1;t<r;++t)n[t-1]=arguments[t];for(i=i.slice(),t=0;l=i[t];++t)_.call(l,this,n)}else switch(arguments.length){case 1:a.call(i,this);break;case 2:a.call(i,this,arguments[1]);break;case 3:a.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,n=new Array(r-1),t=1;t<r;++t)n[t-1]=arguments[t];_.call(i,this,n)}}},n={on:s(e),once:s(t),off:s(r),emit:s(l)},c=f({},n),module.exports=exports=function(e){return null==e?h(c):f(Object(e),n)},exports.methods=i;
},{"d":"iAJW","es5-ext/object/valid-callable":"N9bW"}],"i1uA":[function(require,module,exports) {
var n=9007199254740991,r="[object Arguments]",t="[object Function]",e="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/;function u(n,r,t){switch(t.length){case 0:return n.call(r);case 1:return n.call(r,t[0]);case 2:return n.call(r,t[0],t[1]);case 3:return n.call(r,t[0],t[1],t[2])}return n.apply(r,t)}function c(n,r){for(var t=-1,e=Array(n);++t<n;)e[t]=r(t);return e}var i=Object.prototype,a=i.hasOwnProperty,l=i.toString,f=i.propertyIsEnumerable,v=Math.max;function p(n,r){var t=F(n)||x(n)?c(n.length,String):[],e=t.length,o=!!e;for(var u in n)!r&&!a.call(n,u)||o&&("length"==u||j(u,e))||t.push(u);return t}function h(n,r,t,e){return void 0===n||w(n,i[t])&&!a.call(e,t)?r:n}function s(n,r,t){var e=n[r];a.call(n,r)&&w(e,t)&&(void 0!==t||r in n)||(n[r]=t)}function y(n){if(!M(n))return O(n);var r=A(n),t=[];for(var e in n)("constructor"!=e||!r&&a.call(n,e))&&t.push(e);return t}function g(n,r){return r=v(void 0===r?n.length-1:r,0),function(){for(var t=arguments,e=-1,o=v(t.length-r,0),c=Array(o);++e<o;)c[e]=t[r+e];e=-1;for(var i=Array(r+1);++e<r;)i[e]=t[e];return i[r]=c,u(n,this,i)}}function d(n,r,t,e){t||(t={});for(var o=-1,u=r.length;++o<u;){var c=r[o],i=e?e(t[c],n[c],c,t,n):void 0;s(t,c,void 0===i?n[c]:i)}return t}function b(n){return g(function(r,t){var e=-1,o=t.length,u=o>1?t[o-1]:void 0,c=o>2?t[2]:void 0;for(u=n.length>3&&"function"==typeof u?(o--,u):void 0,c&&m(t[0],t[1],c)&&(u=o<3?void 0:u,o=1),r=Object(r);++e<o;){var i=t[e];i&&n(r,i,e,u)}return r})}function j(r,t){return!!(t=null==t?n:t)&&("number"==typeof r||o.test(r))&&r>-1&&r%1==0&&r<t}function m(n,r,t){if(!M(t))return!1;var e=typeof r;return!!("number"==e?S(t)&&j(r,t.length):"string"==e&&r in t)&&w(t[r],n)}function A(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||i)}function O(n){var r=[];if(null!=n)for(var t in Object(n))r.push(t);return r}function w(n,r){return n===r||n!=n&&r!=r}function x(n){return E(n)&&a.call(n,"callee")&&(!f.call(n,"callee")||l.call(n)==r)}var F=Array.isArray;function S(n){return null!=n&&I(n.length)&&!G(n)}function E(n){return P(n)&&S(n)}function G(n){var r=M(n)?l.call(n):"";return r==t||r==e}function I(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=n}function M(n){var r=typeof n;return!!n&&("object"==r||"function"==r)}function P(n){return!!n&&"object"==typeof n}var $=b(function(n,r,t,e){d(r,q(r),n,e)}),k=g(function(n){return n.push(void 0,h),u($,void 0,n)});function q(n){return S(n)?p(n,!0):y(n)}module.exports=k;
},{}],"pmKR":[function(require,module,exports) {
var r=Array.isArray,t=Object.prototype.toString;function o(r){return"[object Array]"===t.call(r)}module.exports=r||o;
},{}],"h29p":[function(require,module,exports) {
var e=require("./version"),s=require("./is-vnode"),t=require("./is-widget"),i=require("./is-thunk"),o=require("./is-vhook");module.exports=h;var r={},n=[];function h(e,h,a,u,d){this.tagName=e,this.properties=h||r,this.children=a||n,this.key=null!=u?String(u):void 0,this.namespace="string"==typeof d?d:null;var p,v=a&&a.length||0,k=0,c=!1,l=!1,y=!1;for(var f in h)if(h.hasOwnProperty(f)){var g=h[f];o(g)&&g.unhook&&(p||(p={}),p[f]=g)}for(var q=0;q<v;q++){var m=a[q];s(m)?(k+=m.count||0,!c&&m.hasWidgets&&(c=!0),!l&&m.hasThunks&&(l=!0),y||!m.hooks&&!m.descendantHooks||(y=!0)):!c&&t(m)?"function"==typeof m.destroy&&(c=!0):!l&&i(m)&&(l=!0)}this.count=v+k,this.hasWidgets=c,this.hasThunks=l,this.hooks=p,this.descendantHooks=y}h.prototype.version=e,h.prototype.type="VirtualNode";
},{"./version":"AfGP","./is-vnode":"zJpm","./is-widget":"SLGE","./is-thunk":"upuo","./is-vhook":"STdQ"}],"uJMJ":[function(require,module,exports) {
var t=require("./version");function e(t){this.text=String(t)}module.exports=e,e.prototype.version=t,e.prototype.type="VirtualText";
},{"./version":"AfGP"}],"ZrUx":[function(require,module,exports) {
module.exports=function(e){var t=String.prototype.split,n=/()??/.exec("")[1]===e;return function(l,r,i){if("[object RegExp]"!==Object.prototype.toString.call(r))return t.call(l,r,i);var o,p,s,c,g=[],u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),x=0;r=new RegExp(r.source,u+"g");for(l+="",n||(o=new RegExp("^"+r.source+"$(?!\\s)",u)),i=i===e?-1>>>0:i>>>0;(p=r.exec(l))&&!((s=p.index+p[0].length)>x&&(g.push(l.slice(x,p.index)),!n&&p.length>1&&p[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(p[t]=e)}),p.length>1&&p.index<l.length&&Array.prototype.push.apply(g,p.slice(1)),c=p[0].length,x=s,g.length>=i));)r.lastIndex===p.index&&r.lastIndex++;return x===l.length?!c&&r.test("")||g.push(""):g.push(l.slice(x)),g.length>i?g.slice(0,i):g}}();
},{}],"pNR0":[function(require,module,exports) {
"use strict";var s=require("browser-split"),e=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,r=/^\.|#/;function t(t,a){if(!t)return"DIV";var n,u,i,l,o=!a.hasOwnProperty("id"),p=s(t,e),c=null;for(r.test(p[1])&&(c="DIV"),l=0;l<p.length;l++)(u=p[l])&&(i=u.charAt(0),c?"."===i?(n=n||[]).push(u.substring(1,u.length)):"#"===i&&o&&(a.id=u.substring(1,u.length)):c=u);return n&&(a.className&&n.push(a.className),a.className=n.join(" ")),a.namespace?c:c.toUpperCase()}module.exports=t;
},{"browser-split":"ZrUx"}],"f6FQ":[function(require,module,exports) {
"use strict";function t(e){if(!(this instanceof t))return new t(e);this.value=e}module.exports=t,t.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)};
},{}],"yjpw":[function(require,module,exports) {
var global = arguments[3];
var n=arguments[3],e="undefined"!=typeof window?window:void 0!==n?n:{};function o(n,o){return n in e?e[n]:(e[n]=o,o)}module.exports=o;
},{}],"tvMZ":[function(require,module,exports) {
"use strict";var n=require("./index.js");function e(e,r,o){var a="__INDIVIDUAL_ONE_VERSION_"+e,i=n(a+"_ENFORCE_SINGLETON",r);if(i!==r)throw new Error("Can only have one copy of "+e+".\nYou already have version "+i+" installed.\nThis means you cannot install version "+r);return n(a,o)}module.exports=e;
},{"./index.js":"yjpw"}],"i9jn":[function(require,module,exports) {
"use strict";var r=require("individual/one-version"),e="7";r("ev-store",e);var i="__EV_STORE_KEY@"+e;function n(r){var e=r[i];return e||(e=r[i]={}),e}module.exports=n;
},{"individual/one-version":"tvMZ"}],"ygjz":[function(require,module,exports) {
"use strict";var t=require("ev-store");function o(t){if(!(this instanceof o))return new o(t);this.value=t}module.exports=o,o.prototype.hook=function(o,e){t(o)[e.substr(3)]=this.value},o.prototype.unhook=function(o,e){t(o)[e.substr(3)]=void 0};
},{"ev-store":"i9jn"}],"IE35":[function(require,module,exports) {
"use strict";var e=require("x-is-array"),r=require("../vnode/vnode.js"),n=require("../vnode/vtext.js"),t=require("../vnode/is-vnode"),i=require("../vnode/is-vtext"),o=require("../vnode/is-widget"),u=require("../vnode/is-vhook"),s=require("../vnode/is-thunk"),a=require("./parse-tag.js"),v=require("./hooks/soft-set-hook.js"),p=require("./hooks/ev-hook.js");function d(e,n,t){var i,o,s,p,d=[];return!t&&l(n)&&(t=n,o={}),i=a(e,o=o||n||{}),o.hasOwnProperty("key")&&(s=o.key,o.key=void 0),o.hasOwnProperty("namespace")&&(p=o.namespace,o.namespace=void 0),"INPUT"!==i||p||!o.hasOwnProperty("value")||void 0===o.value||u(o.value)||(o.value=v(o.value)),c(o),null!=t&&f(t,d,i,o),new r(i,o,d,s,p)}function f(r,t,i,o){if("string"==typeof r)t.push(new n(r));else if("number"==typeof r)t.push(new n(String(r)));else if(h(r))t.push(r);else{if(!e(r)){if(null==r)return;throw g({foreignObject:r,parentVnode:{tagName:i,properties:o}})}for(var u=0;u<r.length;u++)f(r[u],t,i,o)}}function c(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(u(n))continue;"ev-"===r.substr(0,3)&&(e[r]=p(n))}}function h(e){return t(e)||i(e)||o(e)||s(e)}function l(r){return"string"==typeof r||e(r)||h(r)}function g(e){var r=new Error;return r.type="virtual-hyperscript.unexpected.virtual-element",r.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+y(e.foreignObject)+".\nThe parent vnode is:\n"+y(e.parentVnode),r.foreignObject=e.foreignObject,r.parentVnode=e.parentVnode,r}function y(e){try{return JSON.stringify(e,null,"    ")}catch(r){return String(e)}}module.exports=d;
},{"x-is-array":"pmKR","../vnode/vnode.js":"h29p","../vnode/vtext.js":"uJMJ","../vnode/is-vnode":"zJpm","../vnode/is-vtext":"npks","../vnode/is-widget":"SLGE","../vnode/is-vhook":"STdQ","../vnode/is-thunk":"upuo","./parse-tag.js":"pNR0","./hooks/soft-set-hook.js":"f6FQ","./hooks/ev-hook.js":"ygjz"}],"Z1FU":[function(require,module,exports) {
var r=require("./virtual-hyperscript/index.js");module.exports=r;
},{"./virtual-hyperscript/index.js":"IE35"}],"Thbo":[function(require,module,exports) {
var t=require("./version");function e(t,e,o){this.type=Number(t),this.vNode=e,this.patch=o}e.NONE=0,e.VTEXT=1,e.VNODE=2,e.WIDGET=3,e.PROPS=4,e.ORDER=5,e.INSERT=6,e.REMOVE=7,e.THUNK=8,module.exports=e,e.prototype.version=t,e.prototype.type="VirtualPatch";
},{"./version":"AfGP"}],"fehX":[function(require,module,exports) {
var o=require("is-object"),r=require("../vnode/is-vhook");function e(i,n){var f;for(var v in i){v in n||((f=f||{})[v]=void 0);var c=i[v],u=n[v];if(c!==u)if(o(c)&&o(u))if(t(u)!==t(c))(f=f||{})[v]=u;else if(r(u))(f=f||{})[v]=u;else{var s=e(c,u);s&&((f=f||{})[v]=s)}else(f=f||{})[v]=u}for(var _ in n)_ in i||((f=f||{})[_]=n[_]);return f}function t(o){return Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__?o.__proto__:o.constructor?o.constructor.prototype:void 0}module.exports=e;
},{"is-object":"rytr","../vnode/is-vhook":"STdQ"}],"B3MY":[function(require,module,exports) {
var e=require("x-is-array"),n=require("../vnode/vpatch"),r=require("../vnode/is-vnode"),t=require("../vnode/is-vtext"),u=require("../vnode/is-widget"),l=require("../vnode/is-thunk"),o=require("../vnode/handle-thunk"),i=require("./diff-props");function s(e,n){var r={a:e};return h(e,n,r,0),r}function h(e,o,s,h){if(e!==o){var v=s[h],k=!1;if(l(e)||l(o))c(e,o,s,h);else if(null==o)u(e)||(f(e,s,h),v=s[h]),v=m(v,new n(n.REMOVE,e,o));else if(r(o))if(r(e))if(e.tagName===o.tagName&&e.namespace===o.namespace&&e.key===o.key){var y=i(e.properties,o.properties);y&&(v=m(v,new n(n.PROPS,e,y))),v=a(e,o,s,v,h)}else v=m(v,new n(n.VNODE,e,o)),k=!0;else v=m(v,new n(n.VNODE,e,o)),k=!0;else t(o)?t(e)?e.text!==o.text&&(v=m(v,new n(n.VTEXT,e,o))):(v=m(v,new n(n.VTEXT,e,o)),k=!0):u(o)&&(u(e)||(k=!0),v=m(v,new n(n.WIDGET,e,o)));v&&(s[h]=v),k&&f(e,s,h)}}function a(e,t,u,l,o){for(var i=e.children,s=d(i,t.children),a=s.children,f=i.length,v=a.length,c=f>v?f:v,k=0;k<c;k++){var y=i[k],p=a[k];o+=1,y?h(y,p,u,o):p&&(l=m(l,new n(n.INSERT,null,p))),r(y)&&y.count&&(o+=y.count)}return s.moves&&(l=m(l,new n(n.ORDER,e,s.moves))),l}function f(e,n,r){y(e,n,r),v(e,n,r)}function v(e,t,o){if(u(e))"function"==typeof e.destroy&&(t[o]=m(t[o],new n(n.REMOVE,e,null)));else if(r(e)&&(e.hasWidgets||e.hasThunks))for(var i=e.children,s=i.length,h=0;h<s;h++){var a=i[h];v(a,t,o+=1),r(a)&&a.count&&(o+=a.count)}else l(e)&&c(e,null,t,o)}function c(e,r,t,u){var l=o(e,r),i=s(l.a,l.b);k(i)&&(t[u]=new n(n.THUNK,null,i))}function k(e){for(var n in e)if("a"!==n)return!0;return!1}function y(e,t,u){if(r(e)){if(e.hooks&&(t[u]=m(t[u],new n(n.PROPS,e,p(e.hooks)))),e.descendantHooks||e.hasThunks)for(var o=e.children,i=o.length,s=0;s<i;s++){var h=o[s];y(h,t,u+=1),r(h)&&h.count&&(u+=h.count)}}else l(e)&&c(e,null,t,u)}function p(e){var n={};for(var r in e)n[r]=void 0;return n}function d(e,n){var r=w(n),t=r.keys,u=r.free;if(u.length===n.length)return{children:n,moves:null};var l=w(e),o=l.keys;if(l.free.length===e.length)return{children:n,moves:null};for(var i=[],s=0,h=u.length,a=0,f=0;f<e.length;f++){var v,c=e[f];c.key?t.hasOwnProperty(c.key)?(v=t[c.key],i.push(n[v])):(v=f-a++,i.push(null)):s<h?(v=u[s++],i.push(n[v])):(v=f-a++,i.push(null))}for(var k=s>=u.length?n.length:u[s],y=0;y<n.length;y++){var p=n[y];p.key?o.hasOwnProperty(p.key)||i.push(p):y>=k&&i.push(p)}for(var d,m=i.slice(),E=0,O=[],T=[],q=0;q<n.length;){var R=n[q];for(d=m[E];null===d&&m.length;)O.push(g(m,E,null)),d=m[E];d&&d.key===R.key?(E++,q++):R.key?(d&&d.key&&t[d.key]!==q+1?(O.push(g(m,E,d.key)),(d=m[E])&&d.key===R.key?E++:T.push({key:R.key,to:q})):T.push({key:R.key,to:q}),q++):d&&d.key&&O.push(g(m,E,d.key))}for(;E<m.length;)d=m[E],O.push(g(m,E,d&&d.key));return O.length!==a||T.length?{children:i,moves:{removes:O,inserts:T}}:{children:i,moves:null}}function g(e,n,r){return e.splice(n,1),{from:n,key:r}}function w(e){for(var n={},r=[],t=e.length,u=0;u<t;u++){var l=e[u];l.key?n[l.key]=u:r.push(u)}return{keys:n,free:r}}function m(n,r){return n?(e(n)?n.push(r):n=[n,r],n):r}module.exports=s;
},{"x-is-array":"pmKR","../vnode/vpatch":"Thbo","../vnode/is-vnode":"zJpm","../vnode/is-vtext":"npks","../vnode/is-widget":"SLGE","../vnode/is-thunk":"upuo","../vnode/handle-thunk":"p3kj","./diff-props":"fehX"}],"tWAF":[function(require,module,exports) {
var e=require("./vtree/diff.js");module.exports=e;
},{"./vtree/diff.js":"B3MY"}],"GYMB":[function(require,module,exports) {
var r={};function n(r,n,t,u){return t&&0!==t.length?(t.sort(i),e(r,n,t,u,0)):{}}function e(n,i,u,f,o){if(f=f||{},n){t(u,o,o)&&(f[o]=n);var l=i.children;if(l)for(var c=n.childNodes,h=0;h<i.children.length;h++){o+=1;var a=l[h]||r,d=o+(a.count||0);t(u,o,d)&&e(c[h],a,u,f,o),o=d}}return f}function t(r,n,e){if(0===r.length)return!1;for(var t,i,u=0,f=r.length-1;u<=f;){if(i=r[t=(f+u)/2>>0],u===f)return i>=n&&i<=e;if(i<n)u=t+1;else{if(!(i>e))return!0;f=t-1}}return!1}function i(r,n){return r>n?1:-1}module.exports=n;
},{}],"lKc2":[function(require,module,exports) {
var i=require("../vnode/is-widget.js");function n(n,e){return!(!i(n)||!i(e))&&("name"in n&&"name"in e?n.id===e.id:n.init===e.init)}module.exports=n;
},{"../vnode/is-widget.js":"SLGE"}],"fCa8":[function(require,module,exports) {
var e=require("./apply-properties"),r=require("../vnode/is-widget.js"),t=require("../vnode/vpatch.js"),n=require("./update-widget");function a(r,n,a){var p=r.type,v=r.vNode,f=r.patch;switch(p){case t.REMOVE:return o(n,v);case t.INSERT:return u(n,f,a);case t.VTEXT:return d(n,v,f,a);case t.WIDGET:return i(n,v,f,a);case t.VNODE:return c(n,v,f,a);case t.ORDER:return s(n,f),n;case t.PROPS:return e(n,f,v.properties),n;case t.THUNK:return l(n,a.patch(n,f,a));default:return n}}function o(e,r){var t=e.parentNode;return t&&t.removeChild(e),p(e,r),null}function u(e,r,t){var n=t.render(r,t);return e&&e.appendChild(n),e}function d(e,r,t,n){var a;if(3===e.nodeType)e.replaceData(0,e.length,t.text),a=e;else{var o=e.parentNode;a=n.render(t,n),o&&a!==e&&o.replaceChild(a,e)}return a}function i(e,r,t,a){var o,u=n(r,t);o=u?t.update(r,e)||e:a.render(t,a);var d=e.parentNode;return d&&o!==e&&d.replaceChild(o,e),u||p(e,r),o}function c(e,r,t,n){var a=e.parentNode,o=n.render(t,n);return a&&o!==e&&a.replaceChild(o,e),o}function p(e,t){"function"==typeof t.destroy&&r(t)&&t.destroy(e)}function s(e,r){for(var t,n,a,o=e.childNodes,u={},d=0;d<r.removes.length;d++)t=o[(n=r.removes[d]).from],n.key&&(u[n.key]=t),e.removeChild(t);for(var i=o.length,c=0;c<r.inserts.length;c++)t=u[(a=r.inserts[c]).key],e.insertBefore(t,a.to>=i++?null:o[a.to])}function l(e,r){return e&&r&&e!==r&&e.parentNode&&e.parentNode.replaceChild(r,e),r}module.exports=a;
},{"./apply-properties":"HwQw","../vnode/is-widget.js":"SLGE","../vnode/vpatch.js":"Thbo","./update-widget":"lKc2"}],"Hu9Z":[function(require,module,exports) {
var r=require("global/document"),e=require("x-is-array"),n=require("./create-element"),t=require("./dom-index"),u=require("./patch-op");function a(r,e,t){return(t=t||{}).patch=t.patch&&t.patch!==a?t.patch:o,t.render=t.render||n,t.patch(r,e,t)}function o(e,n,u){var a=i(n);if(0===a.length)return e;var o=t(e,n.a,a),f=e.ownerDocument;u.document||f===r||(u.document=f);for(var h=0;h<a.length;h++){var p=a[h];e=c(e,o[p],n[p],u)}return e}function c(r,n,t,a){if(!n)return r;var o;if(e(t))for(var c=0;c<t.length;c++)o=u(t[c],n,a),n===r&&(r=o);else o=u(t,n,a),n===r&&(r=o);return r}function i(r){var e=[];for(var n in r)"a"!==n&&e.push(Number(n));return e}module.exports=a;
},{"global/document":"qqXr","x-is-array":"pmKR","./create-element":"CmCY","./dom-index":"GYMB","./patch-op":"fCa8"}],"jkk7":[function(require,module,exports) {
var e=require("./vdom/patch.js");module.exports=e;
},{"./vdom/patch.js":"Hu9Z"}],"iQJt":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=!!(t===t.window&&t.URL&&t.Blob&&t.Worker);function s(s,o){var n,i=this;if(o=o||{},e)return n=s.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new t.Worker(t.URL.createObjectURL(new t.Blob([n],{type:"text/javascript"})));this.self=o,this.self.postMessage=function(t){setTimeout(function(){i.onmessage({data:t})},0)},setTimeout(s.bind(o,o),0)}s.prototype.postMessage=function(t){var e=this;setTimeout(function(){e.self.onmessage({data:t})},0)},module.exports=s;
},{}],"lgXS":[function(require,module,exports) {
"use strict";function e(e,o){return e/o}function o(e,o){return Math.ceil(e*o)}function t(e,o){return Math.floor(e/o)}function s(e,o){return Math.floor(e*o)}function r(e,o,t){return e*o/t}function n(e,o,t){return Math.ceil(e*t/o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.samplesToSeconds=e,exports.secondsToSamples=o,exports.samplesToPixels=t,exports.pixelsToSamples=s,exports.pixelsToSeconds=r,exports.secondsToPixels=n;
},{}],"UW1P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STATE_FINISHED=exports.STATE_DECODING=exports.STATE_LOADING=exports.STATE_UNINITIALIZED=void 0;var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("event-emitter"),r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=exports.STATE_UNINITIALIZED=0,i=exports.STATE_LOADING=1,s=exports.STATE_DECODING=2,u=exports.STATE_FINISHED=3,c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.default)();a(this,t),this.src=e,this.ac=n,this.audioRequestState=o,this.ee=i}return e(t,[{key:"setStateChange",value:function(e){this.audioRequestState=e,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}},{key:"fileProgress",value:function(e){var t=0;this.audioRequestState===o&&this.setStateChange(i),e.lengthComputable&&(t=e.loaded/e.total*100),this.ee.emit("loadprogress",t,this.src)}},{key:"fileLoad",value:function(e){var t=this,r=e.target.response||e.target.result;return this.setStateChange(s),new Promise(function(e,n){t.ac.decodeAudioData(r,function(r){t.audioBuffer=r,t.setStateChange(u),e(r)},function(e){n(null===e?Error("MediaDecodeAudioDataUnknownContentType"):e)})})}}]),t}();exports.default=c;
},{"event-emitter":"PRGr"}],"qKQk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),t=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var u=n.get;return void 0!==u?u.call(o):void 0},r=require("./Loader"),o=n(r);function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(r){function n(){return i(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,o.default),e(n,[{key:"load",value:function(){var e=this;return new Promise(function(r,o){if(e.src.type.match(/audio.*/)||e.src.type.match(/video\/ogg/)){var i=new FileReader;i.readAsArrayBuffer(e.src),i.addEventListener("progress",function(r){t(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fileProgress",e).call(e,r)}),i.addEventListener("load",function(i){t(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fileLoad",e).call(e,i).then(function(e){r(e)}).catch(o)}),i.addEventListener("error",o)}else o(Error("Unsupported file type "+e.src.type))})}}]),n}();exports.default=c;
},{"./Loader":"UW1P"}],"lJ3K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("./Loader"),r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(t){function n(){return o(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,r.default),e(n,[{key:"load",value:function(){return Promise.resolve(this.src)}}]),n}();exports.default=a;
},{"./Loader":"UW1P"}],"khgI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),t=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var u=n.get;return void 0!==u?u.call(o):void 0},r=require("./Loader"),o=n(r);function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(r){function n(){return i(this,n),u(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,o.default),e(n,[{key:"load",value:function(){var e=this;return new Promise(function(r,o){var i=new XMLHttpRequest;i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(),i.addEventListener("progress",function(r){t(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fileProgress",e).call(e,r)}),i.addEventListener("load",function(i){t(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fileLoad",e).call(e,i).then(function(e){r(e)}).catch(o)}),i.addEventListener("error",function(){o(Error("Track "+e.src+" failed to load"))})})}}]),n}();exports.default=c;
},{"./Loader":"UW1P"}],"C0Rd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),r=require("./BlobLoader"),n=i(r),t=require("./IdentityLoader"),u=i(t),o=require("./XHRLoader"),a=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function f(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var l=function(){function r(){f(this,r)}return e(r,null,[{key:"createLoader",value:function(e,r,t){if(e instanceof Blob)return new n.default(e,r,t);if(e instanceof AudioBuffer)return new u.default(e,r,t);if("string"==typeof e)return new a.default(e,r,t);throw new Error("Unsupported src type")}}]),r}();exports.default=l;
},{"./BlobLoader":"qKQk","./IdentityLoader":"lJ3K","./XHRLoader":"khgI"}],"bcMc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,r,l){return r&&e(t.prototype,r),l&&e(t,l),t}}(),t=require("../utils/conversions");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function l(e){r(this,l),this.playlist=e}return e(l,[{key:"hook",value:function(e){var r=this.playlist;if(!r.isScrolling){var l=e;if(r.isAutomaticScroll){var n=e.getBoundingClientRect(),o=r.controls.show?r.controls.width:0,i=(0,t.pixelsToSeconds)(n.width-o,r.samplesPerPixel,r.sampleRate),s=r.isPlaying()?r.playbackSeconds:r.getTimeSelection().start;(s<r.scrollLeft||s>=r.scrollLeft+i)&&(r.scrollLeft=Math.min(s,r.duration-i))}var a=(0,t.secondsToPixels)(r.scrollLeft,r.samplesPerPixel,r.sampleRate);l.scrollLeft=a}}}]),l}();exports.default=l;
},{"../utils/conversions":"lgXS"}],"jD0c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(t,o,r,n,s){e(this,i),this.tickInfo=t,this.offset=o,this.samplesPerPixel=r,this.duration=n,this.colors=s}return t(i,[{key:"hook",value:function(t,e,i){var o=this;if(void 0===i||i.offset!==this.offset||i.duration!==this.duration||i.samplesPerPixel!==this.samplesPerPixel){var r=t.width,n=t.height,s=t.getContext("2d");s.clearRect(0,0,r,n),s.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach(function(t){var e=o.tickInfo[t],i=n-e;s.fillRect(t,i,1,e)})}}}]),i}();exports.default=i;
},{}],"VON8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),t=require("virtual-dom/h"),i=n(t),r=require("./utils/conversions"),s=require("./render/TimeScaleHook"),a=n(s);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(e,i,r,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments[5];o(this,t),this.duration=e,this.offset=i,this.samplesPerPixel=r,this.sampleRate=s,this.marginLeft=a,this.colors=n,this.timeinfo={20000:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12000:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},10000:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5000:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}return e(t,[{key:"getScaleInfo",value:function(e){var t=Object.keys(this.timeinfo).map(function(e){return parseInt(e,10)});t=t.sort(function(e,t){return e-t});for(var i=0;i<t.length;i+=1)if(e<=t[i])return this.timeinfo[t[i]];return this.timeinfo[t[0]]}},{key:"render",value:function(){for(var e=(0,r.secondsToPixels)(this.duration,this.samplesPerPixel,this.sampleRate),s=this.sampleRate/this.samplesPerPixel,n=(0,r.secondsToPixels)(this.offset,this.samplesPerPixel,this.sampleRate),o=this.getScaleInfo(this.samplesPerPixel),l={},p=[],u=e+n,f=0,m=0;m<u;m+=s*o.secondStep){var c=Math.floor(m),h=c-n;c>=n&&(o.marker&&f%o.marker==0?(p.push((0,i.default)("div.time",{attributes:{style:"position: absolute; left: "+h+"px;"}},[t.formatTime(f)])),l[h]=10):o.bigStep&&f%o.bigStep==0?l[h]=5:o.smallStep&&f%o.smallStep==0&&(l[h]=2)),f+=1e3*o.secondStep}return(0,i.default)("div.playlist-time-scale",{attributes:{style:"position: relative; left: 0; right: 0; margin-left: "+this.marginLeft+"px;"}},[p,(0,i.default)("canvas",{attributes:{width:e,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new a.default(l,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}],[{key:"formatTime",value:function(e){var t=e/1e3,i=t%60,r=(t-i)/60;return i<10&&(i="0"+i),r+":"+i}}]),t}();exports.default=l;
},{"virtual-dom/h":"Z1FU","./utils/conversions":"lgXS","./render/TimeScaleHook":"jD0c"}],"iwXs":[function(require,module,exports) {
var n=9007199254740991,r="[object Arguments]",t="[object Function]",e="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;function o(n,r){for(var t=-1,e=Array(n);++t<n;)e[t]=r(t);return e}function c(n,r){return function(t){return n(r(t))}}var f=Object.prototype,i=f.hasOwnProperty,a=f.toString,l=f.propertyIsEnumerable,p=c(Object.keys,Object);function b(n,r){var t=m(n)||O(n)?o(n.length,String):[],e=t.length,u=!!e;for(var c in n)!r&&!i.call(n,c)||u&&("length"==c||g(c,e))||t.push(c);return t}var v=j();function y(n,r){return n&&v(n,r,E)}function s(n){if(!h(n))return p(n);var r=[];for(var t in Object(n))i.call(n,t)&&"constructor"!=t&&r.push(t);return r}function j(n){return function(r,t,e){for(var u=-1,o=Object(r),c=e(r),f=c.length;f--;){var i=c[n?f:++u];if(!1===t(o[i],i,o))break}return r}}function g(r,t){return!!(t=null==t?n:t)&&("number"==typeof r||u.test(r))&&r>-1&&r%1==0&&r<t}function h(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||f)}function O(n){return d(n)&&i.call(n,"callee")&&(!l.call(n,"callee")||a.call(n)==r)}var m=Array.isArray;function A(n){return null!=n&&F(n.length)&&!k(n)}function d(n){return w(n)&&A(n)}function k(n){var r=S(n)?a.call(n):"";return r==t||r==e}function F(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=n}function S(n){var r=typeof n;return!!n&&("object"==r||"function"==r)}function w(n){return!!n&&"object"==typeof n}function x(n,r){return n&&y(n,"function"==typeof r?r:G)}function E(n){return A(n)?b(n):s(n)}function G(n){return n}module.exports=x;
},{}],"nk3f":[function(require,module,exports) {
var global = arguments[3];
var r,a=arguments[3],n=a.crypto||a.msCrypto;if(n&&n.getRandomValues){var t=new Uint8Array(16);r=function(){return n.getRandomValues(t),t}}if(!r){var e=new Array(16);r=function(){for(var r,a=0;a<16;a++)0==(3&a)&&(r=4294967296*Math.random()),e[a]=r>>>((3&a)<<3)&255;return e}}module.exports=r;
},{}],"XF0i":[function(require,module,exports) {
for(var r=require("./rng"),e=[],n={},o=0;o<256;o++)e[o]=(o+256).toString(16).substr(1),n[e[o]]=o;function a(r,e,o){var a=e&&o||0,s=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){s<16&&(e[a+s++]=n[r])});s<16;)e[a+s++]=0;return e}function s(r,n){var o=n||0,a=e;return a[r[o++]]+a[r[o++]]+a[r[o++]]+a[r[o++]]+"-"+a[r[o++]]+a[r[o++]]+"-"+a[r[o++]]+a[r[o++]]+"-"+a[r[o++]]+a[r[o++]]+"-"+a[r[o++]]+a[r[o++]]+a[r[o++]]+a[r[o++]]+a[r[o++]]+a[r[o++]]}var t=r(),v=[1|t[0],t[1],t[2],t[3],t[4],t[5]],c=16383&(t[6]<<8|t[7]),i=0,u=0;function f(r,e,n){var o=e&&n||0,a=e||[],t=void 0!==(r=r||{}).clockseq?r.clockseq:c,f=void 0!==r.msecs?r.msecs:(new Date).getTime(),d=void 0!==r.nsecs?r.nsecs:u+1,l=f-i+(d-u)/1e4;if(l<0&&void 0===r.clockseq&&(t=t+1&16383),(l<0||f>i)&&void 0===r.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=f,u=d,c=t;var g=(1e4*(268435455&(f+=122192928e5))+d)%4294967296;a[o++]=g>>>24&255,a[o++]=g>>>16&255,a[o++]=g>>>8&255,a[o++]=255&g;var m=f/4294967296*1e4&268435455;a[o++]=m>>>8&255,a[o++]=255&m,a[o++]=m>>>24&15|16,a[o++]=m>>>16&255,a[o++]=t>>>8|128,a[o++]=255&t;for(var p=r.node||v,w=0;w<6;w++)a[o+w]=p[w];return e||s(a)}function d(e,n,o){var a=n&&o||0;"string"==typeof e&&(n="binary"==e?new Array(16):null,e=null);var t=(e=e||{}).random||(e.rng||r)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,n)for(var v=0;v<16;v++)n[a+v]=t[v];return n||s(t)}var l=d;l.v1=f,l.v4=d,l.parse=a,l.unparse=s,module.exports=l;
},{"./rng":"nk3f"}],"qcdY":[function(require,module,exports) {
"use strict";function n(n){for(var r,t=1/0,e=-1/0,a=0,u=n.length;a<u;a++)t>(r=n[a])&&(t=r),e<r&&(e=r);return{min:t,max:e}}function r(n,r){var t=Math.pow(2,r-1),e=n<0?n*t:n*t-1;return Math.max(-t,Math.min(t-1,e))}function t(t,e,a){var u,i,o,h,f,l,s=t.length,c=Math.ceil(s/e),g=new(new Function(`return Int${a}Array`)())(2*c);for(u=0;u<c;u++)i=u*e,o=(u+1)*e>s?s:(u+1)*e,f=r((l=n(t.subarray(i,o))).min,a),h=r(l.max,a),g[2*u]=f,g[2*u+1]=h;return g}function e(n,r){var t,e,a=n.length,u=1/a,i=n[0].length/2,o=0,h=0,f=new(new Function(`return Int${r}Array`)())(2*i);for(h=0;h<i;h++){for(t=0,e=0,o=0;o<a;o++)t+=u*n[o][2*h],e+=u*n[o][2*h+1];f[2*h]=t,f[2*h+1]=e}return[f]}module.exports=function(n,r,a,u,i,o){if(r=r||1e4,null==a&&(a=!0),[8,16,32].indexOf(o=o||8)<0)throw new Error("Invalid number of bits specified for peaks.");var h,f,l,s=n.numberOfChannels,c=[];if(void 0===n.subarray)for(h=0;h<s;h++)f=n.getChannelData(h),u=u||0,i=i||f.length,l=f.subarray(u,i),c.push(t(l,r,o));else u=u||0,i=i||n.length,c.push(t(n.subarray(u,i),r,o));return a&&c.length>1&&(c=e(c,o)),{length:c[0].length/2,data:c,bits:o}};
},{}],"LfrW":[function(require,module,exports) {
"use strict";function r(r,t){var e,a,o=new Float32Array(r),n=r-1;for(e=0;e<r;e++)a=e/n,o[e]=t>0?a:1-a;return o}function t(r,t){var e,a,o=new Float32Array(r),n=r-1;for(e=0;e<r;e++)a=e/n,o[t>0?e:r-1-e]=Math.exp(2*a-1)/Math.exp(1);return o}function e(r,t){var e,a=new Float32Array(r),o=t>0?Math.PI/2:-Math.PI/2;for(e=0;e<r;++e)a[e]=Math.sin(Math.PI*e/r-o)/2+.5;return a}function a(r,t,e){var a,o=new Float32Array(r),n=0;for(a=0;a<r;a++)n=a/r,o[e>0?a:r-1-a]=Math.log(1+t*n)/Math.log(1+t);return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=r,exports.exponential=t,exports.sCurve=e,exports.logarithmic=a;
},{}],"QQhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FADEOUT=exports.FADEIN=exports.LOGARITHMIC=exports.EXPONENTIAL=exports.LINEAR=exports.SCURVE=void 0,exports.createFadeIn=x,exports.createFadeOut=h;var e=require("fade-curves"),t=exports.SCURVE="sCurve",a=exports.LINEAR="linear",r=exports.EXPONENTIAL="exponential",i=exports.LOGARITHMIC="logarithmic",o=exports.FADEIN="FadeIn",s=exports.FADEOUT="FadeOut";function l(t,a){var r=(0,e.sCurve)(1e4,1);this.setValueCurveAtTime(r,t,a)}function n(t,a){var r=(0,e.sCurve)(1e4,-1);this.setValueCurveAtTime(r,t,a)}function u(e,t){this.linearRampToValueAtTime(0,e),this.linearRampToValueAtTime(1,e+t)}function c(e,t){this.linearRampToValueAtTime(1,e),this.linearRampToValueAtTime(0,e+t)}function p(e,t){this.exponentialRampToValueAtTime(.01,e),this.exponentialRampToValueAtTime(1,e+t)}function T(e,t){this.exponentialRampToValueAtTime(1,e),this.exponentialRampToValueAtTime(.01,e+t)}function m(t,a){var r=(0,e.logarithmic)(1e4,10,1);this.setValueCurveAtTime(r,t,a)}function A(t,a){var r=(0,e.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(r,t,a)}function x(e,o,s,n){switch(o){case t:l.call(e,s,n);break;case a:u.call(e,s,n);break;case r:p.call(e,s,n);break;case i:m.call(e,s,n);break;default:throw new Error("Unsupported Fade type")}}function h(e,o,s,l){switch(o){case t:n.call(e,s,l);break;case a:c.call(e,s,l);break;case r:T.call(e,s,l);break;case i:A.call(e,s,l);break;default:throw new Error("Unsupported Fade type")}}
},{"fade-curves":"LfrW"}],"roZ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../utils/conversions");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){n(this,r),this.track=e}return e(r,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){e.preventDefault();var n=e.offsetX,r=(0,t.pixelsToSeconds)(n,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",r,r,this.track)}}],[{key:"getClass",value:function(){return".state-cursor"}},{key:"getEvents",value:function(){return["click"]}}]),r}();exports.default=r;
},{"../../utils/conversions":"lgXS"}],"S18R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),t=require("../../utils/conversions");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(e){s(this,i),this.track=e,this.active=!1}return e(i,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"emitSelection",value:function(e){var s=Math.min(e,this.startX),i=Math.max(e,this.startX),a=(0,t.pixelsToSeconds)(s,this.samplesPerPixel,this.sampleRate),n=(0,t.pixelsToSeconds)(i,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",a,n,this.track)}},{key:"complete",value:function(e){this.emitSelection(e),this.active=!1}},{key:"mousedown",value:function(e){e.preventDefault(),this.active=!0,this.startX=e.offsetX;var s=(0,t.pixelsToSeconds)(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",s,s,this.track)}},{key:"mousemove",value:function(e){this.active&&(e.preventDefault(),this.emitSelection(e.offsetX))}},{key:"mouseup",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}},{key:"mouseleave",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}}],[{key:"getClass",value:function(){return".state-select"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave"]}}]),i}();exports.default=i;
},{"../../utils/conversions":"lgXS"}],"x9oI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),t=require("../../utils/conversions");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function s(e){i(this,s),this.track=e,this.active=!1}return e(s,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"emitShift",value:function(e){var i=e-this.prevX,s=(0,t.pixelsToSeconds)(i,this.samplesPerPixel,this.sampleRate);this.prevX=e,this.track.ee.emit("shift",s,this.track)}},{key:"complete",value:function(e){this.emitShift(e),this.active=!1}},{key:"mousedown",value:function(e){e.preventDefault(),this.active=!0,this.el=e.target,this.prevX=e.offsetX}},{key:"mousemove",value:function(e){this.active&&(e.preventDefault(),this.emitShift(e.offsetX))}},{key:"mouseup",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}},{key:"mouseleave",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}}],[{key:"getClass",value:function(){return".state-shift"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave"]}}]),s}();exports.default=s;
},{"../../utils/conversions":"lgXS"}],"UJT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../utils/conversions");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){n(this,r),this.track=e}return e(r,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){var n=e.offsetX,r=(0,t.pixelsToSeconds)(n,this.samplesPerPixel,this.sampleRate);r>this.track.getStartTime()&&r<this.track.getEndTime()&&this.track.ee.emit("fadein",r-this.track.getStartTime(),this.track)}}],[{key:"getClass",value:function(){return".state-fadein"}},{key:"getEvents",value:function(){return["click"]}}]),r}();exports.default=r;
},{"../../utils/conversions":"lgXS"}],"bJpr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../utils/conversions");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){n(this,r),this.track=e}return e(r,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){var n=e.offsetX,r=(0,t.pixelsToSeconds)(n,this.samplesPerPixel,this.sampleRate);r>this.track.getStartTime()&&r<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-r,this.track)}}],[{key:"getClass",value:function(){return".state-fadeout"}},{key:"getEvents",value:function(){return["click"]}}]),r}();exports.default=r;
},{"../../utils/conversions":"lgXS"}],"vqZw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./states/CursorState"),t=o(e),a=require("./states/SelectState"),r=o(a),u=require("./states/ShiftState"),s=o(u),d=require("./states/FadeInState"),f=o(d),l=require("./states/FadeOutState"),i=o(l);function o(e){return e&&e.__esModule?e:{default:e}}exports.default={cursor:t.default,select:r.default,shift:s.default,fadein:f.default,fadeout:i.default};
},{"./states/CursorState":"roZ5","./states/SelectState":"S18R","./states/ShiftState":"x9oI","./states/FadeInState":"UJT2","./states/FadeOutState":"bJpr"}],"mjfJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function a(e,i,s,r,o){t(this,a),this.peaks=e,this.offset=i,this.color=r,this.bits=s,this.scale=o}return e(a,[{key:"hook",value:function(e,t,i){if(void 0===i||i.peaks!==this.peaks||i.scale!==this.scale){var s=this.scale,r=e.width/s,o=e.getContext("2d"),n=e.height/s/2,l=Math.pow(2,this.bits-1);o.clearRect(0,0,e.width,e.height),o.save(),o.fillStyle=this.color,o.scale(s,s);for(var c=0;c<r;c+=1){var f=this.peaks[2*(c+this.offset)]/l,h=this.peaks[2*(c+this.offset)+1]/l;a.drawFrame(o,n,c,f,h)}o.restore()}}}],[{key:"drawFrame",value:function(e,t,a,i,s){var r=Math.abs(i*t),o=Math.abs(s*t);e.fillRect(a,0,1,t-o),e.fillRect(a,t+r,1,t-r)}}]),a}();exports.default=a;
},{}],"NaAN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),t=require("fade-maker"),r=require("fade-curves");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(e,t,r,n){a(this,i),this.type=e,this.shape=t,this.duration=r,this.samplesPerPixel=n}return e(i,[{key:"hook",value:function(e,t,r){if(void 0===r||r.shape!==this.shape||r.type!==this.type||r.duration!==this.duration||r.samplesPerPixel!==this.samplesPerPixel){var a=e.getContext("2d"),n=e.width,s=e.height,o=i.createCurve(this.shape,this.type,n),u=o.length,h=s-o[0]*s;a.clearRect(0,0,e.width,e.height),a.save(),a.strokeStyle="black",a.beginPath(),a.moveTo(0,h);for(var c=1;c<u;c+=1)h=s-o[c]*s,a.lineTo(c,h);a.stroke(),a.restore()}}}],[{key:"createCurve",value:function(e,a,i){var n=void 0,s=void 0;switch(a){case t.FADEIN:n=1;break;case t.FADEOUT:n=-1;break;default:throw new Error("Unsupported fade type.")}switch(e){case t.SCURVE:s=(0,r.sCurve)(i,n);break;case t.LINEAR:s=(0,r.linear)(i,n);break;case t.EXPONENTIAL:s=(0,r.exponential)(i,n);break;case t.LOGARITHMIC:s=(0,r.logarithmic)(i,10,n);break;default:throw new Error("Unsupported fade shape")}return s}}]),i}();exports.default=i;
},{"fade-maker":"QQhK","fade-curves":"LfrW"}],"DuIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e){t(this,n),this.gain=e}return e(n,[{key:"hook",value:function(e){e.setAttribute("value",100*this.gain)}}]),n}();exports.default=n;
},{}],"M2E8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),e=require("lodash.assign"),i=w(e),a=require("lodash.forown"),s=w(a),n=require("uuid"),o=w(n),u=require("virtual-dom/h"),r=w(u),l=require("webaudio-peaks"),h=w(l),d=require("fade-maker"),f=require("./utils/conversions"),v=require("./track/states"),c=w(v),p=require("./render/CanvasHook"),m=w(p),y=require("./render/FadeCanvasHook"),k=w(y),g=require("./render/VolumeSliderHook"),b=w(g);function w(t){return t&&t.__esModule?t:{default:t}}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var O=1e3,T=function(){function e(){x(this,e),this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}return t(e,[{key:"setEventEmitter",value:function(t){this.ee=t}},{key:"setName",value:function(t){this.name=t}},{key:"setCustomClass",value:function(t){this.customClass=t}},{key:"setWaveOutlineColor",value:function(t){this.waveOutlineColor=t}},{key:"setCues",value:function(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}},{key:"trim",value:function(t,e){var i=this.getStartTime(),a=this.getEndTime(),s=this.cueIn-i;if(i<=t&&a>=t||i<=e&&a>=e){var n=t<i?i:t,o=e>a?a:e;this.setCues(n+s,o+s),t>i&&this.setStartTime(t)}}},{key:"setStartTime",value:function(t){this.startTime=t,this.endTime=t+this.duration}},{key:"setPlayout",value:function(t){this.playout=t}},{key:"setOfflinePlayout",value:function(t){this.offlinePlayout=t}},{key:"setEnabledStates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabledStates=(0,i.default)({},{cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0},t)}},{key:"setFadeIn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(t>this.duration)throw new Error("Invalid Fade In");var i={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(d.FADEIN,i.shape,i.start,i.end)}},{key:"setFadeOut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(t>this.duration)throw new Error("Invalid Fade Out");var i={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(d.FADEOUT,i.shape,i.start,i.end)}},{key:"saveFade",value:function(t,e,i,a){var s=o.default.v4();return this.fades[s]={type:t,shape:e,start:i,end:a},s}},{key:"removeFade",value:function(t){delete this.fades[t]}},{key:"setBuffer",value:function(t){this.buffer=t}},{key:"setPeakData",value:function(t){this.peakData=t}},{key:"calculatePeaks",value:function(t,e){var i=(0,f.secondsToSamples)(this.cueIn,e),a=(0,f.secondsToSamples)(this.cueOut,e);this.setPeaks((0,h.default)(this.buffer,t,this.peakData.mono,i,a))}},{key:"setPeaks",value:function(t){this.peaks=t}},{key:"setState",value:function(t){if(this.state=t,this.state&&this.enabledStates[this.state]){var e=c.default[this.state];this.stateObj=new e(this)}else this.stateObj=void 0}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getDuration",value:function(){return this.duration}},{key:"isPlaying",value:function(){return this.playout.isPlaying()}},{key:"setShouldPlay",value:function(t){this.playout.setShouldPlay(t)}},{key:"setGainLevel",value:function(t){this.gain=t,this.playout.setVolumeGainLevel(t)}},{key:"setMasterGainLevel",value:function(t){this.playout.setMasterGainLevel(t)}},{key:"setStereoPanValue",value:function(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}},{key:"schedulePlay",value:function(t,e,a,n){var o=void 0,u=void 0,r=t,l=a?a-e:void 0,h=(0,i.default)({},{shouldPlay:!0,masterGain:1,isOffline:!1},n),f=h.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||l&&e+l<this.startTime)return Promise.resolve();this.startTime>=e?(o=0,r+=this.startTime-e,a?(l-=this.startTime-e,u=Math.min(l,this.duration)):u=this.duration):(o=e-this.startTime,u=a?Math.min(l,this.duration-o):this.duration-o),o+=this.cueIn;var v=e-this.startTime,c=f.setUpSource();return(0,s.default)(this.fades,function(e){var i=void 0,a=void 0;if(v<e.end)switch(v<=e.start?(i=t+(e.start-v),a=e.end-e.start):v>e.start&&v<e.end&&(i=t-(v-e.start),a=e.end-e.start),e.type){case d.FADEIN:f.applyFadeIn(i,a,e.shape);break;case d.FADEOUT:f.applyFadeOut(i,a,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}}),f.setVolumeGainLevel(this.gain),f.setShouldPlay(h.shouldPlay),f.setMasterGainLevel(h.masterGain),f.setStereoPanValue(this.stereoPan),f.play(r,o,u),c}},{key:"scheduleStop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.playout.stop(t)}},{key:"renderOverlay",value:function(t){var e=this,i={attributes:{style:"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: "+(0,f.secondsToPixels)(t.playlistLength,t.resolution,t.sampleRate)+"px; z-index: 9;"}},a="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);var s=c.default[this.state];s.getEvents().forEach(function(t){i["on"+t]=e.stateObj[t].bind(e.stateObj)}),a=s.getClass()}return(0,r.default)("div.playlist-overlay"+a,i)}},{key:"renderControls",value:function(t){var e=this,i=t.muted?".active":"",a=t.soloed?".active":"",s=this.peaks.data.length;return(0,r.default)("div.controls",{attributes:{style:"height: "+s*t.height+"px; width: "+t.controls.width+"px; position: absolute; left: 0; z-index: 10;"}},[(0,r.default)("header",[this.name]),(0,r.default)("div.btn-group",[(0,r.default)("span.btn.btn-default.btn-xs.btn-mute"+i,{onclick:function(){e.ee.emit("mute",e)}},["Mute"]),(0,r.default)("span.btn.btn-default.btn-xs.btn-solo"+a,{onclick:function(){e.ee.emit("solo",e)}},["Solo"])]),(0,r.default)("label",[(0,r.default)("input.volume-slider",{attributes:{type:"range",min:0,max:100,value:100},hook:new b.default(this.gain),oninput:function(t){e.ee.emit("volumechange",t.target.value,e)}})])])}},{key:"render",value:function(t){var e=this,i=this.peaks.length,a=(0,f.secondsToPixels)(t.playbackSeconds,t.resolution,t.sampleRate),s=(0,f.secondsToPixels)(this.startTime,t.resolution,t.sampleRate),n=(0,f.secondsToPixels)(this.endTime,t.resolution,t.sampleRate),o=0,u=this.peaks.data.length,l=Math.floor(window.devicePixelRatio);a>0&&a>s&&(o=a<n?a-s:i);var h=[(0,r.default)("div.cursor",{attributes:{style:"position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: "+a+"px; bottom: 0; z-index: 5;"}})],d=Object.keys(this.peaks.data).map(function(a){for(var n=[(0,r.default)("div.channel-progress",{attributes:{style:"position: absolute; width: "+o+"px; height: "+t.height+"px; z-index: 2;"}})],u=0,h=i,d=e.peaks.data[a];h>0;){var v=Math.min(h,O),c=e.waveOutlineColor?e.waveOutlineColor:t.colors.waveOutlineColor;n.push((0,r.default)("canvas",{attributes:{width:v*l,height:t.height*l,style:"float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: "+v+"px; height: "+t.height+"px;"},hook:new m.default(d,u,e.peaks.bits,c,l)})),h-=v,u+=O}if(e.fadeIn){var p=e.fades[e.fadeIn],y=(0,f.secondsToPixels)(p.end-p.start,t.resolution,t.sampleRate);n.push((0,r.default)("div.wp-fade.wp-fadein",{attributes:{style:"position: absolute; height: "+t.height+"px; width: "+y+"px; top: 0; left: 0; z-index: 4;"}},[(0,r.default)("canvas",{attributes:{width:y,height:t.height},hook:new k.default(p.type,p.shape,p.end-p.start,t.resolution)})]))}if(e.fadeOut){var g=e.fades[e.fadeOut],b=(0,f.secondsToPixels)(g.end-g.start,t.resolution,t.sampleRate);n.push((0,r.default)("div.wp-fade.wp-fadeout",{attributes:{style:"position: absolute; height: "+t.height+"px; width: "+b+"px; top: 0; right: 0; z-index: 4;"}},[(0,r.default)("canvas",{attributes:{width:b,height:t.height},hook:new k.default(g.type,g.shape,g.end-g.start,t.resolution)})]))}return(0,r.default)("div.channel.channel-"+a,{attributes:{style:"height: "+t.height+"px; width: "+i+"px; top: "+a*t.height+"px; left: "+s+"px; position: absolute; margin: 0; padding: 0; z-index: 1;"}},n)});if(h.push(d),h.push(this.renderOverlay(t)),!0===t.isActive){var v=(0,f.secondsToPixels)(t.timeSelection.start,t.resolution,t.sampleRate),c=(0,f.secondsToPixels)(t.timeSelection.end,t.resolution,t.sampleRate)-v+1,p=c>1?".segment":".point";h.push((0,r.default)("div.selection"+p,{attributes:{style:"position: absolute; width: "+c+"px; bottom: 0; top: 0; left: "+v+"px; z-index: 4;"}}))}var y=(0,r.default)("div.waveform",{attributes:{style:"height: "+u*t.height+"px; position: relative;"}},h),g=[],b=0;t.controls.show&&(g.push(this.renderControls(t)),b=t.controls.width),g.push(y);var w=t.shouldPlay?"":".silent",x=void 0===this.customClass?"":"."+this.customClass;return(0,r.default)("div.channel-wrapper"+w+x,{attributes:{style:"margin-left: "+b+"px; height: "+t.height*u+"px;"}},g)}},{key:"getTrackDetails",value:function(){var t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut};if(this.fadeIn){var e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){var i=this.fades[this.fadeOut];t.fadeOut={shape:i.shape,duration:i.end-i.start}}return t}}]),e}();exports.default=T;
},{"lodash.assign":"QpWr","lodash.forown":"iwXs","uuid":"XF0i","virtual-dom/h":"Z1FU","webaudio-peaks":"qcdY","fade-maker":"QQhK","./utils/conversions":"lgXS","./track/states":"vqZw","./render/CanvasHook":"mjfJ","./render/FadeCanvasHook":"NaAN","./render/VolumeSliderHook":"DuIS"}],"C8I7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,a,t){return a&&e(n.prototype,a),t&&e(n,t),n}}(),n=require("fade-maker");function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function(){function t(e,n){a(this,t),this.ac=e,this.gain=1,this.buffer=n,this.destination=this.ac.destination,this.ac.createStereoPanner=e.createStereoPanner||e.createPanner}return e(t,[{key:"applyFade",value:function(e,a,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"logarithmic";if(e===n.FADEIN)(0,n.createFadeIn)(this.fadeGain.gain,i,a,t);else{if(e!==n.FADEOUT)throw new Error("Unsupported fade type");(0,n.createFadeOut)(this.fadeGain.gain,i,a,t)}}},{key:"applyFadeIn",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(n.FADEIN,e,a,t)}},{key:"applyFadeOut",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(n.FADEOUT,e,a,t)}},{key:"isPlaying",value:function(){return void 0!==this.source}},{key:"getDuration",value:function(){return this.buffer.duration}},{key:"setAudioContext",value:function(e){this.ac=e,this.ac.createStereoPanner=e.createStereoPanner||e.createPanner,this.destination=this.ac.destination}},{key:"setUpSource",value:function(){var e=this;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;var n=new Promise(function(n){e.source.onended=function(){e.source.disconnect(),e.fadeGain.disconnect(),e.volumeGain.disconnect(),e.shouldPlayGain.disconnect(),e.panner.disconnect(),e.masterGain.disconnect(),e.source=void 0,e.fadeGain=void 0,e.volumeGain=void 0,e.shouldPlayGain=void 0,e.panner=void 0,e.masterGain=void 0,n()}});return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.masterGain=this.ac.createGain(),this.panner=this.ac.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.masterGain),this.masterGain.connect(this.panner),this.panner.connect(this.destination),n}},{key:"setVolumeGainLevel",value:function(e){this.volumeGain&&(this.volumeGain.gain.value=e)}},{key:"setShouldPlay",value:function(e){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=e?1:0)}},{key:"setMasterGainLevel",value:function(e){this.masterGain&&(this.masterGain.gain.value=e)}},{key:"setStereoPanValue",value:function(e){var n=void 0===e?0:e;this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=n:(this.panner.panningModel="equalpower",this.panner.setPosition(n,0,1-Math.abs(n))))}},{key:"play",value:function(e,n,a){this.source.start(e,n,a)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.source&&this.source.stop(e)}}]),t}();exports.default=t;
},{"fade-maker":"QQhK"}],"HE4V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return{id:e.id||u.default.v4(),start:Number(e.begin)||0,end:Number(e.end)||0,lines:e.lines||[""],lang:e.language||"en"}};var e=require("uuid"),u=n(e);function n(e){return e&&e.__esModule?e:{default:e}}
},{"uuid":"XF0i"}],"twe8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return{begin:String(e.start.toFixed(3)),end:String(e.end.toFixed(3)),id:String(e.id),language:e.lang,lines:e.lines}};
},{}],"QmXK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),t=require("../utils/conversions");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,r),this.playlist=e,this.data=n,this.active=!1,this.ondragover=function(e){t.active&&(e.preventDefault(),t.emitDrag(e.clientX))}}return e(r,[{key:"emitDrag",value:function(e){var a=e-this.prevX;if(a){var r=(0,t.pixelsToSeconds)(a,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=e,this.playlist.ee.emit("dragged",r,this.data)}}},{key:"complete",value:function(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}},{key:"dragstart",value:function(e){var t=e;this.active=!0,this.prevX=e.clientX,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}},{key:"dragend",value:function(e){this.active&&(e.preventDefault(),this.complete())}}],[{key:"getClass",value:function(){return".shift"}},{key:"getEvents",value:function(){return["dragstart","dragend"]}}]),r}();exports.default=r;
},{"../utils/conversions":"lgXS"}],"hd2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){};e.prototype.hook=function(e){var t=e.querySelector(".current");if(t){var o=e.getBoundingClientRect(),r=t.getBoundingClientRect().top-o.top;e.scrollTop+=r}},exports.default=e;
},{}],"hZOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){function n(t,n){var u=parseInt(t/3600,10)%24,e=parseInt(t/60,10)%60,r=(t%60).toFixed(n);return(u<10?"0"+u:u)+":"+(e<10?"0"+e:e)+":"+(r<10?"0"+r:r)}return{seconds:function(t){return t.toFixed(0)},thousandths:function(t){return t.toFixed(3)},"hh:mm:ss":function(t){return n(t,0)},"hh:mm:ss.u":function(t){return n(t,1)},"hh:mm:ss.uu":function(t){return n(t,2)},"hh:mm:ss.uuu":function(t){return n(t,3)}}[t]};
},{}],"YZ7C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),e=require("virtual-dom/h"),n=h(e),i=require("./input/aeneas"),a=h(i),s=require("./output/aeneas"),o=h(s),r=require("../utils/conversions"),l=require("../interaction/DragInteraction"),u=h(l),d=require("./render/ScrollTopHook"),p=h(d),f=require("../utils/timeformat"),c=h(f);function h(t){return t&&t.__esModule?t:{default:t}}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];y(this,e),this.playlist=t,this.resizeHandlers=[],this.editable=s,this.annotations=n.map(function(t){return(0,a.default)(t)}),this.setupInteractions(),this.controls=i,this.setupEE(t.ee),this.playlist.isContinuousPlay=r,this.playlist.linkEndpoints=o,this.length=this.annotations.length}return t(e,[{key:"setupInteractions",value:function(){var t=this;this.annotations.forEach(function(e,n){var i=new u.default(t.playlist,{direction:"left",index:n}),a=new u.default(t.playlist,{direction:"right",index:n});t.resizeHandlers.push(i),t.resizeHandlers.push(a)})}},{key:"setupEE",value:function(t){var e=this;return t.on("dragged",function(t,n){var i=n.index,a=e.annotations,s=a[i];if("left"===n.direction){var o=s.start;s.start+=t,s.start<0&&(s.start=0),i&&a[i-1].end>s.start&&(a[i-1].end=s.start),e.playlist.linkEndpoints&&i&&a[i-1].end===o&&(a[i-1].end=s.start)}else{var r=s.end;s.end+=t,s.end>e.playlist.duration&&(s.end=e.playlist.duration),i<a.length-1&&a[i+1].start<s.end&&(a[i+1].start=s.end),e.playlist.linkEndpoints&&i<a.length-1&&a[i+1].start===r&&(a[i+1].start=s.end)}e.playlist.drawRequest()}),t.on("continuousplay",function(t){e.playlist.isContinuousPlay=t}),t.on("linkendpoints",function(t){e.playlist.linkEndpoints=t}),t.on("annotationsrequest",function(){e.export()}),t}},{key:"export",value:function(){var t=this.annotations.map(function(t){return(0,o.default)(t)}),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n=document.createElement("a");document.body.appendChild(n),n.href=e,n.download="annotations.json",n.click(),document.body.removeChild(n)}},{key:"renderResizeLeft",value:function(t){var e=u.default.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},a=this.resizeHandlers[2*t];return e.forEach(function(t){i["on"+t]=a[t].bind(a)}),(0,n.default)("div.resize-handle.resize-w",i)}},{key:"renderResizeRight",value:function(t){var e=u.default.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},a=this.resizeHandlers[2*t+1];return e.forEach(function(t){i["on"+t]=a[t].bind(a)}),(0,n.default)("div.resize-handle.resize-e",i)}},{key:"renderControls",value:function(t,e){var i=this,a=this;return this.controls.map(function(s){return(0,n.default)("i."+s.class,{attributes:{title:s.title},onclick:function(){s.action(t,e,a.annotations,{linkEndpoints:a.playlist.linkEndpoints}),i.setupInteractions(),a.playlist.drawRequest()}})})}},{key:"render",value:function(){var t=this,e=(0,n.default)("div.annotations-boxes",{attributes:{style:"height: 30px;"}},this.annotations.map(function(e,i){var a=t.playlist.samplesPerPixel,s=t.playlist.sampleRate,o=s/a,l=(0,r.secondsToPixels)(t.playlist.scrollLeft,a,s),u=Math.floor(e.start*o-l),d=Math.ceil(e.end*o-e.start*o);return(0,n.default)("div.annotation-box",{attributes:{style:"position: absolute; height: 30px; width: "+d+"px; left: "+u+"px","data-id":e.id}},[t.renderResizeLeft(i),(0,n.default)("span.id",{onclick:function(){var e=t.annotations[i].start,n=t.annotations[i].end;t.playlist.isContinuousPlay?(t.playlist.seek(e,e),t.playlist.ee.emit("play",e)):(t.playlist.seek(e,n),t.playlist.ee.emit("play",e,n))}},[e.id]),t.renderResizeRight(i)])})),i=(0,n.default)("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[e]),a=(0,n.default)("div.annotations-text",{hook:new p.default},this.annotations.map(function(e,i){var a=(0,c.default)(t.playlist.durationFormat),s=a(e.start),o=a(e.end),r="";t.playlist.isPlaying()&&t.playlist.playbackSeconds>=e.start&&t.playlist.playbackSeconds<=e.end&&(r=".current");var l={attributes:{contenteditable:!0},oninput:function(t){e.lines=[t.target.innerText]},onkeypress:function(t){13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},u=t.editable?l:{};return(0,n.default)("div.annotation"+r,[(0,n.default)("span.annotation-id",[e.id]),(0,n.default)("span.annotation-start",[s]),(0,n.default)("span.annotation-end",[o]),(0,n.default)("span.annotation-lines",u,[e.lines]),(0,n.default)("span.annotation-actions",t.renderControls(e,i))])}));return(0,n.default)("div.annotations",[i,a])}}]),e}();exports.default=v;
},{"virtual-dom/h":"Z1FU","./input/aeneas":"HE4V","./output/aeneas":"twe8","../utils/conversions":"lgXS","../interaction/DragInteraction":"QmXK","./render/ScrollTopHook":"hd2z","../utils/timeformat":"hZOi"}],"V2Lj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){function e(e){for(var t=1/0,n=-1/0,r=void 0,a=0;a<e.length;a+=1)t>(r=e[a])&&(t=r),n<r&&(n=r);return{min:t,max:n}}function t(e,t){var n=Math.pow(2,t-1),r=e<0?e*n:e*n-1;return Math.max(-n,Math.min(n-1,r))}function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if([8,16,32].indexOf(a)<0)throw new Error("Invalid number of bits specified for peaks.");var i=[],o=n.length;return i.push(function(n,r,a){for(var i=n.length,o=Math.ceil(i/r),s=void 0,u=void 0,d=void 0,f=void 0,l=void 0,v=new self["Int"+a+"Array"](2*o),h=0;h<o;h+=1)s=h*r,u=(h+1)*r>i?i:(h+1)*r,f=t((l=e(n.subarray(s,u))).min,a),d=t(l.max,a),v[2*h]=f,v[2*h+1]=d;return v}(n.subarray(0,o),r,a)),{bits:a,length:i[0].length/2,data:i}}onmessage=function(e){var t=n(e.data.samples,e.data.samplesPerPixel);postMessage(t)}};
},{}],"RBxa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=0,e=[],n=[],a=void 0;function r(t,e,n){for(var a=0;a<n.length;a+=1)t.setUint8(e+a,n.charCodeAt(a))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new ArrayBuffer(44+2*t.length),o=new DataView(n);return r(o,0,"RIFF"),o.setUint32(4,32+2*t.length,!0),r(o,8,"WAVE"),r(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,e?1:2,!0),o.setUint32(24,a,!0),o.setUint32(28,4*a,!0),o.setUint16(32,4,!0),o.setUint16(34,16,!0),r(o,36,"data"),o.setUint32(40,2*t.length,!0),function(t,e,n){for(var a=e,r=0;r<n.length;r+=1,a+=2){var o=Math.max(-1,Math.min(1,n[r]));t.setInt16(a,o<0?32768*o:32767*o,!0)}}(o,44,t),o}function s(t,e){for(var n=new Float32Array(e),a=0,r=0;r<t.length;r+=1)n.set(t[r],a),a+=t[r].length;return n}function i(a){var r=o(function(t,e){for(var n=t.length+e.length,a=new Float32Array(n),r=0,o=0;r<n;)a[r+=1]=t[o],a[r+=1]=e[o],o+=1;return a}(s(e,t),s(n,t))),i=new Blob([r],{type:a});postMessage(i)}onmessage=function(r){switch(r.data.command){case"init":s=r.data.config,a=s.sampleRate;break;case"record":o=r.data.buffer,e.push(o[0]),n.push(o[1]),t+=o[0].length;break;case"exportWAV":i(r.data.type);break;case"clear":t=0,e=[],n=[];break;default:throw new Error("Unknown export worker command")}var o,s}};
},{}],"K4me":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),t=require("lodash.defaults"),i=E(t),s=require("virtual-dom/h"),a=E(s),n=require("virtual-dom/diff"),o=E(n),r=require("virtual-dom/patch"),u=E(r),c=require("inline-worker"),l=E(c),d=require("./utils/conversions"),h=require("./track/loader/LoaderFactory"),f=E(h),m=require("./render/ScrollHook"),k=E(m),v=require("./TimeScale"),y=E(v),p=require("./Track"),T=E(p),g=require("./Playout"),w=E(g),P=require("./annotation/AnnotationList"),S=E(P),R=require("./utils/recorderWorker"),x=E(R),A=require("./utils/exportWavWorker"),q=E(A);function E(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var L=function(){function t(){b(this,t),this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}return e(t,[{key:"initExporter",value:function(){this.exportWorker=new l.default(q.default)}},{key:"initRecorder",value:function(e){var t=this;this.mediaRecorder=new window.MediaRecorder(e),this.mediaRecorder.onstart=function(){var e=new T.default;e.setName("Recording"),e.setEnabledStates(),e.setEventEmitter(t.ee),t.recordingTrack=e,t.tracks.push(e),t.chunks=[],t.working=!1},this.mediaRecorder.ondataavailable=function(e){if(t.chunks.push(e.data),!t.working){var i=new Blob(t.chunks,{type:"audio/ogg; codecs=opus"});f.default.createLoader(i,t.ac).load().then(function(e){t.recorderWorker.postMessage({samples:e.getChannelData(0),samplesPerPixel:t.samplesPerPixel}),t.recordingTrack.setCues(0,e.duration),t.recordingTrack.setBuffer(e),t.recordingTrack.setPlayout(new w.default(t.ac,e)),t.adjustDuration()}).catch(function(){t.working=!1}),t.working=!0}},this.mediaRecorder.onstop=function(){t.chunks=[],t.working=!1},this.recorderWorker=new l.default(x.default),this.recorderWorker.onmessage=function(e){t.recordingTrack.setPeaks(e.data),t.working=!1,t.drawRequest()}}},{key:"setShowTimeScale",value:function(e){this.showTimescale=e}},{key:"setMono",value:function(e){this.mono=e}},{key:"setExclSolo",value:function(e){this.exclSolo=e}},{key:"setSeekStyle",value:function(e){this.seekStyle=e}},{key:"getSeekStyle",value:function(){return this.seekStyle}},{key:"setSampleRate",value:function(e){this.sampleRate=e}},{key:"setSamplesPerPixel",value:function(e){this.samplesPerPixel=e}},{key:"setAudioContext",value:function(e){this.ac=e}},{key:"setControlOptions",value:function(e){this.controls=e}},{key:"setWaveHeight",value:function(e){this.waveHeight=e}},{key:"setColors",value:function(e){this.colors=e}},{key:"setAnnotations",value:function(e){this.annotationList=new S.default(this,e.annotations,e.controls,e.editable,e.linkEndpoints,e.isContinuousPlay)}},{key:"setEventEmitter",value:function(e){this.ee=e}},{key:"getEventEmitter",value:function(){return this.ee}},{key:"setUpEventEmitter",value:function(){var e=this,t=this.ee;t.on("automaticscroll",function(t){e.isAutomaticScroll=t}),t.on("durationformat",function(t){e.durationFormat=t,e.drawRequest()}),t.on("select",function(t,i,s){e.isPlaying()?(e.lastSeeked=t,e.pausedAt=void 0,e.restartPlayFrom(t)):(e.seek(t,i,s),e.ee.emit("timeupdate",t),e.drawRequest())}),t.on("startaudiorendering",function(t,i){e.startOfflineRender(t,i)}),t.on("statechange",function(t){e.setState(t),e.drawRequest()}),t.on("shift",function(t,i){i.setStartTime(i.getStartTime()+t),e.adjustDuration(),e.drawRequest()}),t.on("record",function(){e.record()}),t.on("play",function(t,i){e.play(t,i)}),t.on("pause",function(){e.pause()}),t.on("stop",function(){e.stop()}),t.on("rewind",function(){e.rewind()}),t.on("fastforward",function(){e.fastForward()}),t.on("clear",function(){e.clear().then(function(){e.drawRequest()})}),t.on("solo",function(t){e.soloTrack(t),e.adjustTrackPlayout(),e.drawRequest()}),t.on("mute",function(t){e.muteTrack(t),e.adjustTrackPlayout(),e.drawRequest()}),t.on("volumechange",function(e,t){t.setGainLevel(e/100)}),t.on("mastervolumechange",function(t){e.masterGain=t/100,e.tracks.forEach(function(t){t.setMasterGainLevel(e.masterGain)})}),t.on("fadein",function(t,i){i.setFadeIn(t,e.fadeType),e.drawRequest()}),t.on("fadeout",function(t,i){i.setFadeOut(t,e.fadeType),e.drawRequest()}),t.on("stereopan",function(e,t){t.setStereoPanValue(e)}),t.on("fadetype",function(t){e.fadeType=t}),t.on("newtrack",function(t){e.load([{src:t,name:t.name}])}),t.on("trim",function(){var t=e.getActiveTrack(),i=e.getTimeSelection();t.trim(i.start,i.end),t.calculatePeaks(e.samplesPerPixel,e.sampleRate),e.setTimeSelection(0,0),e.drawRequest()}),t.on("zoomin",function(){var t=Math.max(0,e.zoomIndex-1),i=e.zoomLevels[t];i!==e.samplesPerPixel&&(e.setZoom(i),e.drawRequest())}),t.on("zoomout",function(){var t=Math.min(e.zoomLevels.length-1,e.zoomIndex+1),i=e.zoomLevels[t];i!==e.samplesPerPixel&&(e.setZoom(i),e.drawRequest())}),t.on("scroll",function(){e.isScrolling=!0,e.drawRequest(),clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){e.isScrolling=!1},200)})}},{key:"load",value:function(e){var t=this,i=e.map(function(e){return f.default.createLoader(e.src,t.ac,t.ee).load()});return Promise.all(i).then(function(i){t.ee.emit("audiosourcesloaded");var s=i.map(function(i,s){var a=e[s],n=a.name||"Untitled",o=a.start||0,r=a.states||{},u=a.fadeIn,c=a.fadeOut,l=a.cuein||0,d=a.cueout||i.duration,h=a.gain||1,f=a.muted||!1,m=a.soloed||!1,k=a.selected,v=a.peaks||{type:"WebAudio",mono:t.mono},y=a.customClass||void 0,p=a.waveOutlineColor||void 0,g=a.stereoPan||0,P=new w.default(t.ac,i),S=new T.default;return S.src=a.src,S.setBuffer(i),S.setName(n),S.setEventEmitter(t.ee),S.setEnabledStates(r),S.setCues(l,d),S.setCustomClass(y),S.setWaveOutlineColor(p),void 0!==u&&S.setFadeIn(u.duration,u.shape),void 0!==c&&S.setFadeOut(c.duration,c.shape),void 0!==k&&(t.setActiveTrack(S),t.setTimeSelection(k.start,k.end)),void 0!==v&&S.setPeakData(v),S.setState(t.getState()),S.setStartTime(o),S.setPlayout(P),S.setGainLevel(h),S.setStereoPanValue(g),f&&t.muteTrack(S),m&&t.soloTrack(S),S.calculatePeaks(t.samplesPerPixel,t.sampleRate),S});t.tracks=t.tracks.concat(s),t.adjustDuration(),t.draw(t.render()),t.ee.emit("audiosourcesrendered")}).catch(function(e){t.ee.emit("audiosourceserror",e)})}},{key:"setActiveTrack",value:function(e){this.activeTrack=e}},{key:"getActiveTrack",value:function(){return this.activeTrack}},{key:"isSegmentSelection",value:function(){return this.timeSelection.start!==this.timeSelection.end}},{key:"setTimeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];this.timeSelection={start:e,end:void 0===t?e:t},this.cursor=e}},{key:"startOfflineRender",value:function(e,t){var i=this;if(!this.isRendering){this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);var s=this.offlineAudioContext.currentTime;this.tracks.forEach(function(e,a){let n=i.shouldTrackPlay(e);t>=0&&(n=a===t),e.setOfflinePlayout(new w.default(i.offlineAudioContext,e.buffer)),e.schedulePlay(s,0,0,{shouldPlay:n,masterGain:1,isOffline:!0})}),this.offlineAudioContext.startRendering().then(function(s){if("buffer"===e)return i.ee.emit("audiorenderingfinished",e,s),void(i.isRendering=!1);"wav"===e&&(i.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),i.exportWorker.onmessage=function(s){i.ee.emit("audiorenderingfinished",e,s.data,t),i.isRendering=!1,i.exportWorker.postMessage({command:"clear"})},i.exportWorker.postMessage({command:"record",buffer:[s.getChannelData(0),s.getChannelData(1)]}),i.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}).catch(function(e){throw e})}}},{key:"getTimeSelection",value:function(){return this.timeSelection}},{key:"setState",value:function(e){this.state=e,this.tracks.forEach(function(t){t.setState(e)})}},{key:"getState",value:function(){return this.state}},{key:"setZoomIndex",value:function(e){this.zoomIndex=e}},{key:"setZoomLevels",value:function(e){this.zoomLevels=e}},{key:"setZoom",value:function(e){var t=this;this.samplesPerPixel=e,this.zoomIndex=this.zoomLevels.indexOf(e),this.tracks.forEach(function(i){i.calculatePeaks(e,t.sampleRate)})}},{key:"muteTrack",value:function(e){var t=this.mutedTracks.indexOf(e);t>-1?this.mutedTracks.splice(t,1):this.mutedTracks.push(e)}},{key:"soloTrack",value:function(e){var t=this.soloedTracks.indexOf(e);t>-1?this.soloedTracks.splice(t,1):this.exclSolo?this.soloedTracks=[e]:this.soloedTracks.push(e)}},{key:"adjustTrackPlayout",value:function(){var e=this;this.tracks.forEach(function(t){t.setShouldPlay(e.shouldTrackPlay(t))})}},{key:"adjustDuration",value:function(){this.duration=this.tracks.reduce(function(e,t){return Math.max(e,t.getEndTime())},0)}},{key:"shouldTrackPlay",value:function(e){var t=void 0;return this.soloedTracks.length>0?(t=!1,this.soloedTracks.indexOf(e)>-1&&(t=!0)):(t=!0,this.mutedTracks.indexOf(e)>-1&&(t=!1)),t}},{key:"isPlaying",value:function(){return this.tracks.reduce(function(e,t){return e||t.isPlaying()},!1)}},{key:"getCurrentTime",value:function(){return(this.lastSeeked||this.pausedAt||this.cursor)+this.getElapsedTime()}},{key:"getElapsedTime",value:function(){return this.ac.currentTime-this.lastPlay}},{key:"setMasterGain",value:function(e){this.ee.emit("mastervolumechange",e)}},{key:"restartPlayFrom",value:function(e,t){return this.stopAnimation(),this.tracks.forEach(function(e){e.scheduleStop()}),Promise.all(this.playoutPromises).then(this.play.bind(this,e,t))}},{key:"play",value:function(e,t){var i=this;clearTimeout(this.resetDrawTimer);var s=this.ac.currentTime,a=this.getTimeSelection(),n=[],o=e||this.pausedAt||this.cursor,r=t;return!r&&a.end!==a.start&&a.end>o&&(r=a.end),this.isPlaying()?this.restartPlayFrom(o,r):(this.tracks.forEach(function(e){e.setState("cursor"),n.push(e.schedulePlay(s,o,r,{shouldPlay:i.shouldTrackPlay(e),masterGain:i.masterGain}))}),this.lastPlay=s,this.playoutPromises=n,this.startAnimation(o),Promise.all(this.playoutPromises))}},{key:"pause",value:function(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}},{key:"stop",value:function(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}},{key:"playbackReset",value:function(){var e=this;return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach(function(t){t.scheduleStop(),t.setState(e.getState())}),this.drawRequest(),Promise.all(this.playoutPromises)}},{key:"rewind",value:function(){var e=this;return this.stop().then(function(){e.scrollLeft=0,e.ee.emit("select",0,0)})}},{key:"fastForward",value:function(){var e=this;return this.stop().then(function(){e.viewDuration<e.duration?e.scrollLeft=e.duration-e.viewDuration:e.scrollLeft=0,e.ee.emit("select",e.duration,e.duration)})}},{key:"clear",value:function(e){var t=this;return this.stop().then(function(){var i=[];(e||0===e)&&(t.tracks.splice(e,1),i=t.tracks),t.tracks=i,t.soloedTracks=[],t.mutedTracks=[],t.playoutPromises=[],t.cursor=0,t.playbackSeconds=0,t.duration=0,t.scrollLeft=0,t.seek(0,0,void 0)})}},{key:"record",value:function(){var e=this,t=[];this.mediaRecorder.start(300),this.tracks.forEach(function(i){i.setState("none"),t.push(i.schedulePlay(e.ac.currentTime,0,void 0,{shouldPlay:e.shouldTrackPlay(i)}))}),this.playoutPromises=t}},{key:"startAnimation",value:function(e){var t=this;this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame(function(){t.updateEditor(e)})}},{key:"stopAnimation",value:function(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}},{key:"seek",value:function(e,t,i){this.isPlaying()?(this.lastSeeked=e,this.pausedAt=void 0,this.restartPlayFrom(e)):(this.setActiveTrack(i||this.tracks[0]),this.pausedAt=e,this.setTimeSelection(e,t),"fill"===this.getSeekStyle()&&(this.playbackSeconds=e))}},{key:"updateEditor",value:function(e){var t=this,i=this.ac.currentTime,s=this.getTimeSelection(),a=e||this.cursor,n=i-this.lastDraw;if(this.isPlaying()){var o=a+n;this.ee.emit("timeupdate",o),this.animationRequest=window.requestAnimationFrame(function(){t.updateEditor(o)}),this.playbackSeconds=o,this.draw(this.render()),this.lastDraw=i}else a+n>=(this.isSegmentSelection()?s.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout(function(){t.pausedAt=void 0,t.lastSeeked=void 0,t.setState(t.getState()),t.playbackSeconds=0,t.draw(t.render())},0)}},{key:"drawRequest",value:function(){var e=this;window.requestAnimationFrame(function(){e.draw(e.render())})}},{key:"draw",value:function(e){var t=(0,o.default)(this.tree,e);this.rootNode=(0,u.default)(this.rootNode,t),this.tree=e,this.viewDuration=(0,d.pixelsToSeconds)(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}},{key:"getTrackRenderData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors};return(0,i.default)(e,t)}},{key:"isActiveTrack",value:function(e){var t=this.getActiveTrack();return!this.isSegmentSelection()||t===e}},{key:"renderAnnotations",value:function(){return this.annotationList.render()}},{key:"renderTimeScale",value:function(){var e=this.controls.show?this.controls.width:0;return new y.default(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,e,this.colors).render()}},{key:"renderTrackSection",value:function(){var e=this,t=this.tracks.map(function(t){return t.render(e.getTrackRenderData({isActive:e.isActiveTrack(t),shouldPlay:e.shouldTrackPlay(t),soloed:e.soloedTracks.indexOf(t)>-1,muted:e.mutedTracks.indexOf(t)>-1}))});return(0,a.default)("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:function(t){e.scrollLeft=(0,d.pixelsToSeconds)(t.target.scrollLeft,e.samplesPerPixel,e.sampleRate),e.ee.emit("scroll",e.scrollLeft)},hook:new k.default(this)},t)}},{key:"render",value:function(){var e=[];return this.showTimescale&&e.push(this.renderTimeScale()),e.push(this.renderTrackSection()),this.annotationList.length&&e.push(this.renderAnnotations()),(0,a.default)("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},e)}},{key:"getInfo",value:function(){var e=[];return this.tracks.forEach(function(t){e.push(t.getTrackDetails())}),e}}]),t}();exports.default=L;
},{"lodash.defaults":"i1uA","virtual-dom/h":"Z1FU","virtual-dom/diff":"tWAF","virtual-dom/patch":"jkk7","inline-worker":"iQJt","./utils/conversions":"lgXS","./track/loader/LoaderFactory":"C0Rd","./render/ScrollHook":"bcMc","./TimeScale":"VON8","./Track":"M2E8","./Playout":"C8I7","./annotation/AnnotationList":"YZ7C","./utils/recorderWorker":"V2Lj","./utils/exportWavWorker":"RBxa"}],"mqbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=d,exports.default=function(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.default)())};var e=require("lodash.assign"),t=a(e),o=require("virtual-dom/create-element"),i=a(o),n=require("event-emitter"),l=a(n),s=require("./Playlist"),r=a(s);function a(e){return e&&e.__esModule?e:{default:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.default)();if(void 0===e.container)throw new Error("DOM element container must be given.");window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext,window.AudioContext=window.AudioContext||window.webkitAudioContext;var n=new window.AudioContext,s={ac:n,sampleRate:n.sampleRate,samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1},a=(0,t.default)(s,e),d=a.zoomLevels.indexOf(a.samplesPerPixel);if(-1===d)throw new Error("initial samplesPerPixel must be included in array zoomLevels");var u=new r.default;u.setSampleRate(a.sampleRate),u.setSamplesPerPixel(a.samplesPerPixel),u.setAudioContext(a.ac),u.setEventEmitter(o),u.setUpEventEmitter(),u.setTimeSelection(0,0),u.setState(a.state),u.setControlOptions(a.controls),u.setWaveHeight(a.waveHeight),u.setColors(a.colors),u.setZoomLevels(a.zoomLevels),u.setZoomIndex(d),u.setMono(a.mono),u.setExclSolo(a.exclSolo),u.setShowTimeScale(a.timescale),u.setSeekStyle(a.seekStyle),u.setAnnotations(a.annotationList),u.isAutomaticScroll=a.isAutomaticScroll,u.isContinuousPlay=a.isContinuousPlay,u.linkedEndpoints=a.linkedEndpoints;var m=u.render(),c=(0,i.default)(m);return a.container.appendChild(c),u.tree=m,u.rootNode=c,u}
},{"lodash.assign":"QpWr","virtual-dom/create-element":"A6J8","event-emitter":"PRGr","./Playlist":"K4me"}],"TiqT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=void 0;var e=require("./song");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)}function a(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=function(){function r(){t(this,r)}return i(r,[{key:"init",value:function(){var r,t={audio:!0};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=function(t){r=t,e.playlist.initRecorder(r),$(".btn-record").removeClass("disabled")},i=function(e){console.error(e)};navigator.mediaDevices?navigator.mediaDevices.getUserMedia(t).then(o).catch(i):navigator.getUserMedia&&"MediaRecorder"in window&&navigator.getUserMedia(t,o,i)}}]),r}();exports.Recorder=u;
},{"./song":"rN6O"}],"rN6O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackHandler=exports.setUserPermission=exports.setUser=exports.recorder=exports.playlist=exports.fileUploader=exports.USER_PERMISSION=exports.USER_INFO=exports.SONG_ID=exports.LOADER_ELEM_ID=void 0;var e=require("./track_handler"),r=require("./fileuploader"),o=l(require("waveform-playlist")),t=require("./song_helper"),s=require("./record");function l(e){return e&&e.__esModule?e:{default:e}}var a=window.location.search,i=parseFloat(a.split("songId=")[1]);exports.SONG_ID=i;var n=document.getElementById("goHome");"localhost:80"===window.location.host?n.href=window.location.origin+"/index.html":n.href=window.location.origin;var p="loader";exports.LOADER_ELEM_ID=p;var d=null;exports.USER_INFO=d;var c=!1;exports.USER_PERMISSION=c;var x=function(e){exports.USER_INFO=d=e};exports.setUser=x;var u=function(e){exports.USER_PERMISSION=c=e};exports.setUserPermission=u;var v=(0,o.default)({samplesPerPixel:3e3,waveHeight:100,container:document.getElementById("playlist"),state:"cursor",colors:{waveOutlineColor:"#E0EFF1",timeColor:"grey",fadeColor:"black"},controls:{show:!0,width:200},zoomLevels:[500,1e3,3e3,5e3],timescale:!0});exports.playlist=v;var E=new e.TrackHandler;exports.trackHandler=E;var _=new r.FileUploader(i,E,p);exports.fileUploader=_;var w=new s.Recorder;exports.recorder=w;var I=i;(0,t.getSong)(I,t.doAfterSongFetched);
},{"./track_handler":"rfrq","./fileuploader":"alEH","waveform-playlist":"mqbe","./song_helper":"ncJ8","./record":"TiqT"}],"HIFp":[function(require,module,exports) {
"use strict";var n,t=require("./song"),e=t.playlist.getEventEmitter(),o=$("body"),i=o.find(".time-format"),a=o.find(".audio-start"),c=o.find(".audio-end"),r=o.find(".audio-pos"),s="hh:mm:ss.uuu",l=0,u=0,d=0,f=void 0,m=!1,h=!1;function g(n){for(var t=n.parentNode.querySelectorAll(".active"),e=0,o=t.length;e<o;e++)t[e].classList.remove("active");n.classList.toggle("active")}function v(n){function t(n,t){var e,o,i;return((e=parseInt(n/3600,10)%24)<10?"0"+e:e)+":"+((o=parseInt(n/60,10)%60)<10?"0"+o:o)+":"+((i=(i=n%60).toFixed(t))<10?"0"+i:i)}return{seconds:function(n){return n.toFixed(0)},thousandths:function(n){return n.toFixed(3)},"hh:mm:ss":function(n){return t(n,0)},"hh:mm:ss.u":function(n){return t(n,1)},"hh:mm:ss.uu":function(n){return t(n,2)},"hh:mm:ss.uuu":function(n){return t(n,3)}}[n]}function p(n,t){n<t?($(".btn-trim-audio").removeClass("disabled"),$(".btn-loop").removeClass("disabled")):($(".btn-trim-audio").addClass("disabled"),$(".btn-loop").addClass("disabled")),a.val(v(s)(n)),c.val(v(s)(t)),l=n,u=t}function b(n){r.html(v(s)(n)),d=n}function k(n){$(".sound-status").html(n)}function w(n){var t=$("<div/>").append(n);$(".loading-data").append(t)}function y(n){var t=(new Date).toISOString(),e=$("<a/>",{href:n,download:"waveformplaylist"+t+".wav",text:"Download mix "+t,class:"btn btn-small btn-download-link"});$(".btn-download-link").remove(),$(".btn-download").after(e)}p(l,u),b(d),o.on("click",".btn-annotations-download",function(){e.emit("annotationsrequest")}),o.on("click",".btn-loop",function(){m=!0,n=t.playlist.play(l,u)}),o.on("click",".btn-play",function(){e.emit("play")}),o.on("click",".btn-pause",function(){m=!1,e.emit("pause")}),o.on("click",".btn-stop",function(){if(m=!1,h&&(h=!1,t.USER_PERMISSION)){var n=t.playlist.getInfo().length-1;e.emit("startaudiorendering","wav",n)}e.emit("stop")}),o.on("click",".btn-rewind",function(){m=!1,e.emit("rewind")}),o.on("click",".btn-fast-forward",function(){m=!1,e.emit("fastforward")}),o.on("click",".btn-clear",function(){m=!1,e.emit("clear")}),o.on("click",".btn-record",function(){h||(h=!0,e.emit("record"))}),o.on("click",".btn-cursor",function(){e.emit("statechange","cursor"),g(this)}),o.on("click",".btn-select",function(){e.emit("statechange","select"),g(this)}),o.on("click",".btn-shift",function(){e.emit("statechange","shift"),g(this)}),o.on("click",".btn-fadein",function(){e.emit("statechange","fadein"),g(this)}),o.on("click",".btn-fadeout",function(){e.emit("statechange","fadeout"),g(this)}),o.on("click",".btn-logarithmic",function(){e.emit("fadetype","logarithmic"),g(this)}),o.on("click",".btn-linear",function(){e.emit("fadetype","linear"),g(this)}),o.on("click",".btn-scurve",function(){e.emit("fadetype","sCurve"),g(this)}),o.on("click",".btn-exponential",function(){e.emit("fadetype","exponential"),g(this)}),o.on("click",".btn-zoom-in",function(){e.emit("zoomin")}),o.on("click",".btn-zoom-out",function(){e.emit("zoomout")}),o.on("click",".btn-trim-audio",function(){e.emit("trim")}),o.on("click",".btn-info",function(){console.log(t.playlist.getInfo())}),o.on("click",".btn-download",function(){e.emit("startaudiorendering","wav")}),o.on("click",".btn-seektotime",function(){var n=parseInt(document.getElementById("seektime").value,10);e.emit("select",n,n)}),o.on("change",".select-seek-style",function(n){t.playlist.setSeekStyle(n.target.value)}),o.on("dragenter",".track-drop",function(n){n.preventDefault(),n.target.classList.add("drag-enter")}),o.on("dragover",".track-drop",function(n){n.preventDefault()}),o.on("dragleave",".track-drop",function(n){n.preventDefault(),n.target.classList.remove("drag-enter")}),o.on("drop",".track-drop",function(n){n.preventDefault(),n.target.classList.remove("drag-enter");for(var t=n.originalEvent,o=0;o<t.dataTransfer.files.length;o++)e.emit("newtrack",t.dataTransfer.files[o])}),o.on("change",".time-format",function(n){s=i.val(),e.emit("durationformat",s),p(l,u),b(d)}),o.on("input change",".master-gain",function(n){e.emit("mastervolumechange",n.target.value)}),o.on("change",".continuous-play",function(n){e.emit("continuousplay",$(n.target).is(":checked"))}),o.on("change",".link-endpoints",function(n){e.emit("linkendpoints",$(n.target).is(":checked"))}),o.on("change",".automatic-scroll",function(n){e.emit("automaticscroll",$(n.target).is(":checked"))}),e.on("select",p),e.on("timeupdate",b),e.on("mute",function(n){k("Mute button pressed for "+n.name)}),e.on("solo",function(n){k("Solo button pressed for "+n.name)}),e.on("volumechange",function(n,t){k(t.name+" now has volume "+n+".")}),e.on("mastervolumechange",function(n){k("Master volume now has volume "+n+".")});var S=["uninitialized","loading","decoding","finished"];e.on("audiorequeststatechange",function(n,t){var e=t;t instanceof File&&(e=t.name),w("Track "+e+" is in state "+S[n])}),e.on("loadprogress",function(n,t){var e=t;t instanceof File&&(e=t.name),w("Track "+e+" has loaded "+n+"%")}),e.on("audiosourcesloaded",function(){w("Tracks have all finished decoding.")}),e.on("audiosourcesrendered",function(){w("Tracks have been rendered")}),e.on("audiorenderingfinished",function(n,e,o){o>=0&&t.USER_PERMISSION?(e.name="audio",e.fileName=Date.now()+".wav",t.fileUploader.sendData(e,"blob")):"wav"==n&&(f&&window.URL.revokeObjectURL(f),y(f=window.URL.createObjectURL(e)))}),e.on("finished",function(){console.log("The cursor has reached the end of the selection !"),m&&n.then(function(){n=t.playlist.play(l,u)})});
},{"./song":"rN6O"}]},{},["HIFp"], null)
//# sourceMappingURL=eventemitter.0720562b.js.map