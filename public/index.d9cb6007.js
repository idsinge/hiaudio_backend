function e(e,t,l,o){Object.defineProperty(e,t,{get:l,set:o,enumerable:!0,configurable:!0})}var t=globalThis,l={},o={},a=t.parcelRequire1e7e;null==a&&((a=function(e){if(e in l)return l[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return l[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire1e7e=a);var i=a.register;i("9QUIF",function(e,t){let l="STAGE",o={PROD:{ENDPOINT:"",UPLOAD_ENDPOINT:""},STAGE:{ENDPOINT:window.location.protocol+"//"+window.location.host,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.host+"/fileUpload"},DEV:{ENDPOINT:window.location.protocol+"//"+window.location.host,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.host+"/fileUpload"}};e.exports={ENDPOINT:o[l].ENDPOINT,UPLOAD_ENDPOINT:o[l].UPLOAD_ENDPOINT}}),i("eGMSd",function(t,l){e(t.exports,"default",()=>o);var o=new class{constructor(){if(this.modal=this.getDynamicModal(),this.callbackDismiss=null,!this.modal){this.modal=this.initDynamicModal();let e=this;$(this.modal).on("hide.bs.modal",function(t){e.callbackDismiss&&(e.callbackDismiss(),e.callbackDismiss=null)})}}dynamicModalDialog(e,t,l,o,a,i,n){this.setDynamicModalContent('<div class="modal-header '+i+' text-white"><h5 class="modal-title" id="dynamicModalLabel">'+a+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+e+'</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+o+"</button>"+(null!==t?"<button id="+t+' type="button" class="btn btn-primary">'+l+"</button>":"")+"</div>"),this.callbackDismiss=n,$(this.modal).modal("show")}getDynamicModal(){return document.getElementById("dynamicModal")}setDynamicModalContent(e){this.modal.querySelector(".modal-content").innerHTML=e}closeDynamicModal(e){$(this.modal).modal("hide"),e&&e()}initDynamicModal(){let e=document.createElement("div");return e.classList.add("modal","fade"),e.setAttribute("id","dynamicModal"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","dynamicModalLabel"),e.setAttribute("aria-hidden","true"),e.innerHTML='<div class="modal-dialog modal-sm modal-dialog-centered" role="document"><div class="modal-content"></div></div>',document.body.appendChild(e),e}}}),i("ck9ES",function(t,l){e(t.exports,"LOADER_ELEM_ID",()=>i),e(t.exports,"uriUserPage",()=>n),e(t.exports,"uriCollectionPage",()=>s),e(t.exports,"LevelPrivacy",()=>c),e(t.exports,"PRIVACY_BADGE_STYLE",()=>r),e(t.exports,"PRIVACY_BADGE_TEXT",()=>d),e(t.exports,"startLoader",()=>u),e(t.exports,"cancelLoader",()=>m),e(t.exports,"callJsonApi",()=>p),e(t.exports,"looksLikeMail",()=>g),e(t.exports,"activateGoHomeLink",()=>b),e(t.exports,"MEDIA_CONSTRAINTS",()=>h);var o=a("9QUIF");let i="loader",n="/index.html?userid=",s="/index.html?collectionid=";Object.freeze({none:0,owner:1,admin:2,member:3,guest:4});let c=Object.freeze({public:1,onlyreg:2,private:3}),r={[c.public]:"badge-public",[c.onlyreg]:"badge-onlyreg",[c.private]:"badge-private"},d={[c.public]:"PUBLIC",[c.onlyreg]:"REG USERS",[c.private]:"PRIVATE"},u=(e,t)=>{let l=document.getElementById(e);l.nextElementSibling.textContent=t,l.classList.add(e)},m=e=>{let t=document.getElementById(e);t.classList.remove(e),t.nextElementSibling.textContent=""},p=async(e,t,l)=>{let a={method:t||"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}};l&&(a.body=JSON.stringify(l));try{u(i,"Loading...");let t=await fetch(o.ENDPOINT+e,a);m(i);let l=await t.json();if(l&&!l.error)return l;return l?.error||"An error occurred"}catch(e){return m(i),e}},g=e=>{let t=e.lastIndexOf("@"),l=e.lastIndexOf(".");return t<l&&t>0&&-1==e.indexOf("@@")&&l>2&&e.length-l>2},b=()=>{let e=document.getElementById("goHome");"localhost:80"===window.location.host||"http://localhost"===window.location.origin?e.href=window.location.origin+"/index.html":e.href=window.location.origin};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let h={audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,latency:0,channelCount:1}}}),i("hcAI8",function(t,l){e(t.exports,"checkIfTermsAccepted",()=>i),e(t.exports,"generateAcceptTermsModal",()=>r);var o=a("ck9ES");let i=(e,t)=>{(0,o.cancelLoader)(o.LOADER_ELEM_ID),t(e?.terms_accepted)},n=()=>{$("#acceptTermsModal").modal({backdrop:"static",keyboard:!1}),$("#acceptTermsModal").modal("show"),document.getElementById("buttonAcceptTerms").onclick=s,document.getElementById("buttonRejectTerms").onclick=c},s=async()=>{(await (0,o.callJsonApi)("/acceptterms","PUT")).ok&&$("#acceptTermsModal").modal("hide")},c=async()=>{(await (0,o.callJsonApi)("/rejectterms","PUT")).ok&&($("#acceptTermsModal").modal("hide"),window.location.href=window.location.origin)},r=e=>{if(!document.getElementById("acceptTermsModal")){let t=`<div class="modal fade" id="acceptTermsModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title">Accept Terms</h5>                
                </div>
                <div class="modal-body">
                <p>By clicking on OK you accept the Terms of Use.</p>
                <p>More information at: <span> <a href="${window.location.origin}/static/terms.html" target="_blank">${window.location.origin}/static/terms.html</a></span></p>
                </div>
                <div class="modal-footer">
                <button id="buttonRejectTerms" type="button" class="btn btn-secondary" data-dismiss="modal">Reject</button>
                <button id="buttonAcceptTerms" type="button" class="btn btn-primary">OK</button>
                </div>
            </div>
            </div>
        </div>`;document.getElementsByTagName(e)[0].insertAdjacentHTML("afterend",t)}n()}}),i("lRrDz",function(t,l){e(t.exports,"getCollections",()=>n),e(t.exports,"getCollectionsError",()=>s),e(t.exports,"createListCollections",()=>c);var o=a("9QUIF"),i=a("eGMSd");let n=async()=>{let e=await fetch(o.ENDPOINT+"/mycollections"),t=null;return e?.ok&&(t=await e.json()),t},s=()=>{(0,i.default).dynamicModalDialog("Problem getting collections",null,"","Close","Error","bg-danger")},c=(e,t,l)=>{let o=e.all_collections,a=document.getElementById(t),i="<option value='0'>...</option>",n=null;o.forEach(e=>{if(e){n=e.uuid===l?"selected>":null;let t=`<option value='${e.uuid}' ${n||">"}${e.title}</option>`;i+=t}});let s=`<select class='custom-select' id='inputGroupSelectCollect'>${i}</select>`;a.insertAdjacentHTML("afterbegin",s)}});var n=a("9QUIF"),s=a("eGMSd"),c=a("ck9ES");const r=(e,t)=>{d(e,t),document.querySelectorAll(".breadcrumb-item a").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".active-breadcrumb")?.classList.remove("active-breadcrumb"),e.currentTarget.classList.add("active-breadcrumb"),u(e.currentTarget.getAttribute("data-section"))})})},d=(e,t)=>{let l=document.getElementById("breadcrumbnavbar"),o="";o=e.ok?`<li class='breadcrumb-item ${t?"":"active-breadcrumb"}' aria-current='page'><a href='#' data-section='my-comp'>My Music</a></li>
        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`:`<li class='breadcrumb-item ${t?"":"active-breadcrumb"}' aria-current='page'><a href='#' data-section='recent-comp'>Recent</a></li>
        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`,l.innerHTML=o};function u(e){let t=new URL(window.location.href);switch(t.searchParams.delete("userid"),t.searchParams.delete("collectionid"),history.replaceState(null,null,t),e){case"recent-comp":q();break;case"my-comp":G();break;case"all-comp":document.getElementById("initialmessage").classList.remove("d-flex"),document.getElementById("initialmessage").hidden=!0,Y();break;default:console.log("section default")}}var m=a("hcAI8");let p=null;const g=e=>{let t=!1;return("/mycompositions"===e||e.includes("/compositionsbyuserid/")||e.includes("/collectionastreebyid/"))&&(t=!0),t},b=()=>p,h=e=>{p=e},y=(e,t)=>!g(e)||t!==b(),v=e=>{let t={},l={};return e.forEach(e=>{let o=e.collection_uid,a=e.user_id;null!==o?(t[o]||(t[o]=[]),t[o].push(e)):(l[a]||(l[a]=[]),l[a].push(e))}),{groupedbycoll:t,groupedbyuser_aux:l}},f=(e,t)=>{let l={},o=[];return e.forEach(e=>{let a=e.collection_uid;null!==a&&a!==t?(l[a]||(l[a]=[]),l[a].push(e)):o.push(e)}),{groupedbycoll:l,singlecomps:o}},E=e=>{let t={},l={},o=[];return e.forEach(e=>{let a=e.collection_uid;null!==a?(t[a]||(t[a]=[]),t[a].push(e)):e.contributors.length?(l.collabs||(l.collabs=[]),l.collabs.push(e)):o.push(e)}),{groupedbycoll:t,groupedbycollab:l,singlecomps:o}},w=e=>{let t={},l=[];for(let o in e)1===e[o].length?l.push(e[o][0]):(t[o]||(t[o]=[]),t[o]=e[o]);return{singlecomps:l,groupedbyuser_final:t}},T=e=>{let{groupedbycoll:t,groupedbyuser_aux:l}=v(e),{singlecomps:o,groupedbyuser_final:a}=w(l);return{groupedbycoll:t,groupedbyuser_final:a,singlecomps:o}},I=e=>{let{groupedbycoll:t,groupedbycollab:l,singlecomps:o}=E(e);return{groupedbycoll:t,groupedbycollab:l,singlecomps:o}},x=(e,t)=>{let{groupedbycoll:l,singlecomps:o}=f(e,t);return{groupedbycoll:l,singlecomps:o}};var c=a("ck9ES");const A={coll:"badge-collection",user:"badge-warning",collab:"badge-collab"},C={coll:"border-collection",user:"border-warning",collab:"border-collab"},k={coll:c.uriCollectionPage,user:c.uriUserPage},B=(e,t,l,o,a)=>{let i=e||!g(o)&&t||l;return`<ul class="nav justify-content-end">
              ${i?'<li class="legenditem nav-item"><h4><span class="badge badge-light">Groups by:&nbsp;</span></h4></li>':""}
              ${e?'<li class="legenditem nav-item"><h4><span class="badge badge-collection">Collections&nbsp;<span class="badge badge-light">'+e+"</span></span></h4></li>":""}            
              ${!g(o)&&t?'<li class="legenditem nav-item"><h4><span class="badge badge-warning">Users&nbsp;<span class="badge badge-light">'+t+"</span></span></h4></li>":""}
              ${l?'<li class="legenditem nav-item"><h4><span class="badge badge-success">Singles&nbsp;<span class="badge badge-light">'+l+"</span></span></h4></li>":""}
              <li class="legenditem nav-item"><h4><span class="badge badge-light">Total compositions:&nbsp;</span><span class="badge badge-light">${a}</span></h4></li>
            </ul>`},L=(e,t)=>{document.getElementById("grid").innerHTML="",document.getElementById("grid").insertAdjacentHTML("afterbegin",e),document.getElementById("legendbuttons").innerHTML="",document.getElementById("legendbuttons").insertAdjacentHTML("afterbegin",t),document.getElementById("searchInput").removeAttribute("disabled")},M=(e,t)=>{let l=y(t,e.username),o=e.contributors.length;return`<div class='card border-success'>                       
              <div class="card-body">
              ${U?`<span class="badge ${c.PRIVACY_BADGE_STYLE[e.privacy]}">${c.PRIVACY_BADGE_TEXT[e.privacy]}</span>`:""}
              ${e.opentocontrib?'<p class="badge badge-info">OPEN TO CONTRIB</p>':""}               
                  <div>
                    <p class="list-group-item-heading">  
                      <a href='${S+e.uuid}' class='card-url'>
                        <h5 class='card-title'>${e.title}</h5>
                      </a>
                    </p>
                    <p class='card-text text-truncate'>${e.description||""}</p>
                    <p class='text-black-50'>${o?"Collaborators: "+o:""}</p>
                    ${l?`<span class="d-inline-block text-truncate" style="max-width: 250px;">
                    <i class='fa fa-user'></i>&nbsp;
                    <a href='${c.uriUserPage+e.owner_uuid}' class='card-url'>
                      ${e.username}&nbsp;
                    </a>
                  </span>`:""}
                    <span class="d-inline-block text-truncate" style="max-width: 250px;">
                      <i class='fa fa-music'></i>&nbsp;${"Tracks: "+e.tracks?.length}
                    </span>                  
                  </div>                
              </div>            
          </div>`},D=(e,t,l)=>{let o=y(l,e.username),a=e.contributors.length;return`<div class="list-group-item ">
              ${U?`<span class="badge ${c.PRIVACY_BADGE_STYLE[e.privacy]}">${c.PRIVACY_BADGE_TEXT[e.privacy]}</span>`:""}
              ${e.opentocontrib?'<span class="badge badge-info">OPEN TO CONTRIB</span>':""}  
              <p class="list-group-item-heading">
                <a href='${S+e.uuid}' class='card-url'>
                    <h5 class='card-title'>${e.title}</h5>
                </a>
              </p>
              <p class='text-black-50'>${a?"Collaborators: "+a:""}</p>
              <p class="list-group-item-text text-truncate">
                ${e.description||""}
              </p>
              ${"user"!==t&&o?'<span class="d-inline-block text-truncate" style="max-width: 220px;"><i class="fa fa-user"></i>&nbsp;<a href='+c.uriUserPage+e.owner_uuid+' class="card-url">'+e.username+"&nbsp;</a></span>":""}            
              <span class="d-inline-block text-truncate" style="max-width: 200px;">
                <i class='fa fa-music'></i>&nbsp;${"Tracks: "+e.tracks?.length}
              </span>
            </div>`},O=(e,t,l,o,a)=>{let i=A[e],n=C[e],s=k[e],c=`<span class="badge ${i} d-inline-block text-truncate" style="max-width:85%;">
                              <span class="badge badge-light">${t}</span>&nbsp;
                              ${s?`<a href=${s+o} class="card-header-url">${l}</a>`:`${l}`}                              
                          </span>`;return`<div class='card ${n}'>                        
              <h4>${c}</h4>        
              <div class="card-body">
                <div class="list-group border">              
                  ${a}
                </div>
              </div>
            </div>`},P=e=>{let t=document.getElementById("welcomecontainer");if(t.lastChild?.id&&t.removeChild(t.lastChild),!e){let e=document.createElement("div");e.id="welcometext",e.classList.add("col-sm-6"),e.classList.add("mx-auto"),e.innerHTML="<em>We present Hi-Audio Online Platform a web application for musicians, researchers and an open community of enthusiasts of audio and music with a view to build a public database of music recordings from a wide variety of styles and different cultures.</em>",document.getElementById("welcomecontainer").appendChild(e)}},N=(e,t,l)=>{P(!0);let o=document.createElement("div");o.id="infocontainer",o.innerHTML=`<div class="card border-collection mb-3">
                                          <div class="card-header bg-transparent border-collection"><b>Collection</b></div>
                                          <div class="card-body text-dark">
                                            <h5 class="card-title">${e}</h5>
                                            <p class="card-text" style="width:300px;">Owner: <a href=${c.uriUserPage+l} class="card-url">${t}</a></p>
                                          </div>
                                        </div>`,document.getElementById("welcomecontainer").appendChild(o)},_=(e,t)=>{P(!0);let l=document.createElement("div");l.id="infocontainer",l.innerHTML=`<div class="card mb-3" style="max-width: 540px;">
                                    <div class="row no-gutters">
                                      <div class="col-md-4">
                                        <img class="img-fluid" src="https://picsum.photos/seed/${t}/200" alt="User Picture">
                                      </div>
                                      <div class="col-md-8">
                                        <div class="card-body">
                                          <h5 class="card-title">User</h5>
                                          <p class="card-text" style="width:300px;">${e?`${e}`:""}</p>                                        
                                          <p class="card-text"><small class="text-muted"></small></p>
                                        </div>
                                      </div>
                                    </div>
                                  </div>`,document.getElementById("welcomecontainer").appendChild(l)},S="/composition.html?compositionId=";let U=!1;const j=e=>{e||(0,m.generateAcceptTermsModal)("header")},R=async()=>{let e=await (0,c.callJsonApi)("/profile","GET");return e.ok&&(h(e.name),document.getElementById("userlogin").style.display="none",document.getElementById("useroptions").style.display="",document.getElementById("display_profile_name").innerText=`[${e.name}]`,(0,m.checkIfTermsAccepted)(e,j)),e},G=async()=>{let e="/mycompositions",t=await (0,c.callJsonApi)(e,"GET");if(t.compositions)return V(t.compositions,e);alert("invalid return value for compisitions list")},H=async(e,t)=>{let l="/compositionsbyuserid/"+e,o=await (0,c.callJsonApi)(l,"GET");if(o.compositions)return h(o.username),_(o.username,e),V(o.compositions,l);alert("invalid return value for user id"),t.ok?u("my-comp"):u("recent-comp")},J=async(e,t)=>{let l="/collectionastreebyid/"+e,o=await (0,c.callJsonApi)(l,"GET");if(o.compositions)return h(o.username),N(o.collection_name,o.username,o.owneruid),V(o.compositions,l);alert("invalid return value for collection id"),t.ok?u("my-comp"):u("recent-comp")},q=async()=>{let e=await (0,c.callJsonApi)("/recentcompositions","GET");if(e.compositions)return V(e.compositions,"/recentcompositions");alert("invalid return value for compisitions list")},Y=async()=>{let e=await (0,c.callJsonApi)("/compositions","GET");if(e.compositions)return V(e.compositions,"/compositions");alert("invalid return value for compisitions list")},V=(e,t)=>{document.getElementById("loadertext").textContent="",document.getElementById("grid").innerHTML="",document.getElementById("legendbuttons").innerHTML="";let l=!t.includes("/compositionsbyuserid/")&&!t.includes("/collectionastreebyid/");l&&P(!1),!e.length&&l?(document.getElementById("initialmessage").hidden=!1,document.getElementById("initialmessage").classList.add("d-flex")):F(e,t)},F=(e,t)=>{t.includes("/collectionastreebyid/")?X(x(e,t.replace("/collectionastreebyid/","")),null,t,e.length):g(t)?X(I(e),"groupedbycollab",t,e.length):X(T(e),"groupedbyuser_final",t,e.length)},Q=(e,t,l)=>{let o="";for(let a in e){let i=e[a],n="",s="",c=null;for(let e of("collab"===t?s="Collaborations":"coll"===t?(s=Object.values(i)[0].parent_collection,c=Object.values(i)[0].collection_uid):(s=Object.values(i)[0].username,c=Object.values(i)[0].owner_uuid),i))n+=D(e,t,l);o+=O(t,i.length,s,c,n)}return o},z=(e,t)=>{let l="",o=e.singlecomps;return o?.forEach(e=>{let o=M(e,t);l+=o}),l},X=(e,t,l,o)=>{let a="",i=Object.keys(e.groupedbycoll).length,n=t?Object.keys(e[t]).length:0,s=e.singlecomps.length;i>0&&(a+=Q(e.groupedbycoll,"coll",l)),n>0&&(a+=Q(e[t],"groupedbycollab"===t?"collab":"user",l)),s>0&&(a+=z(e,l)),L(a,B(i,n,s,l,o))},K=async()=>{let e=window.location.search,t=e.split("userid=")[1],l=e.split("collectionid=")[1],o=await R();U=o.ok,t?await H(t,o):l?await J(l,o):o.ok?await G():await q(),r(o,t||l)};document.getElementById("userlogin").innerHTML=`<li class='nav-item'>
        <a class='dropdown-item' href='${window.location.origin}/login.html'>Register / Login</a>
    </li>
    <li class='nav-item'>
        <a class='dropdown-item' href='${S}demopage'>Test DAW</a>
    </li>
    <li class='nav-item'>
        <a class='dropdown-item' href='${window.location.origin}/static/howto.html'>How-To</a>
    </li>
    `,document.getElementById("useroptions").innerHTML=`<li class='nav-item'>
      <a class='nav-link' href='${window.location.origin+"/profile.html"}'>Profile <i id='display_profile_name'></i></a>
    </li>
    <li class='nav-item'>
          <a class='nav-link' href='#' id='createNewButton' data-toggle='modal' data-target='#newMusicModal'>/ Create new</a>
    </li>
    <li class='nav-item'>
        <a class='nav-link' href='#' id='openMyCollectionsButton' data-toggle='modal' data-target='#editCollectionsModal'>/ My Collections</a>
    </li>
    <li class='nav-item'>
        <a class='nav-link' href='${window.location.origin+"/static/howto.html"}'>/ How-to</a>
    </li>
    `,(0,c.activateGoHomeLink)(),K();var W=a("lRrDz"),n=a("9QUIF");let Z=!1;const ee=document.getElementById("openMyCollectionsButton"),et=document.getElementById("editmycollectionsbutton"),el=async()=>{let e=await fetch("/mycollectionsastree");return await e.json()},eo=e=>{let t=`
        <span id='removeCollIcon${e.uuid}' data-uuid='${e.uuid}' data-title='${e.title}' role='button' class='badge badge-pill badge-danger' hidden>-</span>
        <li id='${e.uuid}' class='list-group-item border-bottom-0 border-right-0 border-top-0 border-warning'>
            <input type='text' class='form-control border-secondary' id='treecolltitleinput${e.uuid}' data-uuid='${e.uuid}' placeholder='Type a new title'
            title='collectiontitle' value='${e.title}' disabled>
        </li>`;if(e.compositions.length>0||e.collections.length>0){for(let l of(t+="<ul>",e.compositions))t+=`<li class='list-group-item border-0'><a href='${S+l.uuid}'><u>${l.title}</u></a></li>`;for(let l of e.collections)t+=eo(l);t+="</ul>"}return t},ea=async()=>{let e=document.getElementById("listCollContainerAllColl"),t=await el(),l="<ul>";for(let e of t)l+=eo(e);l+="</ul>",e.innerHTML=l},ei=()=>{Z?(Z=!1,et.innerText="Edit",es()):(Z=!0,et.innerText="Done",en())},en=()=>{document.querySelectorAll("[id*='removeCollIcon']").forEach(e=>{e.removeAttribute("hidden"),ed(e.getAttribute("data-uuid"),e.getAttribute("data-title"))}),document.querySelectorAll("[id*='treecolltitleinput']").forEach(e=>{e.removeAttribute("disabled"),eu(e.getAttribute("data-uuid"),e.value)})},es=()=>{document.querySelectorAll("[id*='removeCollIcon']").forEach(e=>{e.setAttribute("hidden","true")}),document.querySelectorAll("[id*='treecolltitleinput']").forEach(e=>{e.setAttribute("disabled","true")})},ec=async()=>{Z=!1,et.innerText="Edit",await ea(),et.addEventListener("click",ei,!1)};ee?.addEventListener("click",ec,!1);const er=async(e,t,l)=>{if("SPAN"===e.target.tagName){if(!0==confirm(`Are you sure you want remove the collection ${l} and all of its content?`)){let e=await fetch(n.ENDPOINT+"/deletecollection/"+t,{method:"DELETE"});if(e?.ok){document.getElementById("removeCollIcon"+t).remove();let e=document.getElementById(t);e?.nextSibling?.tagName==="UL"&&e.nextSibling.remove(),e.remove()}}else e.target.checked=!1}},ed=(e,t)=>{document.getElementById("removeCollIcon"+e).onclick=async l=>{await er(l,e,t)}},eu=(e,t)=>{document.getElementById("treecolltitleinput"+e).onblur=l=>{ep(l,e,t)}},em=(e,t)=>{fetch(n.ENDPOINT+"/updatecolltitle",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,uuid:t})}).then().catch(e=>{console.error("Error updating value:",e)})},ep=(e,t,l)=>{let o=e.target.value;if(l!==o){if(o&&""!==o)em(o,t);else{e.target.value=l,alert("Introduce a valid title, please");return}}},eg=document.getElementById("createNewButton"),eb=document.getElementById("createNewButtonAtHome"),eh=()=>{document.getElementById("newtitle").value="",document.getElementById("newdescription").value="",ev(document.getElementById("newcreation")),(0,W.getCollections)().then(e=>{e?ey(e):(0,W.getCollectionsError)()})};eg?.addEventListener("click",eh,!1),eb?.addEventListener("click",eh,!1);const ey=e=>{document.getElementById("listCollContainer").replaceChildren(),(0,W.createListCollections)(e,"listCollContainer")},ev=e=>{e?.addEventListener("click",ef)},ef=e=>{let t=document.getElementById("typeOfNewCreation").value,l="/newcomposition";"coll"===t&&(l="/newcollection");let o=document.getElementById("newtitle").value,a=document.querySelector('input[name="newMusicPrivacyRadios"]:checked').value;if(!o){alert("Introduce a valid title, please");return}let i=document.getElementById("newdescription").value,s=document.getElementById("inputGroupSelectCollect"),c=s?.value||null;"0"===c&&(c=null);let r=JSON.stringify({title:o,privacy_level:a,parent_uuid:c,description:i});fetch(n.ENDPOINT+l,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:r}).then(e=>(e.ok||e.statusText,e.json())).then(e=>{if(e)eE(e);else throw Error(e)}).catch(e=>{})},eE=e=>{$("#newMusicModal").modal("hide"),e.composition?window.location.href=S+e.composition.uuid:e.ok?(0,s.default).dynamicModalDialog("Collection created successfully!",null,"","Close","New Collection","bg-success"):(0,s.default).dynamicModalDialog("An error happened, item not created",null,"","Close","Error at Creation","bg-danger")};
//# sourceMappingURL=index.d9cb6007.js.map
