{"mappings":"ACCA,iBAAiB,UAAW,AAAC,IACE,gBAAzB,EAAQ,IAAI,CAAC,OAAO,EACtB,AASJ,SAAmC,CAAK,CAAE,CAAK,CAAE,CAAM,CAAE,CAAO,EAC9D,IAAM,EAAK,EAAM,MAAM,CAAE,EAAK,EAAM,MAAM,CACtC,EAAoB,AAAI,MAAM,EAAS,GAAG,IAAI,CAAC,GAEnD,IAAK,IAAI,EAAM,EAAG,GAAO,EAAQ,IAAO,CACpC,IAAI,EAAM,EACV,IAAK,IAAI,EAAI,EAAK,EAAI,GAAO,EAAI,EAAO,EAAI,IACxC,GAAQ,CAAK,CAAC,EAAE,CAAK,CAAK,CAAC,EAAI,EAAI,AAEvC,CAAA,CAAiB,CAAC,EAAI,CAAG,EAAO,CAAA,EAAK,CAAA,CACzC,CAEA,YAAY,CAAC,YAAY,EAAmB,QAAS,CAAO,EAC9D,EAtB8B,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,MAAM,CAAG,EAAQ,IAAI,CAAC,OAAO,EAGjF,aAAzB,EAAQ,IAAI,CAAC,OAAO,EACtB,AAoBJ,SAAyB,CAAK,CAAE,CAAO,EACrC,IAAI,EAAY,CAAK,CAAC,EAAE,CACpB,EAAY,EACZ,EAAM,EAEV,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,IAC1B,CAAK,CAAC,EAAE,CAAG,IACX,EAAY,CAAK,CAAC,EAAE,CACpB,EAAY,GAEhB,GAAO,CAAK,CAAC,EAAE,CAGnB,YAAY,CAAE,UAAA,EAAW,UAAA,EAAW,KADvB,EAAM,EAAM,MAAM,CACW,QAAA,CAAQ,EACpD,EAlCoB,EAAQ,IAAI,CAAC,KAAK,CAAE,EAAQ,IAAI,CAAC,OAAO,CAE5D","sources":["<anon>","src/pages/composition/scripts/latencymls/worker.js"],"sourcesContent":["(() => {\nvar $cc31244764c18894$exports = {};\n// Listen for messages from the main thread\naddEventListener(\"message\", (message)=>{\n    if (message.data.command === \"correlation\") $cc31244764c18894$var$calculateCrossCorrelation(message.data.data1, message.data.data2, message.data.maxLag, message.data.channel);\n    if (message.data.command === \"findpeak\") $cc31244764c18894$var$findPeakAndMean(message.data.array, message.data.channel);\n});\nfunction $cc31244764c18894$var$calculateCrossCorrelation(data1, data2, maxLag, channel) {\n    const n1 = data1.length, n2 = data2.length;\n    let crossCorrelations = new Array(maxLag + 1).fill(0);\n    for(let lag = 0; lag <= maxLag; lag++){\n        let sum = 0;\n        for(let i = lag; i < n1 && i - lag < n2; i++)sum += data1[i] * data2[i - lag];\n        crossCorrelations[lag] = sum / (n1 - lag);\n    }\n    postMessage({\n        correlation: crossCorrelations,\n        channel: channel\n    });\n}\nfunction $cc31244764c18894$var$findPeakAndMean(array, channel) {\n    let peakValue = array[0];\n    let peakIndex = 0;\n    let sum = 0;\n    for(let i = 1; i < array.length; i++){\n        if (array[i] > peakValue) {\n            peakValue = array[i];\n            peakIndex = i;\n        }\n        sum += array[i];\n    }\n    const mean = sum / array.length;\n    postMessage({\n        peakValue: peakValue,\n        peakIndex: peakIndex,\n        mean: mean,\n        channel: channel\n    });\n}\n\n})();\n//# sourceMappingURL=worker.139b5a6b.js.map\n","// Listen for messages from the main thread\naddEventListener('message', (message) => {  \n  if (message.data.command === 'correlation') {\n    calculateCrossCorrelation(message.data.data1, message.data.data2, message.data.maxLag,  message.data.channel)\n  }\n\n  if (message.data.command === 'findpeak') {\n    findPeakAndMean(message.data.array, message.data.channel)\n  }\n})\n\n\nfunction calculateCrossCorrelation(data1, data2, maxLag, channel) {\n  const n1 = data1.length, n2 = data2.length\n  let crossCorrelations = new Array(maxLag + 1).fill(0)\n\n  for (let lag = 0; lag <= maxLag; lag++) {\n      let sum = 0\n      for (let i = lag; i < n1 && (i - lag) < n2; i++) {\n          sum += (data1[i]) * (data2[i - lag])\n      }\n      crossCorrelations[lag] = sum / (n1 - lag)\n  }\n\n  postMessage({correlation:crossCorrelations, channel: channel})\n}\n\nfunction findPeakAndMean(array, channel) {\n  let peakValue = array[0]\n  let peakIndex = 0\n  let sum = 0\n\n  for (let i = 1; i < array.length; i++) {\n      if (array[i] > peakValue) {\n          peakValue = array[i]\n          peakIndex = i\n      }\n      sum += array[i]\n  }\n  const mean = sum / array.length\n  postMessage({ peakValue, peakIndex, mean, channel })\n}"],"names":["addEventListener","message","data","command","$cc31244764c18894$var$calculateCrossCorrelation","data1","data2","maxLag","channel","n1","length","n2","crossCorrelations","Array","fill","lag","sum","i","postMessage","correlation","$cc31244764c18894$var$findPeakAndMean","array","peakValue","peakIndex","mean"],"version":3,"file":"worker.139b5a6b.js.map"}