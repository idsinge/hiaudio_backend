!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequire1e7e;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},t.parcelRequire1e7e=i);var l=i.register;l("7hG31",function(t,n){e(t.exports,"LOADER_ELEM_ID",function(){return l}),e(t.exports,"uriUserPage",function(){return r}),e(t.exports,"uriCollectionPage",function(){return a}),e(t.exports,"LevelPrivacy",function(){return d}),e(t.exports,"PRIVACY_BADGE_STYLE",function(){return c}),e(t.exports,"PRIVACY_BADGE_TEXT",function(){return u}),e(t.exports,"startLoader",function(){return s}),e(t.exports,"cancelLoader",function(){return m}),e(t.exports,"callJsonApi",function(){return f}),e(t.exports,"looksLikeMail",function(){return g}),e(t.exports,"activateGoHomeLink",function(){return p}),e(t.exports,"MEDIA_CONSTRAINTS",function(){return E});var o=i("72lX3");let l="loader",r="/index.html?userid=",a="/index.html?collectionid=";Object.freeze({none:0,owner:1,admin:2,member:3,guest:4});let d=Object.freeze({public:1,onlyreg:2,private:3}),c={[d.public]:"badge-public",[d.onlyreg]:"badge-onlyreg",[d.private]:"badge-private"},u={[d.public]:"PUBLIC",[d.onlyreg]:"REG USERS",[d.private]:"PRIVATE"},s=(e,t)=>{let n=document.getElementById(e);n.nextElementSibling.textContent=t,n.classList.add(e)},m=e=>{let t=document.getElementById(e);t.classList.remove(e),t.nextElementSibling.textContent=""},f=async(e,t,n)=>{let i={method:t||"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}};n&&(i.body=JSON.stringify(n));try{s(l,"Loading...");let t=await fetch(o.ENDPOINT+e,i);m(l);let n=await t.json();if(n&&!n.error)return n;return(null==n?void 0:n.error)||"An error occurred"}catch(e){return m(l),e}},g=e=>{let t=e.lastIndexOf("@"),n=e.lastIndexOf(".");return t<n&&t>0&&-1==e.indexOf("@@")&&n>2&&e.length-n>2},p=()=>{let e=document.getElementById("goHome");"localhost:80"===window.location.host||"http://localhost"===window.location.origin?e.href=window.location.origin+"/index.html":e.href=window.location.origin};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let E={audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,latency:0,channelCount:1}}}),l("72lX3",function(e,t){let n="STAGE",o={PROD:{ENDPOINT:"",UPLOAD_ENDPOINT:""},STAGE:{ENDPOINT:window.location.protocol+"//"+window.location.host,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.host+"/fileUpload"},DEV:{ENDPOINT:window.location.protocol+"//"+window.location.host,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.host+"/fileUpload"}};e.exports={ENDPOINT:o[n].ENDPOINT,UPLOAD_ENDPOINT:o[n].UPLOAD_ENDPOINT}});var r=i("7hG31");let a=null,d=async()=>{(await (0,r.callJsonApi)("/profile","GET")).ok&&(window.location.href=window.location.origin+"/profile.html")},c=async()=>{let e=document.getElementById("inputloginemail").value;if((0,r.looksLikeMail)(e)){let t=await (0,r.callJsonApi)("/generatelogincode/"+e,"PUT");t.ok?(a=e,document.getElementById("authmethodform").hidden=!0,document.getElementById("validationcodefield").hidden=!1):(document.getElementById("inputloginemail").classList.add("is-invalid"),document.getElementById("validationEmailResult").innerText=t)}else document.getElementById("inputloginemail").classList.add("is-invalid"),document.getElementById("validationEmailResult").innerText="Sorry, invalid email address format."},u=async()=>{let e=document.getElementById("verificationCode").value;if(/\d{6}/.test(e)){let t={email:a,code:e};(await (0,r.callJsonApi)("/logincodevalidation","POST",t)).ok?(a=null,window.location.href=window.location.origin):(document.getElementById("verificationCode").classList.add("is-invalid"),document.getElementById("validationCodeResult").innerText="Wrong code, sorry")}else document.getElementById("verificationCode").classList.add("is-invalid"),document.getElementById("validationCodeResult").innerText="Sorry, invalid code format."};(0,r.activateGoHomeLink)(),document.getElementById("googleLoginButton").onclick=()=>{window.location.href="/googlelogin"},document.getElementById("sendcodebutton").onclick=c,document.getElementById("inputloginemail").onkeydown=function(e){if("Enter"==e.key)return c()},document.getElementById("validatecodebutton").onclick=u,document.getElementById("verificationCode").onkeydown=function(e){if("Enter"==e.key)return u()},d()}();
//# sourceMappingURL=login.f31b559d.js.map
