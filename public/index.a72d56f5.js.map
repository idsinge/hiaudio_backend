{"mappings":"C,A,W,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,ECAA,IAAM,EAAO,QAEP,EAAe,CACjB,KAAK,CACD,SAAS,GACT,gBAAgB,EACpB,EACA,MAAM,CACF,SAAU,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC5D,gBAAiB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,aACxE,EACA,IAAI,CACA,SAAS,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC3D,gBAAgB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAG,aACzE,CACJ,CAEA,CAAA,EAAA,OAAA,CAAiB,CACb,SAAU,CAAY,CAAC,EAAK,CAAC,QAAQ,CACrC,gBAAiB,CAAY,CAAC,EAAK,CAAC,eAAe,AACvD,C,G,E,Q,S,C,C,C,E,E,E,O,C,U,W,O,C,GCmDA,IAAA,EAF6B,IArE7B,MAgBI,mBAAmB,CAAO,CAAE,CAAK,CAAE,CAAS,CAAE,CAAa,CAAE,CAAU,CAAE,CAAgB,CAAE,CAAe,CAAE,CAgBxG,IAAI,CAAC,sBAAsB,CAdvB,4BAA4B,EAA5B,+DACkD,EADlD,kKAOA,EAPA,wGAUwE,EAAc,YACrF,CAAA,AAAQ,OAAR,EAAa,cAAgB,EAAQ,0CAA4C,EAAY,YAAY,EAAA,EAC1G,UAGJ,IAAI,CAAC,eAAe,CAAG,EACvB,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,OACxB,CAEA,iBAAkB,CACd,OAAO,SAAS,cAAc,CAAC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","sources":["<anon>","src/common/js/config.js","src/common/js/modaldialog.js","src/common/js/utils.js","src/common/js/acceptterms.js","src/common/js/collectionshandler.js","src/pages/home/scripts/newcreation.js","src/pages/home/scripts/home.js","src/pages/home/scripts/breadcrumbhandler.js","src/pages/home/scripts/home_ui.js","src/pages/home/scripts/home_helper.js","node_modules/@parcel/runtime-js/lib/runtime-9c14dbab6c6a62ed.js","src/pages/home/scripts/audioplayer.js","node_modules/wavesurfer.js/dist/wavesurfer.js","node_modules/wavesurfer.js/dist/base-plugin.js","node_modules/wavesurfer.js/dist/event-emitter.js","node_modules/wavesurfer.js/dist/decoder.js","node_modules/wavesurfer.js/dist/dom.js","node_modules/wavesurfer.js/dist/fetcher.js","node_modules/wavesurfer.js/dist/player.js","node_modules/wavesurfer.js/dist/renderer.js","node_modules/wavesurfer.js/dist/draggable.js","node_modules/wavesurfer.js/dist/timer.js","node_modules/wavesurfer.js/dist/webaudio.js","src/pages/home/scripts/editcollections.js"],"sourcesContent":["(function () {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1e7e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1e7e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"72lX3\", function(module, exports) {\nconst $51f9bf6c0a8acf40$var$MODE = \"STAGE\" // STAGE\n;\nconst $51f9bf6c0a8acf40$var$ENVIRONMENTS = {\n    PROD: {\n        ENDPOINT: \"\",\n        UPLOAD_ENDPOINT: \"\"\n    },\n    STAGE: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    },\n    DEV: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    }\n};\nmodule.exports = {\n    ENDPOINT: $51f9bf6c0a8acf40$var$ENVIRONMENTS[$51f9bf6c0a8acf40$var$MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: $51f9bf6c0a8acf40$var$ENVIRONMENTS[$51f9bf6c0a8acf40$var$MODE].UPLOAD_ENDPOINT\n};\n\n});\n\nparcelRegister(\"lV0Oe\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $ff4f8c8b6ae3f637$export$2e2bcd8739ae039; });\nclass $ff4f8c8b6ae3f637$var$DynamicModal {\n    dynamicModalDialog(message, idbtn, textBtnOK, textBtnCancel, popupTitle, backgroundHeader, callbackDismiss) {\n        const html = '<div class=\"modal-header ' + backgroundHeader + ' text-white\">' + '<h5 class=\"modal-title\" id=\"dynamicModalLabel\">' + popupTitle + \"</h5>\" + '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">' + '<span aria-hidden=\"true\">&times;</span>' + \"</button>\" + \"</div>\" + '<div class=\"modal-body\">' + message + \"</div>\" + '<div class=\"modal-footer\">' + '<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">' + textBtnCancel + \"</button>\" + (idbtn !== null ? \"<button id=\" + idbtn + ' type=\"button\" class=\"btn btn-primary\">' + textBtnOK + \"</button>\" : \"\") + \"</div>\";\n        this.setDynamicModalContent(html);\n        this.callbackDismiss = callbackDismiss;\n        $(this.modal).modal(\"show\");\n    }\n    getDynamicModal() {\n        return document.getElementById(\"dynamicModal\");\n    }\n    setDynamicModalContent(html) {\n        this.modal.querySelector(\".modal-content\").innerHTML = html;\n    }\n    closeDynamicModal(callBackClose) {\n        $(this.modal).modal(\"hide\");\n        if (callBackClose) callBackClose();\n    }\n    initDynamicModal() {\n        const modal = document.createElement(\"div\");\n        modal.classList.add(\"modal\", \"fade\");\n        modal.setAttribute(\"id\", \"dynamicModal\");\n        modal.setAttribute(\"tabindex\", \"-1\");\n        modal.setAttribute(\"role\", \"dialog\");\n        modal.setAttribute(\"aria-labelledby\", \"dynamicModalLabel\");\n        modal.setAttribute(\"aria-hidden\", \"true\");\n        modal.innerHTML = '<div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\"><div class=\"modal-content\"></div></div>';\n        document.body.appendChild(modal);\n        return modal;\n    }\n    constructor(){\n        this.modal = this.getDynamicModal();\n        this.callbackDismiss = null;\n        if (!this.modal) {\n            this.modal = this.initDynamicModal();\n            const self = this;\n            $(this.modal).on(\"hide.bs.modal\", function(event) {\n                if (self.callbackDismiss) {\n                    self.callbackDismiss();\n                    self.callbackDismiss = null;\n                }\n            });\n        }\n    }\n}\nconst $ff4f8c8b6ae3f637$var$dynamicModalInstance = new $ff4f8c8b6ae3f637$var$DynamicModal();\nvar $ff4f8c8b6ae3f637$export$2e2bcd8739ae039 = $ff4f8c8b6ae3f637$var$dynamicModalInstance;\n\n});\n\nparcelRegister(\"7hG31\", function(module, exports) {\n\n$parcel$export(module.exports, \"uriUserPage\", function () { return $54dabcb7a6480b63$export$ff3ad29dbb546598; });\n$parcel$export(module.exports, \"uriCollectionPage\", function () { return $54dabcb7a6480b63$export$36dfaec04418caa7; });\n$parcel$export(module.exports, \"UserRole\", function () { return $54dabcb7a6480b63$export$eb3485a690c2f0b8; });\n$parcel$export(module.exports, \"LevelPrivacy\", function () { return $54dabcb7a6480b63$export$a3c073b335a47d60; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_STYLE\", function () { return $54dabcb7a6480b63$export$eba8c17f4d7a3cd3; });\n$parcel$export(module.exports, \"PRIVACY_BADGE_TEXT\", function () { return $54dabcb7a6480b63$export$ab4fdfae3dcd1a8f; });\n$parcel$export(module.exports, \"startLoader\", function () { return $54dabcb7a6480b63$export$8afc507ca675ea0e; });\n$parcel$export(module.exports, \"cancelLoader\", function () { return $54dabcb7a6480b63$export$81e46b314cb8d8e3; });\n$parcel$export(module.exports, \"callJsonApi\", function () { return $54dabcb7a6480b63$export$997d30e836e5c567; });\n$parcel$export(module.exports, \"looksLikeMail\", function () { return $54dabcb7a6480b63$export$706cf9fcefe67c8e; });\n$parcel$export(module.exports, \"activateGoHomeLink\", function () { return $54dabcb7a6480b63$export$3fc781af82c0c660; });\n$parcel$export(module.exports, \"MEDIA_CONSTRAINTS\", function () { return $54dabcb7a6480b63$export$2464c9e69777d386; });\n\nvar $72lX3 = parcelRequire(\"72lX3\");\nconst $54dabcb7a6480b63$export$ff3ad29dbb546598 = \"/index.html?userid=\";\nconst $54dabcb7a6480b63$export$36dfaec04418caa7 = \"/index.html?collectionid=\";\nconst $54dabcb7a6480b63$export$eb3485a690c2f0b8 = Object.freeze({\n    none: 0,\n    owner: 1,\n    admin: 2,\n    member: 3,\n    guest: 4\n});\nconst $54dabcb7a6480b63$export$a3c073b335a47d60 = Object.freeze({\n    public: 1,\n    onlyreg: 2,\n    private: 3\n});\nconst $54dabcb7a6480b63$export$eba8c17f4d7a3cd3 = {\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.public]: \"badge-public\",\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.onlyreg]: \"badge-onlyreg\",\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.private]: \"badge-private\"\n};\nconst $54dabcb7a6480b63$export$ab4fdfae3dcd1a8f = {\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.public]: \"PUBLIC\",\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.onlyreg]: \"REG USERS\",\n    [$54dabcb7a6480b63$export$a3c073b335a47d60.private]: \"PRIVATE\"\n};\nconst $54dabcb7a6480b63$export$8afc507ca675ea0e = (loadingMessage)=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`;\n    loaderElement.classList.remove(\"loader-hidden\");\n};\nconst $54dabcb7a6480b63$export$81e46b314cb8d8e3 = ()=>{\n    const loaderElement = document.getElementById(\"loader\");\n    loaderElement.classList.add(\"loader-hidden\");\n};\nconst $54dabcb7a6480b63$export$997d30e836e5c567 = async (apimethod, rqstmethod, body, useLoaderWithText)=>{\n    const request = {\n        method: rqstmethod || \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }\n    };\n    if (body) request.body = JSON.stringify(body);\n    try {\n        useLoaderWithText && $54dabcb7a6480b63$export$8afc507ca675ea0e(useLoaderWithText);\n        const sendRqst = await fetch((0, $72lX3.ENDPOINT) + apimethod, request);\n        useLoaderWithText && $54dabcb7a6480b63$export$81e46b314cb8d8e3();\n        const respToJson = await sendRqst.json();\n        if (respToJson && !respToJson.error) return respToJson;\n        else return (respToJson === null || respToJson === void 0 ? void 0 : respToJson.error) || \"An error occurred\";\n    } catch (error) {\n        useLoaderWithText && $54dabcb7a6480b63$export$81e46b314cb8d8e3();\n        return error;\n    }\n};\nconst $54dabcb7a6480b63$export$706cf9fcefe67c8e = (str)=>{\n    const lastAtPos = str.lastIndexOf(\"@\");\n    const lastDotPos = str.lastIndexOf(\".\");\n    return lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf(\"@@\") == -1 && lastDotPos > 2 && str.length - lastDotPos > 2;\n};\nconst $54dabcb7a6480b63$export$3fc781af82c0c660 = ()=>{\n    const goHomeLink = document.getElementById(\"goHome\");\n    if (window.location.host === \"localhost:80\" || window.location.origin === \"http://localhost\") goHomeLink.href = window.location.origin + \"/index.html\";\n    else goHomeLink.href = window.location.origin;\n};\nconst $54dabcb7a6480b63$export$95df08bae54cb4df = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst $54dabcb7a6480b63$export$2464c9e69777d386 = {\n    audio: {\n        echoCancellation: false,\n        noiseSuppression: false,\n        autoGainControl: false,\n        latency: 0,\n        channelCount: 1\n    }\n};\n\n});\n\nparcelRegister(\"Nsii8\", function(module, exports) {\n\n$parcel$export(module.exports, \"checkIfTermsAccepted\", function () { return $094a86525c89e19a$export$207bec4913bdffa6; });\n$parcel$export(module.exports, \"generateAcceptTermsModal\", function () { return $094a86525c89e19a$export$7ed6abee26b8c64b; });\n\nvar $7hG31 = parcelRequire(\"7hG31\");\nconst $094a86525c89e19a$export$207bec4913bdffa6 = (userprofile, callback)=>{\n    (0, $7hG31.cancelLoader)();\n    callback(userprofile === null || userprofile === void 0 ? void 0 : userprofile.terms_accepted);\n};\nconst $094a86525c89e19a$export$95d7694256f75341 = ()=>{\n    $(\"#acceptTermsModal\").modal({\n        backdrop: \"static\",\n        keyboard: false // to prevent closing with Esc button (if you want this too)\n    });\n    $(\"#acceptTermsModal\").modal(\"show\");\n    document.getElementById(\"buttonAcceptTerms\").onclick = $094a86525c89e19a$var$rqstAcceptTerms;\n    document.getElementById(\"buttonRejectTerms\").onclick = $094a86525c89e19a$var$rqstRejectTerms;\n};\nconst $094a86525c89e19a$var$rqstAcceptTerms = async ()=>{\n    const data = await (0, $7hG31.callJsonApi)(\"/acceptterms\", \"PUT\", null, \"Welcome...\");\n    if (data.ok) $(\"#acceptTermsModal\").modal(\"hide\");\n};\nconst $094a86525c89e19a$var$rqstRejectTerms = async ()=>{\n    const data = await (0, $7hG31.callJsonApi)(\"/rejectterms\", \"PUT\", null, \"Deleting information...\");\n    if (data.ok) {\n        $(\"#acceptTermsModal\").modal(\"hide\");\n        window.location.href = window.location.origin;\n    }\n};\nconst $094a86525c89e19a$export$7ed6abee26b8c64b = (attachToElem)=>{\n    const isModal = document.getElementById(\"acceptTermsModal\");\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`;\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML(\"afterend\", modalDialog);\n    }\n    $094a86525c89e19a$export$95d7694256f75341();\n};\n\n});\n\nparcelRegister(\"d2TTa\", function(module, exports) {\n\n$parcel$export(module.exports, \"getCollections\", function () { return $97f6d097709a8e76$export$a9dbfb18603d6a77; });\n$parcel$export(module.exports, \"getCollectionsError\", function () { return $97f6d097709a8e76$export$66d4708c2e689cee; });\n$parcel$export(module.exports, \"createListCollections\", function () { return $97f6d097709a8e76$export$5a676dd14dd0be2c; });\n\nvar $72lX3 = parcelRequire(\"72lX3\");\n\nvar $lV0Oe = parcelRequire(\"lV0Oe\");\nconst $97f6d097709a8e76$export$a9dbfb18603d6a77 = async ()=>{\n    const response = await fetch((0, $72lX3.ENDPOINT) + \"/mycollections\");\n    let result = null;\n    if (response === null || response === void 0 ? void 0 : response.ok) {\n        const respJson = await response.json();\n        result = respJson;\n    }\n    return result;\n};\nconst $97f6d097709a8e76$export$66d4708c2e689cee = ()=>{\n    (0, $lV0Oe.default).dynamicModalDialog(\"Problem getting collections\", null, \"\", \"Close\", \"Error\", \"bg-danger\");\n};\nconst $97f6d097709a8e76$export$5a676dd14dd0be2c = (collections, listId, coll_id)=>{\n    const theList = collections.all_collections;\n    const listCollContainer = document.getElementById(listId);\n    let listOptions = `<option value='0'>...</option>`;\n    let selected = null;\n    theList.forEach((element)=>{\n        if (element) {\n            if (element.uuid === coll_id) selected = \"selected>\";\n            else selected = null;\n            const template = `<option value='${element.uuid}' ${selected ? selected : \">\"}${element.title}</option>`;\n            listOptions += template;\n        }\n    });\n    const listElelemts = `<select class='custom-select' id='inputGroupSelectCollect'>${listOptions}</select>`;\n    listCollContainer.insertAdjacentHTML(\"afterbegin\", listElelemts);\n};\n\n});\n\n\nvar $72lX3 = parcelRequire(\"72lX3\");\n\nvar $lV0Oe = parcelRequire(\"lV0Oe\");\n\nvar $7hG31 = parcelRequire(\"7hG31\");\n\nvar $7hG31 = parcelRequire(\"7hG31\");\n\nconst $be366c05d924947f$export$184163c68675dcce = (isauth, isuserorcollection)=>{\n    $be366c05d924947f$var$createBreadCrumbNavBar(isauth, isuserorcollection);\n    document.querySelectorAll(\".breadcrumb-item a\").forEach(function(element) {\n        element.addEventListener(\"click\", function(event) {\n            var _document_querySelector;\n            event.preventDefault();\n            (_document_querySelector = document.querySelector(\".active-breadcrumb\")) === null || _document_querySelector === void 0 ? void 0 : _document_querySelector.classList.remove(\"active-breadcrumb\");\n            event.currentTarget.classList.add(\"active-breadcrumb\");\n            let section = event.currentTarget.getAttribute(\"data-section\");\n            $be366c05d924947f$export$ff7962acd6052c28(section, isauth);\n        });\n    });\n};\nconst $be366c05d924947f$var$createBreadCrumbNavBar = (isauth, isuserorcollection)=>{\n    const navBar = document.getElementById(\"breadcrumbnavbar\");\n    let userOptions = \"\";\n    if (isauth.ok) userOptions = `<li class='breadcrumb-item ${isuserorcollection ? \"\" : \"active-breadcrumb\"}' aria-current='page'><a href='#' data-section='my-comp'>My Music</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`;\n    else userOptions = `<li class='breadcrumb-item ${isuserorcollection ? \"\" : \"active-breadcrumb\"}' aria-current='page'><a href='#' data-section='recent-comp'>Recent</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`;\n    navBar.innerHTML = userOptions;\n};\nfunction $be366c05d924947f$export$ff7962acd6052c28(section, isauth) {\n    const url = new URL(window.location.href);\n    url.searchParams.delete(\"userid\");\n    url.searchParams.delete(\"collectionid\");\n    history.replaceState(null, null, url);\n    let withScroll = false;\n    switch(section){\n        case \"recent-comp\":\n            withScroll = true;\n            (0, $03e266e399b535e5$export$8d85b36da8527a05)(withScroll);\n            break;\n        case \"my-comp\":\n            (0, $03e266e399b535e5$export$b99e48ec291af6c0)();\n            break;\n        case \"all-comp\":\n            document.getElementById(\"initialmessage\").classList.remove(\"d-flex\");\n            document.getElementById(\"initialmessage\").hidden = true;\n            if (!isauth.ok) withScroll = true;\n            (0, $03e266e399b535e5$export$556539c2d93a797d)(withScroll);\n            break;\n        default:\n            console.log(\"section default\");\n    }\n}\n\n\n\nvar $Nsii8 = parcelRequire(\"Nsii8\");\n\nlet $919d7978aab43b0b$var$_USERNAME = null;\nconst $919d7978aab43b0b$export$1badf4b56a2f2c08 = (endpoint)=>{\n    let result = false;\n    if (endpoint === \"/mycompositions\" || endpoint.includes(\"/compositionsbyuserid/\") || endpoint.includes(\"/collectionastreebyid/\")) result = true;\n    return result;\n};\nconst $919d7978aab43b0b$var$getCurrentUserName = ()=>{\n    return $919d7978aab43b0b$var$_USERNAME;\n};\nconst $919d7978aab43b0b$export$149136365741a43c = (username)=>{\n    $919d7978aab43b0b$var$_USERNAME = username;\n};\nconst $919d7978aab43b0b$export$a04c3fad920d835e = (endpoint, username)=>{\n    let displayName = false;\n    if (!$919d7978aab43b0b$export$1badf4b56a2f2c08(endpoint)) displayName = true;\n    else displayName = username !== $919d7978aab43b0b$var$getCurrentUserName();\n    return displayName;\n};\nconst $919d7978aab43b0b$var$getGroupsByCollAndUser = (compositionsList)=>{\n    const groupedbycoll = {};\n    const groupedbyuser_aux = {};\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        const userId = composition.user_id;\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else {\n            if (!groupedbyuser_aux[userId]) groupedbyuser_aux[userId] = [];\n            groupedbyuser_aux[userId].push(composition);\n        }\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbyuser_aux: groupedbyuser_aux\n    };\n};\nconst $919d7978aab43b0b$var$getGroupsByCollectionAndSubColl = (compositionsList, parent_coll_id)=>{\n    const groupedbycoll = {};\n    const singlecomps = [];\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        if (collectionId !== null && collectionId !== parent_coll_id) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else singlecomps.push(composition);\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        singlecomps: singlecomps\n    };\n};\nconst $919d7978aab43b0b$var$getGroupsByCollAndCollab = (compositionsList)=>{\n    const groupedbycoll = {};\n    const groupedbycollab = {};\n    const singlecomps = [];\n    compositionsList.forEach((composition)=>{\n        const collectionId = composition.collection_uid;\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) groupedbycoll[collectionId] = [];\n            groupedbycoll[collectionId].push(composition);\n        } else if (composition.contributors.length) {\n            if (!groupedbycollab[\"collabs\"]) groupedbycollab[\"collabs\"] = [];\n            groupedbycollab[\"collabs\"].push(composition);\n        } else singlecomps.push(composition);\n    });\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbycollab: groupedbycollab,\n        singlecomps: singlecomps\n    };\n};\n// INFO: a group for a User is made if he has 2 or more compositions without Collection\nconst $919d7978aab43b0b$var$getFinalGroupByUserAndSingleComp = (groupedbyuser_aux)=>{\n    const groupedbyuser_final = {};\n    const singlecomps = [];\n    for(const elem in groupedbyuser_aux)if (groupedbyuser_aux[elem].length === 1) singlecomps.push(groupedbyuser_aux[elem][0]);\n    else {\n        if (!groupedbyuser_final[elem]) groupedbyuser_final[elem] = [];\n        groupedbyuser_final[elem] = groupedbyuser_aux[elem];\n    }\n    return {\n        singlecomps: singlecomps,\n        groupedbyuser_final: groupedbyuser_final\n    };\n};\nconst $919d7978aab43b0b$export$2095d3815b0f7547 = (compositionsList)=>{\n    const { groupedbycoll: groupedbycoll, groupedbyuser_aux: groupedbyuser_aux } = $919d7978aab43b0b$var$getGroupsByCollAndUser(compositionsList);\n    const { singlecomps: singlecomps, groupedbyuser_final: groupedbyuser_final } = $919d7978aab43b0b$var$getFinalGroupByUserAndSingleComp(groupedbyuser_aux);\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbyuser_final: groupedbyuser_final,\n        singlecomps: singlecomps\n    };\n};\nconst $919d7978aab43b0b$export$6d37f804b553eac7 = (compositionsList)=>{\n    const { groupedbycoll: groupedbycoll, groupedbycollab: groupedbycollab, singlecomps: singlecomps } = $919d7978aab43b0b$var$getGroupsByCollAndCollab(compositionsList);\n    return {\n        groupedbycoll: groupedbycoll,\n        groupedbycollab: groupedbycollab,\n        singlecomps: singlecomps\n    };\n};\nconst $919d7978aab43b0b$export$46ab7a802f6f7711 = (compositionsList, parent_coll_id)=>{\n    const { groupedbycoll: groupedbycoll, singlecomps: singlecomps } = $919d7978aab43b0b$var$getGroupsByCollectionAndSubColl(compositionsList, parent_coll_id);\n    return {\n        groupedbycoll: groupedbycoll,\n        singlecomps: singlecomps\n    };\n};\nconst $919d7978aab43b0b$export$3763f15547b21628 = (compositionsList)=>{\n    const tracksList = [];\n    const compositionsDictionary = {};\n    const tracksDictionary = {};\n    compositionsList.forEach((composition)=>{\n        compositionsDictionary[composition.uuid] = composition;\n        if (composition === null || composition === void 0 ? void 0 : composition.tracks.length) {\n            for(let i = 0; i < composition.tracks.length; i++){\n                const currentTrack = composition.tracks[i];\n                currentTrack[\"comp_uuid\"] = composition.uuid;\n                tracksDictionary[currentTrack.uuid] = currentTrack;\n            }\n            tracksList.push(...composition.tracks);\n        }\n    });\n    return {\n        tracksList: tracksList,\n        compositionsDictionary: compositionsDictionary,\n        tracksDictionary: tracksDictionary\n    };\n};\n\n\n\nvar $7hG31 = parcelRequire(\"7hG31\");\nvar $a15e89031de1d32a$exports = {};\n\n$a15e89031de1d32a$exports = (parcelRequire(\"luG8Y\")).getBundleURL(\"1T7VR\") + \"static/videos/compress_home_page_video.mp4\";\n\n\nconst $3272937b030a975a$var$homeVideoUrl = new URL($a15e89031de1d32a$exports);\nconst $3272937b030a975a$var$CARD_BADGE_STYLE = {\n    \"coll\": \"badge-collection\",\n    \"user\": \"badge-warning\",\n    \"collab\": \"badge-collab\"\n};\nconst $3272937b030a975a$var$CARD_BORDER_STYLE = {\n    \"coll\": \"border-collection\",\n    \"user\": \"border-warning\",\n    \"collab\": \"border-collab\"\n};\nconst $3272937b030a975a$var$URI_PAGE = {\n    \"coll\": (0, $7hG31.uriCollectionPage),\n    \"user\": (0, $7hG31.uriUserPage)\n};\n//const WELCOME_TEXT = 'We present Hi-Audio Online Platform a web application for musicians, researchers and an open community of enthusiasts of audio and music with a view to build a public database of music recordings from a wide variety of styles and different cultures.'\nconst $3272937b030a975a$var$WELCOME_VIDEO = `<div id=\"landing-video-container\" class=\"fullscreen-video-container\">\n    <video playsinline autoplay loop muted>\n      <source src=\"${$3272937b030a975a$var$homeVideoUrl}\">\n    </video>  \n  <div class='fullscreen-video-content'>\n    <div class=\"typewriter\">\n      <h1>Welcome!</h1>      \n    </div>\n    <div class=\"h-100 d-flex\">\n      <div class=\"m-auto\">\n        <a id=\"start-link\" class=\"btn btn-link\" href=\"/login.html\" role=\"button\"><b>LET'S JAM?</b></a>\n      </div>\n    </div>    \n  </div>\n</div>`;\nconst $3272937b030a975a$export$c1504dbc5bdba629 = ()=>{\n    document.getElementById(\"userlogin\").innerHTML = `<li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/login.html'>Register / Login</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${0, $03e266e399b535e5$export$5e4b5ab8660ba9d5}demopage'>Test DAW</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/static/howto.html'>How-To</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'><b>News<b></a>\n    </li>\n    `;\n    document.getElementById(\"useroptions\").innerHTML = `<li class='nav-item'>\n      <a class='nav-link' href='${window.location.origin + \"/profile.html\"}'>Profile <i id='display_profile_name'></i></a>\n    </li>\n    <li class='nav-item'>\n          <a class='nav-link' href='#' id='createNewButton' data-toggle='modal' data-target='#newMusicModal'>/ Create new</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openMyCollectionsButton' data-toggle='modal' data-target='#editCollectionsModal'>/ My Collections</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='${window.location.origin + \"/static/howto.html\"}'>/ How-to</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'>/ News</a>\n    </li>\n    `;\n    $3272937b030a975a$var$handleNewsPopUpClose();\n};\nconst $3272937b030a975a$var$handleNewsPopUpClose = ()=>{\n    $(\"#newsModal\").on(\"hidden.bs.modal\", function(event) {\n        const videoPromo = document.getElementById(\"promo-video\");\n        if (!videoPromo.paused) videoPromo.pause();\n    });\n};\nconst $3272937b030a975a$export$bca9dffb57f7792b = (numberGroupsByCollections, numberGroupsCustom, numberSinglComp, endpoint, totalcomps)=>{\n    const displayGroupsByLabel = numberGroupsByCollections || !(0, $919d7978aab43b0b$export$1badf4b56a2f2c08)(endpoint) && numberGroupsCustom || numberSinglComp;\n    return `<ul class=\"nav justify-content-end\">\n              ${displayGroupsByLabel ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Groups by:&nbsp;</span></h4></li>' : \"\"}\n              ${numberGroupsByCollections ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-collection\">Collections&nbsp;<span class=\"badge badge-light\">' + numberGroupsByCollections + \"</span></span></h4></li>\" : \"\"}            \n              ${!(0, $919d7978aab43b0b$export$1badf4b56a2f2c08)(endpoint) && numberGroupsCustom ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-warning\">Users&nbsp;<span class=\"badge badge-light\">' + numberGroupsCustom + \"</span></span></h4></li>\" : \"\"}\n              ${numberSinglComp ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-success\">Singles&nbsp;<span class=\"badge badge-light\">' + numberSinglComp + \"</span></span></h4></li>\" : \"\"}\n              <li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Total compositions:&nbsp;</span><span class=\"badge badge-light\">${totalcomps}</span></h4></li>\n            </ul>`;\n};\nconst $3272937b030a975a$export$1f60eb8703988013 = (listElelemts, legendButtons)=>{\n    document.getElementById(\"grid\").innerHTML = \"\";\n    document.getElementById(\"grid\").insertAdjacentHTML(\"afterbegin\", listElelemts);\n    document.getElementById(\"legendbuttons\").innerHTML = \"\";\n    document.getElementById(\"legendbuttons\").insertAdjacentHTML(\"afterbegin\", legendButtons);\n    document.getElementById(\"searchInput\").removeAttribute(\"disabled\");\n};\nconst $3272937b030a975a$export$971becedf6ebeceb = (element, endpoint)=>{\n    var _element_tracks_, _element_tracks, _element_tracks1;\n    const displayName = (0, $919d7978aab43b0b$export$a04c3fad920d835e)(endpoint, element.username);\n    const displayNumCollabs = element.contributors.length;\n    const last_track = element === null || element === void 0 ? void 0 : (_element_tracks_ = element.tracks[(element === null || element === void 0 ? void 0 : element.tracks.length) - 1]) === null || _element_tracks_ === void 0 ? void 0 : _element_tracks_.uuid;\n    return `<div class='card border-success'>                       \n              <div class=\"card-body\">\n              ${(0, $03e266e399b535e5$export$4cd34456ac1eb639) ? `<span class=\"badge ${(0, $7hG31.PRIVACY_BADGE_STYLE)[element.privacy]}\">${(0, $7hG31.PRIVACY_BADGE_TEXT)[element.privacy]}</span>` : \"\"}\n              ${element.opentocontrib ? '<p class=\"badge badge-info\">OPEN TO CONTRIB</p>' : \"\"}\n              ${element.is_template ? '<p class=\"badge badge-template\">TEMPLATE</p>' : \"\"}  \n                  <div>\n                    <p class=\"list-group-item-heading\">  \n                      <a href='${(0, $03e266e399b535e5$export$5e4b5ab8660ba9d5) + element.uuid}' class='card-url'>\n                        <h5 class='card-title'>${element.title}</h5>\n                      </a>\n                    </p>\n                    <p>${displayName ? `<span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-user'></i>&nbsp;\n                        <a href='${(0, $7hG31.uriUserPage) + element.owner_uuid}' class='card-url'>\n                          ${element.username}&nbsp;\n                        </a>\n                      </span>` : \"\"}\n                    </p>\n                    <p class='text-black-50'>${displayNumCollabs ? \"Collaborators: \" + displayNumCollabs : \"\"}</p>\n                    <p class='card-text text-truncate'>${element.description || \"\"}</p>\n                    ${((_element_tracks = element.tracks) === null || _element_tracks === void 0 ? void 0 : _element_tracks.length) ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : \"\"}>\n                      <i class='fa fa-play'>&nbsp;</i>Play last added track </span>&nbsp;` : \"\"}\n                    <span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-music'></i>&nbsp;${\"Tracks: \" + ((_element_tracks1 = element.tracks) === null || _element_tracks1 === void 0 ? void 0 : _element_tracks1.length)}\n                    </span>\n                  </div>                \n              </div>            \n          </div>`;\n};\nconst $3272937b030a975a$export$cbdc54c51b649c98 = (item, typebadge, endpoint)=>{\n    var _item_tracks_, _item_tracks, _item_tracks1;\n    const displayName = (0, $919d7978aab43b0b$export$a04c3fad920d835e)(endpoint, item.username);\n    const displayNumCollabs = item.contributors.length;\n    const last_track = item === null || item === void 0 ? void 0 : (_item_tracks_ = item.tracks[(item === null || item === void 0 ? void 0 : item.tracks.length) - 1]) === null || _item_tracks_ === void 0 ? void 0 : _item_tracks_.uuid;\n    return `<div class=\"list-group-item \">\n              ${(0, $03e266e399b535e5$export$4cd34456ac1eb639) ? `<span class=\"badge ${(0, $7hG31.PRIVACY_BADGE_STYLE)[item.privacy]}\">${(0, $7hG31.PRIVACY_BADGE_TEXT)[item.privacy]}</span>` : \"\"}\n              ${item.opentocontrib ? '<span class=\"badge badge-info\">OPEN TO CONTRIB</span>' : \"\"}\n              ${item.is_template ? '<span class=\"badge badge-template\">TEMPLATE</span>' : \"\"}  \n              <p class=\"list-group-item-heading\">\n                <a href='${(0, $03e266e399b535e5$export$5e4b5ab8660ba9d5) + item.uuid}' class='card-url'>\n                    <h5 class='card-title'>${item.title}</h5>\n                </a>\n              </p>\n              ${typebadge !== \"user\" && displayName ? '<p><span class=\"d-inline-block text-truncate\" style=\"max-width: 220px;\"><i class=\"fa fa-user\"></i>&nbsp;<a href=' + (0, $7hG31.uriUserPage) + item.owner_uuid + ' class=\"card-url\">' + item.username + \"&nbsp;\" + \"</a>\" + \"</span></p>\" : \"\"}\n              <p class='text-black-50'>${displayNumCollabs ? \"Collaborators: \" + displayNumCollabs : \"\"}</p>\n              <p class=\"list-group-item-text text-truncate\">\n                ${item.description || \"\"}\n              </p>\n              ${((_item_tracks = item.tracks) === null || _item_tracks === void 0 ? void 0 : _item_tracks.length) ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : \"\"}>\n                <i class='fa fa-play'>&nbsp;</i>Play last added track \n              </span>&nbsp;` : \"\"}\n              <span class=\"d-inline-block text-truncate\" style=\"max-width: 200px;\">\n                <i class='fa fa-music'></i>&nbsp;${\"Tracks: \" + ((_item_tracks1 = item.tracks) === null || _item_tracks1 === void 0 ? void 0 : _item_tracks1.length)}\n              </span>\n            </div>`;\n};\nconst $3272937b030a975a$export$da2a595be284078a = (typebadge, numitems, groupTitle, groupId, listgroup)=>{\n    const badegstyle = $3272937b030a975a$var$CARD_BADGE_STYLE[typebadge];\n    const borderstyle = $3272937b030a975a$var$CARD_BORDER_STYLE[typebadge];\n    const url = $3272937b030a975a$var$URI_PAGE[typebadge];\n    const badgeDisplayed = `<span class=\"badge ${badegstyle} d-inline-block text-truncate\" style=\"max-width:85%;\">\n                              <span class=\"badge badge-light\">${numitems}</span>&nbsp;\n                              ${url ? `<a href=${url + groupId} class=\"card-header-url\">${groupTitle}</a>` : `${groupTitle}`}                              \n                          </span>`;\n    return `<div class='card ${borderstyle}'>                        \n              <h4>${badgeDisplayed}</h4>        \n              <div class=\"card-body\">\n                <div class=\"list-group border\">              \n                  ${listgroup}\n                </div>\n              </div>\n            </div>`;\n};\nconst $3272937b030a975a$export$2ccaa4a069104255 = (hidetext, withScroll)=>{\n    var _welcomecontainer_lastChild, _welcomecontainer_lastChild1;\n    const welcomecontainer = document.getElementById(\"welcomecontainer\");\n    const videoContainer = document.getElementById(\"landing-video-container\");\n    if (((_welcomecontainer_lastChild = welcomecontainer.lastChild) === null || _welcomecontainer_lastChild === void 0 ? void 0 : _welcomecontainer_lastChild.id) && ((_welcomecontainer_lastChild1 = welcomecontainer.lastChild) === null || _welcomecontainer_lastChild1 === void 0 ? void 0 : _welcomecontainer_lastChild1.id) !== \"welcometext\") welcomecontainer.removeChild(welcomecontainer.lastChild);\n    if (!hidetext && !welcomecontainer.lastChild && !videoContainer) {\n        const welcometextelem = document.createElement(\"div\");\n        welcometextelem.id = \"welcometext\";\n        welcometextelem.innerHTML = (0, $03e266e399b535e5$export$4cd34456ac1eb639) ? \"\" : `${$3272937b030a975a$var$WELCOME_VIDEO}`;\n        document.getElementById(\"welcomecontainer\").appendChild(welcometextelem);\n    }\n    if (withScroll) document.getElementById(\"grid\").scrollIntoView({\n        behavior: \"smooth\"\n    });\n};\nconst $3272937b030a975a$export$206832d47f4d1079 = (collectiontitle, username, owner_uuid)=>{\n    $3272937b030a975a$export$2ccaa4a069104255(true);\n    const collectionInfoContainer = document.createElement(\"div\");\n    collectionInfoContainer.id = \"infocontainer\";\n    collectionInfoContainer.innerHTML = `<div class=\"card border-collection mb-3\">\n                                          <div class=\"card-header bg-transparent border-collection\"><b>Collection</b></div>\n                                          <div class=\"card-body text-dark\">\n                                            <h5 class=\"card-title\">${collectiontitle}</h5>\n                                            <p class=\"card-text\" style=\"width:300px;\">Owner: <a href=${(0, $7hG31.uriUserPage) + owner_uuid} class=\"card-url\">${username}</a></p>\n                                          </div>\n                                        </div>`;\n    document.getElementById(\"welcomecontainer\").appendChild(collectionInfoContainer);\n};\nconst $3272937b030a975a$export$b8abf8ca7249a7d2 = (username, useruid)=>{\n    $3272937b030a975a$export$2ccaa4a069104255(true);\n    const userInfoContainer = document.createElement(\"div\");\n    userInfoContainer.id = \"infocontainer\";\n    userInfoContainer.innerHTML = `<div class=\"card mb-3\" style=\"max-width: 540px;\">\n                                    <div class=\"row no-gutters\">\n                                      <div class=\"col-md-4\">\n                                        <img class=\"img-fluid hidden-first\" src=\"https://picsum.photos/seed/${useruid}/200\" alt=\"User Picture\" width=\"200\" height=\"200\">\n                                      </div>\n                                      <div class=\"col-md-8\">\n                                        <div class=\"card-body\">\n                                          <h5 class=\"card-title\">User</h5>\n                                          <p class=\"card-text\" style=\"width:300px;\">${username ? `${username}` : \"\"}</p>                                        \n                                          <p class=\"card-text\"><small class=\"text-muted\"></small></p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>`;\n    document.getElementById(\"welcomecontainer\").appendChild(userInfoContainer);\n};\n\n\n\n\n/** A simple event emitter that can be used to listen to and emit events. */ class $331a6e3221892ed2$var$EventEmitter {\n    /** Subscribe to an event. Returns an unsubscribe function. */ on(event, listener, options) {\n        if (!this.listeners[event]) this.listeners[event] = new Set();\n        this.listeners[event].add(listener);\n        if (options === null || options === void 0 ? void 0 : options.once) {\n            const unsubscribeOnce = ()=>{\n                this.un(event, unsubscribeOnce);\n                this.un(event, listener);\n            };\n            this.on(event, unsubscribeOnce);\n            return unsubscribeOnce;\n        }\n        return ()=>this.un(event, listener);\n    }\n    /** Unsubscribe from an event */ un(event, listener) {\n        var _a;\n        (_a = this.listeners[event]) === null || _a === void 0 || _a.delete(listener);\n    }\n    /** Subscribe to an event only once */ once(event, listener) {\n        return this.on(event, listener, {\n            once: true\n        });\n    }\n    /** Clear all events */ unAll() {\n        this.listeners = {};\n    }\n    /** Emit an event */ emit(eventName, ...args) {\n        if (this.listeners[eventName]) this.listeners[eventName].forEach((listener)=>listener(...args));\n    }\n    constructor(){\n        this.listeners = {};\n    }\n}\nvar $331a6e3221892ed2$export$2e2bcd8739ae039 = $331a6e3221892ed2$var$EventEmitter;\n\n\nclass $c1286b79c6dc200b$export$af2591e7a96958a7 extends (0, $331a6e3221892ed2$export$2e2bcd8739ae039) {\n    /** Called after this.wavesurfer is available */ onInit() {\n        return;\n    }\n    /** Do not call directly, only called by WavesSurfer internally */ _init(wavesurfer) {\n        this.wavesurfer = wavesurfer;\n        this.onInit();\n    }\n    /** Destroy the plugin and unsubscribe from all events */ destroy() {\n        this.emit(\"destroy\");\n        this.subscriptions.forEach((unsubscribe)=>unsubscribe());\n    }\n    /** Create a plugin instance */ constructor(options){\n        super();\n        this.subscriptions = [];\n        this.options = options;\n    }\n}\nvar $c1286b79c6dc200b$export$2e2bcd8739ae039 = $c1286b79c6dc200b$export$af2591e7a96958a7;\n\n\nvar $4db74b83ada4d8f4$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/** Decode an array buffer into an audio buffer */ function $4db74b83ada4d8f4$var$decode(audioData, sampleRate) {\n    return $4db74b83ada4d8f4$var$__awaiter(this, void 0, void 0, function*() {\n        const audioCtx = new AudioContext({\n            sampleRate: sampleRate\n        });\n        const decode = audioCtx.decodeAudioData(audioData);\n        return decode.finally(()=>audioCtx.close());\n    });\n}\n/** Normalize peaks to -1..1 */ function $4db74b83ada4d8f4$var$normalize(channelData) {\n    const firstChannel = channelData[0];\n    if (firstChannel.some((n)=>n > 1 || n < -1)) {\n        const length = firstChannel.length;\n        let max = 0;\n        for(let i = 0; i < length; i++){\n            const absN = Math.abs(firstChannel[i]);\n            if (absN > max) max = absN;\n        }\n        for (const channel of channelData)for(let i = 0; i < length; i++)channel[i] /= max;\n    }\n    return channelData;\n}\n/** Create an audio buffer from pre-decoded audio data */ function $4db74b83ada4d8f4$var$createBuffer(channelData, duration) {\n    // If a single array of numbers is passed, make it an array of arrays\n    if (typeof channelData[0] === \"number\") channelData = [\n        channelData\n    ];\n    // Normalize to -1..1\n    $4db74b83ada4d8f4$var$normalize(channelData);\n    return {\n        duration: duration,\n        length: channelData[0].length,\n        sampleRate: channelData[0].length / duration,\n        numberOfChannels: channelData.length,\n        getChannelData: (i)=>channelData === null || channelData === void 0 ? void 0 : channelData[i],\n        copyFromChannel: AudioBuffer.prototype.copyFromChannel,\n        copyToChannel: AudioBuffer.prototype.copyToChannel\n    };\n}\nconst $4db74b83ada4d8f4$var$Decoder = {\n    decode: $4db74b83ada4d8f4$var$decode,\n    createBuffer: $4db74b83ada4d8f4$var$createBuffer\n};\nvar $4db74b83ada4d8f4$export$2e2bcd8739ae039 = $4db74b83ada4d8f4$var$Decoder;\n\n\nvar $3456c52de8aa06cd$exports = {};\n\n$parcel$defineInteropFlag($3456c52de8aa06cd$exports);\n\n$parcel$export($3456c52de8aa06cd$exports, \"createElement\", function () { return $3456c52de8aa06cd$export$c8a8987d4410bf2d; });\n$parcel$export($3456c52de8aa06cd$exports, \"default\", function () { return $3456c52de8aa06cd$export$2e2bcd8739ae039; });\nfunction $3456c52de8aa06cd$var$renderNode(tagName, content) {\n    const element = content.xmlns ? document.createElementNS(content.xmlns, tagName) : document.createElement(tagName);\n    for (const [key, value] of Object.entries(content)){\n        if (key === \"children\") {\n            for (const [key, value] of Object.entries(content))if (typeof value === \"string\") element.appendChild(document.createTextNode(value));\n            else element.appendChild($3456c52de8aa06cd$var$renderNode(key, value));\n        } else if (key === \"style\") Object.assign(element.style, value);\n        else if (key === \"textContent\") element.textContent = value;\n        else element.setAttribute(key, value.toString());\n    }\n    return element;\n}\nfunction $3456c52de8aa06cd$export$c8a8987d4410bf2d(tagName, content, container) {\n    const el = $3456c52de8aa06cd$var$renderNode(tagName, content || {});\n    container === null || container === void 0 || container.appendChild(el);\n    return el;\n}\nvar $3456c52de8aa06cd$export$2e2bcd8739ae039 = $3456c52de8aa06cd$export$c8a8987d4410bf2d;\n\n\nvar $48b85dfa3fa6d87e$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction $48b85dfa3fa6d87e$var$watchProgress(response, progressCallback) {\n    return $48b85dfa3fa6d87e$var$__awaiter(this, void 0, void 0, function*() {\n        if (!response.body || !response.headers) return;\n        const reader = response.body.getReader();\n        const contentLength = Number(response.headers.get(\"Content-Length\")) || 0;\n        let receivedLength = 0;\n        // Process the data\n        const processChunk = (value)=>$48b85dfa3fa6d87e$var$__awaiter(this, void 0, void 0, function*() {\n                // Add to the received length\n                receivedLength += (value === null || value === void 0 ? void 0 : value.length) || 0;\n                const percentage = Math.round(receivedLength / contentLength * 100);\n                progressCallback(percentage);\n            });\n        const read = ()=>$48b85dfa3fa6d87e$var$__awaiter(this, void 0, void 0, function*() {\n                let data;\n                try {\n                    data = yield reader.read();\n                } catch (_a) {\n                    // Ignore errors because we can only handle the main response\n                    return;\n                }\n                // Continue reading data until done\n                if (!data.done) {\n                    processChunk(data.value);\n                    yield read();\n                }\n            });\n        read();\n    });\n}\nfunction $48b85dfa3fa6d87e$var$fetchBlob(url, progressCallback, requestInit) {\n    return $48b85dfa3fa6d87e$var$__awaiter(this, void 0, void 0, function*() {\n        // Fetch the resource\n        const response = yield fetch(url, requestInit);\n        if (response.status >= 400) throw new Error(`Failed to fetch ${url}: ${response.status} (${response.statusText})`);\n        // Read the data to track progress\n        $48b85dfa3fa6d87e$var$watchProgress(response.clone(), progressCallback);\n        return response.blob();\n    });\n}\nconst $48b85dfa3fa6d87e$var$Fetcher = {\n    fetchBlob: $48b85dfa3fa6d87e$var$fetchBlob\n};\nvar $48b85dfa3fa6d87e$export$2e2bcd8739ae039 = $48b85dfa3fa6d87e$var$Fetcher;\n\n\n\nvar $1abdbc9c88264fd7$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass $1abdbc9c88264fd7$var$Player extends (0, $331a6e3221892ed2$export$2e2bcd8739ae039) {\n    onMediaEvent(event, callback, options) {\n        this.media.addEventListener(event, callback, options);\n        return ()=>this.media.removeEventListener(event, callback, options);\n    }\n    getSrc() {\n        return this.media.currentSrc || this.media.src || \"\";\n    }\n    revokeSrc() {\n        const src = this.getSrc();\n        if (src.startsWith(\"blob:\")) URL.revokeObjectURL(src);\n    }\n    canPlayType(type) {\n        return this.media.canPlayType(type) !== \"\";\n    }\n    setSrc(url, blob) {\n        const src = this.getSrc();\n        if (url && src === url) return;\n        this.revokeSrc();\n        const newSrc = blob instanceof Blob && (this.canPlayType(blob.type) || !url) ? URL.createObjectURL(blob) : url;\n        try {\n            this.media.src = newSrc;\n        } catch (e) {\n            this.media.src = url;\n        }\n    }\n    destroy() {\n        this.media.pause();\n        if (this.isExternalMedia) return;\n        this.media.remove();\n        this.revokeSrc();\n        this.media.src = \"\";\n        // Load resets the media element to its initial state\n        this.media.load();\n    }\n    setMediaElement(element) {\n        this.media = element;\n    }\n    /** Start playing the audio */ play() {\n        return $1abdbc9c88264fd7$var$__awaiter(this, void 0, void 0, function*() {\n            return this.media.play();\n        });\n    }\n    /** Pause the audio */ pause() {\n        this.media.pause();\n    }\n    /** Check if the audio is playing */ isPlaying() {\n        return !this.media.paused && !this.media.ended;\n    }\n    /** Jump to a specific time in the audio (in seconds) */ setTime(time) {\n        this.media.currentTime = time;\n    }\n    /** Get the duration of the audio in seconds */ getDuration() {\n        return this.media.duration;\n    }\n    /** Get the current audio position in seconds */ getCurrentTime() {\n        return this.media.currentTime;\n    }\n    /** Get the audio volume */ getVolume() {\n        return this.media.volume;\n    }\n    /** Set the audio volume */ setVolume(volume) {\n        this.media.volume = volume;\n    }\n    /** Get the audio muted state */ getMuted() {\n        return this.media.muted;\n    }\n    /** Mute or unmute the audio */ setMuted(muted) {\n        this.media.muted = muted;\n    }\n    /** Get the playback speed */ getPlaybackRate() {\n        return this.media.playbackRate;\n    }\n    /** Check if the audio is seeking */ isSeeking() {\n        return this.media.seeking;\n    }\n    /** Set the playback speed, pass an optional false to NOT preserve the pitch */ setPlaybackRate(rate, preservePitch) {\n        // preservePitch is true by default in most browsers\n        if (preservePitch != null) this.media.preservesPitch = preservePitch;\n        this.media.playbackRate = rate;\n    }\n    /** Get the HTML media element */ getMediaElement() {\n        return this.media;\n    }\n    /** Set a sink id to change the audio output device */ setSinkId(sinkId) {\n        // See https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId\n        const media = this.media;\n        return media.setSinkId(sinkId);\n    }\n    constructor(options){\n        super();\n        this.isExternalMedia = false;\n        if (options.media) {\n            this.media = options.media;\n            this.isExternalMedia = true;\n        } else this.media = document.createElement(\"audio\");\n        // Controls\n        if (options.mediaControls) this.media.controls = true;\n        // Autoplay\n        if (options.autoplay) this.media.autoplay = true;\n        // Speed\n        if (options.playbackRate != null) this.onMediaEvent(\"canplay\", ()=>{\n            if (options.playbackRate != null) this.media.playbackRate = options.playbackRate;\n        }, {\n            once: true\n        });\n    }\n}\nvar $1abdbc9c88264fd7$export$2e2bcd8739ae039 = $1abdbc9c88264fd7$var$Player;\n\n\nfunction $7c8bcfef4fb8203a$export$ddfd007dd16e7e72(element, onDrag, onStart, onEnd, threshold = 3, mouseButton = 0, touchDelay = 100) {\n    if (!element) return ()=>void 0;\n    const isTouchDevice = matchMedia(\"(pointer: coarse)\").matches;\n    let unsubscribeDocument = ()=>void 0;\n    const onPointerDown = (event)=>{\n        if (event.button !== mouseButton) return;\n        event.preventDefault();\n        event.stopPropagation();\n        let startX = event.clientX;\n        let startY = event.clientY;\n        let isDragging = false;\n        const touchStartTime = Date.now();\n        const onPointerMove = (event)=>{\n            event.preventDefault();\n            event.stopPropagation();\n            if (isTouchDevice && Date.now() - touchStartTime < touchDelay) return;\n            const x = event.clientX;\n            const y = event.clientY;\n            const dx = x - startX;\n            const dy = y - startY;\n            if (isDragging || Math.abs(dx) > threshold || Math.abs(dy) > threshold) {\n                const rect = element.getBoundingClientRect();\n                const { left: left, top: top } = rect;\n                if (!isDragging) {\n                    onStart === null || onStart === void 0 || onStart(startX - left, startY - top);\n                    isDragging = true;\n                }\n                onDrag(dx, dy, x - left, y - top);\n                startX = x;\n                startY = y;\n            }\n        };\n        const onPointerUp = (event)=>{\n            if (isDragging) {\n                const x = event.clientX;\n                const y = event.clientY;\n                const rect = element.getBoundingClientRect();\n                const { left: left, top: top } = rect;\n                onEnd === null || onEnd === void 0 || onEnd(x - left, y - top);\n            }\n            unsubscribeDocument();\n        };\n        const onPointerLeave = (e)=>{\n            // Listen to events only on the document and not on inner elements\n            if (!e.relatedTarget || e.relatedTarget === document.documentElement) onPointerUp(e);\n        };\n        const onClick = (event)=>{\n            if (isDragging) {\n                event.stopPropagation();\n                event.preventDefault();\n            }\n        };\n        const onTouchMove = (event)=>{\n            if (isDragging) event.preventDefault();\n        };\n        document.addEventListener(\"pointermove\", onPointerMove);\n        document.addEventListener(\"pointerup\", onPointerUp);\n        document.addEventListener(\"pointerout\", onPointerLeave);\n        document.addEventListener(\"pointercancel\", onPointerLeave);\n        document.addEventListener(\"touchmove\", onTouchMove, {\n            passive: false\n        });\n        document.addEventListener(\"click\", onClick, {\n            capture: true\n        });\n        unsubscribeDocument = ()=>{\n            document.removeEventListener(\"pointermove\", onPointerMove);\n            document.removeEventListener(\"pointerup\", onPointerUp);\n            document.removeEventListener(\"pointerout\", onPointerLeave);\n            document.removeEventListener(\"pointercancel\", onPointerLeave);\n            document.removeEventListener(\"touchmove\", onTouchMove);\n            setTimeout(()=>{\n                document.removeEventListener(\"click\", onClick, {\n                    capture: true\n                });\n            }, 10);\n        };\n    };\n    element.addEventListener(\"pointerdown\", onPointerDown);\n    return ()=>{\n        unsubscribeDocument();\n        element.removeEventListener(\"pointerdown\", onPointerDown);\n    };\n}\n\n\n\nvar $9c44306aa0ec83f4$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $9c44306aa0ec83f4$var$__rest = undefined && undefined.__rest || function(s, e) {\n    var t = {};\n    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") {\n        for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++)if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n};\nclass $9c44306aa0ec83f4$var$Renderer extends (0, $331a6e3221892ed2$export$2e2bcd8739ae039) {\n    parentFromOptionsContainer(container) {\n        let parent;\n        if (typeof container === \"string\") parent = document.querySelector(container);\n        else if (container instanceof HTMLElement) parent = container;\n        if (!parent) throw new Error(\"Container not found\");\n        return parent;\n    }\n    initEvents() {\n        const getClickPosition = (e)=>{\n            const rect = this.wrapper.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            const relativeX = x / rect.width;\n            const relativeY = y / rect.height;\n            return [\n                relativeX,\n                relativeY\n            ];\n        };\n        // Add a click listener\n        this.wrapper.addEventListener(\"click\", (e)=>{\n            const [x, y] = getClickPosition(e);\n            this.emit(\"click\", x, y);\n        });\n        // Add a double click listener\n        this.wrapper.addEventListener(\"dblclick\", (e)=>{\n            const [x, y] = getClickPosition(e);\n            this.emit(\"dblclick\", x, y);\n        });\n        // Drag\n        if (this.options.dragToSeek === true || typeof this.options.dragToSeek === \"object\") this.initDrag();\n        // Add a scroll listener\n        this.scrollContainer.addEventListener(\"scroll\", ()=>{\n            const { scrollLeft: scrollLeft, scrollWidth: scrollWidth, clientWidth: clientWidth } = this.scrollContainer;\n            const startX = scrollLeft / scrollWidth;\n            const endX = (scrollLeft + clientWidth) / scrollWidth;\n            this.emit(\"scroll\", startX, endX, scrollLeft, scrollLeft + clientWidth);\n        });\n        // Re-render the waveform on container resize\n        if (typeof ResizeObserver === \"function\") {\n            const delay = this.createDelay(100);\n            this.resizeObserver = new ResizeObserver(()=>{\n                delay().then(()=>this.onContainerResize()).catch(()=>undefined);\n            });\n            this.resizeObserver.observe(this.scrollContainer);\n        }\n    }\n    onContainerResize() {\n        const width = this.parent.clientWidth;\n        if (width === this.lastContainerWidth && this.options.height !== \"auto\") return;\n        this.lastContainerWidth = width;\n        this.reRender();\n    }\n    initDrag() {\n        this.subscriptions.push((0, $7c8bcfef4fb8203a$export$ddfd007dd16e7e72)(this.wrapper, // On drag\n        (_, __, x)=>{\n            this.emit(\"drag\", Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }, // On start drag\n        (x)=>{\n            this.isDragging = true;\n            this.emit(\"dragstart\", Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }, // On end drag\n        (x)=>{\n            this.isDragging = false;\n            this.emit(\"dragend\", Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }));\n    }\n    getHeight(optionsHeight, optionsSplitChannel) {\n        var _a;\n        const defaultHeight = 128;\n        const numberOfChannels = ((_a = this.audioData) === null || _a === void 0 ? void 0 : _a.numberOfChannels) || 1;\n        if (optionsHeight == null) return defaultHeight;\n        if (!isNaN(Number(optionsHeight))) return Number(optionsHeight);\n        if (optionsHeight === \"auto\") {\n            const height = this.parent.clientHeight || defaultHeight;\n            if (optionsSplitChannel === null || optionsSplitChannel === void 0 ? void 0 : optionsSplitChannel.every((channel)=>!channel.overlay)) return height / numberOfChannels;\n            return height;\n        }\n        return defaultHeight;\n    }\n    initHtml() {\n        const div = document.createElement(\"div\");\n        const shadow = div.attachShadow({\n            mode: \"open\"\n        });\n        const cspNonce = this.options.cspNonce && typeof this.options.cspNonce === \"string\" ? this.options.cspNonce.replace(/\"/g, \"\") : \"\";\n        shadow.innerHTML = `\n      <style${cspNonce ? ` nonce=\"${cspNonce}\"` : \"\"}>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight(this.options.height, this.options.splitChannels)}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class=\"scroll\" part=\"scroll\">\n        <div class=\"wrapper\" part=\"wrapper\">\n          <div class=\"canvases\" part=\"canvases\"></div>\n          <div class=\"progress\" part=\"progress\"></div>\n          <div class=\"cursor\" part=\"cursor\"></div>\n        </div>\n      </div>\n    `;\n        return [\n            div,\n            shadow\n        ];\n    }\n    /** Wavesurfer itself calls this method. Do not call it manually. */ setOptions(options) {\n        if (this.options.container !== options.container) {\n            const newParent = this.parentFromOptionsContainer(options.container);\n            newParent.appendChild(this.container);\n            this.parent = newParent;\n        }\n        if (options.dragToSeek === true || typeof this.options.dragToSeek === \"object\") this.initDrag();\n        this.options = options;\n        // Re-render the waveform\n        this.reRender();\n    }\n    getWrapper() {\n        return this.wrapper;\n    }\n    getWidth() {\n        return this.scrollContainer.clientWidth;\n    }\n    getScroll() {\n        return this.scrollContainer.scrollLeft;\n    }\n    setScroll(pixels) {\n        this.scrollContainer.scrollLeft = pixels;\n    }\n    setScrollPercentage(percent) {\n        const { scrollWidth: scrollWidth } = this.scrollContainer;\n        const scrollStart = scrollWidth * percent;\n        this.setScroll(scrollStart);\n    }\n    destroy() {\n        var _a, _b;\n        this.subscriptions.forEach((unsubscribe)=>unsubscribe());\n        this.container.remove();\n        (_a = this.resizeObserver) === null || _a === void 0 || _a.disconnect();\n        (_b = this.unsubscribeOnScroll) === null || _b === void 0 || _b.forEach((unsubscribe)=>unsubscribe());\n        this.unsubscribeOnScroll = [];\n    }\n    createDelay(delayMs = 10) {\n        let timeout;\n        let reject;\n        const onClear = ()=>{\n            if (timeout) clearTimeout(timeout);\n            if (reject) reject();\n        };\n        this.timeouts.push(onClear);\n        return ()=>{\n            return new Promise((resolveFn, rejectFn)=>{\n                onClear();\n                reject = rejectFn;\n                timeout = setTimeout(()=>{\n                    timeout = undefined;\n                    reject = undefined;\n                    resolveFn();\n                }, delayMs);\n            });\n        };\n    }\n    // Convert array of color values to linear gradient\n    convertColorValues(color) {\n        if (!Array.isArray(color)) return color || \"\";\n        if (color.length < 2) return color[0] || \"\";\n        const canvasElement = document.createElement(\"canvas\");\n        const ctx = canvasElement.getContext(\"2d\");\n        const gradientHeight = canvasElement.height * (window.devicePixelRatio || 1);\n        const gradient = ctx.createLinearGradient(0, 0, 0, gradientHeight);\n        const colorStopPercentage = 1 / (color.length - 1);\n        color.forEach((color, index)=>{\n            const offset = index * colorStopPercentage;\n            gradient.addColorStop(offset, color);\n        });\n        return gradient;\n    }\n    getPixelRatio() {\n        return Math.max(1, window.devicePixelRatio || 1);\n    }\n    renderBarWaveform(channelData, options, ctx, vScale) {\n        const topChannel = channelData[0];\n        const bottomChannel = channelData[1] || channelData[0];\n        const length = topChannel.length;\n        const { width: width, height: height } = ctx.canvas;\n        const halfHeight = height / 2;\n        const pixelRatio = this.getPixelRatio();\n        const barWidth = options.barWidth ? options.barWidth * pixelRatio : 1;\n        const barGap = options.barGap ? options.barGap * pixelRatio : options.barWidth ? barWidth / 2 : 0;\n        const barRadius = options.barRadius || 0;\n        const barIndexScale = width / (barWidth + barGap) / length;\n        const rectFn = barRadius && \"roundRect\" in ctx ? \"roundRect\" : \"rect\";\n        ctx.beginPath();\n        let prevX = 0;\n        let maxTop = 0;\n        let maxBottom = 0;\n        for(let i = 0; i <= length; i++){\n            const x = Math.round(i * barIndexScale);\n            if (x > prevX) {\n                const topBarHeight = Math.round(maxTop * halfHeight * vScale);\n                const bottomBarHeight = Math.round(maxBottom * halfHeight * vScale);\n                const barHeight = topBarHeight + bottomBarHeight || 1;\n                // Vertical alignment\n                let y = halfHeight - topBarHeight;\n                if (options.barAlign === \"top\") y = 0;\n                else if (options.barAlign === \"bottom\") y = height - barHeight;\n                ctx[rectFn](prevX * (barWidth + barGap), y, barWidth, barHeight, barRadius);\n                prevX = x;\n                maxTop = 0;\n                maxBottom = 0;\n            }\n            const magnitudeTop = Math.abs(topChannel[i] || 0);\n            const magnitudeBottom = Math.abs(bottomChannel[i] || 0);\n            if (magnitudeTop > maxTop) maxTop = magnitudeTop;\n            if (magnitudeBottom > maxBottom) maxBottom = magnitudeBottom;\n        }\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderLineWaveform(channelData, _options, ctx, vScale) {\n        const drawChannel = (index)=>{\n            const channel = channelData[index] || channelData[0];\n            const length = channel.length;\n            const { height: height } = ctx.canvas;\n            const halfHeight = height / 2;\n            const hScale = ctx.canvas.width / length;\n            ctx.moveTo(0, halfHeight);\n            let prevX = 0;\n            let max = 0;\n            for(let i = 0; i <= length; i++){\n                const x = Math.round(i * hScale);\n                if (x > prevX) {\n                    const h = Math.round(max * halfHeight * vScale) || 1;\n                    const y = halfHeight + h * (index === 0 ? -1 : 1);\n                    ctx.lineTo(prevX, y);\n                    prevX = x;\n                    max = 0;\n                }\n                const value = Math.abs(channel[i] || 0);\n                if (value > max) max = value;\n            }\n            ctx.lineTo(prevX, halfHeight);\n        };\n        ctx.beginPath();\n        drawChannel(0);\n        drawChannel(1);\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderWaveform(channelData, options, ctx) {\n        ctx.fillStyle = this.convertColorValues(options.waveColor);\n        // Custom rendering function\n        if (options.renderFunction) {\n            options.renderFunction(channelData, ctx);\n            return;\n        }\n        // Vertical scaling\n        let vScale = options.barHeight || 1;\n        if (options.normalize) {\n            const max = Array.from(channelData[0]).reduce((max, value)=>Math.max(max, Math.abs(value)), 0);\n            vScale = max ? 1 / max : 1;\n        }\n        // Render waveform as bars\n        if (options.barWidth || options.barGap || options.barAlign) {\n            this.renderBarWaveform(channelData, options, ctx, vScale);\n            return;\n        }\n        // Render waveform as a polyline\n        this.renderLineWaveform(channelData, options, ctx, vScale);\n    }\n    renderSingleCanvas(data, options, width, height, offset, canvasContainer, progressContainer) {\n        const pixelRatio = this.getPixelRatio();\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = Math.round(width * pixelRatio);\n        canvas.height = Math.round(height * pixelRatio);\n        canvas.style.width = `${width}px`;\n        canvas.style.height = `${height}px`;\n        canvas.style.left = `${Math.round(offset)}px`;\n        canvasContainer.appendChild(canvas);\n        const ctx = canvas.getContext(\"2d\");\n        this.renderWaveform(data, options, ctx);\n        // Draw a progress canvas\n        if (canvas.width > 0 && canvas.height > 0) {\n            const progressCanvas = canvas.cloneNode();\n            const progressCtx = progressCanvas.getContext(\"2d\");\n            progressCtx.drawImage(canvas, 0, 0);\n            // Set the composition method to draw only where the waveform is drawn\n            progressCtx.globalCompositeOperation = \"source-in\";\n            progressCtx.fillStyle = this.convertColorValues(options.progressColor);\n            // This rectangle acts as a mask thanks to the composition method\n            progressCtx.fillRect(0, 0, canvas.width, canvas.height);\n            progressContainer.appendChild(progressCanvas);\n        }\n    }\n    renderMultiCanvas(channelData, options, width, height, canvasContainer, progressContainer) {\n        const pixelRatio = this.getPixelRatio();\n        const { clientWidth: clientWidth } = this.scrollContainer;\n        const totalWidth = width / pixelRatio;\n        let singleCanvasWidth = Math.min($9c44306aa0ec83f4$var$Renderer.MAX_CANVAS_WIDTH, clientWidth, totalWidth);\n        let drawnIndexes = {};\n        // Adjust width to avoid gaps between canvases when using bars\n        if (options.barWidth || options.barGap) {\n            const barWidth = options.barWidth || 0.5;\n            const barGap = options.barGap || barWidth / 2;\n            const totalBarWidth = barWidth + barGap;\n            if (singleCanvasWidth % totalBarWidth !== 0) singleCanvasWidth = Math.floor(singleCanvasWidth / totalBarWidth) * totalBarWidth;\n        }\n        // Draw a single canvas\n        const draw = (index)=>{\n            if (index < 0 || index >= numCanvases) return;\n            if (drawnIndexes[index]) return;\n            drawnIndexes[index] = true;\n            const offset = index * singleCanvasWidth;\n            const clampedWidth = Math.min(totalWidth - offset, singleCanvasWidth);\n            if (clampedWidth <= 0) return;\n            const data = channelData.map((channel)=>{\n                const start = Math.floor(offset / totalWidth * channel.length);\n                const end = Math.floor((offset + clampedWidth) / totalWidth * channel.length);\n                return channel.slice(start, end);\n            });\n            this.renderSingleCanvas(data, options, clampedWidth, height, offset, canvasContainer, progressContainer);\n        };\n        // Clear canvases to avoid too many DOM nodes\n        const clearCanvases = ()=>{\n            if (Object.keys(drawnIndexes).length > $9c44306aa0ec83f4$var$Renderer.MAX_NODES) {\n                canvasContainer.innerHTML = \"\";\n                progressContainer.innerHTML = \"\";\n                drawnIndexes = {};\n            }\n        };\n        // Calculate how many canvases to render\n        const numCanvases = Math.ceil(totalWidth / singleCanvasWidth);\n        // Render all canvases if the waveform doesn't scroll\n        if (!this.isScrollable) {\n            for(let i = 0; i < numCanvases; i++)draw(i);\n            return;\n        }\n        // Lazy rendering\n        const viewPosition = this.scrollContainer.scrollLeft / totalWidth;\n        const startCanvas = Math.floor(viewPosition * numCanvases);\n        // Draw the canvases in the viewport first\n        draw(startCanvas - 1);\n        draw(startCanvas);\n        draw(startCanvas + 1);\n        // Subscribe to the scroll event to draw additional canvases\n        if (numCanvases > 1) {\n            const unsubscribe = this.on(\"scroll\", ()=>{\n                const { scrollLeft: scrollLeft } = this.scrollContainer;\n                const canvasIndex = Math.floor(scrollLeft / totalWidth * numCanvases);\n                clearCanvases();\n                draw(canvasIndex - 1);\n                draw(canvasIndex);\n                draw(canvasIndex + 1);\n            });\n            this.unsubscribeOnScroll.push(unsubscribe);\n        }\n    }\n    renderChannel(channelData, _a, width, channelIndex) {\n        var { overlay: overlay } = _a, options = $9c44306aa0ec83f4$var$__rest(_a, [\n            \"overlay\"\n        ]);\n        // A container for canvases\n        const canvasContainer = document.createElement(\"div\");\n        const height = this.getHeight(options.height, options.splitChannels);\n        canvasContainer.style.height = `${height}px`;\n        if (overlay && channelIndex > 0) canvasContainer.style.marginTop = `-${height}px`;\n        this.canvasWrapper.style.minHeight = `${height}px`;\n        this.canvasWrapper.appendChild(canvasContainer);\n        // A container for progress canvases\n        const progressContainer = canvasContainer.cloneNode();\n        this.progressWrapper.appendChild(progressContainer);\n        // Render the waveform\n        this.renderMultiCanvas(channelData, options, width, height, canvasContainer, progressContainer);\n    }\n    render(audioData) {\n        return $9c44306aa0ec83f4$var$__awaiter(this, void 0, void 0, function*() {\n            var _a;\n            // Clear previous timeouts\n            this.timeouts.forEach((clear)=>clear());\n            this.timeouts = [];\n            // Clear the canvases\n            this.canvasWrapper.innerHTML = \"\";\n            this.progressWrapper.innerHTML = \"\";\n            // Width\n            if (this.options.width != null) this.scrollContainer.style.width = typeof this.options.width === \"number\" ? `${this.options.width}px` : this.options.width;\n            // Determine the width of the waveform\n            const pixelRatio = this.getPixelRatio();\n            const parentWidth = this.scrollContainer.clientWidth;\n            const scrollWidth = Math.ceil(audioData.duration * (this.options.minPxPerSec || 0));\n            // Whether the container should scroll\n            this.isScrollable = scrollWidth > parentWidth;\n            const useParentWidth = this.options.fillParent && !this.isScrollable;\n            // Width of the waveform in pixels\n            const width = (useParentWidth ? parentWidth : scrollWidth) * pixelRatio;\n            // Set the width of the wrapper\n            this.wrapper.style.width = useParentWidth ? \"100%\" : `${scrollWidth}px`;\n            // Set additional styles\n            this.scrollContainer.style.overflowX = this.isScrollable ? \"auto\" : \"hidden\";\n            this.scrollContainer.classList.toggle(\"noScrollbar\", !!this.options.hideScrollbar);\n            this.cursor.style.backgroundColor = `${this.options.cursorColor || this.options.progressColor}`;\n            this.cursor.style.width = `${this.options.cursorWidth}px`;\n            this.audioData = audioData;\n            this.emit(\"render\");\n            // Render the waveform\n            if (this.options.splitChannels) // Render a waveform for each channel\n            for(let i = 0; i < audioData.numberOfChannels; i++){\n                const options = Object.assign(Object.assign({}, this.options), (_a = this.options.splitChannels) === null || _a === void 0 ? void 0 : _a[i]);\n                this.renderChannel([\n                    audioData.getChannelData(i)\n                ], options, width, i);\n            }\n            else {\n                // Render a single waveform for the first two channels (left and right)\n                const channels = [\n                    audioData.getChannelData(0)\n                ];\n                if (audioData.numberOfChannels > 1) channels.push(audioData.getChannelData(1));\n                this.renderChannel(channels, this.options, width, 0);\n            }\n            // Must be emitted asynchronously for backward compatibility\n            Promise.resolve().then(()=>this.emit(\"rendered\"));\n        });\n    }\n    reRender() {\n        this.unsubscribeOnScroll.forEach((unsubscribe)=>unsubscribe());\n        this.unsubscribeOnScroll = [];\n        // Return if the waveform has not been rendered yet\n        if (!this.audioData) return;\n        // Remember the current cursor position\n        const { scrollWidth: scrollWidth } = this.scrollContainer;\n        const { right: before } = this.progressWrapper.getBoundingClientRect();\n        // Re-render the waveform\n        this.render(this.audioData);\n        // Adjust the scroll position so that the cursor stays in the same place\n        if (this.isScrollable && scrollWidth !== this.scrollContainer.scrollWidth) {\n            const { right: after } = this.progressWrapper.getBoundingClientRect();\n            let delta = after - before;\n            // to limit compounding floating-point drift\n            // we need to round to the half px furthest from 0\n            delta *= 2;\n            delta = delta < 0 ? Math.floor(delta) : Math.ceil(delta);\n            delta /= 2;\n            this.scrollContainer.scrollLeft += delta;\n        }\n    }\n    zoom(minPxPerSec) {\n        this.options.minPxPerSec = minPxPerSec;\n        this.reRender();\n    }\n    scrollIntoView(progress, isPlaying = false) {\n        const { scrollLeft: scrollLeft, scrollWidth: scrollWidth, clientWidth: clientWidth } = this.scrollContainer;\n        const progressWidth = progress * scrollWidth;\n        const startEdge = scrollLeft;\n        const endEdge = scrollLeft + clientWidth;\n        const middle = clientWidth / 2;\n        if (this.isDragging) {\n            // Scroll when dragging close to the edge of the viewport\n            const minGap = 30;\n            if (progressWidth + minGap > endEdge) this.scrollContainer.scrollLeft += minGap;\n            else if (progressWidth - minGap < startEdge) this.scrollContainer.scrollLeft -= minGap;\n        } else {\n            if (progressWidth < startEdge || progressWidth > endEdge) this.scrollContainer.scrollLeft = progressWidth - (this.options.autoCenter ? middle : 0);\n            // Keep the cursor centered when playing\n            const center = progressWidth - scrollLeft - middle;\n            if (isPlaying && this.options.autoCenter && center > 0) this.scrollContainer.scrollLeft += Math.min(center, 10);\n        }\n        // Emit the scroll event\n        {\n            const newScroll = this.scrollContainer.scrollLeft;\n            const startX = newScroll / scrollWidth;\n            const endX = (newScroll + clientWidth) / scrollWidth;\n            this.emit(\"scroll\", startX, endX, newScroll, newScroll + clientWidth);\n        }\n    }\n    renderProgress(progress, isPlaying) {\n        if (isNaN(progress)) return;\n        const percents = progress * 100;\n        this.canvasWrapper.style.clipPath = `polygon(${percents}% 0, 100% 0, 100% 100%, ${percents}% 100%)`;\n        this.progressWrapper.style.width = `${percents}%`;\n        this.cursor.style.left = `${percents}%`;\n        this.cursor.style.transform = `translateX(-${Math.round(percents) === 100 ? this.options.cursorWidth : 0}px)`;\n        if (this.isScrollable && this.options.autoScroll) this.scrollIntoView(progress, isPlaying);\n    }\n    exportImage(format, quality, type) {\n        return $9c44306aa0ec83f4$var$__awaiter(this, void 0, void 0, function*() {\n            const canvases = this.canvasWrapper.querySelectorAll(\"canvas\");\n            if (!canvases.length) throw new Error(\"No waveform data\");\n            // Data URLs\n            if (type === \"dataURL\") {\n                const images = Array.from(canvases).map((canvas)=>canvas.toDataURL(format, quality));\n                return Promise.resolve(images);\n            }\n            // Blobs\n            return Promise.all(Array.from(canvases).map((canvas)=>{\n                return new Promise((resolve, reject)=>{\n                    canvas.toBlob((blob)=>{\n                        blob ? resolve(blob) : reject(new Error(\"Could not export image\"));\n                    }, format, quality);\n                });\n            }));\n        });\n    }\n    constructor(options, audioElement){\n        super();\n        this.timeouts = [];\n        this.isScrollable = false;\n        this.audioData = null;\n        this.resizeObserver = null;\n        this.lastContainerWidth = 0;\n        this.isDragging = false;\n        this.subscriptions = [];\n        this.unsubscribeOnScroll = [];\n        this.subscriptions = [];\n        this.options = options;\n        const parent = this.parentFromOptionsContainer(options.container);\n        this.parent = parent;\n        const [div, shadow] = this.initHtml();\n        parent.appendChild(div);\n        this.container = div;\n        this.scrollContainer = shadow.querySelector(\".scroll\");\n        this.wrapper = shadow.querySelector(\".wrapper\");\n        this.canvasWrapper = shadow.querySelector(\".canvases\");\n        this.progressWrapper = shadow.querySelector(\".progress\");\n        this.cursor = shadow.querySelector(\".cursor\");\n        if (audioElement) shadow.appendChild(audioElement);\n        this.initEvents();\n    }\n}\n$9c44306aa0ec83f4$var$Renderer.MAX_CANVAS_WIDTH = 8000;\n$9c44306aa0ec83f4$var$Renderer.MAX_NODES = 10;\nvar $9c44306aa0ec83f4$export$2e2bcd8739ae039 = $9c44306aa0ec83f4$var$Renderer;\n\n\n\nclass $b3ae41db7600e195$var$Timer extends (0, $331a6e3221892ed2$export$2e2bcd8739ae039) {\n    start() {\n        this.unsubscribe = this.on(\"tick\", ()=>{\n            requestAnimationFrame(()=>{\n                this.emit(\"tick\");\n            });\n        });\n        this.emit(\"tick\");\n    }\n    stop() {\n        this.unsubscribe();\n    }\n    destroy() {\n        this.unsubscribe();\n    }\n    constructor(){\n        super(...arguments);\n        this.unsubscribe = ()=>undefined;\n    }\n}\nvar $b3ae41db7600e195$export$2e2bcd8739ae039 = $b3ae41db7600e195$var$Timer;\n\n\n\nvar $4f5c2026a5d342b4$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n * A Web Audio buffer player emulating the behavior of an HTML5 Audio element.\n */ class $4f5c2026a5d342b4$var$WebAudioPlayer extends (0, $331a6e3221892ed2$export$2e2bcd8739ae039) {\n    load() {\n        return $4f5c2026a5d342b4$var$__awaiter(this, void 0, void 0, function*() {\n            return;\n        });\n    }\n    get src() {\n        return this.currentSrc;\n    }\n    set src(value) {\n        this.currentSrc = value;\n        this._duration = undefined;\n        if (!value) {\n            this.buffer = null;\n            this.emit(\"emptied\");\n            return;\n        }\n        fetch(value).then((response)=>{\n            if (response.status >= 400) throw new Error(`Failed to fetch ${value}: ${response.status} (${response.statusText})`);\n            return response.arrayBuffer();\n        }).then((arrayBuffer)=>{\n            if (this.currentSrc !== value) return null;\n            return this.audioContext.decodeAudioData(arrayBuffer);\n        }).then((audioBuffer)=>{\n            if (this.currentSrc !== value) return;\n            this.buffer = audioBuffer;\n            this.emit(\"loadedmetadata\");\n            this.emit(\"canplay\");\n            if (this.autoplay) this.play();\n        });\n    }\n    _play() {\n        var _a;\n        if (!this.paused) return;\n        this.paused = false;\n        (_a = this.bufferNode) === null || _a === void 0 || _a.disconnect();\n        this.bufferNode = this.audioContext.createBufferSource();\n        if (this.buffer) this.bufferNode.buffer = this.buffer;\n        this.bufferNode.playbackRate.value = this._playbackRate;\n        this.bufferNode.connect(this.gainNode);\n        let currentPos = this.playedDuration * this._playbackRate;\n        if (currentPos >= this.duration) {\n            currentPos = 0;\n            this.playedDuration = 0;\n        }\n        this.bufferNode.start(this.audioContext.currentTime, currentPos);\n        this.playStartTime = this.audioContext.currentTime;\n        this.bufferNode.onended = ()=>{\n            if (this.currentTime >= this.duration) {\n                this.pause();\n                this.emit(\"ended\");\n            }\n        };\n    }\n    _pause() {\n        var _a;\n        this.paused = true;\n        (_a = this.bufferNode) === null || _a === void 0 || _a.stop();\n        this.playedDuration += this.audioContext.currentTime - this.playStartTime;\n    }\n    play() {\n        return $4f5c2026a5d342b4$var$__awaiter(this, void 0, void 0, function*() {\n            if (!this.paused) return;\n            this._play();\n            this.emit(\"play\");\n        });\n    }\n    pause() {\n        if (this.paused) return;\n        this._pause();\n        this.emit(\"pause\");\n    }\n    stopAt(timeSeconds) {\n        var _a, _b;\n        const delay = timeSeconds - this.currentTime;\n        (_a = this.bufferNode) === null || _a === void 0 || _a.stop(this.audioContext.currentTime + delay);\n        (_b = this.bufferNode) === null || _b === void 0 || _b.addEventListener(\"ended\", ()=>{\n            this.bufferNode = null;\n            this.pause();\n        }, {\n            once: true\n        });\n    }\n    setSinkId(deviceId) {\n        return $4f5c2026a5d342b4$var$__awaiter(this, void 0, void 0, function*() {\n            const ac = this.audioContext;\n            return ac.setSinkId(deviceId);\n        });\n    }\n    get playbackRate() {\n        return this._playbackRate;\n    }\n    set playbackRate(value) {\n        this._playbackRate = value;\n        if (this.bufferNode) this.bufferNode.playbackRate.value = value;\n    }\n    get currentTime() {\n        const time = this.paused ? this.playedDuration : this.playedDuration + (this.audioContext.currentTime - this.playStartTime);\n        return time * this._playbackRate;\n    }\n    set currentTime(value) {\n        const wasPlaying = !this.paused;\n        wasPlaying && this._pause();\n        this.playedDuration = value / this._playbackRate;\n        wasPlaying && this._play();\n        this.emit(\"seeking\");\n        this.emit(\"timeupdate\");\n    }\n    get duration() {\n        var _a, _b;\n        return (_a = this._duration) !== null && _a !== void 0 ? _a : ((_b = this.buffer) === null || _b === void 0 ? void 0 : _b.duration) || 0;\n    }\n    set duration(value) {\n        this._duration = value;\n    }\n    get volume() {\n        return this.gainNode.gain.value;\n    }\n    set volume(value) {\n        this.gainNode.gain.value = value;\n        this.emit(\"volumechange\");\n    }\n    get muted() {\n        return this._muted;\n    }\n    set muted(value) {\n        if (this._muted === value) return;\n        this._muted = value;\n        if (this._muted) this.gainNode.disconnect();\n        else this.gainNode.connect(this.audioContext.destination);\n    }\n    canPlayType(mimeType) {\n        return /^(audio|video)\\//.test(mimeType);\n    }\n    /** Get the GainNode used to play the audio. Can be used to attach filters. */ getGainNode() {\n        return this.gainNode;\n    }\n    /** Get decoded audio */ getChannelData() {\n        const channels = [];\n        if (!this.buffer) return channels;\n        const numChannels = this.buffer.numberOfChannels;\n        for(let i = 0; i < numChannels; i++)channels.push(this.buffer.getChannelData(i));\n        return channels;\n    }\n    constructor(audioContext = new AudioContext()){\n        super();\n        this.bufferNode = null;\n        this.playStartTime = 0;\n        this.playedDuration = 0;\n        this._muted = false;\n        this._playbackRate = 1;\n        this._duration = undefined;\n        this.buffer = null;\n        this.currentSrc = \"\";\n        this.paused = true;\n        this.crossOrigin = null;\n        this.seeking = false;\n        this.autoplay = false;\n        /** Subscribe to an event. Returns an unsubscribe function. */ this.addEventListener = this.on;\n        /** Unsubscribe from an event */ this.removeEventListener = this.un;\n        this.audioContext = audioContext;\n        this.gainNode = this.audioContext.createGain();\n        this.gainNode.connect(this.audioContext.destination);\n    }\n}\nvar $4f5c2026a5d342b4$export$2e2bcd8739ae039 = $4f5c2026a5d342b4$var$WebAudioPlayer;\n\n\nvar $9019434973a700ec$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst $9019434973a700ec$var$defaultOptions = {\n    waveColor: \"#999\",\n    progressColor: \"#555\",\n    cursorWidth: 1,\n    minPxPerSec: 0,\n    fillParent: true,\n    interact: true,\n    dragToSeek: false,\n    autoScroll: true,\n    autoCenter: true,\n    sampleRate: 8000\n};\nclass $9019434973a700ec$var$WaveSurfer extends (0, $1abdbc9c88264fd7$export$2e2bcd8739ae039) {\n    /** Create a new WaveSurfer instance */ static create(options) {\n        return new $9019434973a700ec$var$WaveSurfer(options);\n    }\n    updateProgress(currentTime = this.getCurrentTime()) {\n        this.renderer.renderProgress(currentTime / this.getDuration(), this.isPlaying());\n        return currentTime;\n    }\n    initTimerEvents() {\n        // The timer fires every 16ms for a smooth progress animation\n        this.subscriptions.push(this.timer.on(\"tick\", ()=>{\n            if (!this.isSeeking()) {\n                const currentTime = this.updateProgress();\n                this.emit(\"timeupdate\", currentTime);\n                this.emit(\"audioprocess\", currentTime);\n            }\n        }));\n    }\n    initPlayerEvents() {\n        if (this.isPlaying()) {\n            this.emit(\"play\");\n            this.timer.start();\n        }\n        this.mediaSubscriptions.push(this.onMediaEvent(\"timeupdate\", ()=>{\n            const currentTime = this.updateProgress();\n            this.emit(\"timeupdate\", currentTime);\n        }), this.onMediaEvent(\"play\", ()=>{\n            this.emit(\"play\");\n            this.timer.start();\n        }), this.onMediaEvent(\"pause\", ()=>{\n            this.emit(\"pause\");\n            this.timer.stop();\n        }), this.onMediaEvent(\"emptied\", ()=>{\n            this.timer.stop();\n        }), this.onMediaEvent(\"ended\", ()=>{\n            this.emit(\"finish\");\n        }), this.onMediaEvent(\"seeking\", ()=>{\n            this.emit(\"seeking\", this.getCurrentTime());\n        }), this.onMediaEvent(\"error\", (err)=>{\n            this.emit(\"error\", err.error);\n        }));\n    }\n    initRendererEvents() {\n        this.subscriptions.push(// Seek on click\n        this.renderer.on(\"click\", (relativeX, relativeY)=>{\n            if (this.options.interact) {\n                this.seekTo(relativeX);\n                this.emit(\"interaction\", relativeX * this.getDuration());\n                this.emit(\"click\", relativeX, relativeY);\n            }\n        }), // Double click\n        this.renderer.on(\"dblclick\", (relativeX, relativeY)=>{\n            this.emit(\"dblclick\", relativeX, relativeY);\n        }), // Scroll\n        this.renderer.on(\"scroll\", (startX, endX, scrollLeft, scrollRight)=>{\n            const duration = this.getDuration();\n            this.emit(\"scroll\", startX * duration, endX * duration, scrollLeft, scrollRight);\n        }), // Redraw\n        this.renderer.on(\"render\", ()=>{\n            this.emit(\"redraw\");\n        }), // RedrawComplete\n        this.renderer.on(\"rendered\", ()=>{\n            this.emit(\"redrawcomplete\");\n        }), // DragStart\n        this.renderer.on(\"dragstart\", (relativeX)=>{\n            this.emit(\"dragstart\", relativeX);\n        }), // DragEnd\n        this.renderer.on(\"dragend\", (relativeX)=>{\n            this.emit(\"dragend\", relativeX);\n        }));\n        // Drag\n        {\n            let debounce;\n            this.subscriptions.push(this.renderer.on(\"drag\", (relativeX)=>{\n                if (!this.options.interact) return;\n                // Update the visual position\n                this.renderer.renderProgress(relativeX);\n                // Set the audio position with a debounce\n                clearTimeout(debounce);\n                let debounceTime;\n                if (this.isPlaying()) debounceTime = 0;\n                else if (this.options.dragToSeek === true) debounceTime = 200;\n                else if (typeof this.options.dragToSeek === \"object\" && this.options.dragToSeek !== undefined) debounceTime = this.options.dragToSeek[\"debounceTime\"];\n                debounce = setTimeout(()=>{\n                    this.seekTo(relativeX);\n                }, debounceTime);\n                this.emit(\"interaction\", relativeX * this.getDuration());\n                this.emit(\"drag\", relativeX);\n            }));\n        }\n    }\n    initPlugins() {\n        var _a;\n        if (!((_a = this.options.plugins) === null || _a === void 0 ? void 0 : _a.length)) return;\n        this.options.plugins.forEach((plugin)=>{\n            this.registerPlugin(plugin);\n        });\n    }\n    unsubscribePlayerEvents() {\n        this.mediaSubscriptions.forEach((unsubscribe)=>unsubscribe());\n        this.mediaSubscriptions = [];\n    }\n    /** Set new wavesurfer options and re-render it */ setOptions(options) {\n        this.options = Object.assign({}, this.options, options);\n        this.renderer.setOptions(this.options);\n        if (options.audioRate) this.setPlaybackRate(options.audioRate);\n        if (options.mediaControls != null) this.getMediaElement().controls = options.mediaControls;\n    }\n    /** Register a wavesurfer.js plugin */ registerPlugin(plugin) {\n        plugin._init(this);\n        this.plugins.push(plugin);\n        // Unregister plugin on destroy\n        this.subscriptions.push(plugin.once(\"destroy\", ()=>{\n            this.plugins = this.plugins.filter((p)=>p !== plugin);\n        }));\n        return plugin;\n    }\n    /** For plugins only: get the waveform wrapper div */ getWrapper() {\n        return this.renderer.getWrapper();\n    }\n    /** For plugins only: get the scroll container client width */ getWidth() {\n        return this.renderer.getWidth();\n    }\n    /** Get the current scroll position in pixels */ getScroll() {\n        return this.renderer.getScroll();\n    }\n    /** Set the current scroll position in pixels */ setScroll(pixels) {\n        return this.renderer.setScroll(pixels);\n    }\n    /** Move the start of the viewing window to a specific time in the audio (in seconds) */ setScrollTime(time) {\n        const percentage = time / this.getDuration();\n        this.renderer.setScrollPercentage(percentage);\n    }\n    /** Get all registered plugins */ getActivePlugins() {\n        return this.plugins;\n    }\n    loadAudio(url, blob, channelData, duration) {\n        return $9019434973a700ec$var$__awaiter(this, void 0, void 0, function*() {\n            var _a;\n            this.emit(\"load\", url);\n            if (!this.options.media && this.isPlaying()) this.pause();\n            this.decodedData = null;\n            // Fetch the entire audio as a blob if pre-decoded data is not provided\n            if (!blob && !channelData) {\n                const fetchParams = this.options.fetchParams || {};\n                if (window.AbortController && !fetchParams.signal) {\n                    this.abortController = new AbortController();\n                    fetchParams.signal = (_a = this.abortController) === null || _a === void 0 ? void 0 : _a.signal;\n                }\n                const onProgress = (percentage)=>this.emit(\"loading\", percentage);\n                blob = yield (0, $48b85dfa3fa6d87e$export$2e2bcd8739ae039).fetchBlob(url, onProgress, fetchParams);\n            }\n            // Set the mediaelement source\n            this.setSrc(url, blob);\n            // Wait for the audio duration\n            const audioDuration = yield new Promise((resolve)=>{\n                const staticDuration = duration || this.getDuration();\n                if (staticDuration) resolve(staticDuration);\n                else this.mediaSubscriptions.push(this.onMediaEvent(\"loadedmetadata\", ()=>resolve(this.getDuration()), {\n                    once: true\n                }));\n            });\n            // Set the duration if the player is a WebAudioPlayer without a URL\n            if (!url && !blob) {\n                const media = this.getMediaElement();\n                if (media instanceof (0, $4f5c2026a5d342b4$export$2e2bcd8739ae039)) media.duration = audioDuration;\n            }\n            // Decode the audio data or use user-provided peaks\n            if (channelData) this.decodedData = (0, $4db74b83ada4d8f4$export$2e2bcd8739ae039).createBuffer(channelData, audioDuration || 0);\n            else if (blob) {\n                const arrayBuffer = yield blob.arrayBuffer();\n                this.decodedData = yield (0, $4db74b83ada4d8f4$export$2e2bcd8739ae039).decode(arrayBuffer, this.options.sampleRate);\n            }\n            if (this.decodedData) {\n                this.emit(\"decode\", this.getDuration());\n                this.renderer.render(this.decodedData);\n            }\n            this.emit(\"ready\", this.getDuration());\n        });\n    }\n    /** Load an audio file by URL, with optional pre-decoded audio data */ load(url, channelData, duration) {\n        return $9019434973a700ec$var$__awaiter(this, void 0, void 0, function*() {\n            try {\n                return yield this.loadAudio(url, undefined, channelData, duration);\n            } catch (err) {\n                this.emit(\"error\", err);\n                throw err;\n            }\n        });\n    }\n    /** Load an audio blob */ loadBlob(blob, channelData, duration) {\n        return $9019434973a700ec$var$__awaiter(this, void 0, void 0, function*() {\n            try {\n                return yield this.loadAudio(\"\", blob, channelData, duration);\n            } catch (err) {\n                this.emit(\"error\", err);\n                throw err;\n            }\n        });\n    }\n    /** Zoom the waveform by a given pixels-per-second factor */ zoom(minPxPerSec) {\n        if (!this.decodedData) throw new Error(\"No audio loaded\");\n        this.renderer.zoom(minPxPerSec);\n        this.emit(\"zoom\", minPxPerSec);\n    }\n    /** Get the decoded audio data */ getDecodedData() {\n        return this.decodedData;\n    }\n    /** Get decoded peaks */ exportPeaks({ channels: channels = 2, maxLength: maxLength = 8000, precision: precision = 10000 } = {}) {\n        if (!this.decodedData) throw new Error(\"The audio has not been decoded yet\");\n        const maxChannels = Math.min(channels, this.decodedData.numberOfChannels);\n        const peaks = [];\n        for(let i = 0; i < maxChannels; i++){\n            const channel = this.decodedData.getChannelData(i);\n            const data = [];\n            const sampleSize = channel.length / maxLength;\n            for(let i = 0; i < maxLength; i++){\n                const sample = channel.slice(Math.floor(i * sampleSize), Math.ceil((i + 1) * sampleSize));\n                let max = 0;\n                for(let x = 0; x < sample.length; x++){\n                    const n = sample[x];\n                    if (Math.abs(n) > Math.abs(max)) max = n;\n                }\n                data.push(Math.round(max * precision) / precision);\n            }\n            peaks.push(data);\n        }\n        return peaks;\n    }\n    /** Get the duration of the audio in seconds */ getDuration() {\n        let duration = super.getDuration() || 0;\n        // Fall back to the decoded data duration if the media duration is incorrect\n        if ((duration === 0 || duration === Infinity) && this.decodedData) duration = this.decodedData.duration;\n        return duration;\n    }\n    /** Toggle if the waveform should react to clicks */ toggleInteraction(isInteractive) {\n        this.options.interact = isInteractive;\n    }\n    /** Jump to a specific time in the audio (in seconds) */ setTime(time) {\n        super.setTime(time);\n        this.updateProgress(time);\n        this.emit(\"timeupdate\", time);\n    }\n    /** Seek to a percentage of audio as [0..1] (0 = beginning, 1 = end) */ seekTo(progress) {\n        const time = this.getDuration() * progress;\n        this.setTime(time);\n    }\n    /** Play or pause the audio */ playPause() {\n        return $9019434973a700ec$var$__awaiter(this, void 0, void 0, function*() {\n            return this.isPlaying() ? this.pause() : this.play();\n        });\n    }\n    /** Stop the audio and go to the beginning */ stop() {\n        this.pause();\n        this.setTime(0);\n    }\n    /** Skip N or -N seconds from the current position */ skip(seconds) {\n        this.setTime(this.getCurrentTime() + seconds);\n    }\n    /** Empty the waveform */ empty() {\n        this.load(\"\", [\n            [\n                0\n            ]\n        ], 0.001);\n    }\n    /** Set HTML media element */ setMediaElement(element) {\n        this.unsubscribePlayerEvents();\n        super.setMediaElement(element);\n        this.initPlayerEvents();\n    }\n    exportImage() {\n        return $9019434973a700ec$var$__awaiter(this, arguments, void 0, function*(format = \"image/png\", quality = 1, type = \"dataURL\") {\n            return this.renderer.exportImage(format, quality, type);\n        });\n    }\n    /** Unmount wavesurfer */ destroy() {\n        var _a;\n        this.emit(\"destroy\");\n        (_a = this.abortController) === null || _a === void 0 || _a.abort();\n        this.plugins.forEach((plugin)=>plugin.destroy());\n        this.subscriptions.forEach((unsubscribe)=>unsubscribe());\n        this.unsubscribePlayerEvents();\n        this.timer.destroy();\n        this.renderer.destroy();\n        super.destroy();\n    }\n    /** Create a new WaveSurfer instance */ constructor(options){\n        const media = options.media || (options.backend === \"WebAudio\" ? new (0, $4f5c2026a5d342b4$export$2e2bcd8739ae039)() : undefined);\n        super({\n            media: media,\n            mediaControls: options.mediaControls,\n            autoplay: options.autoplay,\n            playbackRate: options.audioRate\n        });\n        this.plugins = [];\n        this.decodedData = null;\n        this.subscriptions = [];\n        this.mediaSubscriptions = [];\n        this.abortController = null;\n        this.options = Object.assign({}, $9019434973a700ec$var$defaultOptions, options);\n        this.timer = new (0, $b3ae41db7600e195$export$2e2bcd8739ae039)();\n        const audioElement = media ? undefined : this.getMediaElement();\n        this.renderer = new (0, $9c44306aa0ec83f4$export$2e2bcd8739ae039)(this.options, audioElement);\n        this.initPlayerEvents();\n        this.initRendererEvents();\n        this.initTimerEvents();\n        this.initPlugins();\n        // Read the initial URL before load has been called\n        const initialUrl = this.options.url || this.getSrc() || \"\";\n        // Init and load async to allow external events to be registered\n        Promise.resolve().then(()=>{\n            this.emit(\"init\");\n            // Load audio if URL or an external media with an src is passed,\n            // of render w/o audio if pre-decoded peaks and duration are provided\n            const { peaks: peaks, duration: duration } = this.options;\n            if (initialUrl || peaks && duration) // Swallow async errors because they cannot be caught from a constructor call.\n            // Subscribe to the wavesurfer's error event to handle them.\n            this.load(initialUrl, peaks, duration).catch(()=>null);\n        });\n    }\n}\n$9019434973a700ec$var$WaveSurfer.BasePlugin = (0, $c1286b79c6dc200b$export$2e2bcd8739ae039);\n$9019434973a700ec$var$WaveSurfer.dom = $3456c52de8aa06cd$exports;\nvar $9019434973a700ec$export$2e2bcd8739ae039 = $9019434973a700ec$var$WaveSurfer;\n\n\nlet $002a5d7c786a0466$var$tracks_dictionary = null;\nlet $002a5d7c786a0466$var$composition_dictionary = null;\nlet $002a5d7c786a0466$var$AUTO_PLAY = false;\nconst $002a5d7c786a0466$var$getCurrentTrack = ()=>{\n    const audio = document.getElementById(\"waveform\");\n    const currentTrack = audio.getAttribute(\"data-currentaudio\");\n    return currentTrack;\n};\nconst $002a5d7c786a0466$var$changeFaIcon = (trackid, startPlaying)=>{\n    var _document_querySelector;\n    const iconElement = (_document_querySelector = document.querySelector(`[data-trackid='${trackid}']`)) === null || _document_querySelector === void 0 ? void 0 : _document_querySelector.firstChild.nextSibling;\n    if (iconElement) {\n        if (startPlaying) {\n            iconElement.classList.remove(\"fa-play\");\n            iconElement.classList.add(\"fa-pause\");\n        } else {\n            iconElement.classList.remove(\"fa-pause\");\n            iconElement.classList.add(\"fa-play\");\n        }\n    }\n};\nconst $002a5d7c786a0466$var$changeFloatingIcon = (startPlaying)=>{\n    const floatingPlayButton = document.getElementById(\"playfloatingbutton\").firstChild.nextSibling;\n    if (startPlaying) {\n        floatingPlayButton.classList.remove(\"fa-play\");\n        floatingPlayButton.classList.add(\"fa-pause\");\n    } else {\n        floatingPlayButton.classList.remove(\"fa-pause\");\n        floatingPlayButton.classList.add(\"fa-play\");\n    }\n};\nconst $002a5d7c786a0466$var$clickOnSameTrack = ()=>{\n    const isPlaying = $002a5d7c786a0466$var$wavesurfer.isPlaying();\n    if (!isPlaying) $002a5d7c786a0466$var$wavesurfer.play();\n    else $002a5d7c786a0466$var$wavesurfer.pause();\n};\nconst $002a5d7c786a0466$var$checkAudioPausedNotSameTrack = (trackid)=>{\n    const isPlaying = $002a5d7c786a0466$var$wavesurfer.isPlaying();\n    if (isPlaying) {\n        $002a5d7c786a0466$var$changeFaIcon(trackid, true);\n        $002a5d7c786a0466$var$wavesurfer.pause();\n    } else $002a5d7c786a0466$var$changeFaIcon(trackid, true);\n};\nconst $002a5d7c786a0466$var$playTrackButtonHandler = (trackid)=>{\n    const currentTrack = $002a5d7c786a0466$var$getCurrentTrack();\n    let is_same_track = currentTrack === trackid;\n    if (is_same_track) $002a5d7c786a0466$var$clickOnSameTrack();\n    else {\n        $002a5d7c786a0466$var$checkAudioPausedNotSameTrack(trackid);\n        $002a5d7c786a0466$export$cc346877ffba6d5(trackid, true);\n        $002a5d7c786a0466$var$updateCurrentPlayInfo(trackid);\n    }\n};\nconst $002a5d7c786a0466$var$loadTrackSuccess = (audioSrc, trackid, doPlay)=>{\n    $002a5d7c786a0466$var$AUTO_PLAY = doPlay;\n    const audio = document.getElementById(\"waveform\");\n    audio.setAttribute(\"data-currentaudio\", trackid);\n    $002a5d7c786a0466$var$wavesurfer.seekTo(0);\n    $002a5d7c786a0466$var$wavesurfer.load(audioSrc);\n};\nconst $002a5d7c786a0466$var$loadTrackError = (trackid)=>{\n    const playElemUI = document.querySelector(`[data-trackid='${trackid}']`);\n    playElemUI.onclick = null;\n    const iconElement = playElemUI.firstChild.nextSibling;\n    iconElement.classList.remove(\"fa-play\");\n    iconElement.classList.add(\"fa-times\");\n    $002a5d7c786a0466$var$changeFloatingIcon(false);\n    alert(\"Error playing track\");\n};\nconst $002a5d7c786a0466$var$updateCurrentPlayInfo = (track_id)=>{\n    const track_title = $002a5d7c786a0466$var$tracks_dictionary[track_id].title;\n    const comp_title = $002a5d7c786a0466$var$composition_dictionary[$002a5d7c786a0466$var$tracks_dictionary[track_id].comp_uuid].title;\n    document.getElementById(\"current-play-info\").textContent = comp_title + \" / \" + track_title;\n};\nconst $002a5d7c786a0466$export$144cd45dcb767075 = (compositionsList)=>{\n    const all_tracks = (0, $919d7978aab43b0b$export$3763f15547b21628)(compositionsList);\n    if (all_tracks.tracksList.length) {\n        $002a5d7c786a0466$var$tracks_dictionary = all_tracks.tracksDictionary;\n        $002a5d7c786a0466$var$composition_dictionary = all_tracks.compositionsDictionary;\n        const maxRandomPos = all_tracks.tracksList.length;\n        const randomInt = Math.floor(Math.random() * maxRandomPos);\n        const lastTrackId = all_tracks.tracksList[randomInt].uuid;\n        $002a5d7c786a0466$var$updateCurrentPlayInfo(lastTrackId);\n        $002a5d7c786a0466$export$cc346877ffba6d5(lastTrackId);\n    }\n};\nconst $002a5d7c786a0466$export$cc346877ffba6d5 = async (trackid, doPlay)=>{\n    const audioSrc = window.location.origin + \"/trackfile/\" + trackid;\n    // error 1 : \n    // const audioSrc = 'teto' +window.location.origin + '/trackfile/' + trackid\n    //error 2:\n    // const audioSrc = window.location.origin + '/trackfile/' + 'trackid'\n    const response = await fetch(audioSrc);\n    if (response.ok) $002a5d7c786a0466$var$loadTrackSuccess(audioSrc, trackid, doPlay);\n    else $002a5d7c786a0466$var$loadTrackError(trackid);\n};\nconst $002a5d7c786a0466$export$7a196286caa95f25 = ()=>{\n    const elements = document.querySelectorAll(\"[data-trackid]\");\n    elements.forEach((element)=>{\n        const trackid = element.getAttribute(\"data-trackid\");\n        element.onclick = ()=>{\n            $002a5d7c786a0466$var$playTrackButtonHandler(trackid);\n        };\n    });\n};\nconst $002a5d7c786a0466$var$fabPlayButtonIsCurrentTrack = ()=>{\n    const isPlaying = $002a5d7c786a0466$var$wavesurfer.isPlaying();\n    if (isPlaying) $002a5d7c786a0466$var$wavesurfer.pause();\n    else $002a5d7c786a0466$var$wavesurfer.play();\n};\nconst $002a5d7c786a0466$export$ddb3bbf4ed6f1ca3 = ()=>{\n    const floatingPlayButton = document.getElementById(\"playfloatingbutton\");\n    floatingPlayButton.onclick = ()=>{\n        $002a5d7c786a0466$var$fabPlayButtonIsCurrentTrack();\n    };\n};\nconst $002a5d7c786a0466$var$initializeWavesurfer = ()=>{\n    return (0, $9019434973a700ec$export$2e2bcd8739ae039).create({\n        container: \"#waveform\",\n        responsive: true,\n        height: 80,\n        waveColor: \"#007bff\",\n        progressColor: \"#6610f2\",\n        barWidth: 2,\n        barGap: 1,\n        barRadius: 2\n    });\n};\nconst $002a5d7c786a0466$var$wavesurfer = $002a5d7c786a0466$var$initializeWavesurfer();\n$002a5d7c786a0466$var$wavesurfer.on(\"finish\", ()=>{\n    const currentTrack = $002a5d7c786a0466$var$getCurrentTrack();\n    $002a5d7c786a0466$var$changeFloatingIcon(false);\n    $002a5d7c786a0466$var$changeFaIcon(currentTrack, false);\n});\n$002a5d7c786a0466$var$wavesurfer.on(\"ready\", (duration)=>{\n    if ($002a5d7c786a0466$var$AUTO_PLAY) $002a5d7c786a0466$var$wavesurfer.play();\n    else $002a5d7c786a0466$var$changeFloatingIcon(false);\n});\n$002a5d7c786a0466$var$wavesurfer.on(\"play\", ()=>{\n    const currentTrack = $002a5d7c786a0466$var$getCurrentTrack();\n    $002a5d7c786a0466$var$changeFloatingIcon(true);\n    $002a5d7c786a0466$var$changeFaIcon(currentTrack, true);\n});\n$002a5d7c786a0466$var$wavesurfer.on(\"pause\", ()=>{\n    const currentTrack = $002a5d7c786a0466$var$getCurrentTrack();\n    $002a5d7c786a0466$var$changeFloatingIcon(false);\n    $002a5d7c786a0466$var$changeFaIcon(currentTrack, false);\n});\n$002a5d7c786a0466$var$wavesurfer.on(\"error\", (error)=>{\n    console.log(error);\n// if(error){\n//     const currentTrack = getCurrentTrack()\n//     loadTrackError(currentTrack)\n// }\n//wavesurfer.destroy()\n//alert('Error when trying to play media:', error)\n});\n\n\nconst $03e266e399b535e5$export$5e4b5ab8660ba9d5 = \"/composition.html?compositionId=\";\nlet $03e266e399b535e5$export$4cd34456ac1eb639 = false;\nconst $03e266e399b535e5$var$homePageTermsAccepted = (termsAccepted)=>{\n    if (!termsAccepted) (0, $Nsii8.generateAcceptTermsModal)(\"header\");\n};\nconst $03e266e399b535e5$var$getMyProfile = async ()=>{\n    const isAuthenticated = await (0, $7hG31.callJsonApi)(\"/profile\", \"GET\", null, \"Loading profile...\");\n    if (isAuthenticated.ok) {\n        (0, $919d7978aab43b0b$export$149136365741a43c)(isAuthenticated.name);\n        document.getElementById(\"userlogin\").style.display = \"none\";\n        document.getElementById(\"useroptions\").style.display = \"\";\n        document.getElementById(\"display_profile_name\").innerText = `[${isAuthenticated.name}]`;\n        (0, $Nsii8.checkIfTermsAccepted)(isAuthenticated, $03e266e399b535e5$var$homePageTermsAccepted);\n    }\n    return isAuthenticated;\n};\nconst $03e266e399b535e5$export$b99e48ec291af6c0 = async ()=>{\n    const endpoint = \"/mycompositions\";\n    const data = await (0, $7hG31.callJsonApi)(endpoint, \"GET\", null, \"Loading my music...\");\n    if (data.compositions) return $03e266e399b535e5$var$renderHomePage(data.compositions, endpoint);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $03e266e399b535e5$var$getCompositionsByUserUid = async (useruid, auth)=>{\n    const endpoint = \"/compositionsbyuserid/\" + useruid;\n    const data = await (0, $7hG31.callJsonApi)(endpoint, \"GET\", null, \"Loading user...\");\n    if (data.compositions) {\n        (0, $919d7978aab43b0b$export$149136365741a43c)(data.username);\n        (0, $3272937b030a975a$export$b8abf8ca7249a7d2)(data.username, useruid);\n        return $03e266e399b535e5$var$renderHomePage(data.compositions, endpoint);\n    } else {\n        alert(\"invalid return value for user id\");\n        if (auth.ok) (0, $be366c05d924947f$export$ff7962acd6052c28)(\"my-comp\");\n        else (0, $be366c05d924947f$export$ff7962acd6052c28)(\"recent-comp\");\n    }\n};\nconst $03e266e399b535e5$var$getCompositionsByColelctionUid = async (collectionuid, auth)=>{\n    const endpoint = \"/collectionastreebyid/\" + collectionuid;\n    const data = await (0, $7hG31.callJsonApi)(endpoint, \"GET\", null, \"Loading collection...\");\n    if (data.compositions) {\n        (0, $919d7978aab43b0b$export$149136365741a43c)(data.username);\n        (0, $3272937b030a975a$export$206832d47f4d1079)(data.collection_name, data.username, data.owneruid);\n        return $03e266e399b535e5$var$renderHomePage(data.compositions, endpoint);\n    } else {\n        alert(\"invalid return value for collection id\");\n        if (auth.ok) (0, $be366c05d924947f$export$ff7962acd6052c28)(\"my-comp\");\n        else (0, $be366c05d924947f$export$ff7962acd6052c28)(\"recent-comp\");\n    }\n};\nconst $03e266e399b535e5$export$8d85b36da8527a05 = async (withScroll)=>{\n    const endpoint = \"/recentcompositions\";\n    const data = await (0, $7hG31.callJsonApi)(\"/recentcompositions\", \"GET\", null, \"Loading recent...\");\n    if (data.compositions) return $03e266e399b535e5$var$renderHomePage(data.compositions, endpoint, withScroll);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $03e266e399b535e5$export$556539c2d93a797d = async (withScroll)=>{\n    const endpoint = \"/compositions\";\n    const data = await (0, $7hG31.callJsonApi)(\"/compositions\", \"GET\", null, \"Loading all...\");\n    if (data.compositions) return $03e266e399b535e5$var$renderHomePage(data.compositions, endpoint, withScroll);\n    else alert(\"invalid return value for compisitions list\");\n};\nconst $03e266e399b535e5$var$renderHomePage = (compositionsList, endpoint, withScroll)=>{\n    document.getElementById(\"grid\").innerHTML = \"\";\n    document.getElementById(\"legendbuttons\").innerHTML = \"\";\n    const notUserPublicPage = !endpoint.includes(\"/compositionsbyuserid/\") && !endpoint.includes(\"/collectionastreebyid/\");\n    if (notUserPublicPage) (0, $3272937b030a975a$export$2ccaa4a069104255)(false, withScroll);\n    if (!compositionsList.length && notUserPublicPage) {\n        document.getElementById(\"initialmessage\").hidden = false;\n        document.getElementById(\"initialmessage\").classList.add(\"d-flex\");\n    } else $03e266e399b535e5$var$renderHomePageWithLists(compositionsList, endpoint);\n    (0, $002a5d7c786a0466$export$144cd45dcb767075)(compositionsList);\n    (0, $002a5d7c786a0466$export$7a196286caa95f25)();\n};\nconst $03e266e399b535e5$var$renderHomePageWithLists = (compositionsList, endpoint)=>{\n    if (endpoint.includes(\"/collectionastreebyid/\")) {\n        const parent_coll_id = endpoint.replace(\"/collectionastreebyid/\", \"\");\n        const groupedCompsAndSubColl = (0, $919d7978aab43b0b$export$46ab7a802f6f7711)(compositionsList, parent_coll_id);\n        $03e266e399b535e5$var$paintListOfCompositions(groupedCompsAndSubColl, null, endpoint, compositionsList.length);\n    } else if (!(0, $919d7978aab43b0b$export$1badf4b56a2f2c08)(endpoint)) {\n        const groupedComps = (0, $919d7978aab43b0b$export$2095d3815b0f7547)(compositionsList);\n        $03e266e399b535e5$var$paintListOfCompositions(groupedComps, \"groupedbyuser_final\", endpoint, compositionsList.length);\n    } else {\n        const groupedCompsWithCollab = (0, $919d7978aab43b0b$export$6d37f804b553eac7)(compositionsList);\n        $03e266e399b535e5$var$paintListOfCompositions(groupedCompsWithCollab, \"groupedbycollab\", endpoint, compositionsList.length);\n    }\n};\nconst $03e266e399b535e5$var$paintGroupCollection = (listcomps, typebadge, endpoint)=>{\n    let allCompUIelem = \"\";\n    for(const comp in listcomps){\n        const element = listcomps[comp];\n        let listgroup = \"\";\n        let groupTitle = \"\";\n        let groupId = null;\n        if (typebadge === \"collab\") groupTitle = \"Collaborations\";\n        else if (typebadge === \"coll\") {\n            groupTitle = Object.values(element)[0].parent_collection;\n            groupId = Object.values(element)[0].collection_uid;\n        } else {\n            groupTitle = Object.values(element)[0].username;\n            groupId = Object.values(element)[0].owner_uuid;\n        }\n        for (const item of element)listgroup += (0, $3272937b030a975a$export$cbdc54c51b649c98)(item, typebadge, endpoint);\n        allCompUIelem += (0, $3272937b030a975a$export$da2a595be284078a)(typebadge, element.length, groupTitle, groupId, listgroup);\n    }\n    return allCompUIelem;\n};\nconst $03e266e399b535e5$var$getSingleComps = (groupedComps, endpoint)=>{\n    let listElelemts = \"\";\n    const listCompsSingle = groupedComps.singlecomps;\n    listCompsSingle === null || listCompsSingle === void 0 ? void 0 : listCompsSingle.forEach((element)=>{\n        const template = (0, $3272937b030a975a$export$971becedf6ebeceb)(element, endpoint);\n        listElelemts += template;\n    });\n    return listElelemts;\n};\nconst $03e266e399b535e5$var$paintListOfCompositions = (groupedComps, customgroup, endpoint, totalcomps)=>{\n    let listElelemts = \"\";\n    const numberGroupsByCollections = Object.keys(groupedComps.groupedbycoll).length;\n    const numberCustomGroups = customgroup ? Object.keys(groupedComps[customgroup]).length : 0;\n    let numberSinglComp = groupedComps.singlecomps.length;\n    if (numberGroupsByCollections > 0) {\n        const listComps = groupedComps.groupedbycoll;\n        const template = $03e266e399b535e5$var$paintGroupCollection(listComps, \"coll\", endpoint);\n        listElelemts += template;\n    }\n    if (numberCustomGroups > 0) {\n        const listComps = groupedComps[customgroup];\n        const typeofbadge = customgroup === \"groupedbycollab\" ? \"collab\" : \"user\";\n        const template = $03e266e399b535e5$var$paintGroupCollection(listComps, typeofbadge, endpoint);\n        listElelemts += template;\n    }\n    if (numberSinglComp > 0) listElelemts += $03e266e399b535e5$var$getSingleComps(groupedComps, endpoint);\n    const legendButtons = (0, $3272937b030a975a$export$bca9dffb57f7792b)(numberGroupsByCollections, numberCustomGroups, numberSinglComp, endpoint, totalcomps);\n    (0, $3272937b030a975a$export$1f60eb8703988013)(listElelemts, legendButtons);\n};\nconst $03e266e399b535e5$var$initHomPage = async ()=>{\n    const queryString = window.location.search;\n    const user_id = queryString.split(\"userid=\")[1];\n    const collection_uid = queryString.split(\"collectionid=\")[1];\n    let isAuth = await $03e266e399b535e5$var$getMyProfile();\n    $03e266e399b535e5$export$4cd34456ac1eb639 = isAuth.ok;\n    if (user_id) await $03e266e399b535e5$var$getCompositionsByUserUid(user_id, isAuth);\n    else if (collection_uid) await $03e266e399b535e5$var$getCompositionsByColelctionUid(collection_uid, isAuth);\n    else if (isAuth.ok) await $03e266e399b535e5$export$b99e48ec291af6c0();\n    else await $03e266e399b535e5$export$8d85b36da8527a05();\n    (0, $be366c05d924947f$export$184163c68675dcce)(isAuth, user_id || collection_uid);\n};\n(0, $3272937b030a975a$export$c1504dbc5bdba629)();\n(0, $7hG31.activateGoHomeLink)();\n$03e266e399b535e5$var$initHomPage();\n(0, $002a5d7c786a0466$export$ddb3bbf4ed6f1ca3)();\n\n\n\nvar $d2TTa = parcelRequire(\"d2TTa\");\n\nvar $72lX3 = parcelRequire(\"72lX3\");\n\nlet $b8a27fff14674973$var$EDIT_STATUS = false;\nconst $b8a27fff14674973$var$showAllCollButton = document.getElementById(\"openMyCollectionsButton\");\nconst $b8a27fff14674973$var$editButton = document.getElementById(\"editmycollectionsbutton\");\nconst $b8a27fff14674973$var$fetchCollectionsTree = async ()=>{\n    const response = await fetch(\"/mycollectionsastree\");\n    const data = await response.json();\n    return data;\n};\nconst $b8a27fff14674973$var$createTreeHTML = (item)=>{\n    let html = `\n        <span id='removeCollIcon${item.uuid}' data-uuid='${item.uuid}' data-title='${item.title}' role='button' class='badge badge-pill badge-danger' hidden>-</span>\n        <li id='${item.uuid}' class='list-group-item border-bottom-0 border-right-0 border-top-0 border-warning'>\n            <input type='text' class='form-control border-secondary' id='treecolltitleinput${item.uuid}' data-uuid='${item.uuid}' placeholder='Type a new title'\n            title='collectiontitle' value='${item.title}' disabled>\n        </li>`;\n    if (item.compositions.length > 0 || item.collections.length > 0) {\n        html += \"<ul>\";\n        for (const composition of item.compositions)html += `<li class='list-group-item border-0'><a href='${(0, $03e266e399b535e5$export$5e4b5ab8660ba9d5) + composition.uuid}'><u>${composition.title}</u></a></li>`;\n        for (const collection of item.collections)html += $b8a27fff14674973$var$createTreeHTML(collection);\n        html += \"</ul>\";\n    }\n    return html;\n};\nconst $b8a27fff14674973$var$renderTree = async ()=>{\n    const treeContainer = document.getElementById(\"listCollContainerAllColl\");\n    const data = await $b8a27fff14674973$var$fetchCollectionsTree();\n    let html = \"<ul>\";\n    for (const collection of data)html += $b8a27fff14674973$var$createTreeHTML(collection);\n    html += \"</ul>\";\n    treeContainer.innerHTML = html;\n};\nconst $b8a27fff14674973$var$clickEditButtonHandler = ()=>{\n    if ($b8a27fff14674973$var$EDIT_STATUS) {\n        $b8a27fff14674973$var$EDIT_STATUS = false;\n        $b8a27fff14674973$var$editButton.innerText = \"Edit\";\n        $b8a27fff14674973$var$disableEdition();\n    } else {\n        $b8a27fff14674973$var$EDIT_STATUS = true;\n        $b8a27fff14674973$var$editButton.innerText = \"Done\";\n        $b8a27fff14674973$var$enableEdition();\n    }\n};\nconst $b8a27fff14674973$var$enableEdition = ()=>{\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`);\n    elementsWithHiddenAttribute.forEach((element)=>{\n        element.removeAttribute(\"hidden\");\n        $b8a27fff14674973$var$removeCollectionClickhHandler(element.getAttribute(\"data-uuid\"), element.getAttribute(\"data-title\"));\n    });\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`);\n    elementsWithDisabledAttribute.forEach((element)=>{\n        element.removeAttribute(\"disabled\");\n        $b8a27fff14674973$var$updateInputTextEventHandler(element.getAttribute(\"data-uuid\"), element.value);\n    });\n};\nconst $b8a27fff14674973$var$disableEdition = ()=>{\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`);\n    elementsWithHiddenAttribute.forEach((element)=>{\n        element.setAttribute(\"hidden\", \"true\");\n    });\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`);\n    elementsWithDisabledAttribute.forEach((element)=>{\n        element.setAttribute(\"disabled\", \"true\");\n    });\n};\nconst $b8a27fff14674973$var$clickAllCollButtonHandler = async ()=>{\n    $b8a27fff14674973$var$EDIT_STATUS = false;\n    $b8a27fff14674973$var$editButton.innerText = \"Edit\";\n    await $b8a27fff14674973$var$renderTree();\n    $b8a27fff14674973$var$editButton.addEventListener(\"click\", $b8a27fff14674973$var$clickEditButtonHandler, false);\n};\n$b8a27fff14674973$var$showAllCollButton === null || $b8a27fff14674973$var$showAllCollButton === void 0 ? void 0 : $b8a27fff14674973$var$showAllCollButton.addEventListener(\"click\", $b8a27fff14674973$var$clickAllCollButtonHandler, false);\nconst $b8a27fff14674973$var$confirmDeleteCollectionModal = async (event, collectionId, collectionTitle)=>{\n    const chk = event.target;\n    if (chk.tagName === \"SPAN\") {\n        if (confirm(`Are you sure you want remove the collection ${collectionTitle} and all of its content?`) == true) {\n            const response = await fetch((0, $72lX3.ENDPOINT) + \"/deletecollection/\" + collectionId, {\n                method: \"DELETE\"\n            });\n            if (response === null || response === void 0 ? void 0 : response.ok) {\n                var _listElemToDelete_nextSibling;\n                document.getElementById(\"removeCollIcon\" + collectionId).remove();\n                const listElemToDelete = document.getElementById(collectionId);\n                if ((listElemToDelete === null || listElemToDelete === void 0 ? void 0 : (_listElemToDelete_nextSibling = listElemToDelete.nextSibling) === null || _listElemToDelete_nextSibling === void 0 ? void 0 : _listElemToDelete_nextSibling.tagName) === \"UL\") listElemToDelete.nextSibling.remove();\n                listElemToDelete.remove();\n            }\n        } else event.target.checked = false;\n    }\n};\nconst $b8a27fff14674973$var$removeCollectionClickhHandler = (collectionId, collectionTitle)=>{\n    document.getElementById(\"removeCollIcon\" + collectionId).onclick = async (event)=>{\n        await $b8a27fff14674973$var$confirmDeleteCollectionModal(event, collectionId, collectionTitle);\n    };\n};\nconst $b8a27fff14674973$var$updateInputTextEventHandler = (collectionId, currentTitle)=>{\n    document.getElementById(\"treecolltitleinput\" + collectionId).onblur = (event)=>{\n        $b8a27fff14674973$var$handleInputBlur(event, collectionId, currentTitle);\n    };\n};\nconst $b8a27fff14674973$var$updateCollectionTitleRqst = (value, uuid)=>{\n    const updateTitleApi = (0, $72lX3.ENDPOINT) + \"/updatecolltitle\";\n    const data = {\n        title: value,\n        uuid: uuid\n    };\n    fetch(updateTitleApi, {\n        method: \"PATCH\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n    }).then().catch((error)=>{\n        console.error(\"Error updating value:\", error);\n    });\n};\nconst $b8a27fff14674973$var$handleInputBlur = (event, collId, currTitle)=>{\n    const newValue = event.target.value;\n    if (currTitle !== newValue) {\n        if (!newValue || newValue === \"\") {\n            event.target.value = currTitle;\n            alert(\"Introduce a valid title, please\");\n            return;\n        } else $b8a27fff14674973$var$updateCollectionTitleRqst(newValue, collId);\n    }\n};\n\n\nconst $2f1ee4bd228745c2$var$createNewButton = document.getElementById(\"createNewButton\");\nconst $2f1ee4bd228745c2$var$createNewButtonAtHome = document.getElementById(\"createNewButtonAtHome\");\nconst $2f1ee4bd228745c2$var$clickNewButtonHandler = ()=>{\n    if (!(0, $03e266e399b535e5$export$4cd34456ac1eb639)) window.location.href = \"/login.html\";\n    else {\n        document.getElementById(\"newtitle\").value = \"\";\n        document.getElementById(\"newdescription\").value = \"\";\n        const saveCompositionButton = document.getElementById(\"newcreation\");\n        $2f1ee4bd228745c2$var$saveEventListener(saveCompositionButton);\n        (0, $d2TTa.getCollections)().then((result)=>{\n            if (result) $2f1ee4bd228745c2$var$getCompCollSuccess(result);\n            else (0, $d2TTa.getCollectionsError)();\n        });\n    }\n};\n$2f1ee4bd228745c2$var$createNewButton === null || $2f1ee4bd228745c2$var$createNewButton === void 0 ? void 0 : $2f1ee4bd228745c2$var$createNewButton.addEventListener(\"click\", $2f1ee4bd228745c2$var$clickNewButtonHandler, false);\n$2f1ee4bd228745c2$var$createNewButtonAtHome === null || $2f1ee4bd228745c2$var$createNewButtonAtHome === void 0 ? void 0 : $2f1ee4bd228745c2$var$createNewButtonAtHome.addEventListener(\"click\", $2f1ee4bd228745c2$var$clickNewButtonHandler, false);\nconst $2f1ee4bd228745c2$var$getCompCollSuccess = (list)=>{\n    document.getElementById(\"listCollContainer\").innerHTML = \"\";\n    (0, $d2TTa.createListCollections)(list, \"listCollContainer\");\n};\nconst $2f1ee4bd228745c2$var$saveEventListener = (saveCompositionButton)=>{\n    saveCompositionButton === null || saveCompositionButton === void 0 ? void 0 : saveCompositionButton.addEventListener(\"click\", $2f1ee4bd228745c2$var$saveEventListenerHandler);\n};\nconst $2f1ee4bd228745c2$var$saveEventListenerHandler = (e)=>{\n    const newCreation = document.querySelector('input[name=\"newMusicTypeRadioButton\"]:checked').value;\n    let apiMethod = \"/newcomposition\";\n    if (newCreation === \"coll\") apiMethod = \"/newcollection\";\n    let newtitle = document.getElementById(\"newtitle\").value;\n    const privacyLevel = document.querySelector('input[name=\"newMusicPrivacyRadios\"]:checked').value;\n    if (!newtitle) {\n        alert(\"Introduce a valid title, please\");\n        return;\n    }\n    const newdescription = document.getElementById(\"newdescription\").value;\n    const collectInput = document.getElementById(\"inputGroupSelectCollect\");\n    let parentCollection = (collectInput === null || collectInput === void 0 ? void 0 : collectInput.value) || null;\n    if (parentCollection === \"0\") parentCollection = null;\n    let body = JSON.stringify({\n        title: newtitle,\n        privacy_level: privacyLevel,\n        parent_uuid: parentCollection,\n        description: newdescription\n    });\n    let errorIs = null;\n    (0, $7hG31.startLoader)(\"Creating...\");\n    fetch((0, $72lX3.ENDPOINT) + apiMethod, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        },\n        body: body\n    }).then((r)=>{\n        if (!r.ok) errorIs = r.statusText;\n        return r.json();\n    }).then((data)=>{\n        (0, $7hG31.cancelLoader)();\n        if (data) $2f1ee4bd228745c2$var$verifyResponse(data);\n        else throw new Error(data);\n    }).catch((error)=>{\n        errorIs = error;\n        (0, $7hG31.cancelLoader)();\n    });\n};\nconst $2f1ee4bd228745c2$var$verifyResponse = (response)=>{\n    $(\"#newMusicModal\").modal(\"hide\");\n    if (response.composition) window.location.href = (0, $03e266e399b535e5$export$5e4b5ab8660ba9d5) + response.composition.uuid;\n    else if (response.ok) (0, $lV0Oe.default).dynamicModalDialog(`Collection created successfully!`, null, \"\", \"Close\", \"New Collection\", \"bg-success\");\n    else (0, $lV0Oe.default).dynamicModalDialog(`An error happened, item not created`, null, \"\", \"Close\", \"Error at Creation\", \"bg-danger\");\n};\n\n})();\n//# sourceMappingURL=index.a72d56f5.js.map\n","const MODE = 'STAGE' // STAGE\n\nconst ENVIRONMENTS = {\n    PROD:{        \n        ENDPOINT:'',\n        UPLOAD_ENDPOINT:''        \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'       \n    },\n    DEV:{        \n        ENDPOINT:window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.host + '/fileUpload'        \n    }\n}\n\nmodule.exports = {    \n    ENDPOINT: ENVIRONMENTS[MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: ENVIRONMENTS[MODE].UPLOAD_ENDPOINT\n}","class DynamicModal {\n    constructor() {\n        this.modal = this.getDynamicModal()\n        this.callbackDismiss = null\n        if (!this.modal) {\n            this.modal = this.initDynamicModal()\n            const self = this\n            $(this.modal).on('hide.bs.modal', function (event) {\n                if(self.callbackDismiss){\n                    self.callbackDismiss()\n                    self.callbackDismiss = null\n                }\n            })\n        }\n    }\n\n    dynamicModalDialog(message, idbtn, textBtnOK, textBtnCancel, popupTitle, backgroundHeader, callbackDismiss) {\n        const html =\n            '<div class=\"modal-header '+backgroundHeader+' text-white\">' +\n            '<h5 class=\"modal-title\" id=\"dynamicModalLabel\">'+popupTitle+'</h5>' +\n            '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">' +\n            '<span aria-hidden=\"true\">&times;</span>' +\n            '</button>' +\n            '</div>' +\n            '<div class=\"modal-body\">' +\n            message +\n            '</div>' +\n            '<div class=\"modal-footer\">' +\n            '<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">'+textBtnCancel+'</button>' +\n            (idbtn!==null?'<button id=' + idbtn + ' type=\"button\" class=\"btn btn-primary\">' + textBtnOK + '</button>':'') +\n            '</div>'\n\n        this.setDynamicModalContent(html)\n        this.callbackDismiss = callbackDismiss\n        $(this.modal).modal('show')\n    }\n\n    getDynamicModal() {\n        return document.getElementById('dynamicModal')\n    }\n\n    setDynamicModalContent(html) {\n        this.modal.querySelector('.modal-content').innerHTML = html\n    }\n\n    closeDynamicModal(callBackClose) {\n        $(this.modal).modal('hide')\n        if(callBackClose){\n            callBackClose()\n        }\n    }\n\n    initDynamicModal() {\n        const modal = document.createElement('div')\n        modal.classList.add('modal', 'fade')\n        modal.setAttribute('id', 'dynamicModal')\n        modal.setAttribute('tabindex', '-1')\n        modal.setAttribute('role', 'dialog')\n        modal.setAttribute('aria-labelledby', 'dynamicModalLabel')\n        modal.setAttribute('aria-hidden', 'true')\n        modal.innerHTML =\n            '<div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">' +\n            '<div class=\"modal-content\"></div>' +\n            '</div>'\n        document.body.appendChild(modal)\n        return modal\n    }\n}\n\nconst dynamicModalInstance = new DynamicModal()\n\nexport default dynamicModalInstance","import { ENDPOINT } from './config'\n\nexport const uriUserPage = '/index.html?userid='\nexport const uriCollectionPage = '/index.html?collectionid='\n\nexport const UserRole = Object.freeze({\n    none : 0,\n    owner : 1,\n    admin : 2,\n    member : 3,\n    guest : 4\n})\n\nexport const LevelPrivacy = Object.freeze({\n    public : 1,\n    onlyreg : 2,\n    private : 3\n})\n\nexport const PRIVACY_BADGE_STYLE = {[LevelPrivacy.public] : 'badge-public', [LevelPrivacy.onlyreg] : 'badge-onlyreg', [LevelPrivacy.private] : 'badge-private'}\nexport const PRIVACY_BADGE_TEXT = {[LevelPrivacy.public] : 'PUBLIC', [LevelPrivacy.onlyreg] : 'REG USERS', [LevelPrivacy.private] : 'PRIVATE'}\n\nexport const startLoader = (loadingMessage) => {    \n    const loaderElement = document.getElementById('loader')    \n    loaderElement.innerHTML = `<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;${loadingMessage}`\n    loaderElement.classList.remove('loader-hidden')\n}\n\nexport const cancelLoader = () => {\n    const loaderElement = document.getElementById('loader')\n    loaderElement.classList.add('loader-hidden')\n}\n\nexport const callJsonApi = async (apimethod, rqstmethod, body, useLoaderWithText) => {\n    const request = {\n        method: rqstmethod || 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    if(body){\n        request.body = JSON.stringify(body)\n    }\n    try {\n        useLoaderWithText && startLoader(useLoaderWithText)\n        const sendRqst = await fetch(ENDPOINT + apimethod, request)\n        useLoaderWithText && cancelLoader()\n        const respToJson = await sendRqst.json()\n        if (respToJson && !respToJson.error) {\n            return respToJson\n        } else {\n            return (respToJson?.error || 'An error occurred')\n        }\n    } catch (error) {\n        useLoaderWithText && cancelLoader()\n        return(error)\n    }\n}\n\n/* https://stackoverflow.com/a/5166806 */\nexport const looksLikeMail = (str) => {\n    const lastAtPos = str.lastIndexOf('@')\n    const lastDotPos = str.lastIndexOf('.')\n    return (lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2)\n}\n\nexport const activateGoHomeLink = () => {\n    const goHomeLink = document.getElementById('goHome')\n    if(window.location.host === 'localhost:80' || window.location.origin === 'http://localhost'){\n        goHomeLink.href = window.location.origin + '/index.html'\n    } else {\n        goHomeLink.href = window.location.origin\n    }\n}\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\nexport const MEDIA_CONSTRAINTS = { audio: {echoCancellation:false, noiseSuppression:false, autoGainControl:false, latency: 0, channelCount: 1 }}","import { cancelLoader, callJsonApi } from './utils'\n\nexport const checkIfTermsAccepted = (userprofile, callback) => {\n    cancelLoader()\n    callback(userprofile?.terms_accepted)\n}\n\nexport const handleTermsNotAccepted = () => {\n\n    $('#acceptTermsModal').modal({\n        backdrop: 'static',\n        keyboard: false  // to prevent closing with Esc button (if you want this too)\n    })\n    $('#acceptTermsModal').modal('show')\n    document.getElementById('buttonAcceptTerms').onclick = rqstAcceptTerms\n    document.getElementById('buttonRejectTerms').onclick = rqstRejectTerms\n}\n\nconst rqstAcceptTerms = async () => {\n    const data = await callJsonApi('/acceptterms', 'PUT', null, 'Welcome...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n    }\n}\nconst rqstRejectTerms = async () => {\n    const data = await callJsonApi('/rejectterms', 'PUT', null, 'Deleting information...')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n        window.location.href = window.location.origin\n    }\n}\n\nexport const generateAcceptTermsModal = (attachToElem) => {\n\n    const isModal = document.getElementById('acceptTermsModal')\n\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML('afterend', modalDialog)\n    }\n    handleTermsNotAccepted()\n}","\nimport { ENDPOINT } from './config'\nimport DynamicModal from './modaldialog'\n\nexport const getCollections = async () => {\n   \n    const response = await fetch(ENDPOINT + '/mycollections') \n    let result = null            \n    if(response?.ok){ \n        const respJson = await response.json()\n        result = respJson\n    }\n    return result\n}\n\nexport const getCollectionsError = () => {\n    DynamicModal.dynamicModalDialog(\n        'Problem getting collections', \n        null, \n        '',\n        'Close',\n        'Error',\n        'bg-danger'\n    )\n}\n\nexport const createListCollections = (collections,listId, coll_id) => {\n    const theList = collections.all_collections\n    const listCollContainer  = document.getElementById(listId)\n    let listOptions = `<option value='0'>...</option>`\n    let selected = null\n    theList.forEach((element) => {\n        if (element) {\n            if(element.uuid === coll_id){\n                selected = 'selected>'\n            } else {\n                selected = null\n            }\n            const template = `<option value='${element.uuid}' ${selected?selected:'>'}${element.title}</option>`\n            listOptions += template\n        }\n    })\n    const listElelemts = `<select class='custom-select' id='inputGroupSelectCollect'>${listOptions}</select>`   \n    listCollContainer.insertAdjacentHTML('afterbegin', listElelemts)\n}","\nimport { ENDPOINT } from '../../../common/js/config'\nimport DynamicModal from '../../../common/js/modaldialog'\nimport { startLoader, cancelLoader } from '../../../common/js/utils'\nimport {uriCompositionPage, IS_AUTH} from './home'\nimport {getCollections, getCollectionsError, createListCollections } from '../../../common/js/collectionshandler.js'\nimport './editcollections'\n\nconst createNewButton  = document.getElementById('createNewButton')\nconst createNewButtonAtHome  = document.getElementById('createNewButtonAtHome')\n\nconst clickNewButtonHandler = () => {\n  if(!IS_AUTH){\n    window.location.href = '/login.html'\n  } else {\n    document.getElementById('newtitle').value = ''\n    document.getElementById('newdescription').value = ''\n    const saveCompositionButton = document.getElementById('newcreation')\n    saveEventListener(saveCompositionButton)\n    getCollections().then( result => {\n        if(result){\n            getCompCollSuccess(result)\n        } else {\n            getCollectionsError()\n        }\n    })\n  }  \n}\n\ncreateNewButton?.addEventListener('click', clickNewButtonHandler, false)\ncreateNewButtonAtHome?.addEventListener('click', clickNewButtonHandler, false)\n\nconst getCompCollSuccess = (list) => {\n  document.getElementById('listCollContainer').innerHTML = ''\n  createListCollections(list, 'listCollContainer')\n}\n\nconst saveEventListener = (saveCompositionButton) =>{\n  saveCompositionButton?.addEventListener('click', saveEventListenerHandler)\n}\n\nconst saveEventListenerHandler = (e) => {\n  const newCreation = document.querySelector('input[name=\"newMusicTypeRadioButton\"]:checked').value\n  let apiMethod = '/newcomposition'\n  if(newCreation === 'coll'){\n    apiMethod = '/newcollection'\n  }\n  let newtitle = document.getElementById('newtitle').value\n  const privacyLevel = document.querySelector('input[name=\"newMusicPrivacyRadios\"]:checked').value\n  if (!newtitle) {\n    alert('Introduce a valid title, please')\n    return\n  }\n\n  const newdescription = document.getElementById('newdescription').value  \n  const collectInput = document.getElementById('inputGroupSelectCollect')\n  let parentCollection = collectInput?.value || null\n  if(parentCollection === '0'){\n      parentCollection = null\n  }\n\n  let body = JSON.stringify({\n    title: newtitle,\n    privacy_level: privacyLevel,\n    parent_uuid: parentCollection,\n    description: newdescription\n  })\n\n  let errorIs = null\n  startLoader('Creating...')\n  fetch(ENDPOINT + apiMethod, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n    },\n    body: body\n  })\n    .then((r) => {\n      if (!r.ok) {\n        errorIs = r.statusText\n      }\n      return r.json()\n    })\n    .then(data => {\n      cancelLoader()\n      if (data) {\n        verifyResponse(data)\n      } else {\n        throw new Error(data)\n      }\n    }).catch((error) => {      \n      errorIs = error\n      cancelLoader()\n    })\n}\n\nconst verifyResponse = (response)=> {\n  $('#newMusicModal').modal('hide')  \n  if(response.composition){\n    window.location.href = uriCompositionPage + response.composition.uuid  \n  } else if(response.ok) {\n    DynamicModal.dynamicModalDialog(\n      `Collection created successfully!`,\n      null,\n      '',\n      'Close',\n      'New Collection',\n      'bg-success'\n    )\n  } else {\n    DynamicModal.dynamicModalDialog(\n      `An error happened, item not created`,\n      null,\n      '',\n      'Close',\n      'Error at Creation',\n      'bg-danger'\n    )\n  }\n}","import { callJsonApi, activateGoHomeLink } from '../../../common/js/utils'\r\nimport {breadcrumbHandler, navigate} from './breadcrumbhandler'\r\nimport {checkIfTermsAccepted, generateAcceptTermsModal} from '../../../common/js/acceptterms'\r\nimport {getLegendButtons,\r\n  paintMainElemsHomePage,\r\n  paintSingleComposition,\r\n  getUIListElemInsideCollection,\r\n  getUICardElemForCollection,\r\n  cleanWelcomeContainer,\r\n  updateUIWithCollectionInfo,\r\n  updateUIWithUserInfo,\r\n  initNavigationMenu\r\n} from './home_ui'\r\nimport {getGroupedCompositionsWithUsers,\r\n  getGroupedCompositionsWithCollab,\r\n  isuserpage,\r\n  getGroupedCompositionsWithSubCollect,\r\n  setCurrentUserName}\r\nfrom './home_helper'\r\nimport {setPlayButtonsHandler, fabPlayButtonClickHandler, prepareAudioTrackPlaylist} from './audioplayer'\r\n\r\nexport const uriCompositionPage = '/composition.html?compositionId='\r\nexport let IS_AUTH = false\r\n\r\nconst homePageTermsAccepted = (termsAccepted) => {    \r\n    if(!termsAccepted){\r\n        generateAcceptTermsModal('header')\r\n    } \r\n}\r\nconst getMyProfile = async () => {\r\n  \r\n  const isAuthenticated = await callJsonApi('/profile', 'GET', null, 'Loading profile...')\r\n  if (isAuthenticated.ok) {\r\n    setCurrentUserName(isAuthenticated.name)\r\n    document.getElementById('userlogin').style.display = 'none'\r\n    document.getElementById('useroptions').style.display = ''\r\n    document.getElementById('display_profile_name').innerText = `[${isAuthenticated.name}]`    \r\n    checkIfTermsAccepted(isAuthenticated, homePageTermsAccepted)    \r\n  }\r\n  return isAuthenticated\r\n}\r\n\r\nexport const getMyCompositions = async () => {\r\n  const endpoint = '/mycompositions'\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading my music...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }  \r\n}\r\n\r\nconst getCompositionsByUserUid = async (useruid, auth) => {\r\n  const endpoint = '/compositionsbyuserid/'+useruid\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading user...')\r\n  if(data.compositions){\r\n    setCurrentUserName(data.username)\r\n    updateUIWithUserInfo(data.username, useruid)\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for user id')\r\n    if(auth.ok){\r\n      navigate('my-comp')\r\n    } else {\r\n      navigate('recent-comp')\r\n    }      \r\n  }  \r\n}\r\n\r\nconst getCompositionsByColelctionUid = async (collectionuid, auth) => {\r\n  const endpoint = '/collectionastreebyid/'+collectionuid\r\n  const data = await callJsonApi(endpoint, 'GET', null, 'Loading collection...')\r\n  if(data.compositions){\r\n    setCurrentUserName(data.username)\r\n    updateUIWithCollectionInfo(data.collection_name, data.username, data.owneruid)\r\n    return renderHomePage(data.compositions, endpoint)\r\n  } else {\r\n    alert('invalid return value for collection id')\r\n    if(auth.ok){\r\n      navigate('my-comp')\r\n    } else {\r\n      navigate('recent-comp')\r\n    }      \r\n  }  \r\n}\r\n\r\nexport const getRecentCompositions = async (withScroll) => {\r\n  const endpoint = '/recentcompositions'\r\n  const data = await callJsonApi('/recentcompositions', 'GET', null, 'Loading recent...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint, withScroll)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }\r\n}\r\n\r\nexport const getAllCompositions = async (withScroll) => {\r\n  const endpoint = '/compositions'\r\n  const data = await callJsonApi('/compositions', 'GET', null, 'Loading all...')\r\n  if(data.compositions){\r\n    return renderHomePage(data.compositions, endpoint, withScroll)\r\n  } else {\r\n    alert('invalid return value for compisitions list')\r\n  }\r\n}\r\n\r\nconst renderHomePage = (compositionsList, endpoint, withScroll) => {\r\n  document.getElementById('grid').innerHTML = ''\r\n  document.getElementById('legendbuttons').innerHTML = ''\r\n  const notUserPublicPage = !endpoint.includes('/compositionsbyuserid/') && !endpoint.includes('/collectionastreebyid/')\r\n  if(notUserPublicPage){\r\n    cleanWelcomeContainer(false, withScroll)\r\n  }\r\n  if (!compositionsList.length && notUserPublicPage) {\r\n    document.getElementById('initialmessage').hidden = false\r\n    document.getElementById('initialmessage').classList.add('d-flex')\r\n  } else {   \r\n    renderHomePageWithLists(compositionsList, endpoint)\r\n  }\r\n  prepareAudioTrackPlaylist(compositionsList)\r\n  setPlayButtonsHandler()\r\n}\r\n\r\nconst renderHomePageWithLists = (compositionsList, endpoint) => {\r\n  if(endpoint.includes('/collectionastreebyid/')){        \r\n    const parent_coll_id = endpoint.replace('/collectionastreebyid/', '')\r\n    const groupedCompsAndSubColl = getGroupedCompositionsWithSubCollect(compositionsList, parent_coll_id)       \r\n    paintListOfCompositions(groupedCompsAndSubColl, null, endpoint, compositionsList.length)\r\n  } else if (!isuserpage(endpoint)) {\r\n    const groupedComps = getGroupedCompositionsWithUsers(compositionsList)\r\n    paintListOfCompositions(groupedComps, 'groupedbyuser_final', endpoint, compositionsList.length)\r\n  }else {\r\n    const groupedCompsWithCollab = getGroupedCompositionsWithCollab(compositionsList)\r\n    paintListOfCompositions(groupedCompsWithCollab, 'groupedbycollab', endpoint, compositionsList.length)\r\n  }\r\n}\r\n\r\nconst paintGroupCollection = (listcomps, typebadge, endpoint) => {\r\n  \r\n  let allCompUIelem = ''  \r\n  for (const comp in listcomps) {    \r\n    const element = listcomps[comp]\r\n    let listgroup = ''\r\n    let groupTitle = ''\r\n    let groupId = null\r\n    if(typebadge === 'collab') {\r\n      groupTitle = 'Collaborations'\r\n    } else if (typebadge === 'coll'){\r\n      groupTitle = Object.values(element)[0].parent_collection\r\n      groupId = Object.values(element)[0].collection_uid\r\n    } else {\r\n      groupTitle = Object.values(element)[0].username\r\n      groupId = Object.values(element)[0].owner_uuid\r\n    } \r\n    for (const item of element) {      \r\n      listgroup += getUIListElemInsideCollection(item, typebadge, endpoint)\r\n    }    \r\n    allCompUIelem += getUICardElemForCollection(typebadge, element.length, groupTitle, groupId, listgroup)\r\n  }\r\n  return allCompUIelem\r\n}\r\n\r\nconst getSingleComps = (groupedComps, endpoint) => {\r\n  let listElelemts = ''\r\n  const listCompsSingle = groupedComps.singlecomps\r\n  listCompsSingle?.forEach((element) => {\r\n    const template = paintSingleComposition(element, endpoint)\r\n    listElelemts += template\r\n  })\r\n  return listElelemts\r\n}\r\n\r\nconst paintListOfCompositions = (groupedComps, customgroup, endpoint, totalcomps) => {\r\n  \r\n  let listElelemts = ''\r\n  const numberGroupsByCollections = Object.keys(groupedComps.groupedbycoll).length\r\n  const numberCustomGroups = customgroup ? Object.keys(groupedComps[customgroup]).length : 0\r\n  let numberSinglComp = groupedComps.singlecomps.length\r\n\r\n  if (numberGroupsByCollections > 0) {\r\n    const listComps = groupedComps.groupedbycoll\r\n    const template = paintGroupCollection(listComps, 'coll', endpoint)\r\n    listElelemts += template\r\n  }\r\n  if (numberCustomGroups > 0) {\r\n    const listComps = groupedComps[customgroup]\r\n    const typeofbadge = (customgroup==='groupedbycollab') ? 'collab' : 'user'\r\n    const template = paintGroupCollection(listComps, typeofbadge, endpoint)\r\n    listElelemts += template\r\n  }\r\n  if (numberSinglComp > 0) {\r\n    listElelemts += getSingleComps(groupedComps, endpoint)    \r\n  }\r\n  const legendButtons = getLegendButtons(numberGroupsByCollections, numberCustomGroups, numberSinglComp, endpoint, totalcomps) \r\n  paintMainElemsHomePage(listElelemts, legendButtons)\r\n}\r\n\r\nconst initHomPage = async () => {  \r\n  const queryString = window.location.search\r\n  const user_id = queryString.split('userid=')[1]\r\n  const collection_uid = queryString.split('collectionid=')[1]\r\n  let isAuth  = await getMyProfile()\r\n  IS_AUTH = isAuth.ok\r\n  if(user_id){    \r\n    await getCompositionsByUserUid(user_id, isAuth)\r\n  } else if(collection_uid){\r\n    await getCompositionsByColelctionUid(collection_uid, isAuth)\r\n  } else if (isAuth.ok) {\r\n    await getMyCompositions()\r\n  } else {\r\n    await getRecentCompositions()\r\n  }\r\n  breadcrumbHandler(isAuth, user_id || collection_uid)\r\n}\r\n\r\ninitNavigationMenu()\r\nactivateGoHomeLink()\r\ninitHomPage()\r\nfabPlayButtonClickHandler()","import { getRecentCompositions, getMyCompositions, getAllCompositions } from './home'\n\nexport const breadcrumbHandler = (isauth, isuserorcollection) => {\n    createBreadCrumbNavBar(isauth, isuserorcollection)   \n    document.querySelectorAll('.breadcrumb-item a').forEach(function (element) {\n        element.addEventListener('click', function (event) {\n            event.preventDefault()\n            document.querySelector('.active-breadcrumb')?.classList.remove('active-breadcrumb')            \n            event.currentTarget.classList.add('active-breadcrumb')\n            let section = event.currentTarget.getAttribute('data-section')\n            navigate(section, isauth)\n        })\n    })\n}\n\nconst createBreadCrumbNavBar = (isauth, isuserorcollection) => {\n    const navBar = document.getElementById('breadcrumbnavbar')\n    let userOptions = ''\n    if(isauth.ok){\n        userOptions = `<li class='breadcrumb-item ${isuserorcollection ? '' : 'active-breadcrumb'}' aria-current='page'><a href='#' data-section='my-comp'>My Music</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`\n    } else {\n        userOptions = `<li class='breadcrumb-item ${isuserorcollection ? '' : 'active-breadcrumb'}' aria-current='page'><a href='#' data-section='recent-comp'>Recent</a></li>\n        <li class='breadcrumb-item'><a href='#' data-section='all-comp'>All</a></li>`\n    }\n    navBar.innerHTML = userOptions    \n}\n\nexport function navigate(section, isauth) { \n    const url = new URL(window.location.href)\n    url.searchParams.delete('userid')\n    url.searchParams.delete('collectionid')\n    history.replaceState(null, null, url)\n    let withScroll = false\n    switch (section) {\n        case 'recent-comp':\n            withScroll = true\n            getRecentCompositions(withScroll)   \n            break\n        case 'my-comp':            \n            getMyCompositions()\n            break\n        case 'all-comp':\n            document.getElementById('initialmessage').classList.remove('d-flex')\n            document.getElementById('initialmessage').hidden = true\n            if(!isauth.ok) {\n                withScroll = true\n            }\n            getAllCompositions(withScroll)\n            break\n        default:\n            console.log('section default')\n    }\n}","import { uriCompositionPage, IS_AUTH } from './home'\nimport { isuserpage, displayUserNameInCard } from './home_helper'\nimport { PRIVACY_BADGE_STYLE, PRIVACY_BADGE_TEXT, uriUserPage, uriCollectionPage } from '../../../common/js/utils'\nconst homeVideoUrl = new URL('../../../static/videos/compress_home_page_video.mp4', import.meta.url)\n\nconst CARD_BADGE_STYLE = { 'coll': 'badge-collection', 'user': 'badge-warning', 'collab': 'badge-collab' }\nconst CARD_BORDER_STYLE = { 'coll': 'border-collection', 'user': 'border-warning', 'collab': 'border-collab' }\nconst URI_PAGE = { 'coll': uriCollectionPage, 'user': uriUserPage }\n\n//const WELCOME_TEXT = 'We present Hi-Audio Online Platform a web application for musicians, researchers and an open community of enthusiasts of audio and music with a view to build a public database of music recordings from a wide variety of styles and different cultures.'\n\nconst WELCOME_VIDEO = \n`<div id=\"landing-video-container\" class=\"fullscreen-video-container\">\n    <video playsinline autoplay loop muted>\n      <source src=\"${homeVideoUrl}\">\n    </video>  \n  <div class='fullscreen-video-content'>\n    <div class=\"typewriter\">\n      <h1>Welcome!</h1>      \n    </div>\n    <div class=\"h-100 d-flex\">\n      <div class=\"m-auto\">\n        <a id=\"start-link\" class=\"btn btn-link\" href=\"/login.html\" role=\"button\"><b>LET'S JAM?</b></a>\n      </div>\n    </div>    \n  </div>\n</div>`\n\nexport const initNavigationMenu = () => {\n    \n    document.getElementById('userlogin').innerHTML =    \n    `<li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/login.html'>Register / Login</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${uriCompositionPage}demopage'>Test DAW</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='${window.location.origin}/static/howto.html'>How-To</a>\n    </li>\n    <li class='nav-item'>\n        <a class='dropdown-item' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'><b>News<b></a>\n    </li>\n    `\n\n    document.getElementById('useroptions').innerHTML = \n    `<li class='nav-item'>\n      <a class='nav-link' href='${window.location.origin + '/profile.html'}'>Profile <i id='display_profile_name'></i></a>\n    </li>\n    <li class='nav-item'>\n          <a class='nav-link' href='#' id='createNewButton' data-toggle='modal' data-target='#newMusicModal'>/ Create new</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openMyCollectionsButton' data-toggle='modal' data-target='#editCollectionsModal'>/ My Collections</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='${window.location.origin + '/static/howto.html'}'>/ How-to</a>\n    </li>\n    <li class='nav-item'>\n        <a class='nav-link' href='#' id='openNewsModalButton' data-toggle='modal' data-target='#newsModal'>/ News</a>\n    </li>\n    `\n  handleNewsPopUpClose()\n}\n\nconst handleNewsPopUpClose = () => {\n  $('#newsModal').on('hidden.bs.modal', function (event) {\n    const videoPromo = document.getElementById('promo-video')\n    if (!videoPromo.paused) {\n      videoPromo.pause()\n    }\n  })\n}\n\nexport const getLegendButtons = (numberGroupsByCollections, numberGroupsCustom, numberSinglComp, endpoint, totalcomps) => {\n    const displayGroupsByLabel = (numberGroupsByCollections || ((!isuserpage(endpoint)) && numberGroupsCustom) || numberSinglComp)\n    return `<ul class=\"nav justify-content-end\">\n              ${displayGroupsByLabel ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Groups by:&nbsp;</span></h4></li>' : ''}\n              ${numberGroupsByCollections ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-collection\">Collections&nbsp;<span class=\"badge badge-light\">' + numberGroupsByCollections + '</span></span></h4></li>' : ''}            \n              ${((!isuserpage(endpoint)) && numberGroupsCustom) ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-warning\">Users&nbsp;<span class=\"badge badge-light\">' + numberGroupsCustom + '</span></span></h4></li>' : ''}\n              ${numberSinglComp ? '<li class=\"legenditem nav-item\"><h4><span class=\"badge badge-success\">Singles&nbsp;<span class=\"badge badge-light\">' + numberSinglComp + '</span></span></h4></li>' : ''}\n              <li class=\"legenditem nav-item\"><h4><span class=\"badge badge-light\">Total compositions:&nbsp;</span><span class=\"badge badge-light\">${totalcomps}</span></h4></li>\n            </ul>`\n}\n\nexport const paintMainElemsHomePage = (listElelemts, legendButtons) => {\n    document.getElementById('grid').innerHTML = ''\n    document.getElementById('grid').insertAdjacentHTML('afterbegin', listElelemts)\n    document.getElementById('legendbuttons').innerHTML = ''\n    document.getElementById('legendbuttons').insertAdjacentHTML('afterbegin', legendButtons)\n    document.getElementById('searchInput').removeAttribute('disabled')\n}\n\nexport const paintSingleComposition = (element, endpoint) => {\n    const displayName = displayUserNameInCard(endpoint, element.username)\n    const displayNumCollabs = element.contributors.length\n    const last_track = element?.tracks[element?.tracks.length - 1]?.uuid\n    \n    return `<div class='card border-success'>                       \n              <div class=\"card-body\">\n              ${IS_AUTH ? `<span class=\"badge ${PRIVACY_BADGE_STYLE[element.privacy]}\">${PRIVACY_BADGE_TEXT[element.privacy]}</span>` : ''}\n              ${element.opentocontrib ? '<p class=\"badge badge-info\">OPEN TO CONTRIB</p>' : ''}\n              ${element.is_template ? '<p class=\"badge badge-template\">TEMPLATE</p>' : ''}  \n                  <div>\n                    <p class=\"list-group-item-heading\">  \n                      <a href='${uriCompositionPage + element.uuid}' class='card-url'>\n                        <h5 class='card-title'>${element.title}</h5>\n                      </a>\n                    </p>\n                    <p>${displayName ?\n                      `<span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-user'></i>&nbsp;\n                        <a href='${uriUserPage + element.owner_uuid}' class='card-url'>\n                          ${element.username}&nbsp;\n                        </a>\n                      </span>`: ''}\n                    </p>\n                    <p class='text-black-50'>${displayNumCollabs ? ('Collaborators: ' + displayNumCollabs) : ''}</p>\n                    <p class='card-text text-truncate'>${element.description || ''}</p>\n                    ${element.tracks?.length ?\n                    `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : ''}>\n                      <i class='fa fa-play'>&nbsp;</i>Play last added track </span>&nbsp;` : ''}\n                    <span class=\"d-inline-block text-truncate\" style=\"max-width: 250px;\">\n                        <i class='fa fa-music'></i>&nbsp;${'Tracks: ' + element.tracks?.length}\n                    </span>\n                  </div>                \n              </div>            \n          </div>`\n}\n\nexport const getUIListElemInsideCollection = (item, typebadge, endpoint) => {\n\n    const displayName = displayUserNameInCard(endpoint, item.username)\n    const displayNumCollabs = item.contributors.length\n    const last_track = item?.tracks[item?.tracks.length - 1]?.uuid\n    \n    return `<div class=\"list-group-item \">\n              ${IS_AUTH ? `<span class=\"badge ${PRIVACY_BADGE_STYLE[item.privacy]}\">${PRIVACY_BADGE_TEXT[item.privacy]}</span>` : ''}\n              ${item.opentocontrib ? '<span class=\"badge badge-info\">OPEN TO CONTRIB</span>' : ''}\n              ${item.is_template ? '<span class=\"badge badge-template\">TEMPLATE</span>' : ''}  \n              <p class=\"list-group-item-heading\">\n                <a href='${uriCompositionPage + item.uuid}' class='card-url'>\n                    <h5 class='card-title'>${item.title}</h5>\n                </a>\n              </p>\n              ${(typebadge !== 'user' && displayName) ?\n                '<p><span class=\"d-inline-block text-truncate\" style=\"max-width: 220px;\">' +\n                '<i class=\"fa fa-user\"></i>&nbsp;' +\n                '<a href=' + uriUserPage + item.owner_uuid + ' class=\"card-url\">' + item.username + '&nbsp;' +\n                '</a>' +\n                '</span></p>' : ''}\n              <p class='text-black-50'>${displayNumCollabs ? ('Collaborators: ' + displayNumCollabs) : ''}</p>\n              <p class=\"list-group-item-text text-truncate\">\n                ${item.description || ''}\n              </p>\n              ${item.tracks?.length ? `<span class=\"play-control-card d-inline-block text-truncate\" style=\"max-width: 200px;\" ${last_track ? ` data-trackid=\"${last_track}\"` : ''}>\n                <i class='fa fa-play'>&nbsp;</i>Play last added track \n              </span>&nbsp;` : ''}\n              <span class=\"d-inline-block text-truncate\" style=\"max-width: 200px;\">\n                <i class='fa fa-music'></i>&nbsp;${'Tracks: ' + item.tracks?.length}\n              </span>\n            </div>`\n}\n\nexport const getUICardElemForCollection = (typebadge, numitems, groupTitle, groupId, listgroup) => {\n\n    const badegstyle = CARD_BADGE_STYLE[typebadge]\n    const borderstyle = CARD_BORDER_STYLE[typebadge]\n    const url = URI_PAGE[typebadge]\n    const badgeDisplayed = `<span class=\"badge ${badegstyle} d-inline-block text-truncate\" style=\"max-width:85%;\">\n                              <span class=\"badge badge-light\">${numitems}</span>&nbsp;\n                              ${url ? `<a href=${url + groupId} class=\"card-header-url\">${groupTitle}</a>` : `${groupTitle}`}                              \n                          </span>`\n\n    return `<div class='card ${borderstyle}'>                        \n              <h4>${badgeDisplayed}</h4>        \n              <div class=\"card-body\">\n                <div class=\"list-group border\">              \n                  ${listgroup}\n                </div>\n              </div>\n            </div>`\n}\n\nexport const cleanWelcomeContainer = (hidetext, withScroll) => {\n    const welcomecontainer = document.getElementById('welcomecontainer')\n    const videoContainer = document.getElementById('landing-video-container')\n    if (welcomecontainer.lastChild?.id  && welcomecontainer.lastChild?.id !== 'welcometext') {\n      welcomecontainer.removeChild(welcomecontainer.lastChild)\n    }\n    if (!hidetext && !welcomecontainer.lastChild && !videoContainer) {\n        const welcometextelem = document.createElement('div')\n        welcometextelem.id = 'welcometext'\n        welcometextelem.innerHTML = IS_AUTH ? '': `${WELCOME_VIDEO}`\n        document.getElementById('welcomecontainer').appendChild(welcometextelem)\n    }\n    if(withScroll){\n      document.getElementById('grid').scrollIntoView({\n          behavior: 'smooth'\n      })\n    }\n}\n\nexport const updateUIWithCollectionInfo = (collectiontitle, username, owner_uuid) => {\n\n    cleanWelcomeContainer(true)\n    const collectionInfoContainer = document.createElement('div')\n    collectionInfoContainer.id = 'infocontainer'\n    collectionInfoContainer.innerHTML = `<div class=\"card border-collection mb-3\">\n                                          <div class=\"card-header bg-transparent border-collection\"><b>Collection</b></div>\n                                          <div class=\"card-body text-dark\">\n                                            <h5 class=\"card-title\">${collectiontitle}</h5>\n                                            <p class=\"card-text\" style=\"width:300px;\">Owner: <a href=${uriUserPage + owner_uuid} class=\"card-url\">${username}</a></p>\n                                          </div>\n                                        </div>`\n    document.getElementById('welcomecontainer').appendChild(collectionInfoContainer)\n}\n\nexport const updateUIWithUserInfo = (username, useruid) => {\n\n    cleanWelcomeContainer(true)\n\n    const userInfoContainer = document.createElement('div')\n    userInfoContainer.id = 'infocontainer'\n    userInfoContainer.innerHTML = `<div class=\"card mb-3\" style=\"max-width: 540px;\">\n                                    <div class=\"row no-gutters\">\n                                      <div class=\"col-md-4\">\n                                        <img class=\"img-fluid hidden-first\" src=\"https://picsum.photos/seed/${useruid}/200\" alt=\"User Picture\" width=\"200\" height=\"200\">\n                                      </div>\n                                      <div class=\"col-md-8\">\n                                        <div class=\"card-body\">\n                                          <h5 class=\"card-title\">User</h5>\n                                          <p class=\"card-text\" style=\"width:300px;\">${username ? `${username}` : ''}</p>                                        \n                                          <p class=\"card-text\"><small class=\"text-muted\"></small></p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>`\n    document.getElementById('welcomecontainer').appendChild(userInfoContainer)\n}","let _USERNAME = null\n\nexport const isuserpage = (endpoint) => {\n    let result = false\n    if (endpoint === '/mycompositions' || endpoint.includes('/compositionsbyuserid/') || endpoint.includes('/collectionastreebyid/')){\n        result = true\n    } \n    return result    \n}\n\nconst getCurrentUserName = () => {\n    return _USERNAME\n}\n\nexport const setCurrentUserName = (username) => {\n    _USERNAME = username\n}\n\nexport const displayUserNameInCard = (endpoint, username) => {\n    let displayName = false\n    if(!isuserpage(endpoint)){\n      displayName = true\n    } else {\n      displayName = (username !== getCurrentUserName())\n    }\n    return displayName\n  }\n\nconst getGroupsByCollAndUser = (compositionsList) => {\n\n    const groupedbycoll = {}\n    const groupedbyuser_aux = {}\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid\n        const userId = composition.user_id\n\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else {\n            if (!groupedbyuser_aux[userId]) {\n                groupedbyuser_aux[userId] = []\n            }\n            groupedbyuser_aux[userId].push(composition)\n        }\n    })\n\n    return { groupedbycoll, groupedbyuser_aux }\n}\n\n\nconst getGroupsByCollectionAndSubColl = (compositionsList, parent_coll_id) => {\n\n    const groupedbycoll = {}\n    const singlecomps = []\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid\n\n        if ((collectionId !== null) && (collectionId !== parent_coll_id)) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else {\n            singlecomps.push(composition)\n        }\n    })\n\n    return { groupedbycoll, singlecomps}\n}\n\nconst getGroupsByCollAndCollab = (compositionsList) => {\n\n    const groupedbycoll = {}\n    const groupedbycollab = {}\n    const singlecomps = []\n\n    compositionsList.forEach(composition => {\n\n        const collectionId = composition.collection_uid        \n\n        if (collectionId !== null) {\n            if (!groupedbycoll[collectionId]) {\n                groupedbycoll[collectionId] = []\n            }\n            groupedbycoll[collectionId].push(composition)\n        } else if (composition.contributors.length){\n            if (!groupedbycollab['collabs']) {\n                groupedbycollab['collabs'] = []\n            }\n            groupedbycollab['collabs'].push(composition)\n        } else {                \n            singlecomps.push(composition)\n        }\n    })\n\n    return { groupedbycoll, groupedbycollab, singlecomps }\n}\n\n// INFO: a group for a User is made if he has 2 or more compositions without Collection\nconst getFinalGroupByUserAndSingleComp = (groupedbyuser_aux) => {\n\n    const groupedbyuser_final = {}\n    const singlecomps = []\n\n    for (const elem in groupedbyuser_aux) {\n\n        if (groupedbyuser_aux[elem].length === 1) {\n            singlecomps.push(groupedbyuser_aux[elem][0])\n        } else {\n            if (!groupedbyuser_final[elem]) {\n                groupedbyuser_final[elem] = []\n            }\n            groupedbyuser_final[elem] = groupedbyuser_aux[elem]\n        }\n    }\n    return { singlecomps, groupedbyuser_final }\n}\n\nexport const getGroupedCompositionsWithUsers = (compositionsList) => {\n\n    const { groupedbycoll, groupedbyuser_aux } = getGroupsByCollAndUser(compositionsList)\n\n    const { singlecomps, groupedbyuser_final } = getFinalGroupByUserAndSingleComp(groupedbyuser_aux)\n\n    return {\n        groupedbycoll,\n        groupedbyuser_final,\n        singlecomps,\n    }\n}\n\nexport const getGroupedCompositionsWithCollab = (compositionsList) => {\n\n    const { groupedbycoll, groupedbycollab, singlecomps } = getGroupsByCollAndCollab(compositionsList)    \n    \n    return {\n        groupedbycoll,\n        groupedbycollab,\n        singlecomps,\n    }\n}\n\nexport const getGroupedCompositionsWithSubCollect = (compositionsList, parent_coll_id) => {\n\n    const { groupedbycoll, singlecomps } = getGroupsByCollectionAndSubColl(compositionsList, parent_coll_id)    \n    \n    return {\n        groupedbycoll,        \n        singlecomps,\n    }\n}\n\nexport const getAllTracksInCompositionList = (compositionsList) => {\n    const tracksList = []\n    const compositionsDictionary = {}\n    const tracksDictionary = {}\n    compositionsList.forEach(composition => {\n        compositionsDictionary[composition.uuid] = composition\n        if(composition?.tracks.length){\n            for(let i = 0; i < composition.tracks.length; i++){\n                const currentTrack = composition.tracks[i]\n                currentTrack['comp_uuid'] = composition.uuid\n                tracksDictionary[currentTrack.uuid] = currentTrack\n            }\n            tracksList.push(...composition.tracks)\n        }\n    })\n    return { tracksList, compositionsDictionary, tracksDictionary }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('1T7VR') + \"static/videos/compress_home_page_video.mp4\";","import { getAllTracksInCompositionList } from './home_helper'\nimport WaveSurfer from 'wavesurfer.js'\n\nlet tracks_dictionary = null\nlet composition_dictionary = null\n\nlet AUTO_PLAY = false\n\nconst getCurrentTrack = () => {\n    const audio = document.getElementById('waveform')\n    const currentTrack = audio.getAttribute('data-currentaudio')\n    return currentTrack\n}\n\nconst changeFaIcon = (trackid, startPlaying) => {\n    const iconElement = document.querySelector(`[data-trackid='${trackid}']`)?.firstChild.nextSibling\n    if (iconElement) {\n        if (startPlaying) {\n            iconElement.classList.remove('fa-play')\n            iconElement.classList.add('fa-pause')\n        } else {\n            iconElement.classList.remove('fa-pause')\n            iconElement.classList.add('fa-play')\n        }\n    }\n}\n\nconst changeFloatingIcon = (startPlaying) => {\n    const floatingPlayButton = document.getElementById('playfloatingbutton').firstChild.nextSibling\n    if (startPlaying) {\n        floatingPlayButton.classList.remove('fa-play')\n        floatingPlayButton.classList.add('fa-pause')\n    } else {\n        floatingPlayButton.classList.remove('fa-pause')\n        floatingPlayButton.classList.add('fa-play')\n    }\n}\n\nconst clickOnSameTrack = () => {\n    const isPlaying = wavesurfer.isPlaying()\n    if (!isPlaying) {\n        wavesurfer.play()\n    } else {\n        wavesurfer.pause()\n    }\n}\n\nconst checkAudioPausedNotSameTrack = (trackid) => {\n    const isPlaying = wavesurfer.isPlaying()\n    if (isPlaying) {\n        changeFaIcon(trackid, true)\n        wavesurfer.pause()\n    } else {\n        changeFaIcon(trackid, true)\n    }\n}\n\nconst playTrackButtonHandler = (trackid) => {\n    const currentTrack = getCurrentTrack()\n    let is_same_track = currentTrack === trackid\n    if (is_same_track) {\n        clickOnSameTrack()\n    } else {\n        checkAudioPausedNotSameTrack(trackid)\n        loadAudioTrack(trackid, true)\n        updateCurrentPlayInfo(trackid)\n    }\n}\n\nconst loadTrackSuccess = (audioSrc, trackid, doPlay) => {\n    AUTO_PLAY = doPlay\n    const audio = document.getElementById('waveform')\n    audio.setAttribute('data-currentaudio', trackid)\n    wavesurfer.seekTo(0)\n    wavesurfer.load(audioSrc)\n}\n\nconst loadTrackError = (trackid) => {\n    const playElemUI = document.querySelector(`[data-trackid='${trackid}']`)\n    playElemUI.onclick = null\n    const iconElement = playElemUI.firstChild.nextSibling\n    iconElement.classList.remove('fa-play')\n    iconElement.classList.add('fa-times')\n    changeFloatingIcon(false)\n    alert('Error playing track')\n}\n\nconst updateCurrentPlayInfo = (track_id) => {\n    const track_title = tracks_dictionary[track_id].title\n    const comp_title = composition_dictionary[tracks_dictionary[track_id].comp_uuid].title\n    document.getElementById('current-play-info').textContent = comp_title + ' / ' + track_title\n}\n\nexport const prepareAudioTrackPlaylist = (compositionsList) => {\n    const all_tracks = getAllTracksInCompositionList(compositionsList)\n    if (all_tracks.tracksList.length) {\n        tracks_dictionary = all_tracks.tracksDictionary\n        composition_dictionary = all_tracks.compositionsDictionary\n        const maxRandomPos = all_tracks.tracksList.length\n        const randomInt = Math.floor(Math.random() * maxRandomPos)\n        const lastTrackId = all_tracks.tracksList[randomInt].uuid\n        updateCurrentPlayInfo(lastTrackId)\n        loadAudioTrack(lastTrackId)\n    }\n}\n\nexport const loadAudioTrack = async (trackid, doPlay) => {\n    const audioSrc = window.location.origin + '/trackfile/' + trackid\n    // error 1 : \n    // const audioSrc = 'teto' +window.location.origin + '/trackfile/' + trackid\n    //error 2:\n    // const audioSrc = window.location.origin + '/trackfile/' + 'trackid'\n    const response = await fetch(audioSrc)\n    if (response.ok) {\n        loadTrackSuccess(audioSrc, trackid, doPlay)\n    } else {\n        loadTrackError(trackid)\n    }\n}\n\nexport const setPlayButtonsHandler = () => {\n    const elements = document.querySelectorAll('[data-trackid]')\n    elements.forEach(element => {\n        const trackid = element.getAttribute('data-trackid')\n        element.onclick = () => {\n            playTrackButtonHandler(trackid)\n        }\n    })\n}\n\nconst fabPlayButtonIsCurrentTrack = () => {\n    const isPlaying = wavesurfer.isPlaying()\n    if (isPlaying) {\n        wavesurfer.pause()\n    } else {\n        wavesurfer.play()\n    }\n}\n\nexport const fabPlayButtonClickHandler = () => {\n    const floatingPlayButton = document.getElementById('playfloatingbutton')\n    floatingPlayButton.onclick = () => {\n        fabPlayButtonIsCurrentTrack()\n    }\n}\n\nconst initializeWavesurfer = () => {\n    return WaveSurfer.create({\n        container: '#waveform',\n        responsive: true,\n        height: 80,\n        waveColor: '#007bff',\n        progressColor: '#6610f2',\n        barWidth: 2,\n        barGap: 1,\n        barRadius: 2,\n    })\n}\n\nconst wavesurfer = initializeWavesurfer()\n\nwavesurfer.on('finish', () => {\n    const currentTrack = getCurrentTrack()\n    changeFloatingIcon(false)\n    changeFaIcon(currentTrack, false)\n})\n\nwavesurfer.on('ready', (duration) => {\n    if (AUTO_PLAY) {\n        wavesurfer.play()\n    } else {\n        changeFloatingIcon(false)\n    }\n})\n\nwavesurfer.on('play', () => {\n    const currentTrack = getCurrentTrack()\n    changeFloatingIcon(true)\n    changeFaIcon(currentTrack, true)\n})\n\nwavesurfer.on('pause', () => {\n    const currentTrack = getCurrentTrack()\n    changeFloatingIcon(false)\n    changeFaIcon(currentTrack, false)\n})\n\nwavesurfer.on('error', (error) => {\n    console.log(error)\n    // if(error){\n    //     const currentTrack = getCurrentTrack()\n    //     loadTrackError(currentTrack)\n    // }\n    //wavesurfer.destroy()\n    \n   //alert('Error when trying to play media:', error)\n}) \n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport BasePlugin from './base-plugin.js';\nimport Decoder from './decoder.js';\nimport * as dom from './dom.js';\nimport Fetcher from './fetcher.js';\nimport Player from './player.js';\nimport Renderer from './renderer.js';\nimport Timer from './timer.js';\nimport WebAudioPlayer from './webaudio.js';\nconst defaultOptions = {\n    waveColor: '#999',\n    progressColor: '#555',\n    cursorWidth: 1,\n    minPxPerSec: 0,\n    fillParent: true,\n    interact: true,\n    dragToSeek: false,\n    autoScroll: true,\n    autoCenter: true,\n    sampleRate: 8000,\n};\nclass WaveSurfer extends Player {\n    /** Create a new WaveSurfer instance */\n    static create(options) {\n        return new WaveSurfer(options);\n    }\n    /** Create a new WaveSurfer instance */\n    constructor(options) {\n        const media = options.media ||\n            (options.backend === 'WebAudio' ? new WebAudioPlayer() : undefined);\n        super({\n            media,\n            mediaControls: options.mediaControls,\n            autoplay: options.autoplay,\n            playbackRate: options.audioRate,\n        });\n        this.plugins = [];\n        this.decodedData = null;\n        this.subscriptions = [];\n        this.mediaSubscriptions = [];\n        this.abortController = null;\n        this.options = Object.assign({}, defaultOptions, options);\n        this.timer = new Timer();\n        const audioElement = media ? undefined : this.getMediaElement();\n        this.renderer = new Renderer(this.options, audioElement);\n        this.initPlayerEvents();\n        this.initRendererEvents();\n        this.initTimerEvents();\n        this.initPlugins();\n        // Read the initial URL before load has been called\n        const initialUrl = this.options.url || this.getSrc() || '';\n        // Init and load async to allow external events to be registered\n        Promise.resolve().then(() => {\n            this.emit('init');\n            // Load audio if URL or an external media with an src is passed,\n            // of render w/o audio if pre-decoded peaks and duration are provided\n            const { peaks, duration } = this.options;\n            if (initialUrl || (peaks && duration)) {\n                // Swallow async errors because they cannot be caught from a constructor call.\n                // Subscribe to the wavesurfer's error event to handle them.\n                this.load(initialUrl, peaks, duration).catch(() => null);\n            }\n        });\n    }\n    updateProgress(currentTime = this.getCurrentTime()) {\n        this.renderer.renderProgress(currentTime / this.getDuration(), this.isPlaying());\n        return currentTime;\n    }\n    initTimerEvents() {\n        // The timer fires every 16ms for a smooth progress animation\n        this.subscriptions.push(this.timer.on('tick', () => {\n            if (!this.isSeeking()) {\n                const currentTime = this.updateProgress();\n                this.emit('timeupdate', currentTime);\n                this.emit('audioprocess', currentTime);\n            }\n        }));\n    }\n    initPlayerEvents() {\n        if (this.isPlaying()) {\n            this.emit('play');\n            this.timer.start();\n        }\n        this.mediaSubscriptions.push(this.onMediaEvent('timeupdate', () => {\n            const currentTime = this.updateProgress();\n            this.emit('timeupdate', currentTime);\n        }), this.onMediaEvent('play', () => {\n            this.emit('play');\n            this.timer.start();\n        }), this.onMediaEvent('pause', () => {\n            this.emit('pause');\n            this.timer.stop();\n        }), this.onMediaEvent('emptied', () => {\n            this.timer.stop();\n        }), this.onMediaEvent('ended', () => {\n            this.emit('finish');\n        }), this.onMediaEvent('seeking', () => {\n            this.emit('seeking', this.getCurrentTime());\n        }), this.onMediaEvent('error', (err) => {\n            this.emit('error', err.error);\n        }));\n    }\n    initRendererEvents() {\n        this.subscriptions.push(\n        // Seek on click\n        this.renderer.on('click', (relativeX, relativeY) => {\n            if (this.options.interact) {\n                this.seekTo(relativeX);\n                this.emit('interaction', relativeX * this.getDuration());\n                this.emit('click', relativeX, relativeY);\n            }\n        }), \n        // Double click\n        this.renderer.on('dblclick', (relativeX, relativeY) => {\n            this.emit('dblclick', relativeX, relativeY);\n        }), \n        // Scroll\n        this.renderer.on('scroll', (startX, endX, scrollLeft, scrollRight) => {\n            const duration = this.getDuration();\n            this.emit('scroll', startX * duration, endX * duration, scrollLeft, scrollRight);\n        }), \n        // Redraw\n        this.renderer.on('render', () => {\n            this.emit('redraw');\n        }), \n        // RedrawComplete\n        this.renderer.on('rendered', () => {\n            this.emit('redrawcomplete');\n        }), \n        // DragStart\n        this.renderer.on('dragstart', (relativeX) => {\n            this.emit('dragstart', relativeX);\n        }), \n        // DragEnd\n        this.renderer.on('dragend', (relativeX) => {\n            this.emit('dragend', relativeX);\n        }));\n        // Drag\n        {\n            let debounce;\n            this.subscriptions.push(this.renderer.on('drag', (relativeX) => {\n                if (!this.options.interact)\n                    return;\n                // Update the visual position\n                this.renderer.renderProgress(relativeX);\n                // Set the audio position with a debounce\n                clearTimeout(debounce);\n                let debounceTime;\n                if (this.isPlaying()) {\n                    debounceTime = 0;\n                }\n                else if (this.options.dragToSeek === true) {\n                    debounceTime = 200;\n                }\n                else if (typeof this.options.dragToSeek === 'object' && this.options.dragToSeek !== undefined) {\n                    debounceTime = this.options.dragToSeek['debounceTime'];\n                }\n                debounce = setTimeout(() => {\n                    this.seekTo(relativeX);\n                }, debounceTime);\n                this.emit('interaction', relativeX * this.getDuration());\n                this.emit('drag', relativeX);\n            }));\n        }\n    }\n    initPlugins() {\n        var _a;\n        if (!((_a = this.options.plugins) === null || _a === void 0 ? void 0 : _a.length))\n            return;\n        this.options.plugins.forEach((plugin) => {\n            this.registerPlugin(plugin);\n        });\n    }\n    unsubscribePlayerEvents() {\n        this.mediaSubscriptions.forEach((unsubscribe) => unsubscribe());\n        this.mediaSubscriptions = [];\n    }\n    /** Set new wavesurfer options and re-render it */\n    setOptions(options) {\n        this.options = Object.assign({}, this.options, options);\n        this.renderer.setOptions(this.options);\n        if (options.audioRate) {\n            this.setPlaybackRate(options.audioRate);\n        }\n        if (options.mediaControls != null) {\n            this.getMediaElement().controls = options.mediaControls;\n        }\n    }\n    /** Register a wavesurfer.js plugin */\n    registerPlugin(plugin) {\n        plugin._init(this);\n        this.plugins.push(plugin);\n        // Unregister plugin on destroy\n        this.subscriptions.push(plugin.once('destroy', () => {\n            this.plugins = this.plugins.filter((p) => p !== plugin);\n        }));\n        return plugin;\n    }\n    /** For plugins only: get the waveform wrapper div */\n    getWrapper() {\n        return this.renderer.getWrapper();\n    }\n    /** For plugins only: get the scroll container client width */\n    getWidth() {\n        return this.renderer.getWidth();\n    }\n    /** Get the current scroll position in pixels */\n    getScroll() {\n        return this.renderer.getScroll();\n    }\n    /** Set the current scroll position in pixels */\n    setScroll(pixels) {\n        return this.renderer.setScroll(pixels);\n    }\n    /** Move the start of the viewing window to a specific time in the audio (in seconds) */\n    setScrollTime(time) {\n        const percentage = time / this.getDuration();\n        this.renderer.setScrollPercentage(percentage);\n    }\n    /** Get all registered plugins */\n    getActivePlugins() {\n        return this.plugins;\n    }\n    loadAudio(url, blob, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            this.emit('load', url);\n            if (!this.options.media && this.isPlaying())\n                this.pause();\n            this.decodedData = null;\n            // Fetch the entire audio as a blob if pre-decoded data is not provided\n            if (!blob && !channelData) {\n                const fetchParams = this.options.fetchParams || {};\n                if (window.AbortController && !fetchParams.signal) {\n                    this.abortController = new AbortController();\n                    fetchParams.signal = (_a = this.abortController) === null || _a === void 0 ? void 0 : _a.signal;\n                }\n                const onProgress = (percentage) => this.emit('loading', percentage);\n                blob = yield Fetcher.fetchBlob(url, onProgress, fetchParams);\n            }\n            // Set the mediaelement source\n            this.setSrc(url, blob);\n            // Wait for the audio duration\n            const audioDuration = yield new Promise((resolve) => {\n                const staticDuration = duration || this.getDuration();\n                if (staticDuration) {\n                    resolve(staticDuration);\n                }\n                else {\n                    this.mediaSubscriptions.push(this.onMediaEvent('loadedmetadata', () => resolve(this.getDuration()), { once: true }));\n                }\n            });\n            // Set the duration if the player is a WebAudioPlayer without a URL\n            if (!url && !blob) {\n                const media = this.getMediaElement();\n                if (media instanceof WebAudioPlayer) {\n                    media.duration = audioDuration;\n                }\n            }\n            // Decode the audio data or use user-provided peaks\n            if (channelData) {\n                this.decodedData = Decoder.createBuffer(channelData, audioDuration || 0);\n            }\n            else if (blob) {\n                const arrayBuffer = yield blob.arrayBuffer();\n                this.decodedData = yield Decoder.decode(arrayBuffer, this.options.sampleRate);\n            }\n            if (this.decodedData) {\n                this.emit('decode', this.getDuration());\n                this.renderer.render(this.decodedData);\n            }\n            this.emit('ready', this.getDuration());\n        });\n    }\n    /** Load an audio file by URL, with optional pre-decoded audio data */\n    load(url, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield this.loadAudio(url, undefined, channelData, duration);\n            }\n            catch (err) {\n                this.emit('error', err);\n                throw err;\n            }\n        });\n    }\n    /** Load an audio blob */\n    loadBlob(blob, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield this.loadAudio('', blob, channelData, duration);\n            }\n            catch (err) {\n                this.emit('error', err);\n                throw err;\n            }\n        });\n    }\n    /** Zoom the waveform by a given pixels-per-second factor */\n    zoom(minPxPerSec) {\n        if (!this.decodedData) {\n            throw new Error('No audio loaded');\n        }\n        this.renderer.zoom(minPxPerSec);\n        this.emit('zoom', minPxPerSec);\n    }\n    /** Get the decoded audio data */\n    getDecodedData() {\n        return this.decodedData;\n    }\n    /** Get decoded peaks */\n    exportPeaks({ channels = 2, maxLength = 8000, precision = 10000 } = {}) {\n        if (!this.decodedData) {\n            throw new Error('The audio has not been decoded yet');\n        }\n        const maxChannels = Math.min(channels, this.decodedData.numberOfChannels);\n        const peaks = [];\n        for (let i = 0; i < maxChannels; i++) {\n            const channel = this.decodedData.getChannelData(i);\n            const data = [];\n            const sampleSize = channel.length / maxLength;\n            for (let i = 0; i < maxLength; i++) {\n                const sample = channel.slice(Math.floor(i * sampleSize), Math.ceil((i + 1) * sampleSize));\n                let max = 0;\n                for (let x = 0; x < sample.length; x++) {\n                    const n = sample[x];\n                    if (Math.abs(n) > Math.abs(max))\n                        max = n;\n                }\n                data.push(Math.round(max * precision) / precision);\n            }\n            peaks.push(data);\n        }\n        return peaks;\n    }\n    /** Get the duration of the audio in seconds */\n    getDuration() {\n        let duration = super.getDuration() || 0;\n        // Fall back to the decoded data duration if the media duration is incorrect\n        if ((duration === 0 || duration === Infinity) && this.decodedData) {\n            duration = this.decodedData.duration;\n        }\n        return duration;\n    }\n    /** Toggle if the waveform should react to clicks */\n    toggleInteraction(isInteractive) {\n        this.options.interact = isInteractive;\n    }\n    /** Jump to a specific time in the audio (in seconds) */\n    setTime(time) {\n        super.setTime(time);\n        this.updateProgress(time);\n        this.emit('timeupdate', time);\n    }\n    /** Seek to a percentage of audio as [0..1] (0 = beginning, 1 = end) */\n    seekTo(progress) {\n        const time = this.getDuration() * progress;\n        this.setTime(time);\n    }\n    /** Play or pause the audio */\n    playPause() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.isPlaying() ? this.pause() : this.play();\n        });\n    }\n    /** Stop the audio and go to the beginning */\n    stop() {\n        this.pause();\n        this.setTime(0);\n    }\n    /** Skip N or -N seconds from the current position */\n    skip(seconds) {\n        this.setTime(this.getCurrentTime() + seconds);\n    }\n    /** Empty the waveform */\n    empty() {\n        this.load('', [[0]], 0.001);\n    }\n    /** Set HTML media element */\n    setMediaElement(element) {\n        this.unsubscribePlayerEvents();\n        super.setMediaElement(element);\n        this.initPlayerEvents();\n    }\n    exportImage() {\n        return __awaiter(this, arguments, void 0, function* (format = 'image/png', quality = 1, type = 'dataURL') {\n            return this.renderer.exportImage(format, quality, type);\n        });\n    }\n    /** Unmount wavesurfer */\n    destroy() {\n        var _a;\n        this.emit('destroy');\n        (_a = this.abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        this.plugins.forEach((plugin) => plugin.destroy());\n        this.subscriptions.forEach((unsubscribe) => unsubscribe());\n        this.unsubscribePlayerEvents();\n        this.timer.destroy();\n        this.renderer.destroy();\n        super.destroy();\n    }\n}\nWaveSurfer.BasePlugin = BasePlugin;\nWaveSurfer.dom = dom;\nexport default WaveSurfer;\n","import EventEmitter from './event-emitter.js';\n/** Base class for wavesurfer plugins */\nexport class BasePlugin extends EventEmitter {\n    /** Create a plugin instance */\n    constructor(options) {\n        super();\n        this.subscriptions = [];\n        this.options = options;\n    }\n    /** Called after this.wavesurfer is available */\n    onInit() {\n        return;\n    }\n    /** Do not call directly, only called by WavesSurfer internally */\n    _init(wavesurfer) {\n        this.wavesurfer = wavesurfer;\n        this.onInit();\n    }\n    /** Destroy the plugin and unsubscribe from all events */\n    destroy() {\n        this.emit('destroy');\n        this.subscriptions.forEach((unsubscribe) => unsubscribe());\n    }\n}\nexport default BasePlugin;\n","/** A simple event emitter that can be used to listen to and emit events. */\nclass EventEmitter {\n    constructor() {\n        this.listeners = {};\n    }\n    /** Subscribe to an event. Returns an unsubscribe function. */\n    on(event, listener, options) {\n        if (!this.listeners[event]) {\n            this.listeners[event] = new Set();\n        }\n        this.listeners[event].add(listener);\n        if (options === null || options === void 0 ? void 0 : options.once) {\n            const unsubscribeOnce = () => {\n                this.un(event, unsubscribeOnce);\n                this.un(event, listener);\n            };\n            this.on(event, unsubscribeOnce);\n            return unsubscribeOnce;\n        }\n        return () => this.un(event, listener);\n    }\n    /** Unsubscribe from an event */\n    un(event, listener) {\n        var _a;\n        (_a = this.listeners[event]) === null || _a === void 0 ? void 0 : _a.delete(listener);\n    }\n    /** Subscribe to an event only once */\n    once(event, listener) {\n        return this.on(event, listener, { once: true });\n    }\n    /** Clear all events */\n    unAll() {\n        this.listeners = {};\n    }\n    /** Emit an event */\n    emit(eventName, ...args) {\n        if (this.listeners[eventName]) {\n            this.listeners[eventName].forEach((listener) => listener(...args));\n        }\n    }\n}\nexport default EventEmitter;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/** Decode an array buffer into an audio buffer */\nfunction decode(audioData, sampleRate) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const audioCtx = new AudioContext({ sampleRate });\n        const decode = audioCtx.decodeAudioData(audioData);\n        return decode.finally(() => audioCtx.close());\n    });\n}\n/** Normalize peaks to -1..1 */\nfunction normalize(channelData) {\n    const firstChannel = channelData[0];\n    if (firstChannel.some((n) => n > 1 || n < -1)) {\n        const length = firstChannel.length;\n        let max = 0;\n        for (let i = 0; i < length; i++) {\n            const absN = Math.abs(firstChannel[i]);\n            if (absN > max)\n                max = absN;\n        }\n        for (const channel of channelData) {\n            for (let i = 0; i < length; i++) {\n                channel[i] /= max;\n            }\n        }\n    }\n    return channelData;\n}\n/** Create an audio buffer from pre-decoded audio data */\nfunction createBuffer(channelData, duration) {\n    // If a single array of numbers is passed, make it an array of arrays\n    if (typeof channelData[0] === 'number')\n        channelData = [channelData];\n    // Normalize to -1..1\n    normalize(channelData);\n    return {\n        duration,\n        length: channelData[0].length,\n        sampleRate: channelData[0].length / duration,\n        numberOfChannels: channelData.length,\n        getChannelData: (i) => channelData === null || channelData === void 0 ? void 0 : channelData[i],\n        copyFromChannel: AudioBuffer.prototype.copyFromChannel,\n        copyToChannel: AudioBuffer.prototype.copyToChannel,\n    };\n}\nconst Decoder = {\n    decode,\n    createBuffer,\n};\nexport default Decoder;\n","function renderNode(tagName, content) {\n    const element = content.xmlns\n        ? document.createElementNS(content.xmlns, tagName)\n        : document.createElement(tagName);\n    for (const [key, value] of Object.entries(content)) {\n        if (key === 'children') {\n            for (const [key, value] of Object.entries(content)) {\n                if (typeof value === 'string') {\n                    element.appendChild(document.createTextNode(value));\n                }\n                else {\n                    element.appendChild(renderNode(key, value));\n                }\n            }\n        }\n        else if (key === 'style') {\n            Object.assign(element.style, value);\n        }\n        else if (key === 'textContent') {\n            element.textContent = value;\n        }\n        else {\n            element.setAttribute(key, value.toString());\n        }\n    }\n    return element;\n}\nexport function createElement(tagName, content, container) {\n    const el = renderNode(tagName, content || {});\n    container === null || container === void 0 ? void 0 : container.appendChild(el);\n    return el;\n}\nexport default createElement;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction watchProgress(response, progressCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!response.body || !response.headers)\n            return;\n        const reader = response.body.getReader();\n        const contentLength = Number(response.headers.get('Content-Length')) || 0;\n        let receivedLength = 0;\n        // Process the data\n        const processChunk = (value) => __awaiter(this, void 0, void 0, function* () {\n            // Add to the received length\n            receivedLength += (value === null || value === void 0 ? void 0 : value.length) || 0;\n            const percentage = Math.round((receivedLength / contentLength) * 100);\n            progressCallback(percentage);\n        });\n        const read = () => __awaiter(this, void 0, void 0, function* () {\n            let data;\n            try {\n                data = yield reader.read();\n            }\n            catch (_a) {\n                // Ignore errors because we can only handle the main response\n                return;\n            }\n            // Continue reading data until done\n            if (!data.done) {\n                processChunk(data.value);\n                yield read();\n            }\n        });\n        read();\n    });\n}\nfunction fetchBlob(url, progressCallback, requestInit) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Fetch the resource\n        const response = yield fetch(url, requestInit);\n        if (response.status >= 400) {\n            throw new Error(`Failed to fetch ${url}: ${response.status} (${response.statusText})`);\n        }\n        // Read the data to track progress\n        watchProgress(response.clone(), progressCallback);\n        return response.blob();\n    });\n}\nconst Fetcher = {\n    fetchBlob,\n};\nexport default Fetcher;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from './event-emitter.js';\nclass Player extends EventEmitter {\n    constructor(options) {\n        super();\n        this.isExternalMedia = false;\n        if (options.media) {\n            this.media = options.media;\n            this.isExternalMedia = true;\n        }\n        else {\n            this.media = document.createElement('audio');\n        }\n        // Controls\n        if (options.mediaControls) {\n            this.media.controls = true;\n        }\n        // Autoplay\n        if (options.autoplay) {\n            this.media.autoplay = true;\n        }\n        // Speed\n        if (options.playbackRate != null) {\n            this.onMediaEvent('canplay', () => {\n                if (options.playbackRate != null) {\n                    this.media.playbackRate = options.playbackRate;\n                }\n            }, { once: true });\n        }\n    }\n    onMediaEvent(event, callback, options) {\n        this.media.addEventListener(event, callback, options);\n        return () => this.media.removeEventListener(event, callback, options);\n    }\n    getSrc() {\n        return this.media.currentSrc || this.media.src || '';\n    }\n    revokeSrc() {\n        const src = this.getSrc();\n        if (src.startsWith('blob:')) {\n            URL.revokeObjectURL(src);\n        }\n    }\n    canPlayType(type) {\n        return this.media.canPlayType(type) !== '';\n    }\n    setSrc(url, blob) {\n        const src = this.getSrc();\n        if (url && src === url)\n            return;\n        this.revokeSrc();\n        const newSrc = blob instanceof Blob && (this.canPlayType(blob.type) || !url) ? URL.createObjectURL(blob) : url;\n        try {\n            this.media.src = newSrc;\n        }\n        catch (e) {\n            this.media.src = url;\n        }\n    }\n    destroy() {\n        this.media.pause();\n        if (this.isExternalMedia)\n            return;\n        this.media.remove();\n        this.revokeSrc();\n        this.media.src = '';\n        // Load resets the media element to its initial state\n        this.media.load();\n    }\n    setMediaElement(element) {\n        this.media = element;\n    }\n    /** Start playing the audio */\n    play() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.media.play();\n        });\n    }\n    /** Pause the audio */\n    pause() {\n        this.media.pause();\n    }\n    /** Check if the audio is playing */\n    isPlaying() {\n        return !this.media.paused && !this.media.ended;\n    }\n    /** Jump to a specific time in the audio (in seconds) */\n    setTime(time) {\n        this.media.currentTime = time;\n    }\n    /** Get the duration of the audio in seconds */\n    getDuration() {\n        return this.media.duration;\n    }\n    /** Get the current audio position in seconds */\n    getCurrentTime() {\n        return this.media.currentTime;\n    }\n    /** Get the audio volume */\n    getVolume() {\n        return this.media.volume;\n    }\n    /** Set the audio volume */\n    setVolume(volume) {\n        this.media.volume = volume;\n    }\n    /** Get the audio muted state */\n    getMuted() {\n        return this.media.muted;\n    }\n    /** Mute or unmute the audio */\n    setMuted(muted) {\n        this.media.muted = muted;\n    }\n    /** Get the playback speed */\n    getPlaybackRate() {\n        return this.media.playbackRate;\n    }\n    /** Check if the audio is seeking */\n    isSeeking() {\n        return this.media.seeking;\n    }\n    /** Set the playback speed, pass an optional false to NOT preserve the pitch */\n    setPlaybackRate(rate, preservePitch) {\n        // preservePitch is true by default in most browsers\n        if (preservePitch != null) {\n            this.media.preservesPitch = preservePitch;\n        }\n        this.media.playbackRate = rate;\n    }\n    /** Get the HTML media element */\n    getMediaElement() {\n        return this.media;\n    }\n    /** Set a sink id to change the audio output device */\n    setSinkId(sinkId) {\n        // See https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId\n        const media = this.media;\n        return media.setSinkId(sinkId);\n    }\n}\nexport default Player;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { makeDraggable } from './draggable.js';\nimport EventEmitter from './event-emitter.js';\nclass Renderer extends EventEmitter {\n    constructor(options, audioElement) {\n        super();\n        this.timeouts = [];\n        this.isScrollable = false;\n        this.audioData = null;\n        this.resizeObserver = null;\n        this.lastContainerWidth = 0;\n        this.isDragging = false;\n        this.subscriptions = [];\n        this.unsubscribeOnScroll = [];\n        this.subscriptions = [];\n        this.options = options;\n        const parent = this.parentFromOptionsContainer(options.container);\n        this.parent = parent;\n        const [div, shadow] = this.initHtml();\n        parent.appendChild(div);\n        this.container = div;\n        this.scrollContainer = shadow.querySelector('.scroll');\n        this.wrapper = shadow.querySelector('.wrapper');\n        this.canvasWrapper = shadow.querySelector('.canvases');\n        this.progressWrapper = shadow.querySelector('.progress');\n        this.cursor = shadow.querySelector('.cursor');\n        if (audioElement) {\n            shadow.appendChild(audioElement);\n        }\n        this.initEvents();\n    }\n    parentFromOptionsContainer(container) {\n        let parent;\n        if (typeof container === 'string') {\n            parent = document.querySelector(container);\n        }\n        else if (container instanceof HTMLElement) {\n            parent = container;\n        }\n        if (!parent) {\n            throw new Error('Container not found');\n        }\n        return parent;\n    }\n    initEvents() {\n        const getClickPosition = (e) => {\n            const rect = this.wrapper.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            const relativeX = x / rect.width;\n            const relativeY = y / rect.height;\n            return [relativeX, relativeY];\n        };\n        // Add a click listener\n        this.wrapper.addEventListener('click', (e) => {\n            const [x, y] = getClickPosition(e);\n            this.emit('click', x, y);\n        });\n        // Add a double click listener\n        this.wrapper.addEventListener('dblclick', (e) => {\n            const [x, y] = getClickPosition(e);\n            this.emit('dblclick', x, y);\n        });\n        // Drag\n        if (this.options.dragToSeek === true || typeof this.options.dragToSeek === 'object') {\n            this.initDrag();\n        }\n        // Add a scroll listener\n        this.scrollContainer.addEventListener('scroll', () => {\n            const { scrollLeft, scrollWidth, clientWidth } = this.scrollContainer;\n            const startX = scrollLeft / scrollWidth;\n            const endX = (scrollLeft + clientWidth) / scrollWidth;\n            this.emit('scroll', startX, endX, scrollLeft, scrollLeft + clientWidth);\n        });\n        // Re-render the waveform on container resize\n        if (typeof ResizeObserver === 'function') {\n            const delay = this.createDelay(100);\n            this.resizeObserver = new ResizeObserver(() => {\n                delay()\n                    .then(() => this.onContainerResize())\n                    .catch(() => undefined);\n            });\n            this.resizeObserver.observe(this.scrollContainer);\n        }\n    }\n    onContainerResize() {\n        const width = this.parent.clientWidth;\n        if (width === this.lastContainerWidth && this.options.height !== 'auto')\n            return;\n        this.lastContainerWidth = width;\n        this.reRender();\n    }\n    initDrag() {\n        this.subscriptions.push(makeDraggable(this.wrapper, \n        // On drag\n        (_, __, x) => {\n            this.emit('drag', Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }, \n        // On start drag\n        (x) => {\n            this.isDragging = true;\n            this.emit('dragstart', Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }, \n        // On end drag\n        (x) => {\n            this.isDragging = false;\n            this.emit('dragend', Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }));\n    }\n    getHeight(optionsHeight, optionsSplitChannel) {\n        var _a;\n        const defaultHeight = 128;\n        const numberOfChannels = ((_a = this.audioData) === null || _a === void 0 ? void 0 : _a.numberOfChannels) || 1;\n        if (optionsHeight == null)\n            return defaultHeight;\n        if (!isNaN(Number(optionsHeight)))\n            return Number(optionsHeight);\n        if (optionsHeight === 'auto') {\n            const height = this.parent.clientHeight || defaultHeight;\n            if (optionsSplitChannel === null || optionsSplitChannel === void 0 ? void 0 : optionsSplitChannel.every((channel) => !channel.overlay))\n                return height / numberOfChannels;\n            return height;\n        }\n        return defaultHeight;\n    }\n    initHtml() {\n        const div = document.createElement('div');\n        const shadow = div.attachShadow({ mode: 'open' });\n        const cspNonce = this.options.cspNonce && typeof this.options.cspNonce === 'string' ? this.options.cspNonce.replace(/\"/g, '') : '';\n        shadow.innerHTML = `\n      <style${cspNonce ? ` nonce=\"${cspNonce}\"` : ''}>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight(this.options.height, this.options.splitChannels)}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class=\"scroll\" part=\"scroll\">\n        <div class=\"wrapper\" part=\"wrapper\">\n          <div class=\"canvases\" part=\"canvases\"></div>\n          <div class=\"progress\" part=\"progress\"></div>\n          <div class=\"cursor\" part=\"cursor\"></div>\n        </div>\n      </div>\n    `;\n        return [div, shadow];\n    }\n    /** Wavesurfer itself calls this method. Do not call it manually. */\n    setOptions(options) {\n        if (this.options.container !== options.container) {\n            const newParent = this.parentFromOptionsContainer(options.container);\n            newParent.appendChild(this.container);\n            this.parent = newParent;\n        }\n        if (options.dragToSeek === true || typeof this.options.dragToSeek === 'object') {\n            this.initDrag();\n        }\n        this.options = options;\n        // Re-render the waveform\n        this.reRender();\n    }\n    getWrapper() {\n        return this.wrapper;\n    }\n    getWidth() {\n        return this.scrollContainer.clientWidth;\n    }\n    getScroll() {\n        return this.scrollContainer.scrollLeft;\n    }\n    setScroll(pixels) {\n        this.scrollContainer.scrollLeft = pixels;\n    }\n    setScrollPercentage(percent) {\n        const { scrollWidth } = this.scrollContainer;\n        const scrollStart = scrollWidth * percent;\n        this.setScroll(scrollStart);\n    }\n    destroy() {\n        var _a, _b;\n        this.subscriptions.forEach((unsubscribe) => unsubscribe());\n        this.container.remove();\n        (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this.unsubscribeOnScroll) === null || _b === void 0 ? void 0 : _b.forEach((unsubscribe) => unsubscribe());\n        this.unsubscribeOnScroll = [];\n    }\n    createDelay(delayMs = 10) {\n        let timeout;\n        let reject;\n        const onClear = () => {\n            if (timeout)\n                clearTimeout(timeout);\n            if (reject)\n                reject();\n        };\n        this.timeouts.push(onClear);\n        return () => {\n            return new Promise((resolveFn, rejectFn) => {\n                onClear();\n                reject = rejectFn;\n                timeout = setTimeout(() => {\n                    timeout = undefined;\n                    reject = undefined;\n                    resolveFn();\n                }, delayMs);\n            });\n        };\n    }\n    // Convert array of color values to linear gradient\n    convertColorValues(color) {\n        if (!Array.isArray(color))\n            return color || '';\n        if (color.length < 2)\n            return color[0] || '';\n        const canvasElement = document.createElement('canvas');\n        const ctx = canvasElement.getContext('2d');\n        const gradientHeight = canvasElement.height * (window.devicePixelRatio || 1);\n        const gradient = ctx.createLinearGradient(0, 0, 0, gradientHeight);\n        const colorStopPercentage = 1 / (color.length - 1);\n        color.forEach((color, index) => {\n            const offset = index * colorStopPercentage;\n            gradient.addColorStop(offset, color);\n        });\n        return gradient;\n    }\n    getPixelRatio() {\n        return Math.max(1, window.devicePixelRatio || 1);\n    }\n    renderBarWaveform(channelData, options, ctx, vScale) {\n        const topChannel = channelData[0];\n        const bottomChannel = channelData[1] || channelData[0];\n        const length = topChannel.length;\n        const { width, height } = ctx.canvas;\n        const halfHeight = height / 2;\n        const pixelRatio = this.getPixelRatio();\n        const barWidth = options.barWidth ? options.barWidth * pixelRatio : 1;\n        const barGap = options.barGap ? options.barGap * pixelRatio : options.barWidth ? barWidth / 2 : 0;\n        const barRadius = options.barRadius || 0;\n        const barIndexScale = width / (barWidth + barGap) / length;\n        const rectFn = barRadius && 'roundRect' in ctx ? 'roundRect' : 'rect';\n        ctx.beginPath();\n        let prevX = 0;\n        let maxTop = 0;\n        let maxBottom = 0;\n        for (let i = 0; i <= length; i++) {\n            const x = Math.round(i * barIndexScale);\n            if (x > prevX) {\n                const topBarHeight = Math.round(maxTop * halfHeight * vScale);\n                const bottomBarHeight = Math.round(maxBottom * halfHeight * vScale);\n                const barHeight = topBarHeight + bottomBarHeight || 1;\n                // Vertical alignment\n                let y = halfHeight - topBarHeight;\n                if (options.barAlign === 'top') {\n                    y = 0;\n                }\n                else if (options.barAlign === 'bottom') {\n                    y = height - barHeight;\n                }\n                ctx[rectFn](prevX * (barWidth + barGap), y, barWidth, barHeight, barRadius);\n                prevX = x;\n                maxTop = 0;\n                maxBottom = 0;\n            }\n            const magnitudeTop = Math.abs(topChannel[i] || 0);\n            const magnitudeBottom = Math.abs(bottomChannel[i] || 0);\n            if (magnitudeTop > maxTop)\n                maxTop = magnitudeTop;\n            if (magnitudeBottom > maxBottom)\n                maxBottom = magnitudeBottom;\n        }\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderLineWaveform(channelData, _options, ctx, vScale) {\n        const drawChannel = (index) => {\n            const channel = channelData[index] || channelData[0];\n            const length = channel.length;\n            const { height } = ctx.canvas;\n            const halfHeight = height / 2;\n            const hScale = ctx.canvas.width / length;\n            ctx.moveTo(0, halfHeight);\n            let prevX = 0;\n            let max = 0;\n            for (let i = 0; i <= length; i++) {\n                const x = Math.round(i * hScale);\n                if (x > prevX) {\n                    const h = Math.round(max * halfHeight * vScale) || 1;\n                    const y = halfHeight + h * (index === 0 ? -1 : 1);\n                    ctx.lineTo(prevX, y);\n                    prevX = x;\n                    max = 0;\n                }\n                const value = Math.abs(channel[i] || 0);\n                if (value > max)\n                    max = value;\n            }\n            ctx.lineTo(prevX, halfHeight);\n        };\n        ctx.beginPath();\n        drawChannel(0);\n        drawChannel(1);\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderWaveform(channelData, options, ctx) {\n        ctx.fillStyle = this.convertColorValues(options.waveColor);\n        // Custom rendering function\n        if (options.renderFunction) {\n            options.renderFunction(channelData, ctx);\n            return;\n        }\n        // Vertical scaling\n        let vScale = options.barHeight || 1;\n        if (options.normalize) {\n            const max = Array.from(channelData[0]).reduce((max, value) => Math.max(max, Math.abs(value)), 0);\n            vScale = max ? 1 / max : 1;\n        }\n        // Render waveform as bars\n        if (options.barWidth || options.barGap || options.barAlign) {\n            this.renderBarWaveform(channelData, options, ctx, vScale);\n            return;\n        }\n        // Render waveform as a polyline\n        this.renderLineWaveform(channelData, options, ctx, vScale);\n    }\n    renderSingleCanvas(data, options, width, height, offset, canvasContainer, progressContainer) {\n        const pixelRatio = this.getPixelRatio();\n        const canvas = document.createElement('canvas');\n        canvas.width = Math.round(width * pixelRatio);\n        canvas.height = Math.round(height * pixelRatio);\n        canvas.style.width = `${width}px`;\n        canvas.style.height = `${height}px`;\n        canvas.style.left = `${Math.round(offset)}px`;\n        canvasContainer.appendChild(canvas);\n        const ctx = canvas.getContext('2d');\n        this.renderWaveform(data, options, ctx);\n        // Draw a progress canvas\n        if (canvas.width > 0 && canvas.height > 0) {\n            const progressCanvas = canvas.cloneNode();\n            const progressCtx = progressCanvas.getContext('2d');\n            progressCtx.drawImage(canvas, 0, 0);\n            // Set the composition method to draw only where the waveform is drawn\n            progressCtx.globalCompositeOperation = 'source-in';\n            progressCtx.fillStyle = this.convertColorValues(options.progressColor);\n            // This rectangle acts as a mask thanks to the composition method\n            progressCtx.fillRect(0, 0, canvas.width, canvas.height);\n            progressContainer.appendChild(progressCanvas);\n        }\n    }\n    renderMultiCanvas(channelData, options, width, height, canvasContainer, progressContainer) {\n        const pixelRatio = this.getPixelRatio();\n        const { clientWidth } = this.scrollContainer;\n        const totalWidth = width / pixelRatio;\n        let singleCanvasWidth = Math.min(Renderer.MAX_CANVAS_WIDTH, clientWidth, totalWidth);\n        let drawnIndexes = {};\n        // Adjust width to avoid gaps between canvases when using bars\n        if (options.barWidth || options.barGap) {\n            const barWidth = options.barWidth || 0.5;\n            const barGap = options.barGap || barWidth / 2;\n            const totalBarWidth = barWidth + barGap;\n            if (singleCanvasWidth % totalBarWidth !== 0) {\n                singleCanvasWidth = Math.floor(singleCanvasWidth / totalBarWidth) * totalBarWidth;\n            }\n        }\n        // Draw a single canvas\n        const draw = (index) => {\n            if (index < 0 || index >= numCanvases)\n                return;\n            if (drawnIndexes[index])\n                return;\n            drawnIndexes[index] = true;\n            const offset = index * singleCanvasWidth;\n            const clampedWidth = Math.min(totalWidth - offset, singleCanvasWidth);\n            if (clampedWidth <= 0)\n                return;\n            const data = channelData.map((channel) => {\n                const start = Math.floor((offset / totalWidth) * channel.length);\n                const end = Math.floor(((offset + clampedWidth) / totalWidth) * channel.length);\n                return channel.slice(start, end);\n            });\n            this.renderSingleCanvas(data, options, clampedWidth, height, offset, canvasContainer, progressContainer);\n        };\n        // Clear canvases to avoid too many DOM nodes\n        const clearCanvases = () => {\n            if (Object.keys(drawnIndexes).length > Renderer.MAX_NODES) {\n                canvasContainer.innerHTML = '';\n                progressContainer.innerHTML = '';\n                drawnIndexes = {};\n            }\n        };\n        // Calculate how many canvases to render\n        const numCanvases = Math.ceil(totalWidth / singleCanvasWidth);\n        // Render all canvases if the waveform doesn't scroll\n        if (!this.isScrollable) {\n            for (let i = 0; i < numCanvases; i++) {\n                draw(i);\n            }\n            return;\n        }\n        // Lazy rendering\n        const viewPosition = this.scrollContainer.scrollLeft / totalWidth;\n        const startCanvas = Math.floor(viewPosition * numCanvases);\n        // Draw the canvases in the viewport first\n        draw(startCanvas - 1);\n        draw(startCanvas);\n        draw(startCanvas + 1);\n        // Subscribe to the scroll event to draw additional canvases\n        if (numCanvases > 1) {\n            const unsubscribe = this.on('scroll', () => {\n                const { scrollLeft } = this.scrollContainer;\n                const canvasIndex = Math.floor((scrollLeft / totalWidth) * numCanvases);\n                clearCanvases();\n                draw(canvasIndex - 1);\n                draw(canvasIndex);\n                draw(canvasIndex + 1);\n            });\n            this.unsubscribeOnScroll.push(unsubscribe);\n        }\n    }\n    renderChannel(channelData, _a, width, channelIndex) {\n        var { overlay } = _a, options = __rest(_a, [\"overlay\"]);\n        // A container for canvases\n        const canvasContainer = document.createElement('div');\n        const height = this.getHeight(options.height, options.splitChannels);\n        canvasContainer.style.height = `${height}px`;\n        if (overlay && channelIndex > 0) {\n            canvasContainer.style.marginTop = `-${height}px`;\n        }\n        this.canvasWrapper.style.minHeight = `${height}px`;\n        this.canvasWrapper.appendChild(canvasContainer);\n        // A container for progress canvases\n        const progressContainer = canvasContainer.cloneNode();\n        this.progressWrapper.appendChild(progressContainer);\n        // Render the waveform\n        this.renderMultiCanvas(channelData, options, width, height, canvasContainer, progressContainer);\n    }\n    render(audioData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            // Clear previous timeouts\n            this.timeouts.forEach((clear) => clear());\n            this.timeouts = [];\n            // Clear the canvases\n            this.canvasWrapper.innerHTML = '';\n            this.progressWrapper.innerHTML = '';\n            // Width\n            if (this.options.width != null) {\n                this.scrollContainer.style.width =\n                    typeof this.options.width === 'number' ? `${this.options.width}px` : this.options.width;\n            }\n            // Determine the width of the waveform\n            const pixelRatio = this.getPixelRatio();\n            const parentWidth = this.scrollContainer.clientWidth;\n            const scrollWidth = Math.ceil(audioData.duration * (this.options.minPxPerSec || 0));\n            // Whether the container should scroll\n            this.isScrollable = scrollWidth > parentWidth;\n            const useParentWidth = this.options.fillParent && !this.isScrollable;\n            // Width of the waveform in pixels\n            const width = (useParentWidth ? parentWidth : scrollWidth) * pixelRatio;\n            // Set the width of the wrapper\n            this.wrapper.style.width = useParentWidth ? '100%' : `${scrollWidth}px`;\n            // Set additional styles\n            this.scrollContainer.style.overflowX = this.isScrollable ? 'auto' : 'hidden';\n            this.scrollContainer.classList.toggle('noScrollbar', !!this.options.hideScrollbar);\n            this.cursor.style.backgroundColor = `${this.options.cursorColor || this.options.progressColor}`;\n            this.cursor.style.width = `${this.options.cursorWidth}px`;\n            this.audioData = audioData;\n            this.emit('render');\n            // Render the waveform\n            if (this.options.splitChannels) {\n                // Render a waveform for each channel\n                for (let i = 0; i < audioData.numberOfChannels; i++) {\n                    const options = Object.assign(Object.assign({}, this.options), (_a = this.options.splitChannels) === null || _a === void 0 ? void 0 : _a[i]);\n                    this.renderChannel([audioData.getChannelData(i)], options, width, i);\n                }\n            }\n            else {\n                // Render a single waveform for the first two channels (left and right)\n                const channels = [audioData.getChannelData(0)];\n                if (audioData.numberOfChannels > 1)\n                    channels.push(audioData.getChannelData(1));\n                this.renderChannel(channels, this.options, width, 0);\n            }\n            // Must be emitted asynchronously for backward compatibility\n            Promise.resolve().then(() => this.emit('rendered'));\n        });\n    }\n    reRender() {\n        this.unsubscribeOnScroll.forEach((unsubscribe) => unsubscribe());\n        this.unsubscribeOnScroll = [];\n        // Return if the waveform has not been rendered yet\n        if (!this.audioData)\n            return;\n        // Remember the current cursor position\n        const { scrollWidth } = this.scrollContainer;\n        const { right: before } = this.progressWrapper.getBoundingClientRect();\n        // Re-render the waveform\n        this.render(this.audioData);\n        // Adjust the scroll position so that the cursor stays in the same place\n        if (this.isScrollable && scrollWidth !== this.scrollContainer.scrollWidth) {\n            const { right: after } = this.progressWrapper.getBoundingClientRect();\n            let delta = after - before;\n            // to limit compounding floating-point drift\n            // we need to round to the half px furthest from 0\n            delta *= 2;\n            delta = delta < 0 ? Math.floor(delta) : Math.ceil(delta);\n            delta /= 2;\n            this.scrollContainer.scrollLeft += delta;\n        }\n    }\n    zoom(minPxPerSec) {\n        this.options.minPxPerSec = minPxPerSec;\n        this.reRender();\n    }\n    scrollIntoView(progress, isPlaying = false) {\n        const { scrollLeft, scrollWidth, clientWidth } = this.scrollContainer;\n        const progressWidth = progress * scrollWidth;\n        const startEdge = scrollLeft;\n        const endEdge = scrollLeft + clientWidth;\n        const middle = clientWidth / 2;\n        if (this.isDragging) {\n            // Scroll when dragging close to the edge of the viewport\n            const minGap = 30;\n            if (progressWidth + minGap > endEdge) {\n                this.scrollContainer.scrollLeft += minGap;\n            }\n            else if (progressWidth - minGap < startEdge) {\n                this.scrollContainer.scrollLeft -= minGap;\n            }\n        }\n        else {\n            if (progressWidth < startEdge || progressWidth > endEdge) {\n                this.scrollContainer.scrollLeft = progressWidth - (this.options.autoCenter ? middle : 0);\n            }\n            // Keep the cursor centered when playing\n            const center = progressWidth - scrollLeft - middle;\n            if (isPlaying && this.options.autoCenter && center > 0) {\n                this.scrollContainer.scrollLeft += Math.min(center, 10);\n            }\n        }\n        // Emit the scroll event\n        {\n            const newScroll = this.scrollContainer.scrollLeft;\n            const startX = newScroll / scrollWidth;\n            const endX = (newScroll + clientWidth) / scrollWidth;\n            this.emit('scroll', startX, endX, newScroll, newScroll + clientWidth);\n        }\n    }\n    renderProgress(progress, isPlaying) {\n        if (isNaN(progress))\n            return;\n        const percents = progress * 100;\n        this.canvasWrapper.style.clipPath = `polygon(${percents}% 0, 100% 0, 100% 100%, ${percents}% 100%)`;\n        this.progressWrapper.style.width = `${percents}%`;\n        this.cursor.style.left = `${percents}%`;\n        this.cursor.style.transform = `translateX(-${Math.round(percents) === 100 ? this.options.cursorWidth : 0}px)`;\n        if (this.isScrollable && this.options.autoScroll) {\n            this.scrollIntoView(progress, isPlaying);\n        }\n    }\n    exportImage(format, quality, type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const canvases = this.canvasWrapper.querySelectorAll('canvas');\n            if (!canvases.length) {\n                throw new Error('No waveform data');\n            }\n            // Data URLs\n            if (type === 'dataURL') {\n                const images = Array.from(canvases).map((canvas) => canvas.toDataURL(format, quality));\n                return Promise.resolve(images);\n            }\n            // Blobs\n            return Promise.all(Array.from(canvases).map((canvas) => {\n                return new Promise((resolve, reject) => {\n                    canvas.toBlob((blob) => {\n                        blob ? resolve(blob) : reject(new Error('Could not export image'));\n                    }, format, quality);\n                });\n            }));\n        });\n    }\n}\nRenderer.MAX_CANVAS_WIDTH = 8000;\nRenderer.MAX_NODES = 10;\nexport default Renderer;\n","export function makeDraggable(element, onDrag, onStart, onEnd, threshold = 3, mouseButton = 0, touchDelay = 100) {\n    if (!element)\n        return () => void 0;\n    const isTouchDevice = matchMedia('(pointer: coarse)').matches;\n    let unsubscribeDocument = () => void 0;\n    const onPointerDown = (event) => {\n        if (event.button !== mouseButton)\n            return;\n        event.preventDefault();\n        event.stopPropagation();\n        let startX = event.clientX;\n        let startY = event.clientY;\n        let isDragging = false;\n        const touchStartTime = Date.now();\n        const onPointerMove = (event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            if (isTouchDevice && Date.now() - touchStartTime < touchDelay)\n                return;\n            const x = event.clientX;\n            const y = event.clientY;\n            const dx = x - startX;\n            const dy = y - startY;\n            if (isDragging || Math.abs(dx) > threshold || Math.abs(dy) > threshold) {\n                const rect = element.getBoundingClientRect();\n                const { left, top } = rect;\n                if (!isDragging) {\n                    onStart === null || onStart === void 0 ? void 0 : onStart(startX - left, startY - top);\n                    isDragging = true;\n                }\n                onDrag(dx, dy, x - left, y - top);\n                startX = x;\n                startY = y;\n            }\n        };\n        const onPointerUp = (event) => {\n            if (isDragging) {\n                const x = event.clientX;\n                const y = event.clientY;\n                const rect = element.getBoundingClientRect();\n                const { left, top } = rect;\n                onEnd === null || onEnd === void 0 ? void 0 : onEnd(x - left, y - top);\n            }\n            unsubscribeDocument();\n        };\n        const onPointerLeave = (e) => {\n            // Listen to events only on the document and not on inner elements\n            if (!e.relatedTarget || e.relatedTarget === document.documentElement) {\n                onPointerUp(e);\n            }\n        };\n        const onClick = (event) => {\n            if (isDragging) {\n                event.stopPropagation();\n                event.preventDefault();\n            }\n        };\n        const onTouchMove = (event) => {\n            if (isDragging) {\n                event.preventDefault();\n            }\n        };\n        document.addEventListener('pointermove', onPointerMove);\n        document.addEventListener('pointerup', onPointerUp);\n        document.addEventListener('pointerout', onPointerLeave);\n        document.addEventListener('pointercancel', onPointerLeave);\n        document.addEventListener('touchmove', onTouchMove, { passive: false });\n        document.addEventListener('click', onClick, { capture: true });\n        unsubscribeDocument = () => {\n            document.removeEventListener('pointermove', onPointerMove);\n            document.removeEventListener('pointerup', onPointerUp);\n            document.removeEventListener('pointerout', onPointerLeave);\n            document.removeEventListener('pointercancel', onPointerLeave);\n            document.removeEventListener('touchmove', onTouchMove);\n            setTimeout(() => {\n                document.removeEventListener('click', onClick, { capture: true });\n            }, 10);\n        };\n    };\n    element.addEventListener('pointerdown', onPointerDown);\n    return () => {\n        unsubscribeDocument();\n        element.removeEventListener('pointerdown', onPointerDown);\n    };\n}\n","import EventEmitter from './event-emitter.js';\nclass Timer extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.unsubscribe = () => undefined;\n    }\n    start() {\n        this.unsubscribe = this.on('tick', () => {\n            requestAnimationFrame(() => {\n                this.emit('tick');\n            });\n        });\n        this.emit('tick');\n    }\n    stop() {\n        this.unsubscribe();\n    }\n    destroy() {\n        this.unsubscribe();\n    }\n}\nexport default Timer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from './event-emitter.js';\n/**\n * A Web Audio buffer player emulating the behavior of an HTML5 Audio element.\n */\nclass WebAudioPlayer extends EventEmitter {\n    constructor(audioContext = new AudioContext()) {\n        super();\n        this.bufferNode = null;\n        this.playStartTime = 0;\n        this.playedDuration = 0;\n        this._muted = false;\n        this._playbackRate = 1;\n        this._duration = undefined;\n        this.buffer = null;\n        this.currentSrc = '';\n        this.paused = true;\n        this.crossOrigin = null;\n        this.seeking = false;\n        this.autoplay = false;\n        /** Subscribe to an event. Returns an unsubscribe function. */\n        this.addEventListener = this.on;\n        /** Unsubscribe from an event */\n        this.removeEventListener = this.un;\n        this.audioContext = audioContext;\n        this.gainNode = this.audioContext.createGain();\n        this.gainNode.connect(this.audioContext.destination);\n    }\n    load() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return;\n        });\n    }\n    get src() {\n        return this.currentSrc;\n    }\n    set src(value) {\n        this.currentSrc = value;\n        this._duration = undefined;\n        if (!value) {\n            this.buffer = null;\n            this.emit('emptied');\n            return;\n        }\n        fetch(value)\n            .then((response) => {\n            if (response.status >= 400) {\n                throw new Error(`Failed to fetch ${value}: ${response.status} (${response.statusText})`);\n            }\n            return response.arrayBuffer();\n        })\n            .then((arrayBuffer) => {\n            if (this.currentSrc !== value)\n                return null;\n            return this.audioContext.decodeAudioData(arrayBuffer);\n        })\n            .then((audioBuffer) => {\n            if (this.currentSrc !== value)\n                return;\n            this.buffer = audioBuffer;\n            this.emit('loadedmetadata');\n            this.emit('canplay');\n            if (this.autoplay)\n                this.play();\n        });\n    }\n    _play() {\n        var _a;\n        if (!this.paused)\n            return;\n        this.paused = false;\n        (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this.bufferNode = this.audioContext.createBufferSource();\n        if (this.buffer) {\n            this.bufferNode.buffer = this.buffer;\n        }\n        this.bufferNode.playbackRate.value = this._playbackRate;\n        this.bufferNode.connect(this.gainNode);\n        let currentPos = this.playedDuration * this._playbackRate;\n        if (currentPos >= this.duration) {\n            currentPos = 0;\n            this.playedDuration = 0;\n        }\n        this.bufferNode.start(this.audioContext.currentTime, currentPos);\n        this.playStartTime = this.audioContext.currentTime;\n        this.bufferNode.onended = () => {\n            if (this.currentTime >= this.duration) {\n                this.pause();\n                this.emit('ended');\n            }\n        };\n    }\n    _pause() {\n        var _a;\n        this.paused = true;\n        (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.stop();\n        this.playedDuration += this.audioContext.currentTime - this.playStartTime;\n    }\n    play() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.paused)\n                return;\n            this._play();\n            this.emit('play');\n        });\n    }\n    pause() {\n        if (this.paused)\n            return;\n        this._pause();\n        this.emit('pause');\n    }\n    stopAt(timeSeconds) {\n        var _a, _b;\n        const delay = timeSeconds - this.currentTime;\n        (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.stop(this.audioContext.currentTime + delay);\n        (_b = this.bufferNode) === null || _b === void 0 ? void 0 : _b.addEventListener('ended', () => {\n            this.bufferNode = null;\n            this.pause();\n        }, { once: true });\n    }\n    setSinkId(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ac = this.audioContext;\n            return ac.setSinkId(deviceId);\n        });\n    }\n    get playbackRate() {\n        return this._playbackRate;\n    }\n    set playbackRate(value) {\n        this._playbackRate = value;\n        if (this.bufferNode) {\n            this.bufferNode.playbackRate.value = value;\n        }\n    }\n    get currentTime() {\n        const time = this.paused\n            ? this.playedDuration\n            : this.playedDuration + (this.audioContext.currentTime - this.playStartTime);\n        return time * this._playbackRate;\n    }\n    set currentTime(value) {\n        const wasPlaying = !this.paused;\n        wasPlaying && this._pause();\n        this.playedDuration = value / this._playbackRate;\n        wasPlaying && this._play();\n        this.emit('seeking');\n        this.emit('timeupdate');\n    }\n    get duration() {\n        var _a, _b;\n        return (_a = this._duration) !== null && _a !== void 0 ? _a : (((_b = this.buffer) === null || _b === void 0 ? void 0 : _b.duration) || 0);\n    }\n    set duration(value) {\n        this._duration = value;\n    }\n    get volume() {\n        return this.gainNode.gain.value;\n    }\n    set volume(value) {\n        this.gainNode.gain.value = value;\n        this.emit('volumechange');\n    }\n    get muted() {\n        return this._muted;\n    }\n    set muted(value) {\n        if (this._muted === value)\n            return;\n        this._muted = value;\n        if (this._muted) {\n            this.gainNode.disconnect();\n        }\n        else {\n            this.gainNode.connect(this.audioContext.destination);\n        }\n    }\n    canPlayType(mimeType) {\n        return /^(audio|video)\\//.test(mimeType);\n    }\n    /** Get the GainNode used to play the audio. Can be used to attach filters. */\n    getGainNode() {\n        return this.gainNode;\n    }\n    /** Get decoded audio */\n    getChannelData() {\n        const channels = [];\n        if (!this.buffer)\n            return channels;\n        const numChannels = this.buffer.numberOfChannels;\n        for (let i = 0; i < numChannels; i++) {\n            channels.push(this.buffer.getChannelData(i));\n        }\n        return channels;\n    }\n}\nexport default WebAudioPlayer;\n","import { ENDPOINT } from '../../../common/js/config'\nimport {uriCompositionPage} from './home'\n\nlet EDIT_STATUS = false\n\nconst showAllCollButton = document.getElementById('openMyCollectionsButton')\nconst editButton = document.getElementById('editmycollectionsbutton')\n\nconst fetchCollectionsTree = async () => {\n    const response = await fetch('/mycollectionsastree')\n    const data = await response.json()\n    return data\n}\n\nconst createTreeHTML = (item) => {\n    let html = `\n        <span id='removeCollIcon${item.uuid}' data-uuid='${item.uuid}' data-title='${item.title}' role='button' class='badge badge-pill badge-danger' hidden>-</span>\n        <li id='${item.uuid}' class='list-group-item border-bottom-0 border-right-0 border-top-0 border-warning'>\n            <input type='text' class='form-control border-secondary' id='treecolltitleinput${item.uuid}' data-uuid='${item.uuid}' placeholder='Type a new title'\n            title='collectiontitle' value='${item.title}' disabled>\n        </li>`\n    \n    if (item.compositions.length > 0 || item.collections.length > 0) {\n        html += '<ul>'\n        for (const composition of item.compositions) {\n            html += `<li class='list-group-item border-0'><a href='${uriCompositionPage + composition.uuid}'><u>${composition.title}</u></a></li>`\n        }\n        for (const collection of item.collections) {\n            html += createTreeHTML(collection)\n        }\n        html += '</ul>'\n    }    \n    return html\n}\n\nconst renderTree = async () => {\n    const treeContainer = document.getElementById('listCollContainerAllColl')\n    const data = await fetchCollectionsTree()\n    let html = '<ul>'\n    for (const collection of data) {\n        html += createTreeHTML(collection)\n    }\n    html += '</ul>'\n    treeContainer.innerHTML = html\n}\n\nconst clickEditButtonHandler = () => {\n    \n    if(EDIT_STATUS){\n        EDIT_STATUS = false        \n        editButton.innerText =  'Edit'\n        disableEdition()\n    } else {\n        EDIT_STATUS = true\n        editButton.innerText =  'Done'\n        enableEdition()\n    }   \n}\n\nconst enableEdition = () => {\n    \n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`)\n\n    elementsWithHiddenAttribute.forEach(element => {\n        element.removeAttribute('hidden')        \n        removeCollectionClickhHandler(element.getAttribute('data-uuid'), element.getAttribute('data-title'))\n    })   \n    \n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`)\n\n    elementsWithDisabledAttribute.forEach(element => {\n        element.removeAttribute('disabled')\n        updateInputTextEventHandler(element.getAttribute('data-uuid'), element.value)\n    })\n}\n\nconst disableEdition = () => {\n\n    const elementsWithHiddenAttribute = document.querySelectorAll(`[id*='removeCollIcon']`)\n\n    elementsWithHiddenAttribute.forEach(element => {\n        element.setAttribute('hidden', 'true')\n    })\n\n    const elementsWithDisabledAttribute = document.querySelectorAll(`[id*='treecolltitleinput']`)    \n\n    elementsWithDisabledAttribute.forEach(element => {\n        element.setAttribute('disabled', 'true')\n    })\n}\n\nconst clickAllCollButtonHandler = async () => {\n    EDIT_STATUS = false\n    editButton.innerText =  'Edit'\n    await renderTree()\n    editButton.addEventListener('click', clickEditButtonHandler, false)\n}\n\nshowAllCollButton?.addEventListener('click', clickAllCollButtonHandler, false)\n\nconst confirmDeleteCollectionModal = async (event, collectionId, collectionTitle) => {\n\n    const chk = event.target\n\n    if (chk.tagName === 'SPAN') {\n\n        if (confirm(`Are you sure you want remove the collection ${collectionTitle} and all of its content?`) == true) {\n\n            const response = await fetch(ENDPOINT + '/deletecollection/' + collectionId, { method: 'DELETE' })\n            if (response?.ok) {\n                document.getElementById('removeCollIcon'+collectionId).remove()\n                const listElemToDelete = document.getElementById(collectionId)\n                if(listElemToDelete?.nextSibling?.tagName === 'UL'){\n                    listElemToDelete.nextSibling.remove()\n                }\n                listElemToDelete.remove()\n            }\n\n        } else {\n            event.target.checked = false\n        }\n    }\n}\n\nconst removeCollectionClickhHandler = (collectionId, collectionTitle) => {\n    document.getElementById('removeCollIcon' + collectionId).onclick= async (event) => {\n        await confirmDeleteCollectionModal(event, collectionId, collectionTitle)\n    }\n}\n\nconst updateInputTextEventHandler = (collectionId, currentTitle) => {    \n    document.getElementById('treecolltitleinput'+collectionId).onblur = (event) => {\n        handleInputBlur(event, collectionId, currentTitle)\n    }    \n}\n\nconst updateCollectionTitleRqst = (value, uuid) => {\n   \n    const updateTitleApi = ENDPOINT + '/updatecolltitle'\n    const data = { title: value, uuid: uuid }\n    \n    fetch(updateTitleApi, {\n        method: 'PATCH', \n        headers: {\n        'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    })\n    .then()\n    .catch(error => {\n        console.error('Error updating value:', error)\n    })\n}\n\nconst handleInputBlur = (event, collId, currTitle) => {    \n    const newValue = event.target.value\n    if(currTitle !== newValue){\n        if (!newValue || newValue === '') {\n            event.target.value = currTitle\n            alert('Introduce a valid title, please')\n            return\n        } else {\n            updateCollectionTitleRqst(newValue, collId)\n        }\n    }\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$51f9bf6c0a8acf40$var$MODE","$51f9bf6c0a8acf40$var$ENVIRONMENTS","PROD","ENDPOINT","UPLOAD_ENDPOINT","STAGE","location","protocol","host","DEV","$ff4f8c8b6ae3f637$export$2e2bcd8739ae039","dynamicModalDialog","message","idbtn","textBtnOK","textBtnCancel","popupTitle","backgroundHeader","callbackDismiss","setDynamicModalContent","$","modal","getDynamicModal","document","getElementById","html","querySelector","innerHTML","closeDynamicModal","callBackClose","initDynamicModal","createElement","classList","add","setAttribute","body","appendChild","constructor","on","event","$54dabcb7a6480b63$export$ff3ad29dbb546598","$54dabcb7a6480b63$export$36dfaec04418caa7","$54dabcb7a6480b63$export$eb3485a690c2f0b8","$54dabcb7a6480b63$export$a3c073b335a47d60","$54dabcb7a6480b63$export$eba8c17f4d7a3cd3","$54dabcb7a6480b63$export$ab4fdfae3dcd1a8f","$54dabcb7a6480b63$export$8afc507ca675ea0e","$54dabcb7a6480b63$export$81e46b314cb8d8e3","$54dabcb7a6480b63$export$997d30e836e5c567","$54dabcb7a6480b63$export$706cf9fcefe67c8e","$54dabcb7a6480b63$export$3fc781af82c0c660","$54dabcb7a6480b63$export$2464c9e69777d386","$72lX3","freeze","none","owner","admin","member","guest","public","onlyreg","private","loadingMessage","loaderElement","remove","apimethod","rqstmethod","useLoaderWithText","request","method","headers","JSON","stringify","sendRqst","fetch","respToJson","json","error","str","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","goHomeLink","origin","href","test","navigator","userAgent","audio","echoCancellation","noiseSuppression","autoGainControl","latency","channelCount","$094a86525c89e19a$export$207bec4913bdffa6","$094a86525c89e19a$export$7ed6abee26b8c64b","$7hG31","userprofile","callback","cancelLoader","terms_accepted","$094a86525c89e19a$export$95d7694256f75341","backdrop","keyboard","onclick","$094a86525c89e19a$var$rqstAcceptTerms","$094a86525c89e19a$var$rqstRejectTerms","data","callJsonApi","ok","attachToElem","modalDialog","getElementsByTagName","insertAdjacentHTML","$97f6d097709a8e76$export$a9dbfb18603d6a77","$97f6d097709a8e76$export$66d4708c2e689cee","$97f6d097709a8e76$export$5a676dd14dd0be2c","$lV0Oe","response","result","default","collections","listId","coll_id","theList","all_collections","listCollContainer","listOptions","selected","forEach","element","uuid","template","title","listElelemts","$be366c05d924947f$export$184163c68675dcce","isauth","isuserorcollection","$be366c05d924947f$var$createBreadCrumbNavBar","querySelectorAll","addEventListener","_document_querySelector","preventDefault","currentTarget","$be366c05d924947f$export$ff7962acd6052c28","getAttribute","navBar","userOptions","section","url","URL","searchParams","delete","history","replaceState","withScroll","$03e266e399b535e5$export$8d85b36da8527a05","$03e266e399b535e5$export$b99e48ec291af6c0","hidden","$03e266e399b535e5$export$556539c2d93a797d","console","log","$Nsii8","$919d7978aab43b0b$var$_USERNAME","$919d7978aab43b0b$export$1badf4b56a2f2c08","endpoint","includes","$919d7978aab43b0b$var$getCurrentUserName","$919d7978aab43b0b$export$149136365741a43c","username","$919d7978aab43b0b$export$a04c3fad920d835e","$919d7978aab43b0b$var$getGroupsByCollAndUser","compositionsList","groupedbycoll","groupedbyuser_aux","composition","collectionId","collection_uid","userId","user_id","push","$919d7978aab43b0b$var$getGroupsByCollectionAndSubColl","parent_coll_id","singlecomps","$919d7978aab43b0b$var$getGroupsByCollAndCollab","groupedbycollab","contributors","$919d7978aab43b0b$var$getFinalGroupByUserAndSingleComp","groupedbyuser_final","elem","$919d7978aab43b0b$export$2095d3815b0f7547","$919d7978aab43b0b$export$6d37f804b553eac7","$919d7978aab43b0b$export$46ab7a802f6f7711","$919d7978aab43b0b$export$3763f15547b21628","tracksList","compositionsDictionary","tracksDictionary","tracks","i","currentTrack","$3272937b030a975a$var$homeVideoUrl","getBundleURL","$3272937b030a975a$var$CARD_BADGE_STYLE","$3272937b030a975a$var$CARD_BORDER_STYLE","$3272937b030a975a$var$URI_PAGE","uriCollectionPage","uriUserPage","$3272937b030a975a$var$WELCOME_VIDEO","$3272937b030a975a$export$bca9dffb57f7792b","numberGroupsByCollections","numberGroupsCustom","numberSinglComp","totalcomps","displayGroupsByLabel","$3272937b030a975a$export$1f60eb8703988013","legendButtons","removeAttribute","$3272937b030a975a$export$971becedf6ebeceb","_element_tracks_","_element_tracks","_element_tracks1","displayName","displayNumCollabs","last_track","$03e266e399b535e5$export$4cd34456ac1eb639","PRIVACY_BADGE_STYLE","privacy","PRIVACY_BADGE_TEXT","opentocontrib","is_template","$03e266e399b535e5$export$5e4b5ab8660ba9d5","owner_uuid","description","$3272937b030a975a$export$cbdc54c51b649c98","item","typebadge","_item_tracks_","_item_tracks","_item_tracks1","$3272937b030a975a$export$da2a595be284078a","numitems","groupTitle","groupId","listgroup","badegstyle","borderstyle","badgeDisplayed","$3272937b030a975a$export$2ccaa4a069104255","hidetext","_welcomecontainer_lastChild","_welcomecontainer_lastChild1","welcomecontainer","videoContainer","lastChild","removeChild","welcometextelem","scrollIntoView","behavior","$3272937b030a975a$export$206832d47f4d1079","collectiontitle","collectionInfoContainer","$3272937b030a975a$export$b8abf8ca7249a7d2","useruid","userInfoContainer","$331a6e3221892ed2$export$2e2bcd8739ae039","listener","options","listeners","Set","once","unsubscribeOnce","un","_a","unAll","emit","eventName","args","$4db74b83ada4d8f4$export$2e2bcd8739ae039","decode","audioData","sampleRate","thisArg","_arguments","P","generator","audioCtx","AudioContext","decodeAudioData","finally","close","Promise","resolve","reject","fulfilled","value","step","next","rejected","done","adopt","then","apply","createBuffer","channelData","duration","$4db74b83ada4d8f4$var$normalize","firstChannel","some","max","absN","Math","abs","channel","numberOfChannels","getChannelData","copyFromChannel","AudioBuffer","prototype","copyToChannel","$3456c52de8aa06cd$exports","$3456c52de8aa06cd$export$c8a8987d4410bf2d","tagName","content","container","el","$3456c52de8aa06cd$var$renderNode","xmlns","createElementNS","key","entries","createTextNode","assign","style","textContent","toString","$3456c52de8aa06cd$export$2e2bcd8739ae039","$48b85dfa3fa6d87e$var$__awaiter","$48b85dfa3fa6d87e$export$2e2bcd8739ae039","fetchBlob","progressCallback","requestInit","status","statusText","$48b85dfa3fa6d87e$var$watchProgress","reader","getReader","contentLength","Number","receivedLength","processChunk","round","read","clone","blob","$1abdbc9c88264fd7$export$2e2bcd8739ae039","onMediaEvent","media","removeEventListener","getSrc","currentSrc","src","revokeSrc","startsWith","revokeObjectURL","canPlayType","type","setSrc","newSrc","Blob","createObjectURL","destroy","pause","isExternalMedia","load","setMediaElement","play","isPlaying","paused","ended","setTime","time","currentTime","getDuration","getCurrentTime","getVolume","volume","setVolume","getMuted","muted","setMuted","getPlaybackRate","playbackRate","isSeeking","seeking","setPlaybackRate","rate","preservePitch","preservesPitch","getMediaElement","setSinkId","sinkId","mediaControls","controls","autoplay","$9c44306aa0ec83f4$var$__awaiter","$9c44306aa0ec83f4$var$__rest","t","p","hasOwnProperty","getOwnPropertySymbols","propertyIsEnumerable","$9c44306aa0ec83f4$var$Renderer","parentFromOptionsContainer","parent","HTMLElement","initEvents","getClickPosition","rect","wrapper","getBoundingClientRect","x","clientX","left","y","clientY","top","width","height","dragToSeek","initDrag","scrollContainer","scrollLeft","scrollWidth","clientWidth","ResizeObserver","delay","createDelay","resizeObserver","onContainerResize","catch","undefined","observe","lastContainerWidth","reRender","subscriptions","onDrag","onStart","onEnd","threshold","mouseButton","touchDelay","isTouchDevice","matchMedia","matches","unsubscribeDocument","onPointerDown","button","stopPropagation","startX","startY","isDragging","touchStartTime","Date","now","onPointerMove","dx","dy","onPointerUp","onPointerLeave","relatedTarget","documentElement","onClick","onTouchMove","passive","capture","setTimeout","_","__","min","getHeight","optionsHeight","optionsSplitChannel","isNaN","clientHeight","every","overlay","initHtml","div","shadow","attachShadow","mode","cspNonce","replace","splitChannels","setOptions","newParent","getWrapper","getWidth","getScroll","setScroll","pixels","setScrollPercentage","percent","_b","unsubscribe","disconnect","unsubscribeOnScroll","delayMs","timeout","onClear","clearTimeout","timeouts","resolveFn","rejectFn","convertColorValues","color","Array","isArray","canvasElement","ctx","getContext","gradientHeight","devicePixelRatio","gradient","createLinearGradient","colorStopPercentage","index","addColorStop","getPixelRatio","renderBarWaveform","vScale","topChannel","bottomChannel","canvas","halfHeight","pixelRatio","barWidth","barGap","barRadius","barIndexScale","rectFn","beginPath","prevX","maxTop","maxBottom","topBarHeight","barHeight","barAlign","magnitudeTop","magnitudeBottom","fill","closePath","renderLineWaveform","_options","drawChannel","hScale","moveTo","h","lineTo","renderWaveform","fillStyle","waveColor","renderFunction","normalize","from","reduce","renderSingleCanvas","offset","canvasContainer","progressContainer","progressCanvas","cloneNode","progressCtx","drawImage","globalCompositeOperation","progressColor","fillRect","renderMultiCanvas","totalWidth","singleCanvasWidth","MAX_CANVAS_WIDTH","drawnIndexes","totalBarWidth","floor","draw","numCanvases","clampedWidth","map","start","end","slice","clearCanvases","keys","MAX_NODES","ceil","isScrollable","startCanvas","viewPosition","canvasIndex","renderChannel","channelIndex","marginTop","canvasWrapper","minHeight","progressWrapper","render","clear","parentWidth","minPxPerSec","useParentWidth","fillParent","overflowX","toggle","hideScrollbar","cursor","backgroundColor","cursorColor","cursorWidth","channels","right","before","after","delta","zoom","progress","progressWidth","endEdge","middle","autoCenter","center","newScroll","renderProgress","percents","clipPath","transform","autoScroll","exportImage","format","quality","canvases","toDataURL","all","toBlob","audioElement","$b3ae41db7600e195$export$2e2bcd8739ae039","requestAnimationFrame","stop","arguments","$4f5c2026a5d342b4$var$__awaiter","$4f5c2026a5d342b4$export$2e2bcd8739ae039","_duration","buffer","arrayBuffer","audioContext","audioBuffer","_play","bufferNode","createBufferSource","_playbackRate","connect","gainNode","currentPos","playedDuration","playStartTime","onended","_pause","stopAt","timeSeconds","deviceId","ac","wasPlaying","gain","_muted","destination","mimeType","getGainNode","numChannels","crossOrigin","createGain","$9019434973a700ec$var$__awaiter","$9019434973a700ec$var$defaultOptions","interact","$9019434973a700ec$var$WaveSurfer","create","updateProgress","renderer","initTimerEvents","timer","initPlayerEvents","mediaSubscriptions","initRendererEvents","relativeX","relativeY","seekTo","endX","scrollRight","debounce","debounceTime","initPlugins","plugins","plugin","registerPlugin","unsubscribePlayerEvents","audioRate","_init","filter","setScrollTime","percentage","getActivePlugins","loadAudio","decodedData","fetchParams","AbortController","signal","abortController","audioDuration","staticDuration","loadBlob","getDecodedData","exportPeaks","maxLength","precision","maxChannels","peaks","sampleSize","sample","Infinity","toggleInteraction","isInteractive","playPause","skip","seconds","empty","abort","backend","initialUrl","BasePlugin","onInit","wavesurfer","dom","$002a5d7c786a0466$var$tracks_dictionary","$002a5d7c786a0466$var$composition_dictionary","$002a5d7c786a0466$var$AUTO_PLAY","$002a5d7c786a0466$var$getCurrentTrack","$002a5d7c786a0466$var$changeFaIcon","trackid","startPlaying","iconElement","firstChild","nextSibling","$002a5d7c786a0466$var$changeFloatingIcon","floatingPlayButton","$002a5d7c786a0466$var$clickOnSameTrack","$002a5d7c786a0466$var$wavesurfer","$002a5d7c786a0466$var$checkAudioPausedNotSameTrack","$002a5d7c786a0466$var$playTrackButtonHandler","$002a5d7c786a0466$export$cc346877ffba6d5","$002a5d7c786a0466$var$updateCurrentPlayInfo","$002a5d7c786a0466$var$loadTrackSuccess","audioSrc","doPlay","$002a5d7c786a0466$var$loadTrackError","playElemUI","alert","track_id","track_title","comp_title","comp_uuid","$002a5d7c786a0466$export$144cd45dcb767075","all_tracks","randomInt","random","lastTrackId","$002a5d7c786a0466$export$7a196286caa95f25","elements","$002a5d7c786a0466$var$fabPlayButtonIsCurrentTrack","responsive","$03e266e399b535e5$var$homePageTermsAccepted","termsAccepted","generateAcceptTermsModal","$03e266e399b535e5$var$getMyProfile","isAuthenticated","name","display","innerText","checkIfTermsAccepted","compositions","$03e266e399b535e5$var$renderHomePage","$03e266e399b535e5$var$getCompositionsByUserUid","auth","$03e266e399b535e5$var$getCompositionsByColelctionUid","collectionuid","collection_name","owneruid","notUserPublicPage","$03e266e399b535e5$var$renderHomePageWithLists","$03e266e399b535e5$var$paintListOfCompositions","$03e266e399b535e5$var$paintGroupCollection","listcomps","allCompUIelem","comp","values","parent_collection","$03e266e399b535e5$var$getSingleComps","groupedComps","listCompsSingle","customgroup","numberCustomGroups","$03e266e399b535e5$var$initHomPage","queryString","search","split","isAuth","videoPromo","activateGoHomeLink","$d2TTa","$b8a27fff14674973$var$EDIT_STATUS","$b8a27fff14674973$var$showAllCollButton","$b8a27fff14674973$var$editButton","$b8a27fff14674973$var$fetchCollectionsTree","$b8a27fff14674973$var$createTreeHTML","collection","$b8a27fff14674973$var$renderTree","treeContainer","$b8a27fff14674973$var$clickEditButtonHandler","$b8a27fff14674973$var$disableEdition","$b8a27fff14674973$var$enableEdition","elementsWithHiddenAttribute","$b8a27fff14674973$var$removeCollectionClickhHandler","elementsWithDisabledAttribute","$b8a27fff14674973$var$updateInputTextEventHandler","$b8a27fff14674973$var$clickAllCollButtonHandler","$b8a27fff14674973$var$confirmDeleteCollectionModal","collectionTitle","chk","target","confirm","_listElemToDelete_nextSibling","listElemToDelete","checked","currentTitle","onblur","$b8a27fff14674973$var$handleInputBlur","$b8a27fff14674973$var$updateCollectionTitleRqst","collId","currTitle","newValue","$2f1ee4bd228745c2$var$createNewButton","$2f1ee4bd228745c2$var$createNewButtonAtHome","$2f1ee4bd228745c2$var$clickNewButtonHandler","$2f1ee4bd228745c2$var$saveEventListener","getCollections","$2f1ee4bd228745c2$var$getCompCollSuccess","getCollectionsError","list","createListCollections","saveCompositionButton","$2f1ee4bd228745c2$var$saveEventListenerHandler","newCreation","apiMethod","newtitle","privacyLevel","newdescription","collectInput","parentCollection","privacy_level","parent_uuid","startLoader","r","$2f1ee4bd228745c2$var$verifyResponse"],"version":3,"file":"index.a72d56f5.js.map"}