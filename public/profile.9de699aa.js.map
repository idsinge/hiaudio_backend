{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,ECAA,IAAM,EAAO,QAEP,EAAe,CACjB,KAAK,CACD,SAAS,GACT,gBAAgB,EACpB,EACA,MAAM,CACF,SAAU,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC5D,gBAAiB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,aACxE,EACA,IAAI,CACA,SAAS,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAC3D,gBAAgB,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,OAAO,QAAQ,CAAC,IAAI,CAAG,aACzE,CACJ,CAEA,CAAA,EAAA,OAAA,CAAiB,CACb,SAAU,CAAY,CAAC,EAAK,CAAC,QAAQ,CACrC,gBAAiB,CAAY,CAAC,EAAK,CAAC,eAAe,AACvD,C,G,E,Q,S,C,C,C,E,E,E,O,C,iB,I,G,E,E,O,C,c,I,G,E,E,O,C,oB,I,G,E,E,O,C,e,I,G,E,E,O,C,sB,I,G,E,E,O,C,qB,I,G,E,E,O,C,c,I,G,E,E,O,C,e,I,G,E,E,O,C,c,I,G,E,E,O,C,gB,I,G,E,E,O,C,qB,I,G,E,E,O,C,W,I,G,I,E,E,SClBO,IAAM,EAAiB,SAEjB,EAAc,sBACd,EAAoB,4BAET,OAAO,MAAM,CAAC,CAClC,KAAO,EACP,MAAQ,EACR,MAAQ,EACR,OAAS,EACT,MAAQ,CACZ,GAEO,IAAM,EAAe,OAAO,MAAM,CAAC,CACtC,OAAS,EACT,QAAU,EACV,QAAU,CACd,GAEa,EAAsB,CAAC,CAAC,EAAa,MAAM,CAAC,CAAG,eAAgB,CAAC,EAAa,OA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","sources":["<anon>","src/common/js/config.js","src/common/js/utils.js","src/common/js/acceptterms.js","src/pages/profile/user.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1e7e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1e7e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"9QUIF\", function(module, exports) {\nconst $72c4f7ae54bd3a1f$var$MODE = \"STAGE\" // STAGE\n;\nconst $72c4f7ae54bd3a1f$var$ENVIRONMENTS = {\n    PROD: {\n        ENDPOINT: \"\",\n        UPLOAD_ENDPOINT: \"\"\n    },\n    STAGE: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    },\n    DEV: {\n        ENDPOINT: window.location.protocol + \"//\" + window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol + \"//\" + window.location.host + \"/fileUpload\"\n    }\n};\nmodule.exports = {\n    ENDPOINT: $72c4f7ae54bd3a1f$var$ENVIRONMENTS[$72c4f7ae54bd3a1f$var$MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: $72c4f7ae54bd3a1f$var$ENVIRONMENTS[$72c4f7ae54bd3a1f$var$MODE].UPLOAD_ENDPOINT\n};\n\n});\n\nparcelRegister(\"ck9ES\", function(module, exports) {\n\n$parcel$export(module.exports, \"LOADER_ELEM_ID\", () => $8f8ed8369fbedf5d$export$29456ccb00e38680);\n$parcel$export(module.exports, \"uriUserPage\", () => $8f8ed8369fbedf5d$export$ff3ad29dbb546598);\n$parcel$export(module.exports, \"uriCollectionPage\", () => $8f8ed8369fbedf5d$export$36dfaec04418caa7);\n$parcel$export(module.exports, \"LevelPrivacy\", () => $8f8ed8369fbedf5d$export$a3c073b335a47d60);\n$parcel$export(module.exports, \"PRIVACY_BADGE_STYLE\", () => $8f8ed8369fbedf5d$export$eba8c17f4d7a3cd3);\n$parcel$export(module.exports, \"PRIVACY_BADGE_TEXT\", () => $8f8ed8369fbedf5d$export$ab4fdfae3dcd1a8f);\n$parcel$export(module.exports, \"startLoader\", () => $8f8ed8369fbedf5d$export$8afc507ca675ea0e);\n$parcel$export(module.exports, \"cancelLoader\", () => $8f8ed8369fbedf5d$export$81e46b314cb8d8e3);\n$parcel$export(module.exports, \"callJsonApi\", () => $8f8ed8369fbedf5d$export$997d30e836e5c567);\n$parcel$export(module.exports, \"looksLikeMail\", () => $8f8ed8369fbedf5d$export$706cf9fcefe67c8e);\n$parcel$export(module.exports, \"activateGoHomeLink\", () => $8f8ed8369fbedf5d$export$3fc781af82c0c660);\n$parcel$export(module.exports, \"isSafari\", () => $8f8ed8369fbedf5d$export$95df08bae54cb4df);\n\nvar $9QUIF = parcelRequire(\"9QUIF\");\nconst $8f8ed8369fbedf5d$export$29456ccb00e38680 = \"loader\";\nconst $8f8ed8369fbedf5d$export$ff3ad29dbb546598 = \"/index.html?userid=\";\nconst $8f8ed8369fbedf5d$export$36dfaec04418caa7 = \"/index.html?collectionid=\";\nconst $8f8ed8369fbedf5d$export$eb3485a690c2f0b8 = Object.freeze({\n    none: 0,\n    owner: 1,\n    admin: 2,\n    member: 3,\n    guest: 4\n});\nconst $8f8ed8369fbedf5d$export$a3c073b335a47d60 = Object.freeze({\n    public: 1,\n    onlyreg: 2,\n    private: 3\n});\nconst $8f8ed8369fbedf5d$export$eba8c17f4d7a3cd3 = {\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.public]: \"badge-public\",\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.onlyreg]: \"badge-onlyreg\",\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.private]: \"badge-private\"\n};\nconst $8f8ed8369fbedf5d$export$ab4fdfae3dcd1a8f = {\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.public]: \"PUBLIC\",\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.onlyreg]: \"REG USERS\",\n    [$8f8ed8369fbedf5d$export$a3c073b335a47d60.private]: \"PRIVATE\"\n};\nconst $8f8ed8369fbedf5d$export$8afc507ca675ea0e = (loaderId, loadingMessage)=>{\n    const loaderElement = document.getElementById(loaderId);\n    loaderElement.nextElementSibling.textContent = loadingMessage;\n    loaderElement.classList.add(loaderId);\n};\nconst $8f8ed8369fbedf5d$export$81e46b314cb8d8e3 = (loaderId)=>{\n    const loaderElement = document.getElementById(loaderId);\n    loaderElement.classList.remove(loaderId);\n    loaderElement.nextElementSibling.textContent = \"\";\n};\nconst $8f8ed8369fbedf5d$export$997d30e836e5c567 = async (apimethod, rqstmethod, body)=>{\n    const request = {\n        method: rqstmethod || \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }\n    };\n    if (body) request.body = JSON.stringify(body);\n    try {\n        $8f8ed8369fbedf5d$export$8afc507ca675ea0e($8f8ed8369fbedf5d$export$29456ccb00e38680, \"Loading...\");\n        const sendRqst = await fetch((0, $9QUIF.ENDPOINT) + apimethod, request);\n        $8f8ed8369fbedf5d$export$81e46b314cb8d8e3($8f8ed8369fbedf5d$export$29456ccb00e38680);\n        const respToJson = await sendRqst.json();\n        if (respToJson && !respToJson.error) return respToJson;\n        else return respToJson?.error || \"An error occurred\";\n    } catch (error) {\n        $8f8ed8369fbedf5d$export$81e46b314cb8d8e3($8f8ed8369fbedf5d$export$29456ccb00e38680);\n        return error;\n    }\n};\nconst $8f8ed8369fbedf5d$export$706cf9fcefe67c8e = (str)=>{\n    const lastAtPos = str.lastIndexOf(\"@\");\n    const lastDotPos = str.lastIndexOf(\".\");\n    return lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf(\"@@\") == -1 && lastDotPos > 2 && str.length - lastDotPos > 2;\n};\nconst $8f8ed8369fbedf5d$export$3fc781af82c0c660 = ()=>{\n    const goHomeLink = document.getElementById(\"goHome\");\n    if (window.location.host === \"localhost:80\" || window.location.origin === \"http://localhost\") goHomeLink.href = window.location.origin + \"/index.html\";\n    else goHomeLink.href = window.location.origin;\n};\nconst $8f8ed8369fbedf5d$export$95df08bae54cb4df = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n});\n\nparcelRegister(\"hcAI8\", function(module, exports) {\n\n$parcel$export(module.exports, \"checkIfTermsAccepted\", () => $c86008aa1df30816$export$207bec4913bdffa6);\n$parcel$export(module.exports, \"generateAcceptTermsModal\", () => $c86008aa1df30816$export$7ed6abee26b8c64b);\n\nvar $ck9ES = parcelRequire(\"ck9ES\");\nconst $c86008aa1df30816$export$207bec4913bdffa6 = (userprofile, callback)=>{\n    (0, $ck9ES.cancelLoader)((0, $ck9ES.LOADER_ELEM_ID));\n    callback(userprofile?.terms_accepted);\n};\nconst $c86008aa1df30816$export$95d7694256f75341 = ()=>{\n    $(\"#acceptTermsModal\").modal({\n        backdrop: \"static\",\n        keyboard: false // to prevent closing with Esc button (if you want this too)\n    });\n    $(\"#acceptTermsModal\").modal(\"show\");\n    document.getElementById(\"buttonAcceptTerms\").onclick = $c86008aa1df30816$var$rqstAcceptTerms;\n    document.getElementById(\"buttonRejectTerms\").onclick = $c86008aa1df30816$var$rqstRejectTerms;\n};\nconst $c86008aa1df30816$var$rqstAcceptTerms = async ()=>{\n    const data = await (0, $ck9ES.callJsonApi)(\"/acceptterms\", \"PUT\");\n    if (data.ok) $(\"#acceptTermsModal\").modal(\"hide\");\n};\nconst $c86008aa1df30816$var$rqstRejectTerms = async ()=>{\n    const data = await (0, $ck9ES.callJsonApi)(\"/rejectterms\", \"PUT\");\n    if (data.ok) {\n        $(\"#acceptTermsModal\").modal(\"hide\");\n        window.location.href = window.location.origin;\n    }\n};\nconst $c86008aa1df30816$export$7ed6abee26b8c64b = (attachToElem)=>{\n    const isModal = document.getElementById(\"acceptTermsModal\");\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`;\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML(\"afterend\", modalDialog);\n    }\n    $c86008aa1df30816$export$95d7694256f75341();\n};\n\n});\n\n/* TODO: REFACTORING */ \nvar $9QUIF = parcelRequire(\"9QUIF\");\n\nvar $ck9ES = parcelRequire(\"ck9ES\");\n\nvar $hcAI8 = parcelRequire(\"hcAI8\");\nlet $7b39552b28a255d2$var$CURRENT_USERNAME = null;\nlet $7b39552b28a255d2$var$EDIT_STATUS = false;\nconst $7b39552b28a255d2$var$editUserNameButton = document.getElementById(\"editusernamebutton\");\nconst $7b39552b28a255d2$var$profilePageTermsAccepted = (termsAccepted)=>{\n    if (!termsAccepted) (0, $hcAI8.generateAcceptTermsModal)(\"main\");\n};\nconst $7b39552b28a255d2$var$getUser = async (callback)=>{\n    const data = await (0, $ck9ES.callJsonApi)(\"/profile\", \"GET\");\n    if (data) callback(data);\n};\nconst $7b39552b28a255d2$var$setUserInfo = (userinfo)=>{\n    if (userinfo.ok) {\n        (0, $hcAI8.checkIfTermsAccepted)(userinfo, $7b39552b28a255d2$var$profilePageTermsAccepted);\n        document.getElementById(\"profilecard\").hidden = false;\n        document.getElementById(\"profilepicture\").src = `https://picsum.photos/seed/${userinfo.user_uid}/200`;\n        $7b39552b28a255d2$var$CURRENT_USERNAME = userinfo.name;\n        document.getElementById(\"usernameinputfield\").value = userinfo.name;\n        document.getElementById(\"userid\").innerHTML = userinfo.user_uid;\n        document.getElementById(\"emailaddress\").innerHTML = userinfo.email;\n        $7b39552b28a255d2$var$deleteProfileHandler(userinfo.user_uid);\n        document.getElementById(\"apicard\").hidden = false;\n        document.getElementById(\"apitoken\").innerHTML = userinfo.token;\n        document.getElementById(\"curlcode\").innerHTML = `$ export JWT=\"${userinfo.token}\"  <br /><br />$ curl ${window.location.protocol}//${window.location.host}/profile   -H \"Authorization: Bearer $JWT\"`;\n        $7b39552b28a255d2$var$copyPasteTokenValue();\n    } else document.getElementById(\"logincard\").hidden = false;\n};\nconst $7b39552b28a255d2$var$deleteProfileHandler = (userid)=>{\n    document.getElementById(\"button-deleteprofile\").addEventListener(\"click\", async ()=>{\n        await $7b39552b28a255d2$var$deleteUserProfile(userid);\n    });\n};\nconst $7b39552b28a255d2$var$copyPasteTokenValue = ()=>{\n    document.getElementById(\"copytokenbutton\").onclick = ()=>{\n        window.prompt(\"Copy to clipboard: Ctrl+C, Enter\", document.getElementById(\"apitoken\").innerHTML);\n    };\n};\nconst $7b39552b28a255d2$var$deleteUserProfile = async (userid)=>{\n    const api = \"/deleteuser/\" + userid;\n    let userDelete = prompt(\"To confirm, please enter your User ID\", \"\");\n    if (userDelete === userid) {\n        const request = {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            }\n        };\n        try {\n            const sendRqst = await fetch((0, $9QUIF.ENDPOINT) + api, request);\n            const respToJson = await sendRqst.json();\n            if (respToJson) window.location.href = window.location.origin;\n        } catch (error) {\n            alert(error);\n        }\n    } else if (userDelete !== userid && userDelete !== null) alert(\"Sorry, the User ID does not match\");\n};\nconst $7b39552b28a255d2$var$clickEditButtonHandler = ()=>{\n    if ($7b39552b28a255d2$var$EDIT_STATUS) $7b39552b28a255d2$var$disableEdition();\n    else {\n        $7b39552b28a255d2$var$EDIT_STATUS = true;\n        $7b39552b28a255d2$var$editUserNameButton.innerHTML = '<i class=\"fas fa-save\">&nbsp;</i>Save';\n        $7b39552b28a255d2$var$enableEdition();\n    }\n};\nconst $7b39552b28a255d2$var$enableEdition = ()=>{\n    document.getElementById(\"usernameinputfield\").classList.add(\"italic\");\n    document.getElementById(\"usernameinputfield\").removeAttribute(\"readonly\");\n};\nconst $7b39552b28a255d2$var$disableEdition = async ()=>{\n    const usernameinput = document.getElementById(\"usernameinputfield\");\n    const newname = usernameinput.value;\n    usernameinput.value = newname.trim();\n    if ($7b39552b28a255d2$var$CURRENT_USERNAME === newname) $7b39552b28a255d2$var$setBackToReadOnly();\n    else {\n        const body = {\n            user_name: newname\n        };\n        const resultNewName = await (0, $ck9ES.callJsonApi)(\"/updateusername\", \"PATCH\", body);\n        if (!resultNewName.ok) {\n            usernameinput.classList.add(\"is-invalid\");\n            document.getElementById(\"validationusernameresult\").innerText = \"Sorry, \" + resultNewName;\n        } else {\n            $7b39552b28a255d2$var$CURRENT_USERNAME = newname;\n            $7b39552b28a255d2$var$setBackToReadOnly();\n        }\n    }\n};\nconst $7b39552b28a255d2$var$setBackToReadOnly = ()=>{\n    const usernameinput = document.getElementById(\"usernameinputfield\");\n    $7b39552b28a255d2$var$EDIT_STATUS = false;\n    $7b39552b28a255d2$var$editUserNameButton.innerHTML = '<i class=\"fas fa-edit\">&nbsp;</i>Edit username';\n    usernameinput.setAttribute(\"readonly\", \"true\");\n    usernameinput.classList.remove(\"is-invalid\");\n    usernameinput.classList.remove(\"italic\");\n    document.getElementById(\"validationusernameresult\").innerText = \"\";\n};\n(0, $ck9ES.activateGoHomeLink)();\n$7b39552b28a255d2$var$editUserNameButton.addEventListener(\"click\", $7b39552b28a255d2$var$clickEditButtonHandler, false);\n$7b39552b28a255d2$var$getUser($7b39552b28a255d2$var$setUserInfo);\n\n\n//# sourceMappingURL=profile.9de699aa.js.map\n","const MODE = 'STAGE' // STAGE\n\nconst ENVIRONMENTS = {\n    PROD:{        \n        ENDPOINT:'',\n        UPLOAD_ENDPOINT:''        \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'       \n    },\n    DEV:{        \n        ENDPOINT:window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.host + '/fileUpload'        \n    }\n}\n\nmodule.exports = {    \n    ENDPOINT: ENVIRONMENTS[MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: ENVIRONMENTS[MODE].UPLOAD_ENDPOINT\n}","import { ENDPOINT } from './config'\n\nexport const LOADER_ELEM_ID = 'loader'\n\nexport const uriUserPage = '/index.html?userid='\nexport const uriCollectionPage = '/index.html?collectionid='\n\nexport const UserRole = Object.freeze({\n    none : 0,\n    owner : 1,\n    admin : 2,\n    member : 3,\n    guest : 4\n})\n\nexport const LevelPrivacy = Object.freeze({\n    public : 1,\n    onlyreg : 2,\n    private : 3\n})\n\nexport const PRIVACY_BADGE_STYLE = {[LevelPrivacy.public] : 'badge-public', [LevelPrivacy.onlyreg] : 'badge-onlyreg', [LevelPrivacy.private] : 'badge-private'}\nexport const PRIVACY_BADGE_TEXT = {[LevelPrivacy.public] : 'PUBLIC', [LevelPrivacy.onlyreg] : 'REG USERS', [LevelPrivacy.private] : 'PRIVATE'}\n\nexport const startLoader = (loaderId, loadingMessage) => {    \n    const loaderElement = document.getElementById(loaderId)    \n    loaderElement.nextElementSibling.textContent = loadingMessage\n    loaderElement.classList.add(loaderId)\n}\n\nexport const cancelLoader = (loaderId) => {\n    const loaderElement = document.getElementById(loaderId)\n    loaderElement.classList.remove(loaderId)\n    loaderElement.nextElementSibling.textContent = ''\n}\n\nexport const callJsonApi = async (apimethod, rqstmethod, body) => {\n    const request = {\n        method: rqstmethod || 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    if(body){\n        request.body = JSON.stringify(body)\n    }\n    try {\n        startLoader(LOADER_ELEM_ID, 'Loading...')\n        const sendRqst = await fetch(ENDPOINT + apimethod, request)\n        cancelLoader(LOADER_ELEM_ID)\n        const respToJson = await sendRqst.json()\n        if (respToJson && !respToJson.error) {\n            return respToJson\n        } else {\n            return (respToJson?.error || 'An error occurred')\n        }\n    } catch (error) {\n        cancelLoader(LOADER_ELEM_ID)\n        return(error)\n    }\n}\n\n/* https://stackoverflow.com/a/5166806 */\nexport const looksLikeMail = (str) => {\n    const lastAtPos = str.lastIndexOf('@')\n    const lastDotPos = str.lastIndexOf('.')\n    return (lastAtPos < lastDotPos && lastAtPos > 0 && str.indexOf('@@') == -1 && lastDotPos > 2 && (str.length - lastDotPos) > 2)\n}\n\nexport const activateGoHomeLink = () => {\n    const goHomeLink = document.getElementById('goHome')\n    if(window.location.host === 'localhost:80' || window.location.origin === 'http://localhost'){\n        goHomeLink.href = window.location.origin + '/index.html'\n    } else {\n        goHomeLink.href = window.location.origin\n    }\n}\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)","import { LOADER_ELEM_ID, cancelLoader, callJsonApi } from './utils'\n\nexport const checkIfTermsAccepted = (userprofile, callback) => {\n    cancelLoader(LOADER_ELEM_ID)\n    callback(userprofile?.terms_accepted)\n}\n\nexport const handleTermsNotAccepted = () => {\n\n    $('#acceptTermsModal').modal({\n        backdrop: 'static',\n        keyboard: false  // to prevent closing with Esc button (if you want this too)\n    })\n    $('#acceptTermsModal').modal('show')\n    document.getElementById('buttonAcceptTerms').onclick = rqstAcceptTerms\n    document.getElementById('buttonRejectTerms').onclick = rqstRejectTerms\n}\n\nconst rqstAcceptTerms = async () => {\n    const data = await callJsonApi('/acceptterms', 'PUT')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n    }\n}\nconst rqstRejectTerms = async () => {\n    const data = await callJsonApi('/rejectterms', 'PUT')\n    if (data.ok) {\n        $('#acceptTermsModal').modal('hide')\n        window.location.href = window.location.origin\n    }\n}\n\nexport const generateAcceptTermsModal = (attachToElem) => {\n\n    const isModal = document.getElementById('acceptTermsModal')\n\n    if (!isModal) {\n        const modalDialog = `<div class=\"modal fade\" id=\"acceptTermsModal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Accept Terms</h5>                \n                </div>\n                <div class=\"modal-body\">\n                <p>By clicking on OK you accept the Terms of Use.</p>\n                <p>More information at: <span> <a href=\"${window.location.origin}/static/terms.html\" target=\"_blank\">${window.location.origin}/static/terms.html</a></span></p>\n                </div>\n                <div class=\"modal-footer\">\n                <button id=\"buttonRejectTerms\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Reject</button>\n                <button id=\"buttonAcceptTerms\" type=\"button\" class=\"btn btn-primary\">OK</button>\n                </div>\n            </div>\n            </div>\n        </div>`\n        document.getElementsByTagName(attachToElem)[0].insertAdjacentHTML('afterend', modalDialog)\n    }\n    handleTermsNotAccepted()\n}","/* TODO: REFACTORING */\nimport { ENDPOINT } from '../../common/js/config'\nimport { callJsonApi, activateGoHomeLink } from '../../common/js/utils'\nimport { checkIfTermsAccepted, generateAcceptTermsModal} from '../../common/js/acceptterms'\n\nlet CURRENT_USERNAME = null\nlet EDIT_STATUS = false\n\nconst editUserNameButton = document.getElementById('editusernamebutton')\n\nconst profilePageTermsAccepted = (termsAccepted) => {  \n  if(!termsAccepted){\n      generateAcceptTermsModal('main')\n  } \n}\n\nconst getUser = async (callback) => {\n\n  const data = await callJsonApi('/profile', 'GET')\n  if (data) {    \n    callback(data)\n  }  \n\n}\n\nconst setUserInfo = (userinfo) => {\n  if (userinfo.ok) {\n    checkIfTermsAccepted(userinfo, profilePageTermsAccepted)\n    document.getElementById('profilecard').hidden = false\n    document.getElementById('profilepicture').src = `https://picsum.photos/seed/${userinfo.user_uid}/200`\n    CURRENT_USERNAME = userinfo.name\n    document.getElementById('usernameinputfield').value = userinfo.name\n    document.getElementById('userid').innerHTML = userinfo.user_uid\n    document.getElementById('emailaddress').innerHTML = userinfo.email\n    deleteProfileHandler(userinfo.user_uid)\n\n    document.getElementById('apicard').hidden = false\n    document.getElementById('apitoken').innerHTML = userinfo.token\n    document.getElementById('curlcode').innerHTML = `$ export JWT=\"${userinfo.token}\"  <br /><br />$ curl ${window.location.protocol}//${window.location.host}/profile   -H \"Authorization: Bearer $JWT\"`;\n    copyPasteTokenValue()\n  } else {\n    document.getElementById('logincard').hidden = false\n  }\n}\n\nconst deleteProfileHandler = (userid) => {\n    document.getElementById('button-deleteprofile').addEventListener('click', async () => {await deleteUserProfile(userid)})\n}\n\nconst copyPasteTokenValue = () => {\n  document.getElementById('copytokenbutton').onclick = () => {\n    window.prompt('Copy to clipboard: Ctrl+C, Enter', document.getElementById('apitoken').innerHTML)\n  }\n}\nconst deleteUserProfile = async (userid) => {\n  const api = '/deleteuser/'+userid\n  let userDelete = prompt('To confirm, please enter your User ID', '')\n  if (userDelete === userid) {\n    const request = {\n        method: 'DELETE',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }\n    }\n    try {\n        const sendRqst = await fetch(ENDPOINT + api, request)\n        const respToJson = await sendRqst.json()\n        if (respToJson) {\n            window.location.href = window.location.origin\n        }\n    } catch (error) {\n        alert(error)\n    }\n  } else if ((userDelete !== userid) && (userDelete !== null)){\n    alert('Sorry, the User ID does not match')\n  }\n}\n\nconst clickEditButtonHandler = () => {\n    \n  if(EDIT_STATUS){      \n      disableEdition()\n  } else {\n      EDIT_STATUS = true\n      editUserNameButton.innerHTML =  '<i class=\"fas fa-save\">&nbsp;</i>Save'\n      enableEdition()\n  }   \n}\n\nconst enableEdition = () => {\n  document.getElementById('usernameinputfield').classList.add('italic')\n  document.getElementById('usernameinputfield').removeAttribute('readonly')\n}\n\nconst disableEdition = async () => {\n  const usernameinput = document.getElementById('usernameinputfield')\n  const newname =  usernameinput.value\n  usernameinput.value = newname.trim()\n  if(CURRENT_USERNAME === newname){\n    setBackToReadOnly()    \n  } else {\n    const body = {user_name: newname}\n    const resultNewName = await callJsonApi('/updateusername', 'PATCH', body)  \n    if(!resultNewName.ok){    \n      usernameinput.classList.add('is-invalid')     \n      document.getElementById('validationusernameresult').innerText = 'Sorry, ' + resultNewName\n    } else {\n      CURRENT_USERNAME = newname\n      setBackToReadOnly()     \n    }  \n  }  \n}\n\nconst setBackToReadOnly = () => {\n  const usernameinput = document.getElementById('usernameinputfield')\n  EDIT_STATUS = false        \n  editUserNameButton.innerHTML =  '<i class=\"fas fa-edit\">&nbsp;</i>Edit username'\n  usernameinput.setAttribute('readonly', 'true')\n  usernameinput.classList.remove('is-invalid')\n  usernameinput.classList.remove('italic')     \n  document.getElementById('validationusernameresult').innerText = '' \n}\n\nactivateGoHomeLink()\n\neditUserNameButton.addEventListener('click', clickEditButtonHandler, false)\n\ngetUser(setUserInfo)"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$72c4f7ae54bd3a1f$var$MODE","$72c4f7ae54bd3a1f$var$ENVIRONMENTS","PROD","ENDPOINT","UPLOAD_ENDPOINT","STAGE","window","location","protocol","host","DEV","$8f8ed8369fbedf5d$export$29456ccb00e38680","$8f8ed8369fbedf5d$export$ff3ad29dbb546598","$8f8ed8369fbedf5d$export$36dfaec04418caa7","$8f8ed8369fbedf5d$export$a3c073b335a47d60","$8f8ed8369fbedf5d$export$eba8c17f4d7a3cd3","$8f8ed8369fbedf5d$export$ab4fdfae3dcd1a8f","$8f8ed8369fbedf5d$export$8afc507ca675ea0e","$8f8ed8369fbedf5d$export$81e46b314cb8d8e3","$8f8ed8369fbedf5d$export$997d30e836e5c567","$8f8ed8369fbedf5d$export$706cf9fcefe67c8e","$8f8ed8369fbedf5d$export$3fc781af82c0c660","$8f8ed8369fbedf5d$export$95df08bae54cb4df","$9QUIF","freeze","none","owner","admin","member","guest","public","onlyreg","private","loaderId","loadingMessage","loaderElement","document","getElementById","nextElementSibling","textContent","classList","add","remove","apimethod","rqstmethod","body","request","method","headers","JSON","stringify","sendRqst","fetch","respToJson","json","error","str","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","goHomeLink","origin","href","test","navigator","userAgent","$c86008aa1df30816$export$207bec4913bdffa6","$c86008aa1df30816$export$7ed6abee26b8c64b","$ck9ES","userprofile","callback","cancelLoader","LOADER_ELEM_ID","terms_accepted","$c86008aa1df30816$export$95d7694256f75341","$","modal","backdrop","keyboard","onclick","$c86008aa1df30816$var$rqstAcceptTerms","$c86008aa1df30816$var$rqstRejectTerms","data","callJsonApi","ok","attachToElem","modalDialog","getElementsByTagName","insertAdjacentHTML","$hcAI8","$7b39552b28a255d2$var$CURRENT_USERNAME","$7b39552b28a255d2$var$EDIT_STATUS","$7b39552b28a255d2$var$editUserNameButton","$7b39552b28a255d2$var$profilePageTermsAccepted","termsAccepted","generateAcceptTermsModal","$7b39552b28a255d2$var$getUser","$7b39552b28a255d2$var$deleteProfileHandler","userid","addEventListener","$7b39552b28a255d2$var$deleteUserProfile","$7b39552b28a255d2$var$copyPasteTokenValue","prompt","innerHTML","userDelete","alert","$7b39552b28a255d2$var$enableEdition","removeAttribute","$7b39552b28a255d2$var$disableEdition","usernameinput","newname","value","trim","$7b39552b28a255d2$var$setBackToReadOnly","resultNewName","user_name","innerText","setAttribute","activateGoHomeLink","userinfo","checkIfTermsAccepted","hidden","src","user_uid","name","email","token"],"version":3,"file":"profile.9de699aa.js.map"}