var e,t,n,i;t={},n={},null==(i=(e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire1e7e)&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire1e7e=i),(0,i.register)("kJxWi",function(e,t){Object.defineProperty(e.exports,"TestMic",{get:function(){return a},set:void 0,enumerable:!0,configurable:!0});let n=document.getElementById("gainSliderTestMic"),i=document.getElementById("volume-indicator");class a{init(e,t){this.recordGainNode=e,this.audioCtxTestMic=t,this.getUserMediaOnSuccess()}getUserMediaOnSuccess(){let e=localStorage.getItem("micgain");this.CURRENT_GAIN_TEST_MIC=e?parseInt(e):this.CURRENT_GAIN_TEST_MIC,this.analyser=this.audioCtxTestMic.createAnalyser(),this.recordGainNode.connect(this.analyser),this.drawVolumeter(),this.uiHandlers()}drawWaveForm(){let e=this,t=this.analyser.frequencyBinCount,n=new Uint8Array(t);this.analyser.getByteTimeDomainData(n),setCanvasData(t,n),requestAnimationFrame(()=>{e.drawWaveForm()})}drawVolumeter(){let e=this,t=this.getPeakLevel();i.style.width=`${100*t}%`,requestAnimationFrame(()=>{e.drawVolumeter()})}getPeakLevel(){let e=new Uint8Array(this.analyser.fftSize);return this.analyser.getByteTimeDomainData(e),e.reduce((e,t)=>Math.max(e,Math.abs(t-127)),0)/128}async connectSource(){this.analyser.connect(this.audioCtxTestMic.destination)}disconnectSource(){this.analyser.disconnect()}uiHandlers(){let e=this;$("#testMicrophoneModal").on("show.bs.modal",t=>{n.value=e.CURRENT_GAIN_TEST_MIC,document.getElementById("current-input-gain-test-mic").value=e.CURRENT_GAIN_TEST_MIC}),$("#testMicrophoneModal").on("hide.bs.modal",async t=>{e.analyser.disconnect()}),n.addEventListener("input",function(){let t=parseFloat(this.value);e.CURRENT_GAIN_TEST_MIC=t,e.recordGainNode.gain.value=t,localStorage.setItem("micgain",t),document.getElementById("current-input-gain-test-mic").value=t})}constructor(){this.CURRENT_GAIN_TEST_MIC=1,this.audioCtxTestMic=null,this.analyser=null,this.recordGainNode=null}}}),i("kJxWi");
//# sourceMappingURL=composition.59cd996f.js.map
