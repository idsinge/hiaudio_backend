{"version":3,"sources":["js/config.js","index/newcomposition.js"],"names":["MODE","DEVPORT","ENVIRONMENTS","PROD","ENDPOINT","UPLOAD_ENDPOINT","STAGE","window","location","protocol","host","DEV","hostname","module","exports","errorIs","newProjectButton","document","getElementById","addEventListener","e","newtitle","value","privacyLevel","querySelector","body","JSON","stringify","title","privacy_level","fetch","method","headers","then","r","ok","statusText","json","data","composition","Error","href","uriCompositionPage","uuid","catch","error","alert"],"mappings":";AAAA,IAAMA,EAAO,QACPC,EAAU,KAEVC,EAAe,CACjBC,KAAK,CACDC,SAAS,GACTC,gBAAgB,IAEpBC,MAAM,CACFF,SAAUG,OAAOC,SAASC,SAAS,KAAKF,OAAOC,SAASE,KACxDL,gBAAiBE,OAAOC,SAASC,SAAS,KAAKF,OAAOC,SAASE,KAAK,eAExEC,IAAI,CACAP,SAASG,OAAOC,SAASC,SAAS,KAAKF,OAAOC,SAASI,SAAS,IAAIX,EACpEI,gBAAgBE,OAAOC,SAASC,SAAS,KAAKF,OAAOC,SAASI,SAAS,IAAIX,EAAQ,gBAI3FY,OAAOC,QAAU,CACbV,SAAUF,EAAaF,GAAMI,SAC7BC,gBAAiBH,EAAaF,GAAMK;;ACuBtC,aA1CF,IAAA,EAAA,QAAA,gBAEIU,EAAU,KAERC,EAAmBC,SAASC,eAAe,kBACjDF,MAAAA,GAAAA,EAAkBG,iBAAiB,QAAS,SAACC,GAC3C,IAAIC,EAAWJ,SAASC,eAAe,YAAYI,MAC7CC,EAAeN,SAASO,cAAc,+CAA+CF,MAC3F,GAAKD,EAAL,CAIA,IAAII,EAAOC,KAAKC,UAAU,CACxBC,MAAOP,EACPQ,cAAeN,IAIjBO,MAAM1B,EAAQ,SAAG,kBAAmB,CAClC2B,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB,OAAU,oBAEZP,KAAMA,IAELQ,KAAK,SAACC,GAIL,OAHKA,EAAEC,KACLpB,EAAUmB,EAAEE,YAEPF,EAAEG,SAEVJ,KAAK,SAAAK,GACJ,IAAIA,EAAKC,YAGP,MAAM,IAAIC,MAAMF,GAFhB/B,OAAOC,SAASiC,KAAOC,mBAAqBJ,EAAKC,YAAYI,OAI9DC,MAAM,SAACC,GACR9B,EAAU8B,SA9BZC,MAAM","file":"newcomposition.b6671d0d.js","sourceRoot":"../webapp/src","sourcesContent":["const MODE = 'STAGE' // STAGE\nconst DEVPORT = 7007\n\nconst ENVIRONMENTS = {\n    PROD:{        \n        ENDPOINT:'',\n        UPLOAD_ENDPOINT:''        \n    },\n    STAGE:{        \n        ENDPOINT: window.location.protocol+'//'+window.location.host,\n        UPLOAD_ENDPOINT: window.location.protocol+'//'+window.location.host+'/fileUpload'       \n    },\n    DEV:{        \n        ENDPOINT:window.location.protocol+'//'+window.location.hostname+':'+DEVPORT,\n        UPLOAD_ENDPOINT:window.location.protocol+'//'+window.location.hostname+':'+DEVPORT+'/fileUpload'        \n    }\n}\n\nmodule.exports = {    \n    ENDPOINT: ENVIRONMENTS[MODE].ENDPOINT,\n    UPLOAD_ENDPOINT: ENVIRONMENTS[MODE].UPLOAD_ENDPOINT\n}","\nimport { ENDPOINT } from '../js/config'\n\nlet errorIs = null\n\nconst newProjectButton = document.getElementById('newcomposition')\nnewProjectButton?.addEventListener('click', (e) => {\n  let newtitle = document.getElementById('newtitle').value\n  const privacyLevel = document.querySelector('input[name=\"newMusicPrivacyRadios\"]:checked').value\n  if (!newtitle) {\n    alert('Introduce a valid title, please')\n    return\n  }\n  let body = JSON.stringify({\n    title: newtitle,\n    privacy_level: privacyLevel\n  })\n\n\n  fetch(ENDPOINT + '/newcomposition', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n    },\n    body: body\n  })\n    .then((r) => {\n      if (!r.ok) {\n        errorIs = r.statusText\n      }\n      return r.json()\n    })\n    .then(data => {\n      if (data.composition) {\n        window.location.href = uriCompositionPage + data.composition.uuid\n      } else {\n        throw new Error(data)\n      }\n    }).catch((error) => {\n      errorIs = error\n    })\n\n})"]}