parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"FZtw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateTable=exports.openDB=exports.getTracksByCompId=exports.DB=void 0;var e="TracksDB",r=null;exports.DB=r;var o=function(){return new Promise(function(o,t){var n=indexedDB.open(e,2);n.onerror=function(e){console.log(e),t(new Error("Error opening database"))},n.onsuccess=function(e){var t=e.target.result;exports.DB=r=t,o(t)},n.onupgradeneeded=function(e){var t=e.target.result;exports.DB=r=t;var n=t.createObjectStore("tracks",{keyPath:"track_id"});n.createIndex("composition_id","composition_id",{unique:!1}),n.transaction.oncomplete=function(e){o(t)}}})};exports.openDB=o;var t=function(e,r){if(e)return new Promise(function(o,t){var n=e.transaction(["tracks"],"readwrite");n.oncomplete=function(e){o()},n.onerror=function(e){console.log("error",e),t(new Error("Error updating database"))},n.objectStore("tracks").put(r)})};exports.updateTable=t;var n=function(e,r){if(e)return new Promise(function(o,t){var n=[],a=e.transaction("tracks").objectStore("tracks").index("composition_id"),s=IDBKeyRange.only(r);a.openCursor(s).onsuccess=function(e){var r=e.target.result;r?(n.push(r.value),r.continue()):o(n)}})};exports.getTracksByCompId=n;
},{}],"mRRC":[function(require,module,exports) {
var o="STAGE",N=7007,i={PROD:{ENDPOINT:"",UPLOAD_ENDPOINT:""},STAGE:{ENDPOINT:window.location.protocol+"//"+window.location.host,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.host+"/fileUpload"},DEV:{ENDPOINT:window.location.protocol+"//"+window.location.hostname+":"+N,UPLOAD_ENDPOINT:window.location.protocol+"//"+window.location.hostname+":"+N+"/fileUpload"}};module.exports={ENDPOINT:i[o].ENDPOINT,UPLOAD_ENDPOINT:i[o].UPLOAD_ENDPOINT};
},{}],"MgTz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startLoader=exports.getJsonApi=exports.cancelLoader=exports.LOADER_ELEM_ID=void 0;var t=require("./config");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(I){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),c=new S(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(I){return{type:"throw",arg:I}}}t.wrap=f;var p={};function v(){}function d(){}function y(){}var g={};l(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(k([])));w&&w!==n&&o.call(w,c)&&(g=w);var x=y.prototype=v.prototype=Object.create(g);function L(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function b(t,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==e(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},L(b.prototype),l(b.prototype,u,function(){return this}),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},L(x),l(x,s,"Generator"),l(x,c,function(){return this}),l(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}var i="loader";exports.LOADER_ELEM_ID=i;var a=function(t,e){document.getElementById("loadertext").textContent=e,document.getElementById(t).classList.add(t)};exports.startLoader=a;var c=function(t){document.getElementById(t).classList.remove(t),document.getElementById("loadertext").textContent=""};exports.cancelLoader=c;var u=function(){var e=o(r().mark(function e(n){var o,u,s;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}},null,e.prev=2,a(i,"Loading..."),e.next=6,fetch(t.ENDPOINT+n,o);case 6:return u=e.sent,c(i),e.next=10,u.json();case 10:if(!(s=e.sent)||s.error){e.next=15;break}return e.abrupt("return",s);case 15:return e.abrupt("return",(null==s?void 0:s.error)||"An error occurred");case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),c(i),e.abrupt("return",e.t0);case 22:case"end":return e.stop()}},e,null,[[2,18]])}));return function(t){return e.apply(this,arguments)}}();exports.getJsonApi=u;
},{"./config":"mRRC"}],"l00Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCollectionsError=exports.getCollections=exports.createListCollections=void 0;var t=require("../js/config");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(N){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),c=new S(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var p={};function v(){}function y(){}function d(){}var g={};s(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(P([])));w&&w!==n&&o.call(w,c)&&(g=w);var x=d.prototype=v.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function L(t,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var l=h(t[i],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==e(f)&&o.call(f,"__await")?r.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(f).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(l.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=s(d,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(x),s(x,l,"Generator"),s(x,c,function(){return this}),s(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(l){return void r(l)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}var i=function(){var e=o(r().mark(function e(){var n,o,i;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.ENDPOINT+"/mycollections");case 2:if(n=e.sent,o=null,null==n||!n.ok){e.next=9;break}return e.next=7,n.json();case 7:i=e.sent,o=i;case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();exports.getCollections=i;var a=function(){alert("Problem getting collections")};exports.getCollectionsError=a;var c=function(t,e,r){var n=t.all_collections,o=document.getElementById(e),i="<option value='0'>...</option>",a=null;n.forEach(function(t){if(t){a=t.uuid===r?"selected>":null;var e="<option value='".concat(t.uuid,"' ").concat(a||">").concat(t.title,"</option>");i+=e}});var c="<select class='custom-select' id='inputGroupSelectCollect'>".concat(i,"</select>");o.insertAdjacentHTML("afterbegin",c)};exports.createListCollections=c;
},{"../js/config":"mRRC"}],"LvBN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.saveParentCollection=exports.openSettingsButtonHandler=void 0;var t=require("../settings"),e=require("../../../index/collectionshandler.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(P){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),c=new O(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=f;var p={};function v(){}function y(){}function d(){}var g={};s(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(k([])));w&&w!==e&&o.call(w,c)&&(g=w);var x=d.prototype=v.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var l=h(t[i],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(f).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(l.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return y.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=s(d,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(x),s(x,l,"Generator"),s(x,c,function(){return this}),s(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(l){return void r(l)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}var a=null,c=function(t){(0,e.getCollections)().then(function(r){r?l(r,t):(0,e.getCollectionsError)()})},u=function(t){var e=document.getElementById("openSettingsButton");null==e||e.addEventListener("click",function(){c(t)},!1)};exports.openSettingsButtonHandler=u;var l=function(t,r){document.getElementById("listCollContainerNewColl").replaceChildren(),(0,e.createListCollections)(t,"listCollContainerNewColl",a||r),null!=t&&t.all_collections.length&&r&&(a=r)},s=function(){var t=i(n().mark(function t(e){var r;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.getElementById("inputGroupSelectCollect").value,!a&&"0"===r){t.next=5;break}if(r===a){t.next=5;break}return t.next=5,f(e,r);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();exports.saveParentCollection=s;var f=function(){var e=i(n().mark(function e(r,o){var i,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={uuid:r,collection_id:"0"===o?null:o},e.next=3,(0,t.updateSettings)("PATCH","/updatecompcollection",i);case 3:null!=(c=e.sent)&&c.ok&&(a=o);case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}();
},{"../settings":"tlz7","../../../index/collectionshandler.js":"l00Z"}],"dIUh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUITitle=exports.saveTitle=exports.getCurrentTitle=void 0;var t=require("../settings");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(P){f=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),u=new S(n||[]);return i(a,"_invoke",{value:E(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=s;var p={};function v(){}function y(){}function d(){}var g={};f(g,u,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(T([])));w&&w!==n&&o.call(w,u)&&(g=w);var x=d.prototype=v.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(t,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var l=h(t[i],t,a);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==e(s)&&o.call(s,"__await")?r.resolve(s.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(s).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(l.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=_(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=f(d,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(L.prototype),f(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(x),f(x,l,"Generator"),f(x,u,function(){return this}),f(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(l){return void r(l)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}var i=null,a=function(){return i};exports.getCurrentTitle=a;var u=function(t){i=t,document.getElementById("newtitle").value=t};exports.setUITitle=u;var c=function(){var t=o(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=document.getElementById("newtitle").value)===i){t.next=4;break}return t.next=4,l(e,n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();exports.saveTitle=c;var l=function(){var e=o(r().mark(function e(n,o){var a;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={uuid:n,title:o},e.next=3,(0,t.updateSettings)("PATCH","/updatecomptitle",a);case 3:e.sent.ok&&(i=o,document.getElementById("comp-title").innerHTML=o);case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}();
},{"../settings":"tlz7"}],"fqi7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUIDescription=exports.saveDescription=exports.getCurrentDescription=void 0;var t=require("../settings");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(G){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,a=Object.create(o.prototype),c=new S(n||[]);return i(a,"_invoke",{value:E(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(G){return{type:"throw",arg:G}}}t.wrap=l;var p={};function v(){}function y(){}function d(){}var g={};f(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(k([])));w&&w!==n&&o.call(w,c)&&(g=w);var x=d.prototype=v.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(r){f(t,r,function(t){return this._invoke(r,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=h(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}function _(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,_(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=f(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(L.prototype),f(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(l(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(x),f(x,s,"Generator"),f(x,c,function(){return this}),f(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void e(s)}c.done?r(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var a=t.apply(r,e);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}var i=null,a=function(){return i};exports.getCurrentDescription=a;var c=function(t){i=t,document.getElementById("newdescription").value=t};exports.setUIDescription=c;var u=function(){var t=o(e().mark(function t(r){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=document.getElementById("newdescription").value)===i){t.next=4;break}return t.next=4,s(r,n);case 4:case"end":return t.stop()}},t)}));return function(r){return t.apply(this,arguments)}}();exports.saveDescription=u;var s=function(){var r=o(e().mark(function r(n,o){var a;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={uuid:n,description:o},r.next=3,(0,t.updateSettings)("PATCH","/updatecompdescription",a);case 3:r.sent.ok&&(i=o,document.getElementById("comp-description").innerHTML=o);case 5:case"end":return r.stop()}},r)}));return function(t,e){return r.apply(this,arguments)}}();
},{"../settings":"tlz7"}],"yJZC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setOpenToContrib=exports.saveOpenToContrib=exports.getOpenToContrib=exports.changeOpenToContrib=void 0;var t=require("../settings");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(N){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new k(n||[]);return i(a,"_invoke",{value:L(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var p={};function d(){}function v(){}function y(){}var g={};f(g,c,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==n&&o.call(b,c)&&(g=b);var w=y.prototype=d.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function E(t,r){var n;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(n,c){!function n(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==e(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function S(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:j}}function j(){return{value:void 0,done:!0}}return v.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=f(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),f(E.prototype,u,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,c,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}var i=null,a=function(){return i};exports.getOpenToContrib=a;var c=function(t){i=t,document.getElementById("opentocontribution").checked=t};exports.setOpenToContrib=c;var u=function(){var t=o(r().mark(function t(e){var n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=document.getElementById("opentocontribution").checked)===i){t.next=4;break}return t.next=4,f(e,n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();exports.saveOpenToContrib=u;var s=function(t){var e=document.getElementById("opentocontribution");0===t?(e.checked=!1,e.disabled=!0):e.disabled=!1};exports.changeOpenToContrib=s;var f=function(){var e=o(r().mark(function e(n,o){var a,c,u;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={uuid:n,opentocontrib:o},e.next=3,(0,t.updateSettings)("PATCH","/updatecomptocontrib",a);case 3:e.sent.ok&&(i=o,o?((c=document.createElement("span")).innerHTML='<br><span class="badge badge-info">OPEN TO CONTRIB</span>',document.getElementById("post-header").prepend(c)):document.querySelector(".badge-info")&&((u=document.getElementById("post-header").getElementsByTagName("br"))[0].parentNode.removeChild(u[0]),document.querySelector(".badge-info").innerHTML=""));case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}();
},{"../settings":"tlz7"}],"Rp8n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUIPrivacy=exports.savePrivacyLevel=exports.privateRadioButtonHandler=exports.getPrivacyLevel=void 0;var t=require("../settings"),e=require("./setopentocontrib");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return t};var t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(I){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),c=new j(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(I){return{type:"throw",arg:I}}}t.wrap=l;var p={};function v(){}function y(){}function d(){}var g={};s(g,c,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(_([])));w&&w!==e&&o.call(w,c)&&(g=w);var b=d.prototype=v.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var f=h(t[i],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(f.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=s(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),s(b,f,"Generator"),s(b,c,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void r(f)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var f=null,s=function(){return f};exports.getPrivacyLevel=s;var l=function(){var t,r=a(document.getElementsByName("settingsPrivacyRadios"));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("change",function(){this.checked&&(3===parseInt(this.value)?(0,e.changeOpenToContrib)(0):(0,e.changeOpenToContrib)(1))})}}catch(n){r.e(n)}finally{r.f()}};exports.privateRadioButtonHandler=l;var h=function(t){f=t,document.getElementById("settingsPrivacyRadios"+t).checked=!0,3===t&&(0,e.changeOpenToContrib)(0)};exports.setUIPrivacy=h;var p=function(){var t=i(n().mark(function t(e){var r,o;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector('input[name="settingsPrivacyRadios"]:checked').value,(o=parseInt(r))===f){t.next=5;break}return t.next=5,v(e,o);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();exports.savePrivacyLevel=p;var v=function(){var e=i(n().mark(function e(r,o){var i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={uuid:r,privacy:o},e.next=3,(0,t.updateSettings)("PATCH","/updatecompprivacy",i);case 3:e.sent.ok&&(f=o);case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}();
},{"../settings":"tlz7","./setopentocontrib":"yJZC"}],"LOIi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setUIContributors=exports.saveRemoveContributors=exports.saveNewContributors=exports.getCurrentContributors=exports.clearUIContributors=exports.clearAuxContribArrays=exports.addContributorButtonHandler=exports.ROLES=void 0;var t=require("../../../js/config"),e=require("../settings");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return a(t)||u(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function a(t){if(Array.isArray(t))return c(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(){s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(j){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,u=Object.create(i.prototype),a=new S(n||[]);return o(u,"_invoke",{value:L(t,r,a)}),u}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(j){return{type:"throw",arg:j}}}t.wrap=f;var h={};function p(){}function v(){}function y(){}var m={};l(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(C([])));b&&b!==e&&n.call(b,u)&&(m=b);var x=y.prototype=p.prototype=Object.create(m);function w(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){var i;o(this,"_invoke",{value:function(o,u){function a(){return new e(function(i,a){!function o(i,u,a,c){var s=d(t[i],t,u);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){o("next",t,a,c)},function(t){o("throw",t,a,c)}):e.resolve(f).then(function(t){l.value=t,a(l)},function(t){return o("throw",t,a,c)})}c(s.arg)}(o,u,i,a)})}return i=i?i.then(a,a):a()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var a=I(u,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function I(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=d(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function C(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return v.prototype=y,o(x,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,a,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var u=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},w(x),l(x,c,"Generator"),l(x,u,function(){return this}),l(x,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(s){return void r(s)}a.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){l(i,n,o,u,a,"next",t)}function a(t){l(i,n,o,u,a,"throw",t)}u(void 0)})}}var d=[],h=[],p=[],v={1:"Owner",2:"Admin",3:"Member",4:"Guest"};exports.ROLES=v;var y=function(){return d};exports.getCurrentContributors=y;var m=function(){document.getElementById("contributorinput").value="",document.getElementById("listOfContributors").innerHTML=""};exports.clearUIContributors=m;var g=function(){h=[],p=[]};exports.clearAuxContribArrays=g;var b=function(t){var e=document.getElementById("listOfContributors");t.length?(d=t,t.flatMap(function(t){return w(e,t)})):(document.getElementById("contributorinput").value="",e.innerHTML="")};exports.setUIContributors=b;var x=function(t){var e=document.getElementById("addContribButton"),r=document.getElementById("contributorinput"),n=document.getElementById("listOfContributors");e.addEventListener("click",function(){var e=document.getElementById("inputGroupSelectRole").value;r.value&&E(n,r.value,t,e)})};exports.addContributorButtonHandler=x;var w=function(t,e){var r=v[e.role],n=document.createElement("li");n.className="list-group-item",n.id=e.user_uid,n.textContent=e.user_uid+" ("+r+")";var o="&nbsp;<div class='custom-control custom-switch custom-control-inline float-right'>\n    <input type='checkbox' class='custom-control-input is-invalid' id='removeContSwitch".concat(e.user_uid,"'>\n    <label class='custom-control-label is-invalid' for='removeContSwitch").concat(e.user_uid,"'>Remove</label>\n  </div>");n.innerHTML+=o,t.appendChild(n),k(e.user_uid)},E=function(){var e=f(s().mark(function e(r,n,o,i){var u,a,c,l,f;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=document.getElementById("inputGroupSelectRole").value,0===parseInt(u)){e.next=12;break}if(a={user_uid:n,composition_id:o,role:parseInt(i)},c=d.findIndex(function(t){return t.user_uid===n}),l=h.findIndex(function(t){return t.user_uid===n}),!1,!(l<0&&c<0||L(a,l,c,r))){e.next=12;break}return e.next=10,fetch(t.ENDPOINT+"/checkuser/"+n);case 10:null!=(f=e.sent)&&f.ok?(h.push(a),w(r,a)):alert("User can't be added");case 12:case"end":return e.stop()}},e)}));return function(t,r,n,o){return e.apply(this,arguments)}}(),L=function(t,e,r,n){var o=!1,i=document.getElementById(t.user_uid);return i&&(r>=0&&e<0&&d[r].role!==t.role&&(o=!0,i.remove()),e>=0&&r<0&&h[e].role!==t.role&&(o=!0,h.splice(e,1),i.remove()),e>=0&&r>=0&&(d[r].role===t.role&&(h.splice(e,1),i.remove(),w(n,t)),h.length&&h[e].role!==t.role&&(o=!0,h.splice(e,1),i.remove()))),o},I=function(){var t=f(s().mark(function t(){var r,o,i,u,a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(h.length>0)){t.next=16;break}r=n(h),o=0;case 3:if(!(o<h.length)){t.next=12;break}return i=h[o],t.next=7,(0,e.updateSettings)("POST","/addcontributorbyid",i);case 7:null!=(u=t.sent)&&u.ok&&(h[o].id=u.contribid,r[o]=null);case 9:o++,t.next=3;break;case 12:a=r.filter(function(t){return null!=t}),d=d.concat(h),document.getElementById("contributorinput").value="",h=a;case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();exports.saveNewContributors=I;var _=function(){var t=f(s().mark(function t(r){var o,i,u,a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p.length>0)){t.next=11;break}o=n(p),i=s().mark(function t(n){var i,u,a,c;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=d.findIndex(function(t){return t.user_uid===p[n]}),u=d[i].user_uid,a={contrib_uuid:u,comp_uuid:r},t.next=5,(0,e.updateSettings)("DELETE","/deletecontributor",a);case 5:null!=(c=t.sent)&&c.ok?(o[n]=null,d.splice(i,1),document.getElementById(p[n]).remove()):document.getElementById("removeContSwitch"+p[n]).checked=!1;case 7:case"end":return t.stop()}},t)}),u=0;case 4:if(!(u<p.length)){t.next=9;break}return t.delegateYield(i(u),"t0",6);case 6:u++,t.next=4;break;case 9:a=o.filter(function(t){return null!=t}),p=a;case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();exports.saveRemoveContributors=_;var k=function(t){document.getElementById("removeContSwitch"+t).addEventListener("change",function(e){var r=e.target;if("INPUT"===r.tagName&&"checkbox"===r.type&&r.checked)if(1==confirm("Do you want remove the contributor with ID ".concat(t,"?"))){var n=h.findIndex(function(e){return e.user_uid===t});n>-1?(h.splice(n,1),document.getElementById(t).remove()):p.push(t)}else e.target.checked=!1})};
},{"../../../js/config":"mRRC","../settings":"tlz7"}],"tlz7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateSettings=exports.enableCompositionSettings=void 0;var t=require("../../js/config"),e=require("./settings/setcollection"),r=require("./settings/settitle"),n=require("./settings/setdescription"),o=require("./settings/setopentocontrib"),i=require("./settings/setprivacy"),a=require("./settings/setcontributors");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(T){l=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:L(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(T){return{type:"throw",arg:T}}}t.wrap=f;var h={};function d(){}function v(){}function y(){}var g={};l(g,i,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(j([])));b&&b!==e&&r.call(b,i)&&(g=b);var w=y.prototype=d.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e(function(o,a){!function n(o,i,a,u){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,u)},function(t){n("throw",t,a,u)}):e.resolve(f).then(function(t){l.value=t,a(l)},function(t){return n("throw",t,a,u)})}u(s.arg)}(n,i,o,a)})}return o=o?o.then(a,a):a()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function C(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,a,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),l(w,s,"Generator"),l(w,i,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)})}}var f=function(t){(0,a.setUIContributors)(t.contributors),(0,a.addContributorButtonHandler)(t.uuid),(0,r.setUITitle)(t.title),(0,n.setUIDescription)(t.description),(0,i.setUIPrivacy)(t.privacy),(0,o.setOpenToContrib)(t.opentocontrib),y(t.uuid),v(t),p(),(0,i.privateRadioButtonHandler)(),(0,e.openSettingsButtonHandler)(null==t?void 0:t.collection_id)};exports.enableCompositionSettings=f;var p=function(){var t=document.getElementById("useroptions"),e=document.createElement("li");e.innerHTML='<li class="nav-item">\n    <a class="nav-link" href="#" id="openSettingsButton" data-toggle="modal" data-target="#settingsModal">Settings</a>\n  </li>\n   ',t.appendChild(e)},h=function(){var e=l(u().mark(function e(r,n,o){var i,a,c,s,l;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.stringify(o),a=null,c={method:r,headers:{"Content-Type":"application/json",Accept:"application/json"},body:i},e.prev=3,e.next=6,fetch(t.ENDPOINT+n,c);case 6:return s=e.sent,e.next=9,s.json();case 9:(l=e.sent)&&(a=l),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),alert(e.t0);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,null,[[3,13]])}));return function(t,r,n){return e.apply(this,arguments)}}();exports.updateSettings=h;var d=function(t){(0,r.setUITitle)((0,r.getCurrentTitle)()||t.title),(0,n.setUIDescription)((0,n.getCurrentDescription)()||t.description),(0,i.setUIPrivacy)((0,i.getPrivacyLevel)()||t.privacy),(0,o.setOpenToContrib)((0,o.getOpenToContrib)()||t.opentocontrib),(0,a.clearUIContributors)(),(0,a.setUIContributors)((0,a.getCurrentContributors)().length?(0,a.getCurrentContributors)():t.contributors),(0,a.clearAuxContribArrays)(),document.getElementById("deleteComposition").checked=!1},v=function(t){var e=document.getElementById("cancelsettingsbutton");null==e||e.addEventListener("click",function(){d(t)})},y=function(){var t=l(u().mark(function t(c){var s;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:null==(s=document.getElementById("updatecompositionbutton"))||s.addEventListener("click",function(){var t=l(u().mark(function t(s){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==document.getElementById("deleteComposition").checked){t.next=6;break}return t.next=4,g(c);case 4:t.next=21;break;case 6:return t.next=8,(0,r.saveTitle)(c);case 8:return t.next=10,(0,n.saveDescription)(c);case 10:return t.next=12,(0,i.savePrivacyLevel)(c);case 12:return t.next=14,(0,o.saveOpenToContrib)(c);case 14:return t.next=16,(0,a.saveNewContributors)();case 16:return t.next=18,(0,a.saveRemoveContributors)(c);case 18:return t.next=20,(0,e.saveParentCollection)(c);case 20:$("#settingsModal").modal("hide");case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=l(u().mark(function t(e){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm("Delete "+(0,r.getCurrentTitle)()+"?")){t.next=6;break}return t.next=4,h("DELETE","/deletecomposition/"+e,null);case 4:t.sent.ok&&(window.location.href=window.location.origin);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();
},{"../../js/config":"mRRC","./settings/setcollection":"LvBN","./settings/settitle":"dIUh","./settings/setdescription":"fqi7","./settings/setopentocontrib":"yJZC","./settings/setprivacy":"Rp8n","./settings/setcontributors":"LOIi"}],"lSuH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getComposition=exports.doAfterCompositionFetched=exports.CURRENT_USER_ID=void 0;var t=require("../../js/config"),e=require("../../js/indexedDB"),n=require("../../js/utils"),i=require("./composition"),o=require("./settings"),s=require("./settings/setcontributors"),r=null;function a(e,n,i,o,s){this.id=e,this.name=n,this.src=t.ENDPOINT+"/trackfile/"+e,this.muted=i,this.soloed=o,this.gain=1,this.stereoPan=0,this.customClass=s}exports.CURRENT_USER_ID=r;var c=function(e,n,i){var o=null,s={};fetch(t.ENDPOINT+"/composition/"+e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(t){return t.ok||(o=t.statusText),t.json()}).then(function(t){t&&(s=t)}).catch(function(t){o=t}).then(function(){o&&alert(o),n(s,i)})};exports.getComposition=c;var l=function(t){e.DB?u(e.DB,t):(0,e.openDB)().then(function(e){u(e,t)})};exports.doAfterCompositionFetched=l;var u=function(t,n){(0,e.getTracksByCompId)(t,n.uuid).then(function(t){f(n,t),v(n)})},d=function(t){var e={};return t.forEach(function(t){e[t.track_id]=t}),e},p=function(t,e,n){var i=!(!n||!n[null==t?void 0:t.uuid])&&n[t.uuid].muted,o=!(!n||!n[null==t?void 0:t.uuid])&&n[t.uuid].soloed,s=t.title,r={name:s,track_id:t.uuid,user_id:t.user_id,composition_id:e.uuid};return new a(t.uuid,s,i,o,r)},f=function(t,e){var s=t.owner||1<=t.role&&t.role<=3||!1,a=t.role;exports.CURRENT_USER_ID=r=t.viewer_id;var c=null;if(e.length&&(c=d(e)),s&&(i.playlist.controls.widgets.remove=!1,(0,i.setUserPermission)(!0),i.fileUploader.enableUpload(),1===a&&(0,o.enableCompositionSettings)(t)),t.tracks){var l=[];t.tracks.forEach(function(e){if(e){var n=p(e,t,c);l.push(n)}}),h(l,s,a)}else(0,n.cancelLoader)(n.LOADER_ELEM_ID),i.playlist.initExporter(),i.recorder.init()},h=function(t,e,o){var s=null;i.playlist.load(t).then(function(){i.playlist.initExporter()}).catch(function(t){s=t}).then(function(){(0,n.cancelLoader)(n.LOADER_ELEM_ID),s?alert(s):(i.recorder.init(),e&&i.trackHandler.displayOptMenuForTracks(o))})},v=function(t){var e='<h1 class="post-title">Test DAW</h1>';if(t.title){var n=t.title,i=t.description||"";e="".concat(t.opentocontrib?'<br><span class="badge badge-info">OPEN TO CONTRIB</span>':""),e+="".concat(t.role?'<br><span class="badge badge-success">'+s.ROLES[t.role]+"</span>":""),e+='<p><h1 id="comp-title" class="post-title">'.concat(n,"</h1></p>"),e+='<p>\n                                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseDescription" aria-expanded="false">\n                                    Description\n                                    </button>\n                                </p>\n                                <div class="collapse" id="collapseDescription">\n                                    <div class="card card-body" id="comp-description">\n                                    '.concat(i,"\n                                    </div>\n                                </div>")}document.getElementById("post-header").insertAdjacentHTML("afterbegin",e)};
},{"../../js/config":"mRRC","../../js/indexedDB":"FZtw","../../js/utils":"MgTz","./composition":"sRHk","./settings":"tlz7","./settings/setcontributors":"LOIi"}],"OPvr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TrackHandler=void 0;var e=require("../../js/config"),t=require("../../js/utils"),n=require("./composition_helper"),o=require("./composition");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,u(o.key),o)}}function i(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=c(e,"string");return"symbol"===r(t)?t:String(t)}function c(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var s=function(){function r(){a(this,r)}return i(r,[{key:"displayOptMenuForNewTrack",value:function(e){var t,n,r=e.result,a=(null==r?void 0:null===(t=r.message)||void 0===t?void 0:t.audio)||(null==r?void 0:null===(n=r.message)||void 0===n?void 0:n.voice),l=a.title||r.message.date,i=a.file_unique_id,u=document.getElementsByClassName("controls"),c=u.length-1;if(c>=0){var s={name:l,track_id:i,user_id:a.user_id};o.playlist.tracks[c].customClass=s,this.createMenuOptButton(u,c,l,i)}}},{key:"displayOptMenuForTracks",value:function(e){document.querySelectorAll(".menuoptbtn").length&&document.querySelectorAll(".menuoptbtn").forEach(function(e){return e.remove()});for(var t=document.getElementsByClassName("controls"),r=o.playlist.getInfo().tracks,a=0;a<r.length;a++)if(r&&r[a].customClass&&(1===e||2===e||3===e&&r[a].customClass.user_id===n.CURRENT_USER_ID)){var l=r[a].customClass.name,i=r[a].customClass.track_id;this.createMenuOptButton(t,a,l,i)}}},{key:"createMenuOptButton",value:function(e,t,n,o){var r=this,a="menuoptbtn-"+t,l="menuDropdown"+t,i=document.createElement("button"),u=document.createTextNode("...");i.className="menuoptbtn",i.onclick=function(){document.getElementById(l).classList.toggle("show")},i.id=a,i.appendChild(u),e[t].appendChild(i);var c=document.createElement("ul");c.id=l,c.className="dropdown-content";var s=document.createElement("li");s.dataset.pos=t,s.dataset.name=n,s.dataset.trackId=o,s.onclick=function(e){r.deleteTrackConfirmDialog(e,r.sendDeleteRequest,r.doAfterDeleted)},s.appendChild(document.createTextNode("Delete")),c.appendChild(s),document.getElementById(a).appendChild(c),e[t].getElementsByClassName("track-header")[0].getElementsByTagName("span")[0].style["margin-left"]="3em"}},{key:"deleteTrackConfirmDialog",value:function(e,t,n){confirm("Delete "+e.target.dataset.name+"?")&&t(e.target.dataset.pos,e.target.dataset.trackId,n)}},{key:"sendDeleteRequest",value:function(n,o,r){(0,t.startLoader)(t.LOADER_ELEM_ID,"Deleting track..."),fetch(e.ENDPOINT+"/deletetrack/"+o,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){r(e,n)}).catch(function(e){console.log(e),(0,t.cancelLoader)(t.LOADER_ELEM_ID)})}},{key:"doAfterDeleted",value:function(e,n){if((0,t.cancelLoader)(t.LOADER_ELEM_ID),e.ok){var a=e.role,l=o.playlist.tracks;o.playlist.getEventEmitter().emit("removeTrack",l[n]),(new r).displayOptMenuForTracks(a)}}}]),r}();exports.TrackHandler=s;
},{"../../js/config":"mRRC","../../js/utils":"MgTz","./composition_helper":"lSuH","./composition":"sRHk"}],"BTjY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileUploader=void 0;var e=require("../../js/config"),t=require("../../js/utils"),n=require("./composition");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=s(e,"string");return"symbol"===r(t)?t:String(t)}function s(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=function(){function r(e,t){o(this,r),this.compositionId=e,this.trackhandler=t}return a(r,[{key:"enableUpload",value:function(){var e=this,t=this;document.getElementById("fileInput").addEventListener("change",function(e){e.preventDefault(),t.fileReader(this.files[0])},!1),dropContainer.ondragover=dropContainer.ondragenter=function(e){e.preventDefault()},dropContainer.ondrop=function(t){fileInput.files=t.dataTransfer.files,e.fileReader(fileInput.files[0]),t.preventDefault()}}},{key:"fileReader",value:function(e){var t=this,n={dom:document.getElementById("fileInput"),binary:null},r=new FileReader;r.addEventListener("load",function(){n.binary=r.result}),r.addEventListener("loadend",function(){t.sendData(n)}),e&&r.readAsBinaryString(e)}},{key:"sendData",value:function(r,o){if(!o&&!r.binary&&r.dom.files.length>0)setTimeout(this.sendData,10);else{var i=new XMLHttpRequest,a=new FormData,l=o?r:r.dom.files[0],s=o?r.fileName:r.dom.files[0].name;a.append("composition_id",this.compositionId),a.append("audio",l,s),a.append("user_info",n.USER_INFO),i.addEventListener("load",function(e){if((0,t.cancelLoader)(t.LOADER_ELEM_ID),e.srcElement&&e.srcElement.response){var r=JSON.parse(e.srcElement.response);r.ok?(fileInput.value="","blob"===o?n.trackHandler.displayOptMenuForNewTrack(r):n.playlist.getEventEmitter().emit("audiosourcesrendered",r)):alert("Oops! Something went wrong.")}else alert("Oops! Something went wrong.")}),i.addEventListener("error",function(e){(0,t.cancelLoader)(t.LOADER_ELEM_ID),alert("Oops! Something went wrong.")}),i.open("POST",e.UPLOAD_ENDPOINT),i.send(a),(0,t.startLoader)(t.LOADER_ELEM_ID,"Uploading track...")}}}]),r}();exports.FileUploader=u;
},{"../../js/config":"mRRC","../../js/utils":"MgTz","./composition":"sRHk"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"yh9p":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"REa7":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"dskh":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"REa7","buffer":"dskh"}],"IdKr":[function(require,module,exports) {
var define;
var process = require("process");
var Buffer = require("buffer").Buffer;
var t,e=require("process"),s=require("buffer").Buffer;!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof t&&t.amd?t("WaveformPlaylist",[],s):"object"==typeof exports?exports.WaveformPlaylist=s():e.WaveformPlaylist=s()}(this,function(){return(()=>{var t={6824:t=>{t.exports=function(t){var e=String.prototype.split,s=/()??/.exec("")[1]===t;return function(i,r,n){if("[object RegExp]"!==Object.prototype.toString.call(r))return e.call(i,r,n);var a,o,l,c,h=[],u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),d=0;r=new RegExp(r.source,u+"g");for(i+="",s||(a=new RegExp("^"+r.source+"$(?!\\s)",u)),n=n===t?-1>>>0:n>>>0;(o=r.exec(i))&&!((l=o.index+o[0].length)>d&&(h.push(i.slice(d,o.index)),!s&&o.length>1&&o[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(o[e]=t)}),o.length>1&&o.index<i.length&&Array.prototype.push.apply(h,o.slice(1)),c=o[0].length,d=l,h.length>=n));)r.lastIndex===o.index&&r.lastIndex++;return d===i.length?!c&&r.test("")||h.push(""):h.push(i.slice(d)),h.length>n?h.slice(0,n):h}}()},1804:(t,e,s)=>{"use strict";var i=s(5618),r=s(7205),n=s(7191),a=s(5516),o=s(9981);(t.exports=function(t,e){var s,r,l,c,h;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],i(t)?(s=o.call(t,"c"),r=o.call(t,"e"),l=o.call(t,"w")):(s=l=!0,r=!1),h={value:e,configurable:s,enumerable:r,writable:l},c?n(a(c),h):h}).gs=function(t,e,s){var l,c,h,u;return"string"!=typeof t?(h=s,s=e,e=t,t=null):h=arguments[3],i(e)?r(e)?i(s)?r(s)||(h=s,s=void 0):s=void 0:(h=e,e=s=void 0):e=void 0,i(t)?(l=o.call(t,"c"),c=o.call(t,"e")):(l=!0,c=!1),u={get:e,set:s,configurable:l,enumerable:c},h?n(a(h),u):u}},430:t=>{"use strict";t.exports=function(){}},7191:(t,e,s)=>{"use strict";t.exports=s(6560)()?Object.assign:s(7346)},6560:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},7346:(t,e,s)=>{"use strict";var i=s(5103),r=s(2745),n=Math.max;t.exports=function(t,e){var s,a,o,l=n(arguments.length,2);for(t=Object(r(t)),o=function(i){try{t[i]=e[i]}catch(r){s||(s=r)}},a=1;a<l;++a)e=arguments[a],i(e).forEach(o);if(void 0!==s)throw s;return t}},6914:(t,e,s)=>{"use strict";var i=s(430)();t.exports=function(t){return t!==i&&null!==t}},5103:(t,e,s)=>{"use strict";t.exports=s(7446)()?Object.keys:s(6137)},7446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},6137:(t,e,s)=>{"use strict";var i=s(6914),r=Object.keys;t.exports=function(t){return r(i(t)?Object(t):t)}},5516:(t,e,s)=>{"use strict";var i=s(6914),r=Array.prototype.forEach,n=Object.create;t.exports=function(t){var e=n(null);return r.call(arguments,function(t){i(t)&&function(t,e){var s;for(s in t)e[s]=t[s]}(Object(t),e)}),e}},1290:t=>{"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},2745:(t,e,s)=>{"use strict";var i=s(6914);t.exports=function(t){if(!i(t))throw new TypeError("Cannot use null or undefined");return t}},9981:(t,e,s)=>{"use strict";t.exports=s(3591)()?String.prototype.contains:s(6042)},3591:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},6042:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},8832:(t,e,s)=>{"use strict";s(4167)("ev-store","7");var i="__EV_STORE_KEY@7";t.exports=function(t){var e=t[i];e||(e=t[i]={});return e}},8370:(t,e,s)=>{"use strict";var i,r,n,a,o,l,c,h=s(1804),u=s(1290),d=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var s,r;return u(e),r=this,i.call(this,t,s=function(){n.call(r,t,s),d.call(e,this,arguments)}),s.__eeOnceListener__=e,this},o={on:i=function(t,e){var s;return u(e),g.call(this,"__ee__")?s=this.__ee__:(s=y.value=f(null),m(this,"__ee__",y),y.value=null),s[t]?"object"==typeof s[t]?s[t].push(e):s[t]=[s[t],e]:s[t]=e,this},once:r,off:n=function(t,e){var s,i,r,n;if(u(e),!g.call(this,"__ee__"))return this;if(!(s=this.__ee__)[t])return this;if("object"==typeof(i=s[t]))for(n=0;r=i[n];++n)r!==e&&r.__eeOnceListener__!==e||(2===i.length?s[t]=i[n?0:1]:i.splice(n,1));else i!==e&&i.__eeOnceListener__!==e||delete s[t];return this},emit:a=function(t){var e,s,i,r,n;if(g.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(s=arguments.length,n=new Array(s-1),e=1;e<s;++e)n[e-1]=arguments[e];for(r=r.slice(),e=0;i=r[e];++e)d.call(i,this,n)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(s=arguments.length,n=new Array(s-1),e=1;e<s;++e)n[e-1]=arguments[e];d.call(r,this,n)}}},l={on:h(i),once:h(r),off:h(n),emit:h(a)},c=v({},l),t.exports=e=function(t){return null==t?f(c):v(Object(t),l)},e.methods=o},6226:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear=function(t,e){var s,i,r=new Float32Array(t),n=t-1;for(s=0;s<t;s++)i=s/n,r[s]=e>0?i:1-i;return r},e.exponential=function(t,e){var s,i,r=new Float32Array(t),n=t-1;for(s=0;s<t;s++)i=s/n,r[e>0?s:t-1-s]=Math.exp(2*i-1)/Math.exp(1);return r},e.sCurve=function(t,e){var s,i=new Float32Array(t),r=e>0?Math.PI/2:-Math.PI/2;for(s=0;s<t;++s)i[s]=Math.sin(Math.PI*s/t-r)/2+.5;return i},e.logarithmic=function(t,e,s){var i,r=new Float32Array(t),n=0;for(i=0;i<t;i++)n=i/t,r[s>0?i:t-1-i]=Math.log(1+e*n)/Math.log(1+e);return r}},1114:(t,e,s)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=function(t,e,s,l){switch(e){case r:(function(t,e){var s=(0,i.sCurve)(1e4,1);this.setValueCurveAtTime(s,t,e)}).call(t,s,l);break;case n:(function(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}).call(t,s,l);break;case a:(function(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}).call(t,s,l);break;case o:(function(t,e){var s=(0,i.logarithmic)(1e4,10,1);this.setValueCurveAtTime(s,t,e)}).call(t,s,l);break;default:throw new Error("Unsupported Fade type")}},e.Mt=function(t,e,s,l){switch(e){case r:(function(t,e){var s=(0,i.sCurve)(1e4,-1);this.setValueCurveAtTime(s,t,e)}).call(t,s,l);break;case n:(function(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}).call(t,s,l);break;case a:(function(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}).call(t,s,l);break;case o:(function(t,e){var s=(0,i.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(s,t,e)}).call(t,s,l);break;default:throw new Error("Unsupported Fade type")}};var i=s(6226),r=e._h="sCurve",n=e.t$="linear",a=e.Jl="exponential",o=e.Hp="logarithmic";e.Y1="FadeIn",e.h7="FadeOut"},9144:(t,e,s)=>{var i,r=void 0!==s.g?s.g:"undefined"!=typeof window?window:{},n=s(5893);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),t.exports=i},8070:(t,e,s)=>{"use strict";var i="undefined"!=typeof window?window:void 0!==s.g?s.g:{};t.exports=function(t,e){if(t in i)return i[t];return i[t]=e,e}},4167:(t,e,s)=>{"use strict";var i=s(8070);t.exports=function(t,e,s){var r="__INDIVIDUAL_ONE_VERSION_"+t,n=i(r+"_ENFORCE_SINGLETON",e);if(n!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+n+" installed.\nThis means you cannot install version "+e);return i(r,s)}},849:(t,e,s)=>{var i=!!(s.g===s.g.window&&s.g.URL&&s.g.Blob&&s.g.Worker);function r(t,e){var r,n=this;if(e=e||{},i)return r=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new s.g.Worker(s.g.URL.createObjectURL(new s.g.Blob([r],{type:"text/javascript"})));this.self=e,this.self.postMessage=function(t){setTimeout(function(){n.onmessage({data:t})},0)},setTimeout(t.bind(e,e),0)}r.prototype.postMessage=function(t){var e=this;setTimeout(function(){e.self.onmessage({data:t})},0)},t.exports=r},6240:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},1730:t=>{var e=9007199254740991,s="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",n=/^(?:0|[1-9]\d*)$/;var a=Object.prototype,o=a.hasOwnProperty,l=a.toString,c=a.propertyIsEnumerable,h=function(t,e){return function(s){return t(e(s))}}(Object.keys,Object),u=Math.max,d=!c.call({valueOf:1},"valueOf");function p(t,e){var i=y(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&b(t)}(t)&&o.call(t,"callee")&&(!c.call(t,"callee")||l.call(t)==s)}(t)?function(t,e){for(var s=-1,i=Array(t);++s<t;)i[s]=e(s);return i}(t.length,String):[],r=i.length,n=!!r;for(var a in t)!e&&!o.call(t,a)||n&&("length"==a||m(a,r))||i.push(a);return i}function f(t,e,s){var i=t[e];o.call(t,e)&&g(i,s)&&(void 0!==s||e in t)||(t[e]=s)}function m(t,s){return!!(s=null==s?e:s)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<s}function v(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||a)}function g(t,e){return t===e||t!=t&&e!=e}var y=Array.isArray;function b(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}(t.length)&&!function(t){var e=k(t)?l.call(t):"";return e==i||e==r}(t)}function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var w=function(t){return e=function(e,s){var i=-1,r=s.length,n=r>1?s[r-1]:void 0,a=r>2?s[2]:void 0;for(n=t.length>3&&"function"==typeof n?(r--,n):void 0,a&&function(t,e,s){if(!k(s))return!1;var i=typeof e;return!!("number"==i?b(s)&&m(e,s.length):"string"==i&&e in s)&&g(s[e],t)}(s[0],s[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);++i<r;){var o=s[i];o&&t(e,o,i,n)}return e},s=u(void 0===s?e.length-1:s,0),function(){for(var t=arguments,i=-1,r=u(t.length-s,0),n=Array(r);++i<r;)n[i]=t[s+i];i=-1;for(var a=Array(s+1);++i<s;)a[i]=t[i];return a[s]=n,function(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}(e,this,a)};var e,s}(function(t,e){if(d||v(e)||b(e))!function(t,e,s,i){s||(s={});for(var r=-1,n=e.length;++r<n;){var a=e[r],o=i?i(s[a],t[a],a,s,t):void 0;f(s,a,void 0===o?t[a]:o)}}(e,function(t){return b(t)?p(t):function(t){if(!v(t))return h(t);var e=[];for(var s in Object(t))o.call(t,s)&&"constructor"!=s&&e.push(s);return e}(t)}(e),t);else for(var s in e)o.call(e,s)&&f(t,s,e[s])});t.exports=w},2098:(t,e,s)=>{t=s.nmd(t);var i=200,r="__lodash_hash_undefined__",n=800,a=16,o=9007199254740991,l="[object Arguments]",c="[object AsyncFunction]",h="[object Function]",u="[object GeneratorFunction]",d="[object Null]",p="[object Object]",f="[object Proxy]",m="[object Undefined]",v=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[l]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[h]=y["[object Map]"]=y["[object Number]"]=y[p]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var b="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,k="object"==typeof self&&self&&self.Object===Object&&self,w=b||k||Function("return this")(),x=e&&!e.nodeType&&e,P=x&&t&&!t.nodeType&&t,S=P&&P.exports===x,T=S&&b.process,O=function(){try{var t=P&&P.require&&P.require("util").types;return t||T&&T.binding&&T.binding("util")}catch(e){}}(),_=O&&O.isTypedArray;function E(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}var R=Array.prototype,A=Function.prototype,j=Object.prototype,C=w["__core-js_shared__"],G=A.toString,M=j.hasOwnProperty,L=function(){var t=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),I=j.toString,F=G.call(Object),D=RegExp("^"+G.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=S?w.Buffer:void 0,z=w.Symbol,N=w.Uint8Array,V=$?$.allocUnsafe:void 0,W=function(t,e){return function(s){return t(e(s))}}(Object.getPrototypeOf,Object),U=Object.create,q=j.propertyIsEnumerable,B=R.splice,H=z?z.toStringTag:void 0,X=function(){try{var t=bt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Y=$?$.isBuffer:void 0,Z=Math.max,J=Date.now,K=bt(w,"Map"),Q=bt(Object,"create"),tt=function(){function t(){}return function(e){if(!jt(e))return{};if(U)return U(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function et(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function st(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function it(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function rt(t){var e=this.__data__=new st(t);this.size=e.size}function nt(t,e){var s=Ot(t),i=!s&&Tt(t),r=!s&&!i&&Et(t),n=!s&&!i&&!r&&Gt(t),a=s||i||r||n,o=a?function(t,e){for(var s=-1,i=Array(t);++s<t;)i[s]=e(s);return i}(t.length,String):[],l=o.length;for(var c in t)!e&&!M.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||kt(c,l))||o.push(c);return o}function at(t,e,s){(void 0===s||St(t[e],s))&&(void 0!==s||e in t)||ct(t,e,s)}function ot(t,e,s){var i=t[e];M.call(t,e)&&St(i,s)&&(void 0!==s||e in t)||ct(t,e,s)}function lt(t,e){for(var s=t.length;s--;)if(St(t[s][0],e))return s;return-1}function ct(t,e,s){"__proto__"==e&&X?X(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}et.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et.prototype.get=function(t){var e=this.__data__;if(Q){var s=e[t];return s===r?void 0:s}return M.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:M.call(e,t)},et.prototype.set=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Q&&void 0===e?r:e,this},st.prototype.clear=function(){this.__data__=[],this.size=0},st.prototype.delete=function(t){var e=this.__data__,s=lt(e,t);return!(s<0||(s==e.length-1?e.pop():B.call(e,s,1),--this.size,0))},st.prototype.get=function(t){var e=this.__data__,s=lt(e,t);return s<0?void 0:e[s][1]},st.prototype.has=function(t){return lt(this.__data__,t)>-1},st.prototype.set=function(t,e){var s=this.__data__,i=lt(s,t);return i<0?(++this.size,s.push([t,e])):s[i][1]=e,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(K||st),string:new et}},it.prototype.delete=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e},it.prototype.get=function(t){return yt(this,t).get(t)},it.prototype.has=function(t){return yt(this,t).has(t)},it.prototype.set=function(t,e){var s=yt(this,t),i=s.size;return s.set(t,e),this.size+=s.size==i?0:1,this},rt.prototype.clear=function(){this.__data__=new st,this.size=0},rt.prototype.delete=function(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s},rt.prototype.get=function(t){return this.__data__.get(t)},rt.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.set=function(t,e){var s=this.__data__;if(s instanceof st){var r=s.__data__;if(!K||r.length<i-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new it(r)}return s.set(t,e),this.size=s.size,this};var ht=function(t){return function(e,s,i){for(var r=-1,n=Object(e),a=i(e),o=a.length;o--;){var l=a[t?o:++r];if(!1===s(n[l],l,n))break}return e}}();function ut(t){return null==t?void 0===t?m:d:H&&H in Object(t)?function(t){var e=M.call(t,H),s=t[H];try{t[H]=void 0;var i=!0}catch(n){}var r=I.call(t);i&&(e?t[H]=s:delete t[H]);return r}(t):function(t){return I.call(t)}(t)}function dt(t){return Ct(t)&&ut(t)==l}function pt(t){return!(!jt(t)||(e=t,L&&L in e))&&(Rt(t)?D:v).test(function(t){if(null!=t){try{return G.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t));var e}function ft(t){if(!jt(t))return function(t){var e=[];if(null!=t)for(var s in Object(t))e.push(s);return e}(t);var e=wt(t),s=[];for(var i in t)("constructor"!=i||!e&&M.call(t,i))&&s.push(i);return s}function mt(t,e,s,i,r){t!==e&&ht(e,function(n,a){if(r||(r=new rt),jt(n))!function(t,e,s,i,r,n,a){var o=xt(t,s),l=xt(e,s),c=a.get(l);if(c)return void at(t,s,c);var h=n?n(o,l,s+"",t,e,a):void 0,u=void 0===h;if(u){var d=Ot(l),f=!d&&Et(l),m=!d&&!f&&Gt(l);h=l,d||f||m?Ot(o)?h=o:Ct(k=o)&&_t(k)?h=function(t,e){var s=-1,i=t.length;e||(e=Array(i));for(;++s<i;)e[s]=t[s];return e}(o):f?(u=!1,h=function(t,e){if(e)return t.slice();var s=t.length,i=V?V(s):new t.constructor(s);return t.copy(i),i}(l,!0)):m?(u=!1,v=l,g=!0?(y=v.buffer,b=new y.constructor(y.byteLength),new N(b).set(new N(y)),b):v.buffer,h=new v.constructor(g,v.byteOffset,v.length)):h=[]:function(t){if(!Ct(t)||ut(t)!=p)return!1;var e=W(t);if(null===e)return!0;var s=M.call(e,"constructor")&&e.constructor;return"function"==typeof s&&s instanceof s&&G.call(s)==F}(l)||Tt(l)?(h=o,Tt(o)?h=function(t){return function(t,e,s,i){var r=!s;s||(s={});var n=-1,a=e.length;for(;++n<a;){var o=e[n],l=i?i(s[o],t[o],o,s,t):void 0;void 0===l&&(l=t[o]),r?ct(s,o,l):ot(s,o,l)}return s}(t,Lt(t))}(o):jt(o)&&!Rt(o)||(h=function(t){return"function"!=typeof t.constructor||wt(t)?{}:tt(W(t))}(l))):u=!1}var v,g,y,b;var k;u&&(a.set(l,h),r(h,l,i,n,a),a.delete(l));at(t,s,h)}(t,e,a,s,mt,i,r);else{var o=i?i(xt(t,a),n,a+"",t,e,r):void 0;void 0===o&&(o=n),at(t,a,o)}},Lt)}function vt(t,e){return Pt(function(t,e,s){return e=Z(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,n=Z(i.length-e,0),a=Array(n);++r<n;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=s(a),E(t,this,o)}}(t,e,Ft),t+"")}function gt(t,e,s,i,r,n){return jt(t)&&jt(e)&&(n.set(e,t),mt(t,e,void 0,gt,n),n.delete(e)),t}function yt(t,e){var s,i,r=t.__data__;return("string"==(i=typeof(s=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==s:null===s)?r["string"==typeof e?"string":"hash"]:r.map}function bt(t,e){var s=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(s)?s:void 0}function kt(t,e){var s=typeof t;return!!(e=null==e?o:e)&&("number"==s||"symbol"!=s&&g.test(t))&&t>-1&&t%1==0&&t<e}function wt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||j)}function xt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Pt=function(t){var e=0,s=0;return function(){var i=J(),r=a-(i-s);if(s=i,r>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(X?function(t,e){return X(t,"toString",{configurable:!0,enumerable:!1,value:(s=e,function(){return s}),writable:!0});var s}:Ft);function St(t,e){return t===e||t!=t&&e!=e}var Tt=dt(function(){return arguments}())?dt:function(t){return Ct(t)&&M.call(t,"callee")&&!q.call(t,"callee")},Ot=Array.isArray;function _t(t){return null!=t&&At(t.length)&&!Rt(t)}var Et=Y||function(){return!1};function Rt(t){if(!jt(t))return!1;var e=ut(t);return e==h||e==u||e==c||e==f}function At(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function jt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ct(t){return null!=t&&"object"==typeof t}var Gt=_?function(t){return function(e){return t(e)}}(_):function(t){return Ct(t)&&At(t.length)&&!!y[ut(t)]};var Mt=vt(function(t){return t.push(void 0,gt),E(It,void 0,t)});function Lt(t){return _t(t)?nt(t,!0):ft(t)}var It=function(t){return vt(function(e,s){var i=-1,r=s.length,n=r>1?s[r-1]:void 0,a=r>2?s[2]:void 0;for(n=t.length>3&&"function"==typeof n?(r--,n):void 0,a&&function(t,e,s){if(!jt(s))return!1;var i=typeof e;return!!("number"==i?_t(s)&&kt(e,s.length):"string"==i&&e in s)&&St(s[e],t)}(s[0],s[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);++i<r;){var o=s[i];o&&t(e,o,i,n)}return e})}(function(t,e,s,i){mt(t,e,s,i)});function Ft(t){return t}t.exports=Mt},3520:t=>{var e=9007199254740991,s="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",n=/^(?:0|[1-9]\d*)$/;var a=Object.prototype,o=a.hasOwnProperty,l=a.toString,c=a.propertyIsEnumerable,h=function(t,e){return function(s){return t(e(s))}}(Object.keys,Object);function u(t,e){var i=m(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&v(t)}(t)&&o.call(t,"callee")&&(!c.call(t,"callee")||l.call(t)==s)}(t)?function(t,e){for(var s=-1,i=Array(t);++s<t;)i[s]=e(s);return i}(t.length,String):[],r=i.length,n=!!r;for(var a in t)!e&&!o.call(t,a)||n&&("length"==a||f(a,r))||i.push(a);return i}var d=function(t){return function(e,s,i){for(var r=-1,n=Object(e),a=i(e),o=a.length;o--;){var l=a[t?o:++r];if(!1===s(n[l],l,n))break}return e}}();function p(t){if(s=(e=t)&&e.constructor,i="function"==typeof s&&s.prototype||a,e!==i)return h(t);var e,s,i,r=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&r.push(n);return r}function f(t,s){return!!(s=null==s?e:s)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<s}var m=Array.isArray;function v(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?l.call(t):"";return e==i||e==r}(t)}function g(t){return v(t)?u(t):p(t)}function y(t){return t}t.exports=function(t,e){return t&&function(t,e){return t&&d(t,e,g)}(t,"function"==typeof e?e:y)}},372:(t,e,s)=>{"use strict";var i=s(6060);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(e){return!1}return!i(t)}},3940:(t,e,s)=>{"use strict";var i=s(5618),r={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!i(t)&&hasOwnProperty.call(r,typeof t)}},7205:(t,e,s)=>{"use strict";var i=s(372),r=/^\s*class[\s{/}]/,n=Function.prototype.toString;t.exports=function(t){return!!i(t)&&!r.test(n.call(t))}},6060:(t,e,s)=>{"use strict";var i=s(3940);t.exports=function(t){if(!i(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(e){return!1}}},5618:t=>{"use strict";t.exports=function(t){return null!=t}},4935:(t,e,s)=>{var i=s(3513);t.exports=i},7921:(t,e,s)=>{var i=s(3072);t.exports=i},347:(t,e,s)=>{var i=s(8744);t.exports=i},9720:(t,e,s)=>{var i=s(6943);t.exports=i},6672:(t,e,s)=>{var i=s(6240),r=s(7265);function n(t,e,s,i){if(i){var n=i[e];if(r(n))n.unhook&&n.unhook(t,e,s);else if("attributes"===e)for(var a in n)t.removeAttribute(a);else if("style"===e)for(var o in n)t.style[o]="";else t[e]="string"==typeof n?"":null}}function a(t,e,s,r,n){var a=s?s[r]:void 0;if("attributes"!==r)if(a&&i(a)&&o(a)!==o(n))t[r]=n;else{i(t[r])||(t[r]={});var l="style"===r?"":void 0;for(var c in n){var h=n[c];t[r][c]=void 0===h?l:h}}else for(var u in n){var d=n[u];void 0===d?t.removeAttribute(u):t.setAttribute(u,d)}}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function(t,e,s){for(var o in e){var l=e[o];void 0===l?n(t,o,l,s):r(l)?(n(t,o,l,s),l.hook&&l.hook(t,o,s?s[o]:void 0)):i(l)?a(t,e,s,o,l):t[o]=l}}},3513:(t,e,s)=>{var i=s(9144),r=s(6672),n=s(5170),a=s(6221),o=s(4097),l=s(6078);t.exports=function t(e,s){var c=s&&s.document||i;var h=s?s.warn:null;e=l(e).a;if(o(e))return e.init();if(a(e))return c.createTextNode(e.text);if(!n(e))return h&&h("Item is not a valid virtual dom node",e),null;var u=null===e.namespace?c.createElement(e.tagName):c.createElementNS(e.namespace,e.tagName);var d=e.properties;r(u,d);var p=e.children;for(var f=0;f<p.length;f++){var m=t(p[f],s);m&&u.appendChild(m)}return u}},8992:t=>{var e={};function s(t,e,s){if(0===t.length)return!1;for(var i,r,n=0,a=t.length-1;n<=a;){if(r=t[i=(a+n)/2>>0],n===a)return r>=e&&r<=s;if(r<e)n=i+1;else{if(!(r>s))return!0;a=i-1}}return!1}function i(t,e){return t>e?1:-1}t.exports=function(t,r,n,a){return n&&0!==n.length?(n.sort(i),function t(i,r,n,a,o){a=a||{};if(i){s(n,o,o)&&(a[o]=i);var l=r.children;if(l)for(var c=i.childNodes,h=0;h<r.children.length;h++){o+=1;var u=l[h]||e,d=o+(u.count||0);s(n,o,d)&&t(c[h],u,n,a,o),o=d}}return a}(t,r,n,a,0)):{}}},9120:(t,e,s)=>{var i=s(6672),r=s(4097),n=s(8057),a=s(6670);function o(t,e){"function"==typeof e.destroy&&r(e)&&e.destroy(t)}t.exports=function(t,e,s){var r=t.type,l=t.vNode,c=t.patch;switch(r){case n.REMOVE:return function(t,e){var s=t.parentNode;s&&s.removeChild(t);return o(t,e),null}(e,l);case n.INSERT:return function(t,e,s){var i=s.render(e,s);t&&t.appendChild(i);return t}(e,c,s);case n.VTEXT:return function(t,e,s,i){var r;if(3===t.nodeType)t.replaceData(0,t.length,s.text),r=t;else{var n=t.parentNode;r=i.render(s,i),n&&r!==t&&n.replaceChild(r,t)}return r}(e,0,c,s);case n.WIDGET:return function(t,e,s,i){var r,n=a(e,s);r=n?s.update(e,t)||t:i.render(s,i);var l=t.parentNode;l&&r!==t&&l.replaceChild(r,t);n||o(t,e);return r}(e,l,c,s);case n.VNODE:return function(t,e,s,i){var r=t.parentNode,n=i.render(s,i);r&&n!==t&&r.replaceChild(n,t);return n}(e,0,c,s);case n.ORDER:return function(t,e){for(var s,i,r,n=t.childNodes,a={},o=0;o<e.removes.length;o++)i=e.removes[o],s=n[i.from],i.key&&(a[i.key]=s),t.removeChild(s);for(var l=n.length,c=0;c<e.inserts.length;c++)r=e.inserts[c],s=a[r.key],t.insertBefore(s,r.to>=l++?null:n[r.to])}(e,c),e;case n.PROPS:return i(e,c,l.properties),e;case n.THUNK:return function(t,e){t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t);return e}(e,s.patch(e,c,s));default:return e}}},6943:(t,e,s)=>{var i=s(9144),r=s(7362),n=s(3513),a=s(8992),o=s(9120);function l(t,e,s){var r=function(t){var e=[];for(var s in t)"a"!==s&&e.push(Number(s));return e}(e);if(0===r.length)return t;var n=a(t,e.a,r),o=t.ownerDocument;s.document||o===i||(s.document=o);for(var l=0;l<r.length;l++){var h=r[l];t=c(t,n[h],e[h],s)}return t}function c(t,e,s,i){if(!e)return t;var n;if(r(s))for(var a=0;a<s.length;a++)n=o(s[a],e,i),e===t&&(t=n);else n=o(s,e,i),e===t&&(t=n);return t}t.exports=function t(e,s,i){i=i||{};i.patch=i.patch&&i.patch!==t?i.patch:l;i.render=i.render||n;return i.patch(e,s,i)}},6670:(t,e,s)=>{var i=s(4097);t.exports=function(t,e){if(i(t)&&i(e))return"name"in t&&"name"in e?t.id===e.id:t.init===e.init;return!1}},6505:(t,e,s)=>{"use strict";var i=s(8832);function r(t){if(!(this instanceof r))return new r(t);this.value=t}t.exports=r,r.prototype.hook=function(t,e){i(t)[e.substr(3)]=this.value},r.prototype.unhook=function(t,e){i(t)[e.substr(3)]=void 0}},7199:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},8744:(t,e,s)=>{"use strict";var i=s(7362),r=s(4282),n=s(4268),a=s(5170),o=s(6221),l=s(4097),c=s(7265),h=s(6741),u=s(1948),d=s(7199),p=s(6505);function f(t){return a(t)||o(t)||l(t)||h(t)}function m(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=function(t,e,s){var a,o,l,h,v=[];!s&&(g=e,"string"==typeof g||i(g)||f(g))&&(s=e,o={});var g;a=u(t,o=o||e||{}),o.hasOwnProperty("key")&&(l=o.key,o.key=void 0);o.hasOwnProperty("namespace")&&(h=o.namespace,o.namespace=void 0);"INPUT"!==a||h||!o.hasOwnProperty("value")||void 0===o.value||c(o.value)||(o.value=d(o.value));(function(t){for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];if(c(s))continue;"ev-"===e.substr(0,3)&&(t[e]=p(s))}})(o),null!=s&&function t(e,s,r,a){if("string"==typeof e)s.push(new n(e));else if("number"==typeof e)s.push(new n(String(e)));else if(f(e))s.push(e);else{if(!i(e)){if(null==e)return;throw l={foreignObject:e,parentVnode:{tagName:r,properties:a}},(c=new Error).type="virtual-hyperscript.unexpected.virtual-element",c.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+m(l.foreignObject)+".\nThe parent vnode is:\n"+m(l.parentVnode),c.foreignObject=l.foreignObject,c.parentVnode=l.parentVnode,c}for(var o=0;o<e.length;o++)t(e[o],s,r,a)}var l,c}(s,v,a,o);return new r(a,o,v,l,h)}},1948:(t,e,s)=>{"use strict";var i=s(6824),r=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,n=/^\.|#/;t.exports=function(t,e){if(!t)return"DIV";var s,a,o,l,c=!e.hasOwnProperty("id"),h=i(t,r),u=null;n.test(h[1])&&(u="DIV");for(l=0;l<h.length;l++)(a=h[l])&&(o=a.charAt(0),u?"."===o?(s=s||[]).push(a.substring(1,a.length)):"#"===o&&c&&(e.id=a.substring(1,a.length)):u=a);s&&(e.className&&s.push(e.className),e.className=s.join(" "));return e.namespace?u:u.toUpperCase()}},6078:(t,e,s)=>{var i=s(5170),r=s(6221),n=s(4097),a=s(6741);function o(t,e){var s=t.vnode;if(s||(s=t.vnode=t.render(e)),!(i(s)||r(s)||n(s)))throw new Error("thunk did not return a valid node");return s}t.exports=function(t,e){var s=t,i=e;a(e)&&(i=o(e,t));a(t)&&(s=o(t,null));return{a:s,b:i}}},6741:t=>{t.exports=function(t){return t&&"Thunk"===t.type}},7265:t=>{t.exports=function(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}},5170:(t,e,s)=>{var i=s(9962);t.exports=function(t){return t&&"VirtualNode"===t.type&&t.version===i}},6221:(t,e,s)=>{var i=s(9962);t.exports=function(t){return t&&"VirtualText"===t.type&&t.version===i}},4097:t=>{t.exports=function(t){return t&&"Widget"===t.type}},9962:t=>{t.exports="2"},4282:(t,e,s)=>{var i=s(9962),r=s(5170),n=s(4097),a=s(6741),o=s(7265);t.exports=h;var l={},c=[];function h(t,e,s,i,h){this.tagName=t,this.properties=e||l,this.children=s||c,this.key=null!=i?String(i):void 0,this.namespace="string"==typeof h?h:null;var u,d=s&&s.length||0,p=0,f=!1,m=!1,v=!1;for(var g in e)if(e.hasOwnProperty(g)){var y=e[g];o(y)&&y.unhook&&(u||(u={}),u[g]=y)}for(var b=0;b<d;b++){var k=s[b];r(k)?(p+=k.count||0,!f&&k.hasWidgets&&(f=!0),!m&&k.hasThunks&&(m=!0),v||!k.hooks&&!k.descendantHooks||(v=!0)):!f&&n(k)?"function"==typeof k.destroy&&(f=!0):!m&&a(k)&&(m=!0)}this.count=d+p,this.hasWidgets=f,this.hasThunks=m,this.hooks=u,this.descendantHooks=v}h.prototype.version=i,h.prototype.type="VirtualNode"},8057:(t,e,s)=>{var i=s(9962);function r(t,e,s){this.type=Number(t),this.vNode=e,this.patch=s}r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,t.exports=r,r.prototype.version=i,r.prototype.type="VirtualPatch"},4268:(t,e,s)=>{var i=s(9962);function r(t){this.text=String(t)}t.exports=r,r.prototype.version=i,r.prototype.type="VirtualText"},9973:(t,e,s)=>{var i=s(6240),r=s(7265);function n(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function t(e,s){var a;for(var o in e){o in s||((a=a||{})[o]=void 0);var l=e[o],c=s[o];if(l!==c)if(i(l)&&i(c))if(n(c)!==n(l))(a=a||{})[o]=c;else if(r(c))(a=a||{})[o]=c;else{var h=t(l,c);h&&((a=a||{})[o]=h)}else(a=a||{})[o]=c}for(var u in s)u in e||((a=a||{})[u]=s[u]);return a}},3072:(t,e,s)=>{var i=s(7362),r=s(8057),n=s(5170),a=s(6221),o=s(4097),l=s(6741),c=s(6078),h=s(9973);function u(t,e){var s={a:t};return d(t,e,s,0),s}function d(t,e,s,i){if(t!==e){var c=s[i],u=!1;if(l(t)||l(e))f(t,e,s,i);else if(null==e)o(t)||(p(t,s,i),c=s[i]),c=g(c,new r(r.REMOVE,t,e));else if(n(e))if(n(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var y=h(t.properties,e.properties);y&&(c=g(c,new r(r.PROPS,t,y))),c=function(t,e,s,i,a){for(var o=t.children,l=function(t,e){var s=v(e),i=s.keys,r=s.free;if(r.length===e.length)return{children:e,moves:null};var n=v(t),a=n.keys;if(n.free.length===t.length)return{children:e,moves:null};for(var o=[],l=0,c=r.length,h=0,u=0;u<t.length;u++){var d,p=t[u];p.key?i.hasOwnProperty(p.key)?(d=i[p.key],o.push(e[d])):(d=u-h++,o.push(null)):l<c?(d=r[l++],o.push(e[d])):(d=u-h++,o.push(null))}for(var f=l>=r.length?e.length:r[l],g=0;g<e.length;g++){var y=e[g];y.key?a.hasOwnProperty(y.key)||o.push(y):g>=f&&o.push(y)}for(var b,k=o.slice(),w=0,x=[],P=[],S=0;S<e.length;){var T=e[S];for(b=k[w];null===b&&k.length;)x.push(m(k,w,null)),b=k[w];b&&b.key===T.key?(w++,S++):T.key?(b&&b.key&&i[b.key]!==S+1?(x.push(m(k,w,b.key)),(b=k[w])&&b.key===T.key?w++:P.push({key:T.key,to:S})):P.push({key:T.key,to:S}),S++):b&&b.key&&x.push(m(k,w,b.key))}for(;w<k.length;)b=k[w],x.push(m(k,w,b&&b.key));if(x.length===h&&!P.length)return{children:o,moves:null};return{children:o,moves:{removes:x,inserts:P}}}(o,e.children),c=l.children,h=o.length,u=c.length,p=h>u?h:u,f=0;f<p;f++){var y=o[f],b=c[f];a+=1,y?d(y,b,s,a):b&&(i=g(i,new r(r.INSERT,null,b))),n(y)&&y.count&&(a+=y.count)}l.moves&&(i=g(i,new r(r.ORDER,t,l.moves)));return i}(t,e,s,c,i)}else c=g(c,new r(r.VNODE,t,e)),u=!0;else c=g(c,new r(r.VNODE,t,e)),u=!0;else a(e)?a(t)?t.text!==e.text&&(c=g(c,new r(r.VTEXT,t,e))):(c=g(c,new r(r.VTEXT,t,e)),u=!0):o(e)&&(o(t)||(u=!0),c=g(c,new r(r.WIDGET,t,e)));c&&(s[i]=c),u&&p(t,s,i)}}function p(t,e,s){!function t(e,s,i){if(n(e)){if(e.hooks&&(s[i]=g(s[i],new r(r.PROPS,e,function(t){var e={};for(var s in t)e[s]=void 0;return e}(e.hooks)))),e.descendantHooks||e.hasThunks)for(var a=e.children,o=a.length,c=0;c<o;c++){var h=a[c];t(h,s,i+=1),n(h)&&h.count&&(i+=h.count)}}else l(e)&&f(e,null,s,i)}(t,e,s),function t(e,s,i){if(o(e))"function"==typeof e.destroy&&(s[i]=g(s[i],new r(r.REMOVE,e,null)));else if(n(e)&&(e.hasWidgets||e.hasThunks))for(var a=e.children,c=a.length,h=0;h<c;h++){var u=a[h];t(u,s,i+=1),n(u)&&u.count&&(i+=u.count)}else l(e)&&f(e,null,s,i)}(t,e,s)}function f(t,e,s,i){var n=c(t,e),a=u(n.a,n.b);(function(t){for(var e in t)if("a"!==e)return!0;return!1})(a)&&(s[i]=new r(r.THUNK,null,a))}function m(t,e,s){return t.splice(e,1),{from:e,key:s}}function v(t){for(var e={},s=[],i=t.length,r=0;r<i;r++){var n=t[r];n.key?e[n.key]=r:s.push(r)}return{keys:e,free:s}}function g(t,e){return t?(i(t)?t.push(e):t=[t,e],t):e}t.exports=u},4991:t=>{"use strict";function e(t){for(var e,s=1/0,i=-1/0,r=0,n=t.length;r<n;r++)s>(e=t[r])&&(s=e),i<e&&(i=e);return{min:s,max:i}}function s(t,e){var s=Math.pow(2,e-1),i=t<0?t*s:t*(s-1);return Math.max(-s,Math.min(s-1,i))}function i(t,i,n){var a,o,l,c,h,u,d=t.length,p=Math.ceil(d/i),f=r(n,2*p);for(a=0;a<p;a++)o=a*i,l=(a+1)*i>d?d:(a+1)*i,h=s((u=e(t.subarray(o,l))).min,n),c=s(u.max,n),f[2*a]=h,f[2*a+1]=c;return f}function r(t,e){return new(new Function(`return Int${t}Array`)())(e)}function n(t,e){return"number"==typeof t?t:e}t.exports=function(t,e,s,a,o,l){if(e=n(e,1e3),l=n(l,16),null==s&&(s=!0),[8,16,32].indexOf(l)<0)throw new Error("Invalid number of bits specified for peaks.");var c,h,u=t.numberOfChannels,d=[];if(a=n(a,0),o=n(o,t.length),void 0===t.subarray)for(c=0;c<u;c++)h=t.getChannelData(c).subarray(a,o),d.push(i(h,e,l));else d.push(i(t.subarray(a,o),e,l));return s&&d.length>1&&(d=function(t,e){var s,i,n=t.length,a=1/n,o=t[0].length/2,l=0,c=0,h=r(e,2*o);for(c=0;c<o;c++){for(s=0,i=0,l=0;l<n;l++)s+=a*t[l][2*c],i+=a*t[l][2*c+1];h[2*c]=s,h[2*c+1]=i}return[h]}(d,l)),{length:d[0].length/2,data:d,bits:l}}},7362:t=>{var e=Array.isArray,s=Object.prototype.toString;t.exports=e||function(t){return"[object Array]"===s.call(t)}},5893:()=>{}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i](n,n.exports,s),n.loaded=!0,n.exports}s.n=(t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e}),s.d=((t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=((t,e)=>Object.prototype.hasOwnProperty.call(t,e)),s.r=(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}),s.nmd=(t=>(t.paths=[],t.children||(t.children=[]),t));var i={};return(()=>{"use strict";s.r(i),s.d(i,{default:()=>(function(t={},e=o()()){return ot(t,e)}),init:()=>ot});var t=s(2098),e=s.n(t),r=s(4935),n=s.n(r),a=s(8370),o=s.n(a),l=s(347),c=s.n(l),h=s(7921),u=s.n(h),d=s(9720),p=s.n(d),f=s(849),m=s.n(f);function v(t,e){return Math.ceil(t*e)}function g(t,e,s){return t*e/s}function y(t,e,s){return Math.ceil(t*s/e)}const b=class{constructor(t,e,s=o()()){this.src=t,this.ac=e,this.audioRequestState=0,this.ee=s}setStateChange(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}fileProgress(t){let e=0;0===this.audioRequestState&&this.setStateChange(1),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}fileLoad(t){const e=t.target.response||t.target.result;return this.setStateChange(2),new Promise((t,s)=>{this.ac.decodeAudioData(e,e=>{this.audioBuffer=e,this.setStateChange(3),t(e)},t=>{s(null===t?Error("MediaDecodeAudioDataUnknownContentType"):t)})})}},k=class extends b{load(){return new Promise((t,e)=>{if(this.src.type.match(/audio.*/)||this.src.type.match(/video\/ogg/)){const s=new FileReader;s.readAsArrayBuffer(this.src),s.addEventListener("progress",t=>{super.fileProgress(t)}),s.addEventListener("load",s=>{super.fileLoad(s).then(e=>{t(e)}).catch(e)}),s.addEventListener("error",e)}else e(Error(`Unsupported file type ${this.src.type}`))})}};class w extends b{load(){return Promise.resolve(this.src)}}const x=class extends b{load(){return new Promise((t,e)=>{const s=new XMLHttpRequest;s.open("GET",this.src,!0),s.responseType="arraybuffer",s.send(),s.addEventListener("progress",t=>{super.fileProgress(t)}),s.addEventListener("load",s=>{super.fileLoad(s).then(e=>{t(e)}).catch(e)}),s.addEventListener("error",()=>{e(Error(`Track ${this.src} failed to load`))})})}},P=class{static createLoader(t,e,s){if(t instanceof Blob)return new k(t,e,s);if(t instanceof AudioBuffer)return new w(t,e,s);if("string"==typeof t)return new x(t,e,s);throw new Error("Unsupported src type")}},S=class{constructor(t){this.playlist=t}hook(t){const e=this.playlist;if(!e.isScrolling){const s=t;if(e.isAutomaticScroll){const s=t.getBoundingClientRect(),i=e.controls.show?e.controls.width:0,r=g(s.width-i,e.samplesPerPixel,e.sampleRate),n=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(n<e.scrollLeft||n>=e.scrollLeft+r)&&(e.scrollLeft=Math.min(n,e.duration-r))}const i=y(e.scrollLeft,e.samplesPerPixel,e.sampleRate);s.scrollLeft=i}}},T=class{constructor(t,e,s,i,r){this.tickInfo=t,this.offset=e,this.samplesPerPixel=s,this.duration=i,this.colors=r}hook(t,e,s){if(void 0!==s&&s.offset===this.offset&&s.duration===this.duration&&s.samplesPerPixel===this.samplesPerPixel)return;const i=t.width,r=t.height,n=t.getContext("2d");n.clearRect(0,0,i,r),n.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach(t=>{const e=this.tickInfo[t],s=r-e;n.fillRect(t,s,1,e)})}};class O{constructor(t,e,s,i,r=0,n){this.duration=t,this.offset=e,this.samplesPerPixel=s,this.sampleRate=i,this.marginLeft=r,this.colors=n,this.timeinfo={20000:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12000:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},10000:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5000:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}getScaleInfo(t){let e=Object.keys(this.timeinfo).map(t=>parseInt(t,10));e=e.sort((t,e)=>t-e);for(let s=0;s<e.length;s+=1)if(t<=e[s])return this.timeinfo[e[s]];return this.timeinfo[e[0]]}static formatTime(t){const e=t/1e3;let s=e%60;const i=(e-s)/60;return s<10&&(s=`0${s}`),`${i}:${s}`}render(){const t=y(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,s=y(this.offset,this.samplesPerPixel,this.sampleRate),i=this.getScaleInfo(this.samplesPerPixel),r={},n=[],a=t+s;let o=0;for(let l=0;l<a;l+=e*i.secondStep){const t=Math.floor(l),e=t-s;t>=s&&(i.marker&&o%i.marker==0?(n.push(c()("div.time",{attributes:{style:`position: absolute; left: ${e}px;`}},[O.formatTime(o)])),r[e]=10):i.bigStep&&o%i.bigStep==0?r[e]=5:i.smallStep&&o%i.smallStep==0&&(r[e]=2)),o+=1e3*i.secondStep}return c()("div.playlist-time-scale",{attributes:{style:`position: relative; left: 0; right: 0; margin-left: ${this.marginLeft}px;`}},[n,c()("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new T(r,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}const _=O;var E,R=s(1730),A=s.n(R),j=s(3520),C=s.n(j),G=new Uint8Array(16);const M=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const L=function(t){return"string"==typeof t&&M.test(t)};for(var I=[],F=0;F<256;++F)I.push((F+256).toString(16).substr(1));const D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(I[t[e+0]]+I[t[e+1]]+I[t[e+2]]+I[t[e+3]]+"-"+I[t[e+4]]+I[t[e+5]]+"-"+I[t[e+6]]+I[t[e+7]]+"-"+I[t[e+8]]+I[t[e+9]]+"-"+I[t[e+10]]+I[t[e+11]]+I[t[e+12]]+I[t[e+13]]+I[t[e+14]]+I[t[e+15]]).toLowerCase();if(!L(s))throw TypeError("Stringified UUID is invalid");return s};const $=function(t,e,s){var i=(t=t||{}).random||(t.rng||function(){if(!E&&!(E="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(G)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){s=s||0;for(var r=0;r<16;++r)e[s+r]=i[r];return e}return D(i)};var z=s(4991),N=s.n(z),V=s(1114);const W={cursor:class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){t.preventDefault();const e=g(t.offsetX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}static getClass(){return".state-cursor"}static getEvents(){return["click"]}},select:class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitSelection(t){const e=Math.min(t,this.startX),s=Math.max(t,this.startX),i=g(e,this.samplesPerPixel,this.sampleRate),r=g(s,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",i,r,this.track)}complete(t){this.emitSelection(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;const e=g(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}mousemove(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-select"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},shift:class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitShift(t){const e=g(t-this.prevX,this.samplesPerPixel,this.sampleRate);this.prevX=t,this.track.ee.emit("shift",e,this.track)}complete(t){this.emitShift(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}mousemove(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-shift"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},fadein:class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=g(t.offsetX,this.samplesPerPixel,this.sampleRate);e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadein",e-this.track.getStartTime(),this.track)}static getClass(){return".state-fadein"}static getEvents(){return["click"]}},fadeout:class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=g(t.offsetX,this.samplesPerPixel,this.sampleRate);e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-e,this.track)}static getClass(){return".state-fadeout"}static getEvents(){return["click"]}}};class U{constructor(t,e,s,i,r,n,a,o){this.peaks=t,this.offset=e,this.color=i,this.bits=s,this.scale=r,this.height=n,this.barWidth=a,this.barGap=o}static drawFrame(t,e,s,i,r,n,a){const o=Math.abs(i*e),l=Math.abs(r*e);t.fillRect(s,0,n,e-l),t.fillRect(s,e+o,n,e-o),0!==a&&t.fillRect(s+n,0,a,2*e)}hook(t,e,s){if(void 0!==s&&s.peaks===this.peaks&&s.scale===this.scale&&s.height===this.height)return;const i=this.scale,r=t.width/i,n=t.getContext("2d"),a=t.height/i/2,o=2**(this.bits-1),l=this.barWidth,c=this.barGap,h=l+c;n.clearRect(0,0,t.width,t.height),n.save(),n.fillStyle=this.color,n.scale(i,i);for(let u=0;u<r;u+=h){const t=this.peaks[2*(u+this.offset)]/o,e=this.peaks[2*(u+this.offset)+1]/o;U.drawFrame(n,a,u,t,e,l,c)}n.restore()}}const q=U;var B=s(6226);class H{constructor(t,e,s,i){this.type=t,this.shape=e,this.duration=s,this.samplesPerPixel=i}static createCurve(t,e,s){let i,r;switch(e){case V.Y1:i=1;break;case V.h7:i=-1;break;default:throw new Error("Unsupported fade type.")}switch(t){case V._h:r=(0,B.sCurve)(s,i);break;case V.t$:r=(0,B.linear)(s,i);break;case V.Jl:r=(0,B.exponential)(s,i);break;case V.Hp:r=(0,B.logarithmic)(s,10,i);break;default:throw new Error("Unsupported fade shape")}return r}hook(t,e,s){if(void 0!==s&&s.shape===this.shape&&s.type===this.type&&s.duration===this.duration&&s.samplesPerPixel===this.samplesPerPixel)return;const i=t.getContext("2d"),r=t.width,n=t.height,a=H.createCurve(this.shape,this.type,r),o=a.length;let l=n-a[0]*n;i.clearRect(0,0,t.width,t.height),i.save(),i.strokeStyle="black",i.beginPath(),i.moveTo(0,l);for(let c=1;c<o;c+=1)l=n-a[c]*n,i.lineTo(c,l);i.stroke(),i.restore()}}const X=H,Y=class{constructor(t){this.gain=t}hook(t){t.value=100*this.gain,t.title=`${Math.round(100*this.gain)}% volume`}},Z=class{constructor(t){this.stereoPan=t}hook(t){let e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";const s=`${Math.abs(Math.round(100*this.stereoPan))}% `;t.title=`Pan: ${0!==this.stereoPan?s:""}${e}`}},J=class{constructor(){this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.muted=!1,this.soloed=!1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}setEventEmitter(t){this.ee=t}setName(t){this.name=t}setCustomClass(t){this.customClass=t}setWaveOutlineColor(t){this.waveOutlineColor=t}setCues(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}trim(t,e){const s=this.getStartTime(),i=this.getEndTime(),r=this.cueIn-s;if(s<=t&&i>=t||s<=e&&i>=e){const n=t<s?s:t,a=e>i?i:e;this.setCues(n+r,a+r),t>s&&this.setStartTime(t)}}setStartTime(t){this.startTime=t,this.endTime=t+this.duration}setPlayout(t){this.playout=t}setOfflinePlayout(t){this.offlinePlayout=t}setEnabledStates(t={}){this.enabledStates=A()({},{cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0},t)}setFadeIn(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade In");const s={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(V.Y1,s.shape,s.start,s.end)}setFadeOut(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade Out");const s={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(V.h7,s.shape,s.start,s.end)}saveFade(t,e,s,i){const r=$();return this.fades[r]={type:t,shape:e,start:s,end:i},r}removeFade(t){delete this.fades[t]}setBuffer(t){this.buffer=t}setPeakData(t){this.peakData=t}calculatePeaks(t,e){const s=v(this.cueIn,e),i=v(this.cueOut,e);this.setPeaks(N()(this.buffer,t,this.peakData.mono,s,i))}setPeaks(t){this.peaks=t}setState(t){if(this.state=t,this.state&&this.enabledStates[this.state]){const t=W[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getDuration(){return this.duration}isPlaying(){return this.playout.isPlaying()}setShouldPlay(t){this.playout.setShouldPlay(t)}setGainLevel(t){this.gain=t,this.playout.setVolumeGainLevel(t)}setMasterGainLevel(t){this.playout.setMasterGainLevel(t)}setStereoPanValue(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}setEffects(t){this.effectsGraph=t,this.playout.setEffects(t)}schedulePlay(t,e,s,i){let r,n,a=t,o=s?s-e:void 0;const l=A()({},{shouldPlay:!0,masterGain:1,isOffline:!1},i),c=l.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||o&&e+o<this.startTime)return Promise.resolve();this.startTime>=e?(r=0,a+=this.startTime-e,s?(o-=this.startTime-e,n=Math.min(o,this.duration)):n=this.duration):(r=e-this.startTime,n=s?Math.min(o,this.duration-r):this.duration-r),r+=this.cueIn;const h=e-this.startTime,u=c.setUpSource();return C()(this.fades,e=>{let s,i;if(h<e.end)switch(h<=e.start?(s=t+(e.start-h),i=e.end-e.start):h>e.start&&h<e.end&&(s=t-(h-e.start),i=e.end-e.start),e.type){case V.Y1:c.applyFadeIn(s,i,e.shape);break;case V.h7:c.applyFadeOut(s,i,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}}),c.setVolumeGainLevel(this.gain),c.setShouldPlay(l.shouldPlay),c.setMasterGainLevel(l.masterGain),c.setStereoPanValue(this.stereoPan),c.play(a,r,n),u}scheduleStop(t=0){this.playout.stop(t)}renderOverlay(t){const e={attributes:{style:`position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ${y(t.playlistLength,t.resolution,t.sampleRate)}px; z-index: 9;`}};let s="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);const i=W[this.state];i.getEvents().forEach(t=>{e[`on${t}`]=this.stateObj[t].bind(this.stateObj)}),s=i.getClass()}return c()(`div.playlist-overlay${s}`,e)}renderControls(t){const e=t.muted?".active":"",s=t.soloed?".active":"",i=t.collapsed,r=this.peaks.data.length,n=t.controls.widgets,a=c()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{type:"button",title:"Remove track"},onclick:()=>{this.ee.emit("removeTrack",this)}},[c()("i.fas.fa-times")]),o=c()("span",[this.name]),l=c()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{type:"button",title:i?"Expand track":"Collapse track"},onclick:()=>{this.ee.emit("changeTrackView",this,{collapsed:!i})}},[c()(`i.fas.${i?"fa-caret-down":"fa-caret-up"}`)]),h=[];n.remove&&h.push(a),h.push(o),n.collapse&&h.push(l);const u=[c()("div.track-header",h)];return i||(n.muteOrSolo&&u.push(c()("div.btn-group",[c()(`button.btn.btn-outline-dark.btn-xs.btn-mute${e}`,{attributes:{type:"button"},onclick:()=>{this.ee.emit("mute",this)}},["Mute"]),c()(`button.btn.btn-outline-dark.btn-xs.btn-solo${s}`,{onclick:()=>{this.ee.emit("solo",this)}},["Solo"])])),n.volume&&u.push(c()("label.volume",[c()("input.volume-slider",{attributes:{"aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new Y(this.gain),oninput:t=>{this.ee.emit("volumechange",t.target.value,this)}})])),n.stereoPan&&u.push(c()("label.stereopan",[c()("input.stereopan-slider",{attributes:{"aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100},hook:new Z(this.stereoPan),oninput:t=>{this.ee.emit("stereopan",t.target.value/100,this)}})]))),c()("div.controls",{attributes:{style:`height: ${r*t.height}px; width: ${t.controls.width}px; position: absolute; left: 0; z-index: 10;`}},u)}render(t){const e=this.peaks.length,s=y(t.playbackSeconds,t.resolution,t.sampleRate),i=y(this.startTime,t.resolution,t.sampleRate),r=y(this.endTime,t.resolution,t.sampleRate);let n=0;const a=this.peaks.data.length,o=Math.ceil(window.devicePixelRatio);s>0&&s>i&&(n=s<r?s-i:e);const l=[c()("div.cursor",{attributes:{style:`position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ${s}px; bottom: 0; z-index: 5;`}})],h=Object.keys(this.peaks.data).map(s=>{const r=[c()("div.channel-progress",{attributes:{style:`position: absolute; width: ${n}px; height: ${t.height}px; z-index: 2;`}})];let a=0,l=e;const h=this.peaks.data[s];for(;l>0;){const e=Math.min(l,1e3),s=this.waveOutlineColor?this.waveOutlineColor:t.colors.waveOutlineColor;r.push(c()("canvas",{attributes:{width:e*o,height:t.height*o,style:`float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ${e}px; height: ${t.height}px;`},hook:new q(h,a,this.peaks.bits,s,o,t.height,t.barWidth,t.barGap)})),l-=e,a+=1e3}if(this.fadeIn){const e=this.fades[this.fadeIn],s=y(e.end-e.start,t.resolution,t.sampleRate);r.push(c()("div.wp-fade.wp-fadein",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${s}px; top: 0; left: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:s,height:t.height},hook:new X(e.type,e.shape,e.end-e.start,t.resolution)})]))}if(this.fadeOut){const e=this.fades[this.fadeOut],s=y(e.end-e.start,t.resolution,t.sampleRate);r.push(c()("div.wp-fade.wp-fadeout",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${s}px; top: 0; right: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:s,height:t.height},hook:new X(e.type,e.shape,e.end-e.start,t.resolution)})]))}return c()(`div.channel.channel-${s}`,{attributes:{style:`height: ${t.height}px; width: ${e}px; top: ${s*t.height}px; left: ${i}px; position: absolute; margin: 0; padding: 0; z-index: 1;`}},r)});if(l.push(h),l.push(this.renderOverlay(t)),!0===t.isActive){const e=y(t.timeSelection.start,t.resolution,t.sampleRate),s=y(t.timeSelection.end,t.resolution,t.sampleRate)-e+1,i=s>1?".segment":".point";l.push(c()(`div.selection${i}`,{attributes:{style:`position: absolute; width: ${s}px; bottom: 0; top: 0; left: ${e}px; z-index: 4;`}}))}const u=c()("div.waveform",{attributes:{style:`height: ${a*t.height}px; position: relative;`}},l),d=[];let p=0;t.controls.show&&(d.push(this.renderControls(t)),p=t.controls.width),d.push(u);const f=t.shouldPlay?"":".silent",m=void 0===this.customClass?"":`.${this.customClass}`;return c()(`div.channel-wrapper${f}${m}`,{attributes:{style:`margin-left: ${p}px; height: ${t.height*a}px;`}},d)}getTrackDetails(){const t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,muted:this.muted,soloed:this.soloed,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){const e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){const e=this.fades[this.fadeOut];t.fadeOut={shape:e.shape,duration:e.end-e.start}}return t}};function K(t,e){t.connect(e)}const Q=class{constructor(t,e,s=t.createGain()){this.ac=t,this.gain=1,this.effectsGraph=K,this.masterEffectsGraph=K,this.buffer=e,this.masterGain=s,this.destination=this.ac.destination}applyFade(t,e,s,i="logarithmic"){if(t===V.Y1)(0,V.L7)(this.fadeGain.gain,i,e,s);else{if(t!==V.h7)throw new Error("Unsupported fade type");(0,V.Mt)(this.fadeGain.gain,i,e,s)}}applyFadeIn(t,e,s="logarithmic"){this.applyFade(V.Y1,t,e,s)}applyFadeOut(t,e,s="logarithmic"){this.applyFade(V.h7,t,e,s)}isPlaying(){return void 0!==this.source}getDuration(){return this.buffer.duration}setAudioContext(t){this.ac=t,this.destination=this.ac.destination}createStereoPanner(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}setUpSource(){let t,e;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;const s=new Promise(s=>{this.source.onended=(()=>{this.source.disconnect(),this.fadeGain.disconnect(),this.volumeGain.disconnect(),this.shouldPlayGain.disconnect(),this.panner.disconnect(),t&&t(),e&&e(),this.source=void 0,this.fadeGain=void 0,this.volumeGain=void 0,this.shouldPlayGain=void 0,this.panner=void 0,s()})});return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof OfflineAudioContext),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof OfflineAudioContext),s}setVolumeGainLevel(t){this.volumeGain&&(this.volumeGain.gain.value=t)}setShouldPlay(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}setMasterGainLevel(t){this.masterGain&&(this.masterGain.gain.value=t)}setStereoPanValue(t=0){this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}setEffects(t=K){this.effectsGraph=t}setMasterEffects(t=K){this.masterEffectsGraph=t}play(t,e,s){this.source.start(t,e,s)}stop(t=0){this.source&&this.source.stop(t)}};const tt=class{constructor(t,e={}){this.playlist=t,this.data=e,this.active=!1,this.ondragover=(t=>{this.active&&(t.preventDefault(),this.emitDrag(t.clientX))})}emitDrag(t){const e=t-this.prevX;if(e){const s=g(e,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=t,this.playlist.ee.emit("dragged",s,this.data)}}complete(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}dragstart(t){const e=t;this.active=!0,this.prevX=t.clientX,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}dragend(t){this.active&&(t.preventDefault(),this.complete())}static getClass(){return".shift"}static getEvents(){return["dragstart","dragend"]}},et=function(){};et.prototype.hook=function(t){const e=t.querySelector(".current");if(e){const s=t.getBoundingClientRect(),i=e.getBoundingClientRect().top-s.top;t.scrollTop+=i}};const st=et;const it=class{constructor(t,e,s=[],i=!1,r=!1,n=!1,a=0){this.playlist=t,this.marginLeft=a,this.resizeHandlers=[],this.editable=i,this.annotations=e.map(t=>(function(t){return{id:t.id||$(),start:Number(t.begin)||0,end:Number(t.end)||0,lines:t.lines||[""],lang:t.language||"en"}})(t)),this.setupInteractions(),this.controls=s,this.setupEE(t.ee),this.playlist.isContinuousPlay=n,this.playlist.linkEndpoints=r,this.length=this.annotations.length}setupInteractions(){this.annotations.forEach((t,e)=>{const s=new tt(this.playlist,{direction:"left",index:e}),i=new tt(this.playlist,{direction:"right",index:e});this.resizeHandlers.push(s),this.resizeHandlers.push(i)})}setupEE(t){return t.on("dragged",(t,e)=>{const s=e.index,i=this.annotations,r=i[s];if("left"===e.direction){const e=r.start;r.start+=t,r.start<0&&(r.start=0),s&&i[s-1].end>r.start&&(i[s-1].end=r.start),this.playlist.linkEndpoints&&s&&i[s-1].end===e&&(i[s-1].end=r.start)}else{const e=r.end;r.end+=t,r.end>this.playlist.duration&&(r.end=this.playlist.duration),s<i.length-1&&i[s+1].start<r.end&&(i[s+1].start=r.end),this.playlist.linkEndpoints&&s<i.length-1&&i[s+1].start===e&&(i[s+1].start=r.end)}this.playlist.drawRequest()}),t.on("continuousplay",t=>{this.playlist.isContinuousPlay=t}),t.on("linkendpoints",t=>{this.playlist.linkEndpoints=t}),t.on("annotationsrequest",()=>{this.export()}),t}export(){const t=this.annotations.map(t=>(function(t){return{begin:String(t.start.toFixed(3)),end:String(t.end.toFixed(3)),id:String(t.id),language:t.lang,lines:t.lines}})(t)),e=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`,s=document.createElement("a");document.body.appendChild(s),s.href=e,s.download="annotations.json",s.click(),document.body.removeChild(s)}renderResizeLeft(t){const e=tt.getEvents(),s={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},i=this.resizeHandlers[2*t];return e.forEach(t=>{s[`on${t}`]=i[t].bind(i)}),c()("div.resize-handle.resize-w",s)}renderResizeRight(t){const e=tt.getEvents(),s={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},i=this.resizeHandlers[2*t+1];return e.forEach(t=>{s[`on${t}`]=i[t].bind(i)}),c()("div.resize-handle.resize-e",s)}renderControls(t,e){const s=this;return this.controls.map(i=>c()(`i.${i.class}`,{attributes:{title:i.title},onclick:()=>{i.action(t,e,s.annotations,{linkEndpoints:s.playlist.linkEndpoints}),this.setupInteractions(),s.playlist.drawRequest()}}))}render(){const t=c()("div.annotations-boxes",{attributes:{style:`height: 30px; position: relative; margin-left: ${this.marginLeft}px;`}},this.annotations.map((t,e)=>{const s=this.playlist.samplesPerPixel,i=this.playlist.sampleRate,r=i/s,n=y(this.playlist.scrollLeft,s,i),a=Math.floor(t.start*r-n),o=Math.ceil(t.end*r-t.start*r);return c()("div.annotation-box",{attributes:{style:`position: absolute; height: 30px; width: ${o}px; left: ${a}px`,"data-id":t.id}},[this.renderResizeLeft(e),c()("span.id",{onclick:()=>{const t=this.annotations[e].start,s=this.annotations[e].end;this.playlist.isContinuousPlay?(this.playlist.seek(t,t),this.playlist.ee.emit("play",t)):(this.playlist.seek(t,s),this.playlist.ee.emit("play",t,s))}},[t.id]),this.renderResizeRight(e)])})),e=c()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),s=c()("div.annotations-text",{hook:new st},this.annotations.map((t,e)=>{const s=function(t){function e(t,e){const s=parseInt(t/3600,10)%24,i=parseInt(t/60,10)%60,r=(t%60).toFixed(e);return`${s<10?`0${s}`:s}:${i<10?`0${i}`:i}:${r<10?`0${r}`:r}`}return{seconds:t=>t.toFixed(0),thousandths:t=>t.toFixed(3),"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}}[t]}(this.playlist.durationFormat),i=s(t.start),r=s(t.end);let n="";this.playlist.isPlaying()&&this.playlist.playbackSeconds>=t.start&&this.playlist.playbackSeconds<=t.end&&(n=".current");const a={attributes:{contenteditable:!0},oninput:e=>{t.lines=[e.target.innerText]},onkeypress:t=>{13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},o=this.editable?a:{};return c()(`div.annotation${n}`,[c()("span.annotation-id",[t.id]),c()("span.annotation-start",[i]),c()("span.annotation-end",[r]),c()("span.annotation-lines",o,[t.lines]),c()("span.annotation-actions",this.renderControls(t,e))])}));return c()("div.annotations",[e,s])}};function rt(){function t(t){let e,s=1/0,i=-1/0;for(let r=0;r<t.length;r+=1)s>(e=t[r])&&(s=e),i<e&&(i=e);return{min:s,max:i}}function e(t,e){const s=2**(e-1),i=t<0?t*s:t*s-1;return Math.max(-s,Math.min(s-1,i))}function s(s,i=1e4,r=8){if([8,16,32].indexOf(r)<0)throw new Error("Invalid number of bits specified for peaks.");const n=[],a=s.length;return n.push(function(s,i,r){const n=s.length,a=Math.ceil(n/i);let o,l,c,h,u,d;const p=new self[`Int${r}Array`](2*a);for(let f=0;f<a;f+=1)o=f*i,l=(f+1)*i>n?n:(f+1)*i,u=e((d=t(c=s.subarray(o,l))).min,r),h=e(d.max,r),p[2*f]=u,p[2*f+1]=h;return p}(s.subarray(0,a),i,r)),{bits:r,length:n[0].length/2,data:n}}onmessage=function(t){const e=s(t.data.samples,t.data.samplesPerPixel);postMessage(e)}}function nt(){let t,e=0,s=[],i=[];function r(t,e,s){for(let i=0;i<s.length;i+=1)t.setUint8(e+i,s.charCodeAt(i))}function n(e,s=!1){const i=new ArrayBuffer(44+2*e.length),n=new DataView(i);return r(n,0,"RIFF"),n.setUint32(4,32+2*e.length,!0),r(n,8,"WAVE"),r(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,s?1:2,!0),n.setUint32(24,t,!0),n.setUint32(28,4*t,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),r(n,36,"data"),n.setUint32(40,2*e.length,!0),function(t,e,s){let i=e;for(let r=0;r<s.length;r+=1,i+=2){const e=Math.max(-1,Math.min(1,s[r]));t.setInt16(i,e<0?32768*e:32767*e,!0)}}(n,44,e),n}function a(t,e){const s=new Float32Array(e);let i=0;for(let r=0;r<t.length;r+=1)s.set(t[r],i),i+=t[r].length;return s}function o(t){const r=n(function(t,e){const s=t.length+e.length,i=new Float32Array(s);let r=0,n=0;for(;r<s;)i[r+=1]=t[n],i[r+=1]=e[n],n+=1;return i}(a(s,e),a(i,e))),o=new Blob([r],{type:t});postMessage(o)}onmessage=function(r){switch(r.data.command){case"init":a=r.data.config,t=a.sampleRate;break;case"record":n=r.data.buffer,s.push(n[0]),i.push(n[1]),e+=n[0].length;break;case"exportWAV":o(r.data.type);break;case"clear":e=0,s=[],i=[];break;default:throw new Error("Unknown export worker command")}var n,a}}const at=class{constructor(){this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}initExporter(){this.exportWorker=new(m())(nt)}trimAudioBuffer(t,e){const s=t.sampleRate,i=Math.floor(e*s);if(i>=t.length)return this.ac.createBuffer(1,1,s);const r=this.ac.createBuffer(t.numberOfChannels,t.length-i,s);for(let n=0;n<t.numberOfChannels;n++){const e=t.getChannelData(n),s=r.getChannelData(n);for(let t=0;t<r.length;t++)s[t]=e[t+i]}return r}initRecorder(t){this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=(()=>{const t=new J;t.setName("Recording"),t.setEnabledStates(),t.setEventEmitter(this.ee),this.recordingTrack=t,this.tracks.push(t),this.chunks=[],this.working=!1}),this.mediaRecorder.ondataavailable=(t=>{if(this.chunks.push(t.data),!this.working){const t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"});P.createLoader(t,this.ac).load().then(t=>{t=this.trimAudioBuffer(t,this.latency),this.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:this.samplesPerPixel}),this.recordingTrack.setCues(0,t.duration),this.recordingTrack.setBuffer(t),this.recordingTrack.setPlayout(new Q(this.ac,t,this.masterGainNode)),this.adjustDuration()}).catch(()=>{this.working=!1}),this.working=!0}}),this.mediaRecorder.onstop=(()=>{this.chunks=[],this.working=!1}),this.recorderWorker=new(m())(rt),this.recorderWorker.onmessage=(t=>{this.recordingTrack.setPeaks(t.data),this.working=!1,this.drawRequest()})}setShowTimeScale(t){this.showTimescale=t}setMono(t){this.mono=t}setExclSolo(t){this.exclSolo=t}setSeekStyle(t){this.seekStyle=t}getSeekStyle(){return this.seekStyle}setSampleRate(t){this.sampleRate=t}setSamplesPerPixel(t){this.samplesPerPixel=t}setAudioContext(t){this.ac=t,this.masterGainNode=t.createGain()}getAudioContext(){return this.ac}setControlOptions(t){this.controls=t}setWaveHeight(t){this.waveHeight=t}setCollapsedWaveHeight(t){this.collapsedWaveHeight=t}setColors(t){this.colors=t}setBarWidth(t){this.barWidth=t}setBarGap(t){this.barGap=t}setAnnotations(t){const e=this.controls.show?this.controls.width:0;this.annotationList=new it(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}setEffects(t){this.effectsGraph=t}setEventEmitter(t){this.ee=t}getEventEmitter(){return this.ee}setUpEventEmitter(){const t=this.ee;t.on("automaticscroll",t=>{this.isAutomaticScroll=t}),t.on("durationformat",t=>{this.durationFormat=t,this.drawRequest()}),t.on("select",(t,e,s)=>{this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.seek(t,e,s),this.ee.emit("timeupdate",t),this.drawRequest())}),t.on("startaudiorendering",(t,e)=>{this.startOfflineRender(t,e)}),t.on("statechange",t=>{this.setState(t),this.drawRequest()}),t.on("shift",(t,e)=>{e.setStartTime(e.getStartTime()+t),this.adjustDuration(),this.drawRequest()}),t.on("record",t=>{this.latency=t,this.record()}),t.on("play",(t,e)=>{this.play(t,e)}),t.on("pause",()=>{this.pause()}),t.on("stop",()=>{this.stop()}),t.on("rewind",()=>{this.rewind()}),t.on("fastforward",()=>{this.fastForward()}),t.on("clear",()=>{this.clear().then(()=>{this.drawRequest()})}),t.on("solo",t=>{this.soloTrack(t),this.adjustTrackPlayout(),this.drawRequest()}),t.on("mute",t=>{this.muteTrack(t),this.adjustTrackPlayout(),this.drawRequest()}),t.on("removeTrack",t=>{this.removeTrack(t),this.adjustTrackPlayout(),this.drawRequest()}),t.on("changeTrackView",(t,e)=>{this.collapseTrack(t,e),this.drawRequest()}),t.on("volumechange",(t,e)=>{e.setGainLevel(t/100),this.drawRequest()}),t.on("mastervolumechange",t=>{this.masterGain=t/100,this.tracks.forEach(t=>{t.setMasterGainLevel(this.masterGain)})}),t.on("fadein",(t,e)=>{e.setFadeIn(t,this.fadeType),this.drawRequest()}),t.on("fadeout",(t,e)=>{e.setFadeOut(t,this.fadeType),this.drawRequest()}),t.on("stereopan",(t,e)=>{e.setStereoPanValue(t),this.drawRequest()}),t.on("fadetype",t=>{this.fadeType=t}),t.on("newtrack",t=>{this.load([{src:t,name:t.name}])}),t.on("trim",()=>{const t=this.getActiveTrack(),e=this.getTimeSelection();t.trim(e.start,e.end),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.drawRequest()}),t.on("zoomin",()=>{const t=Math.max(0,this.zoomIndex-1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())}),t.on("zoomout",()=>{const t=Math.min(this.zoomLevels.length-1,this.zoomIndex+1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())}),t.on("scroll",()=>{this.isScrolling=!0,this.drawRequest(),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{this.isScrolling=!1},200)})}load(t){const e=t.map(t=>{return P.createLoader(t.src,this.ac,this.ee).load().then(t=>t.sampleRate===this.sampleRate?t:function(t,e){const s=Math.ceil(t.duration*e),i=new OfflineAudioContext(t.numberOfChannels,s,e),r=i.createBufferSource();return r.buffer=t,r.connect(i.destination),r.start(),i.startRendering()}(t,this.sampleRate))});return Promise.all(e).then(e=>{this.ee.emit("audiosourcesloaded");const s=e.map((e,s)=>{const i=t[s],r=i.name||"Untitled",n=i.start||0,a=i.states||{},o=i.fadeIn,l=i.fadeOut,c=i.cuein||0,h=i.cueout||e.duration,u=i.gain||1,d=i.muted||!1,p=i.soloed||!1,f=i.selected,m=i.peaks||{type:"WebAudio",mono:this.mono},v=i.customClass||void 0,g=i.waveOutlineColor||void 0,y=i.stereoPan||0,b=i.effects||null,k=new Q(this.ac,e,this.masterGainNode),w=new J;return w.src=i.src,w.setBuffer(e),w.setName(r),w.setEventEmitter(this.ee),w.setEnabledStates(a),w.setCues(c,h),w.setCustomClass(v),w.setWaveOutlineColor(g),void 0!==o&&w.setFadeIn(o.duration,o.shape),void 0!==l&&w.setFadeOut(l.duration,l.shape),void 0!==f&&(this.setActiveTrack(w),this.setTimeSelection(f.start,f.end)),void 0!==m&&w.setPeakData(m),w.setState(this.getState()),w.setStartTime(n),w.setPlayout(k),w.setGainLevel(u),w.setStereoPanValue(y),b&&w.setEffects(b),d&&this.muteTrack(w),p&&this.soloTrack(w),w.calculatePeaks(this.samplesPerPixel,this.sampleRate),w});this.tracks=this.tracks.concat(s),this.adjustDuration(),this.draw(this.render()),this.ee.emit("audiosourcesrendered")}).catch(t=>{this.ee.emit("audiosourceserror",t)})}setActiveTrack(t){this.activeTrack=t}getActiveTrack(){return this.activeTrack}isSegmentSelection(){return this.timeSelection.start!==this.timeSelection.end}setTimeSelection(t=0,e){this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}async startOfflineRender(t,e){if(this.isRendering)return;this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);const s=[];this.ee.emit("audiorenderingstarting",this.offlineAudioContext,s);const i=this.offlineAudioContext.currentTime,r=this.offlineAudioContext.createGain();this.tracks.forEach((t,s)=>{let n=this.shouldTrackPlay(t);e>=0&&(n=s===e);const a=new Q(this.offlineAudioContext,t.buffer,r);a.setEffects(t.effectsGraph),a.setMasterEffects(this.effectsGraph),t.setOfflinePlayout(a),t.schedulePlay(i,0,0,{shouldPlay:n,masterGain:1,isOffline:!0})}),await Promise.all(s);let n=await this.offlineAudioContext.startRendering();"buffer"===t?(this.ee.emit("audiorenderingfinished",t,n),this.isRendering=!1):"wav"===t&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),this.exportWorker.onmessage=(s=>{this.ee.emit("audiorenderingfinished",t,s.data,e),this.isRendering=!1,this.exportWorker.postMessage({command:"clear"})}),this.exportWorker.postMessage({command:"record",buffer:[n.getChannelData(0),n.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}getTimeSelection(){return this.timeSelection}setState(t){this.state=t,this.tracks.forEach(e=>{e.setState(t)})}getState(){return this.state}setZoomIndex(t){this.zoomIndex=t}setZoomLevels(t){this.zoomLevels=t}setZoom(t){this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach(e=>{e.calculatePeaks(t,this.sampleRate)})}muteTrack(t){const e=this.mutedTracks.indexOf(t);e>-1?(t.muted=!1,this.mutedTracks.splice(e,1)):(t.muted=!0,this.mutedTracks.push(t))}soloTrack(t){const e=this.soloedTracks.indexOf(t);e>-1?(t.soloed=!1,this.soloedTracks.splice(e,1)):this.exclSolo?(t.soloed=!0,this.soloedTracks=[t]):(t.soloed=!0,this.soloedTracks.push(t))}collapseTrack(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{const e=this.collapsedTracks.indexOf(t);e>-1&&this.collapsedTracks.splice(e,1)}}removeTrack(t){t.isPlaying()&&t.scheduleStop(),[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks].forEach(e=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)})}adjustTrackPlayout(){this.tracks.forEach(t=>{t.setShouldPlay(this.shouldTrackPlay(t))})}adjustDuration(){this.duration=this.tracks.reduce((t,e)=>Math.max(t,e.getEndTime()),0)}shouldTrackPlay(t){let e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}isPlaying(){return this.tracks.reduce((t,e)=>t||e.isPlaying(),!1)}getCurrentTime(){return(this.lastSeeked||this.pausedAt||this.cursor)+this.getElapsedTime()}getElapsedTime(){return this.ac.currentTime-this.lastPlay}setMasterGain(t){this.ee.emit("mastervolumechange",t)}restartPlayFrom(t,e){return this.stopAnimation(),this.tracks.forEach(t=>{t.scheduleStop()}),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}play(t,e){clearTimeout(this.resetDrawTimer);const s=this.ac.currentTime,i=this.getTimeSelection(),r=[],n=t||this.pausedAt||this.cursor;let a=e;return!a&&i.end!==i.start&&i.end>n&&(a=i.end),this.isPlaying()?this.restartPlayFrom(n,a):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach(t=>{t.setState("cursor"),r.push(t.schedulePlay(s,n,a,{shouldPlay:this.shouldTrackPlay(t),masterGain:this.masterGain}))}),this.lastPlay=s,this.playoutPromises=r,this.startAnimation(n),Promise.all(this.playoutPromises))}pause(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}stop(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}playbackReset(){return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach(t=>{t.scheduleStop(),t.setState(this.getState())}),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}rewind(){return this.stop().then(()=>{this.scrollLeft=0,this.ee.emit("select",0,0)})}fastForward(){return this.stop().then(()=>{this.viewDuration<this.duration?this.scrollLeft=this.duration-this.viewDuration:this.scrollLeft=0,this.ee.emit("select",this.duration,this.duration)})}clear(t){return this.stop().then(()=>{var e=[];(t||0===t)&&(this.tracks.splice(t,1),e=this.tracks),this.tracks=e,this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.seek(0,0,void 0)})}record(){const t=[];this.mediaRecorder.start(300),this.tracks.forEach(e=>{e.setState("none"),t.push(e.schedulePlay(this.ac.currentTime,0,void 0,{shouldPlay:this.shouldTrackPlay(e)}))}),this.playoutPromises=t}startAnimation(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame(()=>{this.updateEditor(t)})}stopAnimation(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}seek(t,e,s){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(s||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}updateEditor(t){const e=this.ac.currentTime,s=this.getTimeSelection(),i=t||this.cursor,r=e-this.lastDraw;if(this.isPlaying()){const t=i+r;this.ee.emit("timeupdate",t),this.animationRequest=window.requestAnimationFrame(()=>{this.updateEditor(t)}),this.playbackSeconds=t,this.draw(this.render()),this.lastDraw=e}else i+r>=(this.isSegmentSelection()?s.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout(()=>{this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState()),this.playbackSeconds=0,this.draw(this.render())},0)}drawRequest(){window.requestAnimationFrame(()=>{this.draw(this.render())})}draw(t){const e=u()(this.tree,t);this.rootNode=p()(this.rootNode,e),this.tree=t,this.viewDuration=g(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}getTrackRenderData(t={}){const s={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap};return e()({},t,s)}isActiveTrack(t){const e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}renderAnnotations(){return this.annotationList.render()}renderTimeScale(){const t=this.controls.show?this.controls.width:0;return new _(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors).render()}renderTrackSection(){const t=this.tracks.map(t=>{const e=this.collapsedTracks.indexOf(t)>-1;return t.render(this.getTrackRenderData({isActive:this.isActiveTrack(t),shouldPlay:this.shouldTrackPlay(t),soloed:this.soloedTracks.indexOf(t)>-1,muted:this.mutedTracks.indexOf(t)>-1,collapsed:e,height:e?this.collapsedWaveHeight:this.waveHeight,barGap:this.barGap,barWidth:this.barWidth}))});return c()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:t=>{this.scrollLeft=g(t.target.scrollLeft,this.samplesPerPixel,this.sampleRate),this.ee.emit("scroll")},hook:new S(this)},t)}render(){const t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),this.annotationList.length&&t.push(this.renderAnnotations()),c()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}getInfo(){const t=[];return this.tracks.forEach(e=>{t.push(e.getTrackDetails())}),{tracks:t,effects:this.effectsGraph}}};function ot(t={},s=o()()){if(void 0===t.container)throw new Error("DOM element container must be given.");const i=e()({},t,{samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1}),r=i.zoomLevels.indexOf(i.samplesPerPixel);if(-1===r)throw new Error("initial samplesPerPixel must be included in array zoomLevels");const a=new at,l=i.ac||new AudioContext;a.setAudioContext(l),a.setSampleRate(i.sampleRate||l.sampleRate),a.setSamplesPerPixel(i.samplesPerPixel),a.setEventEmitter(s),a.setUpEventEmitter(),a.setTimeSelection(0,0),a.setState(i.state),a.setControlOptions(i.controls),a.setWaveHeight(i.waveHeight),a.setCollapsedWaveHeight(i.collapsedWaveHeight),a.setColors(i.colors),a.setZoomLevels(i.zoomLevels),a.setZoomIndex(r),a.setMono(i.mono),a.setExclSolo(i.exclSolo),a.setShowTimeScale(i.timescale),a.setSeekStyle(i.seekStyle),a.setAnnotations(i.annotationList),a.setBarGap(i.barGap),a.setBarWidth(i.barWidth),a.isAutomaticScroll=i.isAutomaticScroll,a.isContinuousPlay=i.isContinuousPlay,a.linkedEndpoints=i.linkedEndpoints,i.effects&&a.setEffects(i.effects);const c=a.render(),h=n()(c);return i.container.appendChild(h),a.tree=c,a.rootNode=h,a}})(),i})()});
},{"process":"pBGv","buffer":"dskh"}],"IbJU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=void 0;var e=require("./composition");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)}function a(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u=function(){function r(){t(this,r)}return i(r,[{key:"init",value:function(){var r,t={audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=function(t){r=t,e.playlist.initRecorder(r),$(".btn-record").removeClass("disabled")},i=function(e){console.error(e)};navigator.mediaDevices?navigator.mediaDevices.getUserMedia(t).then(o).catch(i):navigator.getUserMedia&&"MediaRecorder"in window&&navigator.getUserMedia(t,o,i)}}]),r}();exports.Recorder=u;
},{"./composition":"sRHk"}],"goMX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.latencyMeasurer=void 0;var e=require("./testlatency");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}function i(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){var s=n(e,"string");return"symbol"===t(s)?s:String(s)}function n(e,s){if("object"!==t(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,s||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}var h={measure_average_loudness_for_1_sec:0,playing_and_listening:1,waiting:2,passthrough:3,idle:4};function u(e,t,s){for(var a=0,i=0;i<s;i++)a+=Math.abs(e[i])+Math.abs(t[i]);return a}var l=function(){function t(){s(this,t),this.measurementState=this.nextMeasurementState=h.idle,this.samplesElapsed=this.sineWave=this.sum=this.threshold=this.state=this.samplerate=this.latencyMs=this.buffersize=0,this.roundTripLatencyMs=new Array(e.NUMBER_TRIALS).fill(0)}return i(t,[{key:"toggle",value:function(){-1==this.state||this.state>0&&this.state<11?(this.state=0,this.nextMeasurementState=h.idle):(this.state=1,this.samplerate=this.latencyMs=this.buffersize=0,this.nextMeasurementState=h.measure_average_loudness_for_1_sec)}},{key:"processInput",value:function(t,s,a,i){switch(this.rampdec=-1,this.samplerate=a,this.buffersize=i,this.nextMeasurementState!=this.measurementState&&(this.nextMeasurementState==h.measure_average_loudness_for_1_sec&&(this.samplesElapsed=0),this.measurementState=this.nextMeasurementState),this.measurementState){case h.measure_average_loudness_for_1_sec:if(this.sum+=u(t,s,i),this.samplesElapsed+=i,this.samplesElapsed>=this.samplerate){var r=this.sum/(this.samplesElapsed>>1),n=20*Math.log10(r)+24;this.threshold=Math.pow(10,n/20),this.measurementState=this.nextMeasurementState=h.playing_and_listening,this.sineWave=0,this.samplesElapsed=0,this.sum=0}break;case h.playing_and_listening:var l=u(t,s,i)/i;if(this.rampdec=0,l>this.threshold){for(var o=0,m=0;o<i&&!(t[m]>this.threshold)&&!(s[m++]>this.threshold);)o++;if(this.samplesElapsed+=o,this.samplesElapsed>i){this.roundTripLatencyMs[this.state-1]=1e3*this.samplesElapsed/this.samplerate;var p=0,c=1e5;for(o=0;o<this.state;o++)this.roundTripLatencyMs[o]>p&&(p=this.roundTripLatencyMs[o]),this.roundTripLatencyMs[o]<c&&(c=this.roundTripLatencyMs[o]),this.sum+=this.roundTripLatencyMs[o];p/c>2?(this.latencyMs=0,this.state=e.NUMBER_TRIALS,this.measurementState=this.nextMeasurementState=h.idle):this.state==e.NUMBER_TRIALS?(this.latencyMs=parseInt(.1*this.sum),this.measurementState=this.nextMeasurementState=h.idle):(this.latencyMs=parseInt(this.roundTripLatencyMs[this.state-1]),this.measurementState=this.nextMeasurementState=h.waiting),this.state++}else this.measurementState=this.nextMeasurementState=h.waiting;this.rampdec=1/i}else this.samplesElapsed+=i,this.samplesElapsed>this.samplerate&&(this.rampdec=1/i,this.measurementState=this.nextMeasurementState=h.waiting,this.latencyMs=-1);break;case h.passthrough:case h.idle:break;default:this.samplesElapsed+=i,this.sum=0,this.samplesElapsed>this.samplerate&&(this.samplesElapsed=0,this.measurementState=this.nextMeasurementState=h.measure_average_loudness_for_1_sec)}}},{key:"processOutput",value:function(e,t){if(this.measurementState!=h.passthrough)if(this.rampdec<0)for(var s=2*this.buffersize,a=0;s--;)e[a]=t[a++]=0;else for(var i=1,r=2*Math.PI*1e3/this.samplerate,n=this.buffersize,u=0;n--;)e[u]=t[u++]=Math.sin(r*this.sineWave)*i,i-=this.rampdec,this.sineWave+=1}}]),t}();exports.latencyMeasurer=l;
},{"./testlatency":"ylGr"}],"ylGr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warningMessageBeforeRecord=exports.TestLatency=exports.NUMBER_TRIALS=void 0;var t=require("./latencyMeasurer.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var n=c(t,"string");return"symbol"===e(n)?n:String(n)}function c(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,n||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}var d=3;exports.NUMBER_TRIALS=d;var y="Do you want to test the latency first?";exports.warningMessageBeforeRecord=y;var f="Please Make sure you are in a quiet place (so the browser can hear itself). Set both input and output audio volume to near maximum. This may be LOUD. Note: not all browsers on all devices will allow the browser permission to the speakers and microphone. If they don't, the test will not function.",p=function(){function e(){r(this,e),l(this,"currentlatency",null)}return u(e,null,[{key:"setCurrentLatency",value:function(t){localStorage.setItem("latency",t),e.currentlatency=t}},{key:"getCurrentLatency",value:function(){return e.currentlatency}},{key:"initialize",value:function(t){var n=localStorage.getItem("latency");e.currentlatency=n?parseInt(n):null,e.audioContext=e.audioNode=null,e.content=document.getElementById("testlatency");var o="function"==typeof AudioWorkletNode?1:0;e.data={buffersize:o?128:512,samplerate:"?",audioWorklet:o},e.runningon="?",e.displayStart()}},{key:"displayStart",value:function(){null!=e.audioContext&&e.audioContext.close(),e.audioContext=e.audioNode=null,e.content.innerHTML="",e.startbutton=document.createElement("a"),e.startbutton.innerText="TEST LATENCY",e.startbutton.classList.add("btn-outline-success"),e.startbutton.onclick=e.start,e.content.appendChild(e.startbutton)}},{key:"onAudioInputPermissionDenied",value:function(t){console.log(t)}},{key:"onMessageFromAudioScope",value:function(t){var n=null;t.latencyMs<0?(n="The environment is too loud! Please try it again in a quieter environment.",e.displayResult(n)):t.state==d&&(t.latency<1?(n="The variance is too big. Please try it again in a quieter environment.",e.displayResult(n)):(e.data.ms=t.latency,n="Result: "+t.latency+" ms",e.setCurrentLatency(t.latency),e.displayResult(n)))}},{key:"onAudioSetupFinished",value:function(){e.audioContext.createMediaStreamSource(e.inputStream).connect(e.audioNode),e.audioNode.connect(e.audioContext.destination),e.startbutton.innerText="CANCEL",e.startbutton.classList.remove("btn-outline-success"),e.startbutton.classList.add("btn-outline-danger"),e.startbutton.onclick=e.displayStart}},{key:"displayResult",value:function(t){null!=e.audioContext&&e.audioContext.close(),e.audioContext=e.audioNode=null,e.startbutton.innerText="TEST AGAIN",e.startbutton.classList.remove("btn-outline-danger"),e.startbutton.classList.add("btn-outline-primary"),e.startbutton.onclick=e.displayStart,alert(t)}},{key:"onAudioPermissionGranted",value:function(o){e.inputStream=o;var a,r=n(o.getAudioTracks());try{for(r.s();!(a=r.n()).done;){a.value.applyConstraints({autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1})}}catch(i){r.e(i)}finally{r.f()}e.latencyMeasurer=new t.latencyMeasurer,e.latencyMeasurer.toggle(),e.lastState=0,e.audioNode=e.audioContext.createScriptProcessor(256,2,2),e.audioNode.onaudioprocess=function(t){e.latencyMeasurer.processInput(t.inputBuffer.getChannelData(0),t.inputBuffer.getChannelData(1),e.data.samplerate,t.inputBuffer.length),e.latencyMeasurer.processOutput(t.outputBuffer.getChannelData(0),t.outputBuffer.getChannelData(1)),e.lastState!=e.latencyMeasurer.state&&(e.lastState=e.latencyMeasurer.state,e.onMessageFromAudioScope({state:e.lastState,latency:e.latencyMeasurer.latencyMs}))},e.onAudioSetupFinished()}},{key:"start",value:function(t){if(e.getCurrentLatency()||window.confirm("".concat(f))){var n=window.AudioContext||window.webkitAudioContext||!1;e.audioContext=new n({latencyHint:0}),e.data.samplerate=e.audioContext.sampleRate;navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({echoCancellation:!1,disableLocalEcho:!1,autoGainControl:!1,audio:{mandatory:{googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googEchoCancellation2:!1,googNoiseSuppression2:!1,googDAEchoCancellation:!1,googNoiseReduction:!1}},video:!1}).then(e.onAudioPermissionGranted).catch(e.onAudioInputPermissionDenied):e.onAudioInputPermissionDenied("Can't access getUserMedia.")}}}]),e}();exports.TestLatency=p;
},{"./latencyMeasurer.js":"goMX"}],"sRHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackHandler=exports.setUserPermission=exports.recorder=exports.playlist=exports.fileUploader=exports.USER_PERMISSION=exports.USER_INFO=exports.COMPOSITION_ID=void 0;var e=require("./track_handler"),o=require("./fileuploader"),r=s(require("waveform-playlist")),t=require("./composition_helper"),a=require("./record"),i=require("./latencymeasure/testlatency");function s(e){return e&&e.__esModule?e:{default:e}}var l=window.location.search,n=l.split("compositionId=")[1];exports.COMPOSITION_ID=n;var c=document.getElementById("goHome");"localhost:80"===window.location.host||"http://localhost"===window.location.origin?c.href=window.location.origin+"/index.html":c.href=window.location.origin;var d=null;exports.USER_INFO=d;var p=!1;exports.USER_PERMISSION=p;var u=function(e){exports.USER_PERMISSION=p=e};exports.setUserPermission=u;var m=(0,r.default)({samplesPerPixel:3e3,waveHeight:100,container:document.getElementById("playlist"),state:"cursor",colors:{waveOutlineColor:"#E0EFF1",timeColor:"grey",fadeColor:"black"},controls:{show:!0,width:200,widgets:{stereoPan:!0,collapse:!1,remove:!0}},zoomLevels:[500,1e3,3e3,5e3],isAutomaticScroll:!0,timescale:!0});exports.playlist=m;var v=new e.TrackHandler;exports.trackHandler=v;var w=new o.FileUploader(n,v);exports.fileUploader=w;var x=new a.Recorder;exports.recorder=x;var I=n,f=function(){document.getElementById("useroptions").innerHTML='<li class="nav-item">\n  <a class="nav-link" href="#" id="testlatency" data-toggle="modal">Test Latency</a>\n</li>\n '};f(),i.TestLatency.initialize(),"demopage"===I&&alert("WARNING: Be careful, the music you record or upload won't be saved, as you are not a registered user and this is only a test feature!"),(0,t.getComposition)(I,t.doAfterCompositionFetched);
},{"./track_handler":"OPvr","./fileuploader":"BTjY","waveform-playlist":"IdKr","./composition_helper":"lSuH","./record":"IbJU","./latencymeasure/testlatency":"ylGr"}],"cCx7":[function(require,module,exports) {
"use strict";var n,t=require("../../js/indexedDB"),e=require("./composition"),o=require("./latencymeasure/testlatency"),i=e.playlist.getEventEmitter(),a=$("body"),c=a.find(".time-format"),r=a.find(".audio-start"),s=a.find(".audio-end"),l=a.find(".audio-pos"),u="hh:mm:ss.uuu",d=0,f=0,m=0,h=void 0,p=!1,g=!1;function v(n){for(var t=n.parentNode.querySelectorAll(".active"),e=0,o=t.length;e<o;e++)t[e].classList.remove("active");n.classList.toggle("active")}function k(n){function t(n,t){var e,o,i;return((e=parseInt(n/3600,10)%24)<10?"0"+e:e)+":"+((o=parseInt(n/60,10)%60)<10?"0"+o:o)+":"+((i=(i=n%60).toFixed(t))<10?"0"+i:i)}return{seconds:function(n){return n.toFixed(0)},thousandths:function(n){return n.toFixed(3)},"hh:mm:ss":function(n){return t(n,0)},"hh:mm:ss.u":function(n){return t(n,1)},"hh:mm:ss.uu":function(n){return t(n,2)},"hh:mm:ss.uuu":function(n){return t(n,3)}}[n]}function b(n,t){n<t?($(".btn-trim-audio").removeClass("disabled"),$(".btn-loop").removeClass("disabled")):($(".btn-trim-audio").addClass("disabled"),$(".btn-loop").addClass("disabled")),r.val(k(u)(n)),s.val(k(u)(t)),d=n,f=t}function w(n){l.html(k(u)(n)),m=n}function y(n,e){if(null!=e&&e.customClass){var o={muted:(i=e).muted,gain:i.gain,soloed:i.soloed,stereoPan:i.stereoPan};o.track_id=e.customClass.track_id,o.composition_id=e.customClass.composition_id,t.DB?(0,t.updateTable)(t.DB,o):(0,t.openDB)().then(function(n){(0,t.updateTable)(n,o)})}var i;$(".sound-status").html(n)}function S(n){var t=$("<div/>").append(n);$(".loading-data").append(t)}function I(n){var t=(new Date).toISOString(),e=$("<a/>",{href:n,download:"waveformplaylist"+t+".wav",text:"Download mix "+t,class:"btn btn-small btn-download-link"});$(".btn-download-link").remove(),$(".btn-download").after(e)}b(d,f),w(m),a.on("click",".btn-annotations-download",function(){i.emit("annotationsrequest")}),a.on("click",".btn-loop",function(){p=!0,n=e.playlist.play(d,f)}),a.on("click",".btn-play",function(){i.emit("play")}),a.on("click",".btn-pause",function(){p=!1,i.emit("pause")}),a.on("click",".btn-stop",function(){if(p=!1,g&&(g=!1,e.USER_PERMISSION)){var n=e.playlist.getInfo().tracks.length-1;i.emit("startaudiorendering","wav",n)}i.emit("stop")}),a.on("click",".btn-rewind",function(){p=!1,i.emit("rewind")}),a.on("click",".btn-fast-forward",function(){p=!1,i.emit("fastforward")}),a.on("click",".btn-clear",function(){p=!1,i.emit("clear")}),a.on("click",".btn-record",function(){if((o.TestLatency.getCurrentLatency()||!window.confirm("".concat(o.warningMessageBeforeRecord)))&&!g){g=!0;var n=o.TestLatency.getCurrentLatency()/1e3;i.emit("record",n)}}),a.on("click",".btn-cursor",function(){i.emit("statechange","cursor"),v(this)}),a.on("click",".btn-select",function(){i.emit("statechange","select"),v(this)}),a.on("click",".btn-shift",function(){i.emit("statechange","shift"),v(this)}),a.on("click",".btn-fadein",function(){i.emit("statechange","fadein"),v(this)}),a.on("click",".btn-fadeout",function(){i.emit("statechange","fadeout"),v(this)}),a.on("click",".btn-logarithmic",function(){i.emit("fadetype","logarithmic"),v(this)}),a.on("click",".btn-linear",function(){i.emit("fadetype","linear"),v(this)}),a.on("click",".btn-scurve",function(){i.emit("fadetype","sCurve"),v(this)}),a.on("click",".btn-exponential",function(){i.emit("fadetype","exponential"),v(this)}),a.on("click",".btn-zoom-in",function(){i.emit("zoomin")}),a.on("click",".btn-zoom-out",function(){i.emit("zoomout")}),a.on("click",".btn-trim-audio",function(){i.emit("trim")}),a.on("click",".btn.print",function(){console.log(e.playlist.getInfo())}),a.on("click",".btn-download",function(){i.emit("startaudiorendering","wav")}),a.on("click",".btn-seektotime",function(){var n=parseInt(document.getElementById("seektime").value,10);i.emit("select",n,n)}),a.on("change",".select-seek-style",function(n){e.playlist.setSeekStyle(n.target.value)}),a.on("change","#fileInput",function(n){for(var t=this.files,e=0;e<t.length;e++)i.emit("newtrack",t[e])}),a.on("dragenter",".track-drop",function(n){n.preventDefault(),n.target.classList.add("drag-enter")}),a.on("dragover",".track-drop",function(n){n.preventDefault()}),a.on("dragleave",".track-drop",function(n){n.preventDefault(),n.target.classList.remove("drag-enter")}),a.on("drop",".track-drop",function(n){n.preventDefault(),n.target.classList.remove("drag-enter");for(var t=n.originalEvent,e=0;e<t.dataTransfer.files.length;e++)i.emit("newtrack",t.dataTransfer.files[e])}),a.on("change",".time-format",function(n){u=c.val(),i.emit("durationformat",u),b(d,f),w(m)}),a.on("input change",".master-gain",function(n){i.emit("mastervolumechange",n.target.value)}),a.on("change",".continuous-play",function(n){i.emit("continuousplay",$(n.target).is(":checked"))}),a.on("change",".link-endpoints",function(n){i.emit("linkendpoints",$(n.target).is(":checked"))}),a.on("change",".automatic-scroll",function(n){i.emit("automaticscroll",$(n.target).is(":checked"))}),i.on("select",b),i.on("timeupdate",w),i.on("mute",function(n){y("Mute button pressed for "+n.name,n)}),i.on("solo",function(n){y("Solo button pressed for "+n.name,n)}),i.on("volumechange",function(n,t){y(t.name+" now has volume "+n+".")}),i.on("stereopan",function(n,t){y(t.name+" now has stereo pan "+n+".")}),i.on("mastervolumechange",function(n){y("Master volume now has volume "+n+".")});var L=["uninitialized","loading","decoding","finished"];i.on("audiorequeststatechange",function(n,t){var e=t;t instanceof File&&(e=t.name),S("Track "+e+" is in state "+L[n])}),i.on("loadprogress",function(n,t){var e=t;t instanceof File&&(e=t.name),S("Track "+e+" has loaded "+n+"%")}),i.on("audiosourcesloaded",function(){S("Tracks have all finished decoding.")});var T=null;i.on("audiosourcesrendered",function(n){if(e.USER_PERMISSION)if(n){T=n;var t=e.playlist.tracks.length-1,o=e.playlist.tracks[t];!o||null!=o&&o.customClass||(T=null,e.trackHandler.displayOptMenuForNewTrack(n))}else if(T){var i=T;T=null,e.trackHandler.displayOptMenuForNewTrack(i)}S("Tracks have been rendered")}),i.on("audiosourceserror",function(n){S(n.message)}),i.on("audiorenderingfinished",function(n,t,o){o>=0&&e.USER_PERMISSION?(t.name="audio",t.fileName=Date.now()+".wav",e.fileUploader.sendData(t,"blob")):"wav"==n&&(h&&window.URL.revokeObjectURL(h),I(h=window.URL.createObjectURL(t)))}),i.on("finished",function(){console.log("The cursor has reached the end of the selection !"),p&&n.then(function(){n=e.playlist.play(d,f)})});
},{"../../js/indexedDB":"FZtw","./composition":"sRHk","./latencymeasure/testlatency":"ylGr"}]},{},["cCx7"], null)
//# sourceMappingURL=eventemitter.bacff38c.js.map