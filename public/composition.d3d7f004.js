var e=globalThis,t={},i={},a=e.parcelRequire1e7e;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in i){var a=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},e.parcelRequire1e7e=a),(0,a.register)("04BFj",function(e,t){Object.defineProperty(e.exports,"TestMic",{get:()=>n,set:void 0,enumerable:!0,configurable:!0});let i=document.getElementById("gainSliderTestMic"),a=document.getElementById("volume-indicator");class n{constructor(){this.CURRENT_GAIN_TEST_MIC=1,this.audioCtxTestMic=null,this.analyser=null,this.recordGainNode=null}init(e,t){this.recordGainNode=e,this.audioCtxTestMic=t,this.getUserMediaOnSuccess()}getUserMediaOnSuccess(){let e=localStorage.getItem("micgain");this.CURRENT_GAIN_TEST_MIC=e?parseInt(e):this.CURRENT_GAIN_TEST_MIC,this.analyser=this.audioCtxTestMic.createAnalyser(),this.recordGainNode.connect(this.analyser),this.drawVolumeter(),this.uiHandlers()}drawWaveForm(){let e=this,t=this.analyser.frequencyBinCount,i=new Uint8Array(t);this.analyser.getByteTimeDomainData(i),setCanvasData(t,i),requestAnimationFrame(()=>{e.drawWaveForm()})}drawVolumeter(){let e=this,t=this.getPeakLevel();a.style.width=`${100*t}%`,requestAnimationFrame(()=>{e.drawVolumeter()})}getPeakLevel(){let e=new Uint8Array(this.analyser.fftSize);return this.analyser.getByteTimeDomainData(e),e.reduce((e,t)=>Math.max(e,Math.abs(t-127)),0)/128}async connectSource(){this.analyser.connect(this.audioCtxTestMic.destination)}disconnectSource(){this.analyser.disconnect()}uiHandlers(){let e=this;$("#testMicrophoneModal").on("show.bs.modal",t=>{i.value=e.CURRENT_GAIN_TEST_MIC,document.getElementById("current-input-gain-test-mic").value=e.CURRENT_GAIN_TEST_MIC}),$("#testMicrophoneModal").on("hide.bs.modal",async t=>{e.analyser.disconnect()}),i.addEventListener("input",function(){let t=parseFloat(this.value);e.CURRENT_GAIN_TEST_MIC=t,e.recordGainNode.gain.value=t,localStorage.setItem("micgain",t),document.getElementById("current-input-gain-test-mic").value=t})}}}),a("04BFj");
//# sourceMappingURL=composition.d3d7f004.js.map
